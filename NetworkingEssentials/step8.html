<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
</style>
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section epub:type="chapter">
        <div class="chap">
        <h2 class="h2" id="ch8"><span epub:type="pagebreak" id="page_404"></span><span class="big">8</span><br>CHAPTER</h2>
        </div>
        <div class="chap1">
        <h2 class="h2a">Introduction to Switch Configuration</h2>
        </div>
        <div class="chap-out">
        <p class="chap-out-t" id="ch8-chap-out"><span epub:type="pagebreak" id="page_405"></span>Chapter Outline</p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec1">8-1 Introduction</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec2">8-2 Introduction to VLANs</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec3">8-3 Introduction to Switch Configuration</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec5">8-4 Spanning Tree Protocol</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec6">8-5 Power over Ethernet</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec7">8-6 Troubleshooting the Switch Interface</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec8">Summary</a></p>
        <p class="chap-lev"><a href="ch08.xhtml#ch8lev1sec9">Questions and Problems</a></p>
        <p class="chap-out-t" id="ch8-chap-obj">Objectives</p>
        <ul class="bullet">
        <li><p class="chap-obj">Be able to identify and describe the three types of VLANs</p></li>
        <li><p class="chap-obj">Discuss two ways of establishing VLAN membership</p></li>
        <li><p class="chap-obj">Understand how to use commands to configure a network switch</p></li>
        <li><p class="chap-obj">Be able to explain the steps for configuring a static VLAN</p></li>
        <li><p class="chap-obj">Explain the purpose of Spanning Tree Protocol</p></li>
        <li><p class="chap-obj">Discuss the purpose of the five Spanning Tree Protocol states</p></li>
        <li><p class="chap-obj">Discuss the advantages of using Power over Ethernet</p></li>
        <li><p class="chap-obj">Understand best practices for managing switch security</p></li>
        </ul>
        <p class="chap-out-t" id="ch8-chap-key">Key Terms</p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key1">VLAN (virtual LAN)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key2">port-based VLAN</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key3">tag-based VLAN</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key4">protocol-based VLAN</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key5">static VLAN</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key6">dynamic VLAN</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key7"><strong>configure terminal</strong> (<strong>conf t</strong>)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key8"><strong>switch#</strong></a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key9"><strong>Switch(config)#</strong></a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key10"><strong>Switch(config-line)#</strong></a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key11">Spanning Tree Protocol (STP)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key12">bridge protocol data unit (BPDU)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key13">configuration BPDU</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key14">topology change notification (TCN)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key15">topology change notification acknowledgment (TCA)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key16">Power over Ethernet (PoE)</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key17">PD</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key18">PSE</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key19">endpoint PSE</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key20">midspan (midpoint) PSE</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key21">resistive power discovery</a></p>
        <p class="chap-key"><a href="ch08.xhtml#ch8key22">PoE+</a></p>
        </div>
        <section>
        <h3 class="h3" id="ch8lev1sec1"><span epub:type="pagebreak" id="page_406"></span><span class="space">8-1</span> Introduction</h3>
        <p class="noindent">This chapter examines the computer networking issues that arise when configuring a network switch and presents the commands for configuring a network switch. <a href="ch08.xhtml#ch8lev1sec2">Section 8-2</a>, “<a href="ch08.xhtml#ch8lev1sec2">Introduction to VLANs</a>,” provides an introduction to virtual local area networks (VLANs). The section begins with an overview of the three types of VLANs followed by a discussion of the two ways to establish VLAN membership. <a href="ch08.xhtml#ch8lev1sec3">Section 8-3</a>, “<a href="ch08.xhtml#ch8lev1sec3">Introduction to Switch Configuration</a>,” describes the basics of configuring a Cisco switch and describes how to configure a static VLAN. <a href="ch08.xhtml#ch8lev1sec4">Section 8-4</a>, “<a href="ch08.xhtml#ch8lev1sec4">Spanning Tree Protocol</a>,” examines Spanning Tree Protocol (STP), which is a link management protocol that prevents looping and also controls data flow over possible redundant data paths. <a href="ch08.xhtml#ch8lev1sec5">Section 8-5</a>, “<a href="ch08.xhtml#ch8lev1sec5">Power over Ethernet</a>,” provides an overview of Power over Ethernet (PoE) and the benefits of implementing this technology in a network. <a href="ch08.xhtml#ch8lev1sec6">Section 8-6</a>, “<a href="ch08.xhtml#ch8lev1sec6">Troubleshooting the Switch Interface</a>,” introduces the switch commands <strong>show interface status</strong> and <strong>show mac address-table</strong> (or <strong>show mac-address-table</strong>) for layer 2 switch troubleshooting.</p>
        <p class="noindent"><a href="ch08.xhtml#ch08tab01">Table 8-1</a> outlines the CompTIA Network+ objectives related to this chapter and identifies the chapter section that covers each objective. At the end of each chapter section you will find a review with comments on the Network+ objectives presented in that section. These comments are provided to help reinforce your understanding of each Network+ objective. The chapter review also includes “Test Your Knowledge” questions to help you understand key concepts before you advance to the next section of the chapter. At the end of the chapter you will find a complete set of questions as well as sample certification exam-type questions.</p>
        <figure class="table" id="ch08tab01">
        <figcaption>
        <p class="title-t"><span class="tab_space">TABLE 8-1</span> <strong><a href="ch08.xhtml#ch8">Chapter 8</a> CompTIA Network+ Objectives</strong></p>
        </figcaption>
        <table>
        <thead>
        <tr>
        <th class="borderb"><p class="tab-para">Domain/Objective Number</p></th>
        <th class="borderb"><p class="tab-para">Domain/Objective Description</p></th>
        <th class="borderb"><p class="tab-para">Section Where Objective Is Covered</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td class="borderb"><p class="tab-para"><strong>1.0</strong></p></td>
        <td class="borderb"><p class="tab-para"><strong>Networking Fundamentals</strong></p></td>
        <td class="borderb"></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">1.3</p></td>
        <td class="borderb"><p class="tab-para">Summarize the types of cables and connectors and explain which is the appropriate type for a solution.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec5">8-5</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">1.4</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, configure a subnet and use appropriate IP addressing schemes.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">1.5</p></td>
        <td class="borderb"><p class="tab-para">Explain common ports and protocols, their application, and encrypted alternatives.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec3">8-3</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">1.6</p></td>
        <td class="borderb"><p class="tab-para">Explain the use and purpose of network services.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a>, <a href="ch08.xhtml#ch8lev1sec6">8-6</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">1.7</p></td>
        <td class="borderb"><p class="tab-para">Explain basic corporate and datacenter network architecture.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec6">8-6</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para"><strong>2.0</strong></p></td>
        <td class="borderb"><p class="tab-para"><strong>Network Implementations</strong></p></td>
        <td class="borderb"></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">2.1</p></td>
        <td class="borderb"><p class="tab-para">Compare and contrast various devices, their features, and their appropriate placement on the network.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a>, <a href="ch08.xhtml#ch8lev1sec3">8-3</a>, <a href="ch08.xhtml#ch8lev1sec4">8-4</a>, <a href="ch08.xhtml#ch8lev1sec5">8-5</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">2.3</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, configure and deploy common Ethernet switching features.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a>, <a href="ch08.xhtml#ch8lev1sec3">8-3</a>, <a href="ch08.xhtml#ch8lev1sec4">8-4</a>, <a href="ch08.xhtml#ch8lev1sec5">8-5</a>, <a href="ch08.xhtml#ch8lev1sec6">8-6</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para"><strong>3.0</strong></p></td>
        <td class="borderb"><p class="tab-para"><strong>Network Operations</strong></p></td>
        <td class="borderb"></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">3.1</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, use the appropriate statistics and sensors to ensure network availability.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec5">8-5</a>, <a href="ch08.xhtml#ch8lev1sec6">8-6</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">3.3</p></td>
        <td class="borderb"><p class="tab-para">Explain high availability and disaster recovery concepts and summarize which is the best solution.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec3">8-3</a>, <a href="ch08.xhtml#ch8lev1sec4">8-4</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para"><strong>5.0</strong></p></td>
        <td class="borderb"><p class="tab-para"><strong>Network Troubleshooting</strong></p></td>
        <td class="borderb"></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">5.2</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, troubleshoot common cable connectivity issues and select the appropriate tools.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a>, <a href="ch08.xhtml#ch8lev1sec4">8-4</a>, <a href="ch08.xhtml#ch8lev1sec5">8-5</a>, <a href="ch08.xhtml#ch8lev1sec6">8-6</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">5.3</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, use the appropriate network software tools and commands.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec3">8-3</a></p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">5.5</p></td>
        <td class="borderb"><p class="tab-para">Given a scenario, troubleshoot general networking issues.</p></td>
        <td class="borderb"><p class="tab-para"><a href="ch08.xhtml#ch8lev1sec2">8-2</a>, <a href="ch08.xhtml#ch8lev1sec4">8-4</a></p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        <span epub:type="pagebreak" id="page_407"></span>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec2"><span class="space">8-2</span> Introduction to VLANs</h3>
        <p class="noindent">This section provides an overview of VLANs, which are an important networking concept in modern computer networks. This section discusses port-based, tag-based, and protocol-based VLANs, and it also examines static and dynamic VLANs.</p>
        <section>
        <h4 class="h4" id="ch8lev2sec1">Virtual LANs</h4>
        <div class="box">
        <p class="box-title">VLAN (Virtual LAN)</p>
        <p class="box-para">A group of host computers and servers that are configured as if they are in the same LAN, even if they reside across routers in separate LANs</p>
        </div>
        <p class="noindent">A switch can be configured to work with a <a id="ch8key1" href="glossary.xhtml#glo667"><span class="gray_kt"><strong>VLAN (virtual LAN)</strong></span></a>, which is a group of host computers and servers configured as if they are in the same LAN, even if they reside across routers in separate LANs. The advantage of using VLANs is that a network administrator can group computers and servers in the same VLAN based on the organizational group (for example, Sales, Engineering), geographic location (for example, first floor, second floor), or the network purpose (for example, office network, voice over IP phone network, utility network). This grouping is possible even if the computers and servers are not on the same physical segment or even in the same building.</p>
        <p class="noindent">There are three types of VLANs: port-based VLANs, tag-based VLANs, and protocol-based VLANs.</p>
        <p class="noindent">In a <a id="ch8key2" href="glossary.xhtml#glo467"><span class="gray_kt"><strong>port-based VLAN</strong></span></a>, the host computers connected to specific ports on a switch are assigned to a specific VLAN. For example, say that the computers connected to switch ports 2, 3, and 4 are assigned to the Sales VLAN, VLAN 2, while the computers connected to switch ports 6, 7, and 8 are assigned to the Engineering VLAN, VLAN 3, as shown in <a href="ch08.xhtml#ch08fig01">Figure 8-1</a>. The switch will be configured as a <span epub:type="pagebreak" id="page_408"></span>port-based VLAN so that ports 2, 3, and 4 are assigned to the Sales VLAN, while ports 6, 7, and 8 belong to the Engineering VLAN. The devices assigned to the same VLAN will share broadcasts for that LAN; however, computers that are connected to ports not assigned to the VLAN will not share the broadcasts. For example, the computers in VLAN 2 (Sales) share the same broadcast domain, and computers in VLAN 3 (Engineering) share a different broadcast domain.</p>
        <figure class="image" id="ch08fig01">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780137455911/files/graphics/08fig01.jpg" alt="Figure shows a port based VLAN. Ports 2, 3, and 4 are connected to VLAN2. Ports 6, 7, and 8 are connected to VLAN 3." width="291" height="166">
        <figcaption>
        <p class="title-f"><span class="gray_fig"><strong>FIGURE 8-1</strong></span> An example of grouping for port-based VLANs.</p>
        </figcaption>
        </figure>
        <div class="box">
        <p class="box-title">Port-Based VLAN</p>
        <p class="box-para">A VLAN in which host computers connected to specific ports on a switch are assigned to a specific VLANdQ</p>
        </div>
        <p class="noindent">In <a id="ch8key3" href="glossary.xhtml#glo610"><span class="gray_kt"><strong>tag-based VLANs</strong></span></a>, a tag is added to the Ethernet frames. This tag contains the VLAN ID that is used to indicate that a frame belongs to a specific VLAN. The addition of the VLAN ID is based on the 802.1Q specification. An advantage of an 802.1Q VLAN is that it helps contain broadcast and multicast data traffic, which helps minimize data congestion and improve throughput. This specification also provides guidelines for a switch port to belong to more than one VLAN. In addition, a tag-based VLAN can help provide better security by logically isolating and grouping users.</p>
        <div class="box">
        <p class="box-title">Tag-Based VLAN</p>
        <p class="box-para">A VLAN in which the VLAN ID is based on 802.1</p>
        </div>
        <p class="noindent">In <a id="ch8key4" href="glossary.xhtml#glo479"><span class="gray_kt"><strong>protocol-based VLANs</strong></span></a>, the data traffic is connected to specific ports based on the type of protocol being used. If the protocol doesn’t match any of the VLANs, a packet is dropped when it enters the switch. For example, an IP network could be set up for the Engineering VLAN on ports 6, 7, and 8 and a network for the Sales VLAN on ports 2, 3, and 4. The advantage of this is that the data traffic for the two networks is separated.</p>
        <div class="box">
        <p class="box-title">Protocol-Based VLAN</p>
        <p class="box-para">A VLAN in which connection to ports is based on the protocol being use</p>
        </div>
        <p class="noindent">There are two approaches to assigning VLAN membership:</p>
        <ul class="bullet">
        <li><p class="bullet"><a id="ch8key5" href="glossary.xhtml#glo589"><span class="gray_kt"><strong>Static VLAN</strong></span></a><strong>:</strong> This is basically a port-based VLAN. The assignments are created when ports are assigned to a specific VLAN.</p></li>
        <li><p class="bullet"><a id="ch8key6" href="glossary.xhtml#glo174"><span class="gray_kt"><strong>Dynamic VLAN</strong></span></a><strong>:</strong> Ports are assigned to a VLAN based on either the computer’s MAC address or the username of the client logged on to the computer. This means the system has been previously configured with the VLAN assignments for the computer or the username. The advantage of this is that the username and/or the computer can move to a different location, and VLAN membership is retained.</p></li>
        </ul>
        <div class="box">
        <p class="box-title">Static VLAN</p>
        <p class="box-para">A port-based VLAN, with assignments created when ports are assigned to a specific VLAN</p>
        <p class="box-title">Dynamic VLAN</p>
        <p class="box-para">A VLAN in which ports are assigned based on either the computer’s MAC address or the username of the client logged on to the computer</p>
        </div>
        <p class="noindent">Let’s explore a scenario in which the Sales team and the Engineering team are spread out in two different buildings. Each building has its own network switch, and both switches are connected via one physical link. Therefore, both VLANs must be available in both buildings. In a scenario like this, not only is it necessary to have the same Sales VLAN running on both building switches, it is also important <span epub:type="pagebreak" id="page_409"></span>to have members of the same VLAN able to communicate with each other across buildings and to adhere to the same VLAN restrictions. In order to accomplish this, the very same 802.1Q protocol used in tag-based VLANs can be used for VLAN tagging. <em>VLAN tagging</em> is a technique deployed on a switch interface to carry Ethernet frames of multiple VLANs. The interface must connect to another switch port, router port, or network device that understands VLAN tagging, and both sides must agree on the VLAN tagging protocol. A switch interface or port configured to carry multiple VLANs is often referred to as a <em>trunk port</em>. Frames that are marked with the VLAN tags are routed to the correct VLAN at the other end of the trunk line. The ports between the switch and the customer are considered untagged, which means the Ethernet packets are normal and do not contain any tags. However, a trunk port between the two switches that has tagged packets (tagging) knows which customer VLAN the packet should be delivered to.</p>
        <p class="noindent">Having multiple VLANs and multiple switches on a network can increase administrative overhead in configuring and maintaining the correct VLANs in all the switches on the network. VLAN Trunking Protocol (VTP) is Cisco’s proprietary protocol for managing and propagating the VLAN definitions to all of the VTP-capable switches. With VTP, a new VLAN can be defined on a VTP server, and then the VLAN information gets propagated to every switch on the network.</p>
        <aside class="sidebar" epub:type="sidebar">
        <p class="sidebar-title" id="ch8lev2sec2">Section 8-2 Review</p>
        <p class="s-para">This section covers the following Network+ exam objectives.</p>
        <p class="s-paran">1.4 Given a scenario, configure a subnet and use appropriate IP addressing schemes.</p>
        <p class="s-para"><em>As discussed in this section, an advantage of an 802.1Q VLAN is that it helps contain broadcast and multicast data traffic, which helps minimize data congestion and improve throughput.</em></p>
        <p class="s-paran">1.6 Explain the use and purpose of network services.</p>
        <p class="s-para"><em>A VLAN (virtual LAN) is a group of host computers and servers that are configured as if they are in the same LAN even if they reside across routers in separate LANs.</em></p>
        <p class="s-paran">2.3 Given a scenario, configure and deploy common Ethernet switching features.</p>
        <p class="s-para"><em>This section introduces port-based, tag-based, and protocol-based VLANs. It also discusses the VLAN ID, which is based on the 802.1Q specification. In a tag-based VLAN, a tag containing the VLAN ID is added to the Ethernet frame.</em></p>
        <p class="s-paran">5.2 Given a scenario, troubleshoot common cable connectivity issues and select the appropriate tools.</p>
        <p class="s-para"><em>An advantage of an 802.1Q VLAN is that helps contain broadcast and multicast data traffic, which helps minimize data congestion and improve throughput. This specification also provides guidelines for a switch port to belong to more than one VLAN. In addition, a tag-based VLAN can help provide better security by logically isolating and grouping users.</em></p>
        <p class="s-paran"><span epub:type="pagebreak" id="page_410"></span>5.5 Given a scenario, troubleshoot general networking issues.</p>
        <p class="s-para"><em>This section discusses dynamic VLANs, in which ports are assigned to a VLAN based on either the computer’s MAC address or the username of the client logged on to the computer. This means the system has been previously configured with the VLAN assignments for the computer or the username. The advantage of this is that the username and/or the computer can move to a different location, and VLAN membership is retained.</em></p>
        <p class="sidebar-title1" id="ch8lev2sec3">Test Your Knowledge</p>
        <ol class="number">
        <li><p class="num">What are the three types of VLANs? (Select three.)</p>
        <ol class="lower-alpha">
        <li><p class="alpha">Port-based VLAN</p></li>
        <li><p class="alpha">Tag-based VLAN</p></li>
        <li><p class="alpha">Pd-based VLAN</p></li>
        <li><p class="alpha">Protocol-based VLAN</p></li>
        <li><p class="alpha">Label-based VLAN</p></li>
        <li><p class="alpha">Routing-based VLAN</p></li>
        </ol></li>
        <li><p class="num">A static VLAN is basically which of the following?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">Seldom used</p></li>
        <li><p class="alpha">A MAC VLAN</p></li>
        <li><p class="alpha">A port-based VLAN</p></li>
        <li><p class="alpha">None of these answers are correct.</p></li>
        </ol></li>
        </ol>
        </aside>
        </section>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec3"><span class="space">8-3</span> Introduction to Switch Configuration</h3>
        <p class="noindent">This section examines the basics of configuring a Cisco switch. The commands for switch configuration are similar to those for router configuration. To configure a switch, you must first establish a console connection and enter privileged mode on the switch. The procedure for establishing a console connection to a switch is the same as for a router. (Refer to <a href="ch05.xhtml#ch5lev1sec5">Section 5-5</a>, “<a href="ch05.xhtml#ch5lev1sec5">The Console Port Connection</a>,” for the steps for establishing a console connection.) The privileged EXEC mode (also called the enable mode) allows full access for configuring the switch ports and establishing a VLAN. This section focuses on general configuration steps for a switch and examines MAC address information and IP address configuration of VLANs.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_411"></span>You enter privileged mode by using the command <strong>enable</strong> at the <strong>Switch&gt;</strong> prompt, as shown here:</p>
        <pre class="pre1">Switch&gt; <strong>enable</strong>
        Password:
        Switch#
        </pre>
        <p class="noindent">The <strong>#</strong> sign after the switch name indicates that you are in privileged EXEC mode.</p>
        <p class="noindent">Entry into the switch’s privileged mode is typically password protected. The exception to this is when a switch has not been configured and a password has not been assigned to it. In this case, pressing <strong>Enter</strong> on the keyboard at the <strong>Switch&gt;</strong> prompt promotes the user to privileged mode (<strong>Switch#</strong>) without requiring a password.</p>
        <div class="note">
        <p class="note-t">Note</p>
        <p class="note-para">It is important to use caution after entering privileged mode on a switch. It is easy to make mistakes, and incorrectly entered switch configurations adversely affect the network. This text comes with the Net-Challenge software, which you can download from the textbook companion website to help you gain experience with switch configuration. (See the Introduction for information on how to access this site.) In fact, most of the switch configuration commands presented in this section can be implemented in the Net-Challenge switch simulator.</p>
        </div>
        <section>
        <h4 class="h4" id="ch8lev2sec4">Hostname</h4>
        <div class="box">
        <p class="box-title">configure terminal (conf t)</p>
        <p class="box-para">A command to enter a switch’s terminal configuration mode</p>
        </div>
        <p class="noindent">The commands examined in this section require you to enter a switch’s terminal configuration mode. To enter a switch’s configuration mode, enter the command <a id="ch8key7" href="glossary.xhtml#glo116"><span class="gray_kt"><strong>configure terminal</strong></span></a> (abbreviated <a href="glossary.xhtml#glo116"><span class="gray_kt"><strong>conf t</strong></span></a>) at the <strong>switch#</strong> prompt like this:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p411pro02a" id="p411pro02">Click here to view code image</a></p>
        <pre class="pre1">switch# <strong>conf t</strong>
        Enter configuration commands, one per line. End with CNTL/Z.
        switch(config)#
        </pre>
        <p class="noindent">or like this:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p411pro03a" id="p411pro03">Click here to view code image</a></p>
        <pre class="pre1">switch# <strong>configure terminal</strong>
        Enter configuration commands, one per line. End with CNTL/Z.
        switch(config)#
        </pre>
        <p class="noindent">Note that the prompt changes to <strong>switch(config)#</strong>. This indicates that the switch is in terminal configuration mode.</p>
        <p class="noindent">Let’s examine a switch configuration option that enables the user to assign a hostname to a switch. The generic name or the name of an unconfigured Cisco switch is <strong>switch</strong>, and the <strong>hostname</strong> command enables you to change the name to specifically identify the switch. For example, valid hostname structures include switchA, switch-A, and switch_A, but switch A is not valid because switch hostnames may not have any spaces. The word <em>switch</em> does not have to be used in a hostname.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_412"></span>In privileged mode (that is, at the <strong>switch#</strong> prompt), enter the command <strong>hostname [</strong><em>switch-name</em><strong>]</strong> and press <strong>Enter</strong> to set the hostname for the switch to <em>switch-name</em>. The following example shows how to change a switch’s hostname to SwitchA:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p412pro01a" id="p412pro01">Click here to view code image</a></p>
        <pre class="pre1">switch(config)# <strong>hostname SwitchA</strong>
        SwitchA#
        </pre>
        <p class="noindent">Notice that the switch’s name changes from switch to SwitchA after the <strong>hostname</strong> command is entered.</p>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec5">Enable Secret</h4>
        <p class="noindent">You configure password protection for privileged EXEC mode (sometimes known as enable mode) by setting the enable secret. To do so, you need to enter the switch’s configure terminal mode by entering <strong>configure terminal</strong> or <strong>conf t</strong> at the <a id="ch8key8" href="glossary.xhtml#glo603"><span class="gray_kt"><strong>switch#</strong></span></a> prompt and then enter the command <strong>enable secret [</strong><em>your-password</em><strong>]</strong> and press <strong>Enter</strong>:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p412pro02a" id="p412pro02">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>conf t</strong>
        SwitchA(config)#
        SwitchA(config)# <strong>enable secret my-secret</strong>
        </pre>
        <div class="box">
        <p class="box-title">switch#</p>
        <p class="box-para">The prompt for a switch’s privileged EXEC mode</p>
        </div>
        <p class="noindent">This example sets the password for entering the switch’s privileged EXEC mode to <strong>my-secret</strong>. The password for entering the switch’s privileged mode must now be entered to gain access to the mode.</p>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec6">Setting the Line Console Passwords</h4>
        <p class="noindent">A switch has two line connections through which a user can gain access to the switch. The line connections available on a switch can be displayed by using the <strong>line ?</strong> command at the <a id="ch8key9" href="glossary.xhtml#glo604"><span class="gray_kt"><strong>Switch(config)#</strong></span></a> prompt. Two line connections are typically available:</p>
        <div class="box">
        <p class="box-title">Switch(config)#</p>
        <p class="box-para">The prompt for a switch’s terminal configuration mode</p>
        </div>
        <ul class="bullet">
        <li><p class="bullet"><strong>console:</strong> Primary terminal line (the console port)</p></li>
        <li><p class="bullet"><strong>vty:</strong> Virtual terminal for Telnet connections</p></li>
        </ul>
        <p class="noindent">The following steps demonstrate how to configure password protection for the console port and the virtual terminal:</p>
        <ol class="number">
        <li><p class="num">Enter the command <strong>line console 0</strong> and press <strong>Enter</strong>.</p></li>
        <li><p class="num">Enter the command <strong>login</strong> and press <strong>Enter</strong>.</p></li>
        <li><p class="num">Enter the command <strong>password my-secret2</strong>, where <strong>my-secret2</strong> is the console port password.</p></li>
        </ol>
        <p class="noindent">Here is what the command line looks like when you follow these steps:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p412pro03a" id="p412pro03">Click here to view code image</a></p>
        <pre class="pre1">SwitchA(config)# <strong>line console 0</strong>
        SwitchA(config-line)# <strong>login</strong>
        SwitchA(config-line)# <strong>password my-secret2</strong>
        </pre>
        <div class="box">
        <p class="box-title">Switch(config-line)#</p>
        <p class="box-para">A prompt which indicates that you are in the switch’s line configuration mode</p>
        </div>
        <p class="noindent"><span epub:type="pagebreak" id="page_413"></span>Note the change in the switch prompt to <a id="ch8key10" href="glossary.xhtml#glo605"><span class="gray_kt"><strong>Switch(config-line)#</strong></span></a>, which indicates that you are in the switch’s line configuration mode.</p>
        <p class="noindent">Password protection for the virtual terminal (line vty) is set from the switch’s configuration mode. You use the virtual terminal to enter a switch via a Telnet connection:</p>
        <ol class="number">
        <li><p class="num">Enter the command <strong>line vty 0 15</strong>. This places the switch in line configuration mode (config-line). The <strong>0 15</strong> indicates that 16 virtual terminal connections (0, 1, 2, 3, 4,…15) can be made simultaneously.</p></li>
        <li><p class="num">Enter <strong>login</strong>, press <strong>Enter</strong>, and enter the command <strong>password my-secret3</strong>, where <strong>my-secret3</strong> is the password for the virtual terminal connection:</p>
        <ul class="bullet">
        <li><p class="bullet"><code>SwitchA(config)# <strong>line vty 0 4</strong></code></p></li>
        <li><p class="bullet"><code>SwitchA(config-line)# <strong>password my-secret3</strong></code></p></li>
        <li><p class="bullet"><code>SwitchA(config-line)# <strong>login</strong></code></p></li>
        </ul></li>
        <li><p class="num">Set layer 3 access to the switch by using the following command sequence:</p>
        <ul class="bullet">
        <li><p class="bullet"><code>SwitchA(config)# <strong>interface VLAN 1</strong></code></p></li>
        <li><p class="bullet"><code>SwitchA(config-if)# <strong>ip address 172.16.32.2 255.255.255.0</strong></code></p></li>
        <li><p class="bullet"><code>SwitchA(config-if)# <strong>no shutdown</strong></code></p></li>
        </ul></li>
        </ol>
        <p class="noindent">Note that the IP address is being set for VLAN 1. The interface for the switch is also enabled at this point with the <strong>no shutdown</strong> command.</p>
        <p class="noindent">Configuring an IP address on a router’s interface enables a layer 3 routed network. In addition, the interface IP address becomes a gateway address of that network, as described in <a href="ch07.xhtml#ch7">Chapter 7</a>, “<a href="ch07.xhtml#ch7">Introduction to Router Configuration</a>.” However, it is not the same on layer 2 switches. When configuring an IP address on a VLAN interface such as this, you merely assign an IP address to a switch. So, a switch can communicate with other network devices on the same VLAN and vice versa. This is an important addition to the switch for management purposes because it enables networking staff to connect remotely and configure the switch. The IP VLAN interface does not perform any routing functions when running as a layer 2 switch. As a matter of fact, the IP VLAN interface is not required for a switch to start forwarding packets and perform its other layer 2 functions.</p>
        <p class="noindent">The configuration settings entered on the VLAN 1 interface can be viewed by entering the following command:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p413pro01a" id="p413pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>show interface VLAN 1</strong></pre>
        <p class="noindent">For the interface VLAN to be up, at least one switch port in the VLAN must be up or have a physical link. You can verify the status of a switch port by entering the following command:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p413pro02a" id="p413pro02">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>show interface</strong> <strong>Fastethernet0/1</strong></pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_414"></span>To see the statuses of all the switch ports, including their speed, duplex, and VLAN, use the following command:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p414pro01a" id="p414pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>show interfaces status</strong>
        <strong>Port   Name         Status      Vlan    Duplex    Speed   Type</strong>
        Fa0/1               connected   1       a-full    a-100   10/100BaseTX
        Fa0/1               connected   1       a-full    a-100   10/100BaseTX
        Fa0/2               connected   1       a-full    a-100   10/100BaseTX
        Fa0/3               connected   1       a-full    a-100   10/100BaseTX
        Fa0/4               connected   1       a-full    a-100   10/100BaseTX
        Fa0/5               connected   1       a-full    a-100   10/100BaseTX
        Fa0/6               connected   1       a-full    a-100   10/100BaseTX
        </pre>
        <p class="noindent">You can view the running configuration for a switch by using the <strong>show running-config</strong> command. To display the startup configuration, use the <strong>show startup-config</strong> command. To copy the running-configuration file to NVRAM, use the <strong>copy running-config startup-config</strong> command.</p>
        <p class="noindent">As you can see, there is a lot of similarity between switch configuration and router configuration at the command-line interface. However, the major differences are apparent when configuring a VLAN. The next section describes how to configure a static VLAN.</p>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec7">Static VLAN Configuration</h4>
        <p class="noindent">This section demonstrates the steps for configuring a static VLAN. It uses an example that shows how to define the ports for VLAN 2 (Sales) and VLAN 3 (Engineering). VLAN memberships must be defined for the required ports.</p>
        <p class="noindent">The first step in configuring a VLAN is to establish a terminal connection to the switch by using the Cisco console cable. The console connection is used to perform the initial configurations needed to use the Cisco Network Assistant software:</p>
        <ol class="number">
        <li><p class="num">Connect the console cable to your workstation and switch.</p></li>
        <li><p class="num">Open the HyperTerminal software on your workstation.</p></li>
        <li><p class="num">Make a HyperTerminal connection to the switch, just as you would do with a router. After you have made a HyperTerminal connection to the switch, the switch’s initial prompt should appear as <strong>Switch&gt;</strong>.</p></li>
        <li><p class="num">At the initial prompt, type <strong>enable</strong> or <strong>en</strong>. The prompt should change to <strong>Switch#</strong>, allowing you to enter privileged mode for the switch.</p></li>
        <li><p class="num">Next, type <strong>configure terminal</strong> or <strong>conf t</strong>. The prompt should change to <strong>Switch(config)#</strong>, which means you are in the global configuration mode of the switch.</p></li>
        <li><p class="num">Now type <strong>interface Vlan1</strong> or <strong>int Vlan1</strong>. The prompt should now change to <strong>Switch(config-if)#</strong>, and you can make changes to VLAN 1’s interface.</p></li>
        <li><p class="num"><span epub:type="pagebreak" id="page_415"></span>Enter <strong>ip address 192.168.1.1 255.255.255.0</strong> to change the switch’s IP address to 192.168.1.1.</p></li>
        <li><p class="num">Type <strong>no shut</strong> in order to keep VLAN 1 up and active.</p></li>
        </ol>
        <p class="noindent">You have now set the IP address of the switch to 192.168.1.1. Notice that the subnet mask is set to 255.255.255.0, which places the switch in the 192.168.1.0 network. The IP address is set for VLAN 1 because this is the default administrative VLAN for the switch, and it can never be removed. The workstation should be connected to port 1 on the switch, and the computer’s IP address should be configured to 192.168 1.2. This places the computer in the same network defined for the VLAN 1 interface. At this point, you can use the <strong>ping</strong> command to verify network connectivity from the computer to the switch.</p>
        <p class="noindent">The next step is to use the <strong>show vlan</strong> command to verify which ports have been defined for the switch. By default, all ports are assigned to VLAN 1, as demonstrated in the following example:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p415pro01a" id="p415pro01">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>show vlan</strong>
        <strong>VLAN          Name           Status        Ports</strong>
        1             default        active        Fa0/1, Fa0/2, Fa3/3, Fa0/4
                                                   Fa0/5, FA0/6, Fa0/7, Fa0/8
                                                   Fa0/9, Fa0/10
        </pre>
        <p class="noindent">This shows that all the FastEthernet interfaces are currently assigned to VLAN 1.</p>
        <p class="noindent">Next, you will create two additional VLANs: one for Sales and one for Engineering.</p>
        <p class="noindent">The following example of configuring a VLAN requires you to enter configuration mode on the switch. In this case, the Sales and Engineering VLANs are being created:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p415pro02a" id="p415pro02">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>configure terminal</strong>
        Enter configuration commands, one per line. End with CNTL/Z.
        SwitchA(config)# <strong>vlan 2</strong>
        SwitchA (config-vlan)# <strong>name Sales</strong>
        Switch(config)# <strong>vlan 3</strong>
        Switch(config-vlan)# <strong>name Engineering</strong>
        </pre>
        <p class="noindent">The next step is to verify that the new VLANs have been created:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p415pro03a" id="p415pro03">Click here to view code image</a></p>
        <pre class="pre1">Switch(config-vlan)# <strong>exit</strong>
        Switch(config)# <strong>exit</strong>
        Switch# <strong>show vlan</strong>
        <strong>VLAN           Name           Status        Ports</strong>
        1              default        active        Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                    Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                    Fa0/9, Fa0/10
        2              Sales          active
        3              Engineering    active
        </pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_416"></span>Next, you need to assign ports to the newly created VLANs. To do this, you need to enter configuration mode and assign each FastEthernet interface (port) to the proper VLAN. This example shows FastEthernet interface 0/2 being assigned to VLAN 2:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p416pro01a" id="p416pro01">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>conf t</strong>
        Enter configuration commands, one per line. End with CNTL/Z.
        Switch(config)# <strong>int fa 0/2</strong>
        Switch(config-if)# <strong>switchport mode access</strong>
        Switch(config-if)# <strong>switchport access vlan 2</strong>
        Switch(config-if)# <strong>end</strong>
        </pre>
        <p class="noindent">The next step is to verify that FastEthernet0/2 has been assigned to the Sales VLAN (VLAN 2). To do this, you use the <strong>show vlan brief</strong> command, which displays only the interfaces assigned to each VLAN:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p416pro02a" id="p416pro02">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>show vlan brief</strong>
        <strong>VLAN         Name            Status         Ports</strong>
        1            default         active         Fa0/1, Fa0/3, Fa0/4, Fa0/5
                                                    Fa0/6, Fa0/7, Fa0/8, Fa0/9
                                                    Fa0/10
        2            Sales           active         Fa0/2
        </pre>
        <p class="noindent">Next, you assign ports 3 and 4 to the Sales VLAN (VLAN 2) and ports 6, 7, and 8 to the Engineering VLAN (VLAN 3). Then you can verify the port assignments by using the <strong>show vlan</strong> command, as shown here:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p416pro03a" id="p416pro03">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>show vlan</strong>
        <strong>VLAN         Name            Status        Ports</strong>
        1            default         active        Fa0/1, Fa0/5, Fa0/9, Fa0/10
        2            Sales           active        Fa0/2, Fa0/3, Fa0/4
        3            Engineering     active        Fa0/6, Fa0/7, Fa0/8
        </pre>
        <p class="noindent">You can look specifically at the assignments for only one of the VLANs by entering the command <strong>show vlan name</strong> <em>&lt;vlan-name&gt;</em>, where <em>vlan-name</em> is the (case-sensitive) name assigned to the VLAN:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p416pro04a" id="p416pro04">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>sh vlan name Engineering</strong>
        <strong>VLAN         Name            Status        Ports</strong>
        3            Engineering     active        Fa0/6, Fa0/7, Fa0/8
        </pre>
        <p class="noindent">Alternatively, you can use the number of the VLAN instead of using the name, by using the command <strong>sh vlan id</strong> <em>&lt;vlan#&gt;</em>:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p416pro05a" id="p416pro05">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>show vlan id 3</strong>
        <strong>VLAN         Name            Status        Ports</strong>
        3            Engineering     active        Fa0/6, Fa0/7, Fa0/8
        </pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_417"></span>You can view the overall configuration of a switch by using the <strong>show running-config</strong> (or <strong>sh run</strong>) command, as shown in the following example, which displays only part of the configuration:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p417pro01a" id="p417pro01">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>sh run - -</strong>
        Building configuration...Current configuration : 1411 bytes
        !
        version 12.1
        no service pad
        service timestamps debug uptime
        service timestamps log uptime
        no service password-encryption
        !
        hostname Switch
        !
        ip subnet-zero
        !
        spanning-tree mode pvst
        no spanning-tree optimize bpdu transmission
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
        !-
         interface FastEthernet0/2
         switchport access vlan 2
         switchport mode access
         . .
         . .
         . .
         . .
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        !
        interface Vlan1
         ip address 192.168.1.1 255.255.255.0
         no ip route-cache
        !
        ip http server
        !
        line con 0
        line vty 0 15
         login
        end
        </pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_418"></span>The running configuration for the switch shows that the FastEthernet interfaces have been assigned to the proper VLANs. In addition, you can see that an IP address has been assigned to the default VLAN 1.</p>
        <p class="noindent">A voice VLAN is a special VLAN designated for IP phones. In a voice VLAN, voice over IP (VoIP) features such as power and quality of service are part of the port configuration. Voice VLANs have become very common, and there is a special command for configuring a switch port as a voice VLAN. For example, you can add the following command to the port configurations to enable voice VLAN 219 on that port:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p418pro01a" id="p418pro01">Click here to view code image</a></p>
        <pre class="pre1">Switch# <strong>switchport voice vlan 219</strong></pre>
        </section>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec4">VLAN Subinterfaces</h3>
        <p class="noindent">As discussed earlier in this chapter, each VLAN is its own broadcast domain. It cannot forward traffic across its VLAN boundaries. However, it is almost impractical in today’s applications for a VLAN not to be able to communicate beyond itself. To enable communications among VLANs, InterVLAN <em>routing</em> is required.</p>
        <p class="noindent">The most logical solution for routing traffic between different VLANs is to introduce or create a layer 3 routed network between them. One traditional way is to connect each VLAN to a router interface. Then, each router interface is configured as a different layer 3 network. This enables VLANs to communicate and pass traffic via the layer 3 IP network. For a few VLANs, this does not present an issue, but for a large number of VLANs, it could create problems. Every VLAN requires a physical connection to a router port. Router ports are expensive, and requiring physical connections can be costly as the number of VLANs increases and more physical links are required. A more common and popular design is to implement a <em>router on a stick</em> design, which eliminates the need to connect a link from each VLAN to a router port and instead uses a trunk or 802.1Q port. A single trunk port is connected to a router, and it passes the tagged VLAN traffic to the router as shown in <a href="ch08.xhtml#ch08fig02">Figure 8-2</a>.</p>
        <figure class="image" id="ch08fig02">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780137455911/files/graphics/08fig02.jpg" aria-describedby="Alch08fig02" alt="An example shows the setup of the router on a stick topology." width="672" height="419">
        <aside class="hidden" id="Alch08fig02">
        <p>In the figure, a router is connected to building A switch via 802.1Q/trunk port. Building A switch is connected to building B switch via 802.1Q/trunk port. Building A switch is connected to default VLAN, sales VLAN, and engineering VLAN. Building B switch is connected to default VLAN and sales VLAN.</p>
        </aside>
        <figcaption>
        <p class="title-f"><span class="gray_fig"><strong>FIGURE 8-2</strong></span> Router on a stick topology.</p>
        </figcaption>
        </figure>
        <p class="noindent"><span epub:type="pagebreak" id="page_419"></span>This design requires that the router be configured to accept the tagged VLANs. A layer 3 network is then assigned to each VLAN coming to the router. The following example demonstrates how to configure a Cisco router for 802.1Q inter-VLAN routing:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p419pro01a" id="p419pro01">Click here to view code image</a></p>
        <pre class="pre1">Router(config)# <strong>interface FastEthernet0/0</strong>
        Router(config-if)# <strong>no ip address</strong>
        Router(config-if)# <strong>interface FastEthernet0/0.1</strong>
        Router(config-if)# <strong>description Default VLAN</strong>
        Router(config-subif)# <strong>encapsulation dot1Q 1</strong>
        Router(config-subif)# <strong>ip address 172.16.10.1 255.255.255.0</strong><br>
        Router(config-subif)# <strong>interface FastEthernet0/0.2</strong>
        Router(config-if)# <strong>description Sales VLAN</strong>
        Router(config-subif)# <strong>encapsulation dot1Q 2</strong>
        Router(config-subif)# <strong>ip address 172.16.20.1 255.255.255.0</strong>&gt;<br>
        Router(config-subif)# <strong>interface FastEthernet0/0.3</strong>
        Router(config-if)# <strong>description Engineering VLAN</strong>
        Router(config-subif)# <strong>encapsulation dot1Q 3</strong>
        Router(config-subif)# <strong>ip address 172.16.30.1 255.255.255.0</strong>
        </pre>
        <p class="noindent">To accommodate the VLANs, subinterfaces are created under the router interface at which the switch trunk port is terminated. A subinterface is a virtual interface that is indicated with a dot followed by the subinterface number (for example, for <strong>FastEthernet0/0.1 FastEthernet0/0.2</strong> and <strong>FastEthernet0/0.3</strong>).</p>
        <p class="noindent">For ease of programming, it is recommended to keep the subinterface number the same as the VLAN ID. Recall that in our earlier example, the default VLAN is 1, the Sales VLAN is 2, and the Engineering VLAN is 3. The next step is to define the VLAN tagging encapsulation. In this case, it is dot1q, which essentially is 802.1Q. With the encapsulation, the appropriate VLAN ID is specified. Next, the IP address is assigned by creating a routed layer 3 network for a VLAN.</p>
        <p class="noindent">In this section you have seen the steps for creating a static VLAN. You saw how to create the Sales and Engineering VLANs and assign specific ports on the switch to the respective VLANs. Unassigned ports remained as part of the default VLAN, VLAN 1.</p>
        <div class="box">
        <p class="box-title" id="ch8lev2sec8">Networking Challenge: Switch Configuration</p>
        <p class="box-para">Use the Net-Challenge simulator software provided at the text’s companion website to demonstrate that you can perform basic switch and static VLAN configuration. Connect to the website and open the Net-Challenge folder and click <strong>Net-ChallengeV6.exe</strong>. When the software is running, click the <strong>Select Challenge</strong> button to open the Select Challenge drop-down menu. Select <strong>Introduction to Switch Configuration</strong> to open a check box that can be used to verify that you have completed all the tasks. Then follow these steps:</p>
        <ol class="number">
        <li><p class="num">Enter privileged EXEC mode on the switch (using the password <strong>Chile</strong>).</p></li>
        <li><p class="num">Enter the switch’s configuration mode, <strong>Router(config)</strong>.</p></li>
        <li><p class="num">Set the hostname of the switch to switch-A.</p></li>
        <li><p class="num"><span epub:type="pagebreak" id="page_420"></span>Configure the VLAN 1 interface with the following IP address and subnet mask:</p>
        <ul class="bullet">
        <li><p class="bullet"><strong>IP address:</strong> 10.10.20.250</p></li>
        <li><p class="bullet"><strong>Subnet mask:</strong> 255.255.255.0</p></li>
        </ul></li>
        <li><p class="num">Enable the VLAN 1 interface.</p></li>
        <li><p class="num">Use the appropriate command to display the current VLAN settings for the switch.</p></li>
        <li><p class="num">Create another VLAN, VLAN 2, named Sales.</p></li>
        <li><p class="num">Verify that a new Sales VLAN has been created.</p></li>
        <li><p class="num">Issue the command to enter interface configuration mode for the fa0/2 interface.</p></li>
        <li><p class="num">Enter the sequence of commands that are used to assign the interface fa0/2 to the Sales VLAN.</p></li>
        <li><p class="num">Enter the command that enables you to display the interface assigned to each VLAN.</p></li>
        <li><p class="num">Enter the command that enables you to specifically view the assignments for the Sales VLAN.</p></li>
        <li><p class="num">Issue the command that allows you to view the switch’s running configuration.</p></li>
        </ol>
        </div>
        <aside class="sidebar" epub:type="sidebar">
        <p class="sidebar-title" id="ch8lev2sec9">Section 8-3 Review</p>
        <p class="s-para">This section covers the following Network+ exam objectives.</p>
        <p class="s-paran">1.5 Explain common ports and protocols, their application, and encrypted alternatives.</p>
        <p class="s-para"><em>A switch has two line connections through which a user can gain access to the switch. The line connections available on a switch can be displayed by using the</em> <strong><em>line ?</em></strong> <em>command at the</em> <strong><em>Switch(config)#</em></strong> <em>prompt. The following line connections are typically available:</em></p>
        <ul class="sq">
        <li><p class="bullet"><strong>console:</strong> Primary terminal line (the console port)</p></li>
        <li><p class="bullet"><strong>vty:</strong> Virtual terminal for Telnet connections</p></li>
        </ul>
        <p class="s-paran">2.1 Compare and contrast various devices, their features, and their appropriate placement on the network.</p>
        <p class="s-para"><em>This section presents the basics of configuring a Cisco switch. You should have noticed the similarities and distinct differences between router and switch IOS commands. Spend time working through the Net-Challenge exercises, which will help you remember the commands.</em></p>
        <p class="s-paran">2.3 Given a scenario, configure and deploy common Ethernet switching features.</p>
        <p class="s-para"><em>To see the statuses of all the switch ports, including their speed, duplex, and VLAN, use the following command:</em></p>
        <p class="codelink"><a href="ch08_images.xhtml#p420pro01a" id="p420pro01">Click here to view code image</a></p>
        <pre class="pre1"><em>SwitchA#</em> <strong><em>show interfaces status</em></strong></pre>
        <p class="s-paran"><span epub:type="pagebreak" id="page_421"></span>3.3 Explain high availability and disaster recovery concepts and summarize which is the best solution.</p>
        <p class="s-para"><em>This section examines the basics of configuring a Cisco switch. The commands for switch configuration are similar to those for a router. To configure a switch, you must first establish a console connection and enter privileged mode on the switch. The procedure for establishing a console connection to a switch is the same as for a router.</em></p>
        <p class="s-paran">5.3 Given a scenario, use the appropriate network software tools and commands.</p>
        <p class="s-para"><em>This section mentions that the console (primary terminal line) is the console port, and vty is the virtual terminal used for Telnet connections.</em></p>
        <p class="sidebar-title1" id="ch8lev2sec10">Test Your Knowledge</p>
        <ol class="number">
        <li><p class="num">Which of the following is used to look specifically at the assignments for the Administrator VLAN?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><code>Switch(config)# <strong>sh vlan name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>Switch(vlan)# <strong>sh vlan name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>Switch# <strong>sh vlan name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>Switch# <strong>sh vlan Administrator</strong></code></p></li>
        </ol></li>
        <li><p class="num">Which of the following command sequences is used to set password protection for the console port?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><code>SwitchA(config)# <strong>line console 0</strong></code></p>
        <p class="alpha"><code>SwitchA(config-line)# <strong>login</strong></code></p>
        <p class="alpha"><code>SwitchA(config-line)# <strong>password my-secret2</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>line console 0</strong></code></p>
        <p class="alpha"><code>SwitchA(config-line)# <strong>login</strong></code></p>
        <p class="alpha"><code>SwitchA(config-line)# <strong>password my-secret2</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>line console 0</strong></code></p>
        <p class="alpha"><code>SwitchA# <strong>login</strong></code></p>
        <p class="alpha"><code>SwitchA# <strong>password my-secret2</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA(config)# <strong>line console 0</strong></code></p>
        <p class="alpha"><code>SwitchA(config)# <strong>login</strong></code></p>
        <p class="alpha"><code>SwitchA(config)# <strong>password my-secret2</strong></code></p></li>
        </ol></li>
        </ol>
        </aside>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec5"><span epub:type="pagebreak" id="page_422"></span><span class="space">8-4</span> Spanning Tree Protocol</h3>
        <div class="box">
        <p class="box-title">Spanning Tree Protocol (STP)</p>
        <p class="box-para">A link management protocol that prevents looping and controls data flow over possibly redundant data paths</p>
        </div>
        <p class="noindent">This section examines <a id="ch8key11" href="glossary.xhtml#glo576"><span class="gray_kt"><strong>Spanning Tree Protocol (STP)</strong></span></a>, which is a link management protocol that prevents switching loops and controls data flow over possibly redundant data paths. Looping is bad for Ethernet networks because it means duplicate packets are sent over redundant paths. A switch should send packets over only one path. Spanning Tree Protocol is used to ensure that only one data path is selected. Spanning Tree Protocol also forces one of the redundant data paths into a standby mode by placing the path in a blocked state.</p>
        <p class="noindent">Switches that are participating in Spanning Tree Protocol use <a id="ch8key12" href="glossary.xhtml#glo68"><span class="gray_kt"><strong>bridge protocol data units (BPDUs)</strong></span></a> to exchange information with other switches. Switches use BPDUs for the following:</p>
        <ul class="bullet">
        <li><p class="bullet">To elect a root switch for the spanning tree network topology</p></li>
        <li><p class="bullet">To remove redundant data paths</p></li>
        <li><p class="bullet">To calculate the shortest distance to a root switch</p></li>
        <li><p class="bullet">To select a port from each switch as the best path to the root switch</p>
        <div class="box">
        <p class="box-title">Bridge Protocol Data Unit (BPDU)</p>
        <p class="box-para">A message unit that switches use to share information with other switches that are participating in Spanning Tree Protocol</p>
        </div></li>
        <li><p class="bullet">To select ports that are part of Spanning Tree Protocol</p></li>
        </ul>
        <p class="noindent">A switch assumes that it is the root switch until the BPDUs are exchanged and a root switch is elected. The switch with the lowest MAC address is elected as the root switch. The following example shows a switch with the MAC address 0030194A6940 issuing a data packet as the start of the bidding process to see which switch will be elected as the root switch:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p422pro01a" id="p422pro01">Click here to view code image</a></p>
        <pre class="pre1">BPDU Config BID=0030194A6940 PID=0x801B</pre>
        <p class="noindent">In this case, <strong>Config</strong> indicates that this is a <a id="ch8key13" href="glossary.xhtml#glo115"><span class="gray_kt"><strong>configuration BPDU</strong></span></a>, which the switches use to elect the root switch. Two other types of packets that can come from the switch are the <a id="ch8key14" href="glossary.xhtml#glo633"><span class="gray_kt"><strong>topology change notification (TCN)</strong></span></a>, which is used to indicate that there has been a change in the switch network topology, and the <a id="ch8key15" href="glossary.xhtml#glo634"><span class="gray_kt"><strong>topology change notification acknowledgment (TCA)</strong></span></a>, which is an acknowledgment from another switch that the TCN has been received.</p>
        <div class="box">
        <p class="box-title">Configuration BPDU</p>
        <p class="box-para">A BPDU that switches use to elect the root switch</p>
        <p class="box-title">Topology Change Notification (TCN)</p>
        <p class="box-para">A packet used to indicate that there has been a change in the switch network topology</p>
        <p class="box-title">Topology Change Notification Acknowledgment (TCA)</p>
        <p class="box-para">An acknowledgment from another switch that the TCN has been received</p>
        </div>
        <p class="noindent"><a href="ch08.xhtml#ch08fig03">Figure 8-3</a> shows an example of the contents of a BPDU. It shows that the Root ID MAC address is 0030194A6940. The BPDUs are exchanged at regular intervals and are used to keep the switches notified of any changes in the network topology. The default notification interval, which is 2 seconds, is called the hello time.</p>
        <span epub:type="pagebreak" id="page_423"></span>
        <figure class="image" id="ch08fig03">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780137455911/files/graphics/08fig03.jpg" alt="Screenshot lists the contents in a BPDU packet information. The IEEE 802.1D - bridge management protocol includes the details of protocol ID, bridge protocol data unit (BPDU) includes the details of version, type, flags, root ID, priority, root ID - MAC address, root path cost, etc." width="645" height="297">
        <figcaption>
        <p class="title-f"><span class="gray_fig"><strong>FIGURE 8-3</strong></span> An example of BPDU packet information.</p>
        </figcaption>
        </figure>
        <p class="noindent">A switch does not begin to forward data packets immediately when a networking device is connected to a port. Instead, there is a delay during which the switch begins to process the BPDUs to determine the topology of the switch network. This is called the forward delay. <a href="ch08.xhtml#ch08fig03">Figure 8-3</a> shows a forward delay of 15 seconds, which is the default value set by the root switch. During the delay period, the switch goes through the listening and learning states.</p>
        <p class="noindent">Spanning Tree Protocol has five states:</p>
        <ul class="bullet">
        <li><p class="bullet"><strong>Blocking state:</strong> In this state, the switch is not sending data out the ports. However, the switch is receiving and monitoring the BPDUs. This state is used to prevent any possible switching loops.</p></li>
        <li><p class="bullet"><strong>Listening state:</strong> BPDUs are being processed.</p></li>
        <li><p class="bullet"><strong>Learning state:</strong> The switch is learning source MAC addresses from the received data packets and will add the addresses to the MAC address table.</p></li>
        <li><p class="bullet"><strong>Forwarding state:</strong> The switch is sending and receiving data packets. The BPDUs are still being monitored for any possible changes in the switch network.</p></li>
        <li><p class="bullet"><strong>Disabled:</strong> This setting is available for the network administrator to manually disable the port. This is not part of Spanning Tree Protocol but rather a function available on a switch.</p></li>
        </ul>
        <p class="noindent">Spanning Tree Protocol has been a standard feature in all layer 2 switches for many years. Many improvements have been made to the original STP. For example, Rapid Spanning Tree Protocol (RSTP) reduces the convergence time to less than 10 seconds. RSTP proactively monitors switch ports for status change and allows a port to safely transition to the forwarding state. RSTP is also backward compatible with STP switches. Multiple Spanning Tree Protocol (MSTP) is VLAN aware, thus allowing each VLAN to have its own MST instance (MSTI). This enables load balancing of network traffic across redundant links so that each of the links in a network can be used by at least one MSTI. There are also other improved <span epub:type="pagebreak" id="page_424"></span>proprietary spanning tree protocols. For example, Cisco developed Per-VLAN Spanning Tree (PVST) and PVST+, and Juniper developed VLAN Spanning Tree Protocol (VSTP).</p>
        <p class="noindent">Spanning Tree Protocol can also be used to create network redundancy. When there are redundant paths in a network, Spanning Tree Protocol prevents loops by ensuring that only one data path is used. Spanning Tree Protocol forces the other redundant links into standby mode by placing the links in blocking state. When the primary link becomes unavailable, Spanning Tree Protocol recalculates its topology and then starts forwarding via another redundant link.</p>
        <p class="noindent">Another technique that can be used to provide redundancy is link aggregation, sometimes called port aggregation. This technique uses Link Aggregation Control Protocol (LACP), which allows for multiple physical ports on an Ethernet switch to be bundled as one single logical channel. This increases bandwidth capacity, and it also creates redundancy if a member port in the link aggregation group fails. LACP is a standard protocol supported by most network switches, and PAgP (Port Aggregation Protocol) is a Cisco-proprietary protocol that performs a similar function to create a port bonding, which Cisco calls EtherChannel. A common limitation of link aggregation is that all member ports must have identical speed and duplex.</p>
        <aside class="sidebar" epub:type="sidebar">
        <p class="sidebar-title" id="ch8lev2sec11">Section 8-4 Review</p>
        <p class="s-para">This section covers the following Network+ exam objectives.</p>
        <p class="s-paran">2.1 Compare and contrast various devices, their features, and their appropriate placement on the network.</p>
        <p class="s-para"><em>As discussed in this section, Multiple Spanning Tree Protocol (MSTP) is VLAN aware, thus allowing each VLAN to have its own MST instance (MSTI). This enables load balancing of network traffic across redundant links so that each of the links in a network can be used by at least one MSTI.</em></p>
        <p class="s-paran">2.3 Given a scenario, configure and deploy common Ethernet switching features.</p>
        <p class="s-para"><em>This section describes the learning state, in which a switch is learning source MAC addresses from the received data packets and adds the addresses to the MAC address table.</em></p>
        <p class="s-paran">3.3 Explain high availability and disaster recovery concepts and summarize which is the best solution.</p>
        <p class="s-para"><em>Multiple Spanning Tree Protocol (MSTP) is VLAN aware, thus allowing each VLAN to have its own MSTI. This enables load balancing of network traffic across redundant links so that each of the links in a network can be used by at least one MSTI.</em></p>
        <p class="s-paran">5.5 Given a scenario, troubleshoot general networking issues.</p>
        <p class="s-para"><em>This section examines STP, which is a link management protocol that prevents switching loops and controls data flow over possibly redundant data paths.</em></p>
        <p class="sidebar-title1" id="ch8lev2sec12"><span epub:type="pagebreak" id="page_425"></span>Test Your Knowledge</p>
        <ol class="number">
        <li><p class="num">Which of the following are the five Spanning Tree Protocol states? (Select five.)</p>
        <ol class="lower-alpha">
        <li><p class="alpha">Blocking</p></li>
        <li><p class="alpha">Listening</p></li>
        <li><p class="alpha">Selecting</p></li>
        <li><p class="alpha">Learning</p></li>
        <li><p class="alpha">Forwarding</p></li>
        <li><p class="alpha">Disabled</p></li>
        <li><p class="alpha">Passing</p></li>
        <li><p class="alpha">Cut-through</p></li>
        </ol></li>
        <li><p class="num">Which of the following are true of Spanning Tree Protocol? (Select all that apply.)</p>
        <ol class="lower-alpha">
        <li><p class="alpha">It is a link management protocol.</p></li>
        <li><p class="alpha">It replaces RIP as the routing protocol for switches.</p></li>
        <li><p class="alpha">It is used to minimize hops.</p></li>
        <li><p class="alpha">It is used to prevent loops.</p></li>
        </ol></li>
        </ol>
        </aside>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec6"><span class="space">8-5</span> Power over Ethernet</h3>
        <div class="box">
        <p class="box-title">Power over Ethernet (PoE)</p>
        <p class="box-para">A technology developed to supply power over CAT5 or better network cabling</p>
        </div>
        <p class="noindent">One of the challenges a network administrator faces as a campus network grows is making sure that electrical power is available for the networking devices (for example, switches, wireless access points, and IP phones). It is not always practical or affordable to run electrical power to all the places where networking devices are needed. This challenge can be met with <a id="ch8key16" href="glossary.xhtml#glo469"><span class="gray_kt"><strong>Power over Ethernet (PoE)</strong></span></a>. The Power over Ethernet standard (IEEE 802.3af) was approved in 2003 for networks running 10BASE-T, 100BASE-T, and 1000BASE-T technologies. PoE is a standardized technology that can be used to supply power over existing CAT5 or better network cabling to networking devices.</p>
        <p class="noindent">PoE offers the following benefits:</p>
        <ul class="bullet">
        <li><p class="bullet">It is not necessary to run external power to all networking devices.</p></li>
        <li><p class="bullet">Power and data run over one cable.</p></li>
        <li><p class="bullet"><span epub:type="pagebreak" id="page_426"></span>Monitoring of power management can be done via SNMP.</p></li>
        <li><p class="bullet">Networking devices can be moved easily.</p></li>
        </ul>
        <p class="noindent">As defined by IEEE 802.3af, PoE provides 15.4 watts per port to Ethernet devices and uses a 48-volt system.</p>
        <p class="noindent">Two pieces of networking hardware are defined for PoE: <a id="ch8key17" href="glossary.xhtml#glo449"><span class="gray_kt"><strong>powered device (PD)</strong></span></a> and <a id="ch8key18" href="glossary.xhtml#glo483"><span class="gray_kt"><strong>power sourcing equipment (PSE)</strong></span></a>. The three main functions provided by the PSE are as follows:</p>
        <ul class="bullet">
        <li><p class="bullet">Detecting a PD</p></li>
        <li><p class="bullet">Supplying power to the PD</p></li>
        <li><p class="bullet">Monitoring the power supply</p></li>
        </ul>
        <div class="box">
        <p class="box-title">PD</p>
        <p class="box-para">Powered device</p>
        <p class="box-title">PSE</p>
        <p class="box-para">Power sourcing equipment</p>
        </div>
        <p class="noindent">The two types of PSE are the <a id="ch8key19" href="glossary.xhtml#glo186"><span class="gray_kt"><strong>endpoint PSE</strong></span></a> and the <a id="ch8key20" href="glossary.xhtml#glo359"><span class="gray_kt"><strong>midspan (midpoint) PSE</strong></span></a>. These types of network switches are usually referred to as <em>PoE switches</em>. Besides being PSEs, they provide typical switching functions. They are not meant to replace layer 2 switches because they are more expensive. These switches are used extensively in VoIP environments to power IP phones. The VoIP endpoint is the final destination of a voice call. It can be a physical device or server or even a software application.</p>
        <div class="box">
        <p class="box-title">Endpoint PSE</p>
        <p class="box-para">A PoE switch such as the source port on an Ethernet switch that connects to the PD</p>
        <p class="box-title">Midspan (Midpoint) PSE</p>
        <p class="box-para">A PoE switch that is used to provide power to a PD when a powered Ethernet port is not available</p>
        </div>
        <p class="noindent">One useful command for checking the power status of the switch ports is <strong>show power inline</strong>, demonstrated here:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p426pro01a" id="p426pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>sh power inline</strong>
        Module     Available (Watts)      Used (Watts)      Remaining (Watts)
        1          740.0                  0.0               740.0
        Interface   Admin    Oper    Power (Watts)   Device  Class   Max
        Gi1/0/1     auto     off     0.0             n/a     n/a     30.0
        Gi1/0/2     auto     off     0.0             n/a     n/a     30.0
        Gi1/0/3     auto     off     0.0             n/a     n/a     30.0
        Gi1/0/4     auto     off     0.0             n/a     n/a     30.0
        Gi1/0/5     auto     off     0.0             n/a     n/a     30.0
        Gi1/0/6     auto     off     0.0             n/a     n/a     30.0
        </pre>
        <p class="noindent">An example of an endpoint PSE is the source port on an Ethernet switch that connects, via a cable, to a PD. The power to the PD can be delivered in two ways: over the active data pairs (for example, 1–2/3–6) or via pairs 4–5/7–8, as demonstrated in <a href="ch08.xhtml#ch08fig04">Figure 8-4</a>. Both types of power delivery can be used for 10BASE-T, 100BASE-T, and 1000BASE-T. The most common power delivery is over pairs 1–2/3–6, as shown in <a href="ch08.xhtml#ch08fig04">Figure 8-4</a>(a).</p>
        <p class="noindent">A midspan, or midpoint, PSE is used to provide power to a PD when a powered Ethernet port is not available. This setup requires the use of a power injector and typically uses pairs 4–5/7–8, and this does not support 1000BASE-T connections.</p>
        <span epub:type="pagebreak" id="page_427"></span>
        <figure class="image" id="ch08fig04">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780137455911/files/graphics/08fig04.jpg" aria-describedby="Alch08fig04" alt="Figures depicts two ways of delivering power to a Powered Device." width="711" height="230">
        <aside class="hidden" id="Alch08fig04">
        <p>Figure (a) shows switch Power Sourcing Equipment pairs labeled, "Switch PSE,": 1 to 2, 3 to 6, 4 to 5, and 7 to 8," and another pair, "1 to 2, 3 to 6, 4 to 5, and 7 to 8." The pairs 1-2 and 3-6 are connected by 148 V and further connected to a router labeled "Access point." The second figure shows the same set of switches with the pairs 4-5 and 7-8 connected by 148V and further connected to a router labeled "Access point."</p>
        </aside>
        <figcaption>
        <p class="title-f"><span class="gray_fig"><strong>FIGURE 8-4</strong></span> The two ways to deliver power to a PD: (a) pairs 1–2/3–6 and (b) 4–5/7–8.</p>
        </figcaption>
        </figure>
        <p class="noindent">The PD is the device that actually receives power, such as a wireless access point or an IP phone. There are four classes of PDs:</p>
        <ul class="bullet">
        <li><p class="bullet"><strong>Class 0:</strong> 0.44 to 12.95 watts</p></li>
        <li><p class="bullet"><strong>Class 1:</strong> 0.44 to 3.84 watts</p></li>
        <li><p class="bullet"><strong>Class 2:</strong> 3.84 to 6.49 watts</p></li>
        <li><p class="bullet"><strong>Class 3:</strong> 6.49 to 12.95 watts</p></li>
        </ul>
        <div class="box">
        <p class="box-title">Resistive Power Discovery</p>
        <p class="box-para">The process of looking for devices that support PoE and have a 25kΩ resistor connected between the transmit and receive pairs</p>
        </div>
        <p class="noindent">A PSE “discovers” PDs by sending discovery signals on active and inactive Ethernet ports. The discovery process (called <a id="ch8key21" href="glossary.xhtml#glo500"><span class="gray_kt"><strong>resistive power discovery</strong></span></a>) involves looking for devices that support PoE. Valid PDs have a 25kΩ resistor connected between the transmit and receive pairs. Before full power is delivered to the PD, two low-voltage discovery signals are sent out to verify whether a compatible PoE device is attached. The second of the two signals is a slightly higher voltage than the first, but neither is large enough to damage an incompatible device. If the PSE detects a compatible PD, the full 48 volts is applied to all ports that have compatible PDs connected.</p>
        <p class="noindent">There are a limited number of problems with PoE, as long as the devices support IEEE 802.3af. In cases where vendor-proprietary PoE equipment is being used, the PSEs and PDs must be compatible. Also, a network administrator must be aware of how many PDs are connected to the PSE and must ensure that the total power requirements for the PDs do not exceed the PSE limit. For example, a network could have 10 access points and 25 IP phones, all requiring PoE connections. If the total number of devices requiring power exceeds the power output for a PSE, some PDs may not be powered up or may not operate properly.</p>
        <div class="box">
        <p class="box-title">PoE+</p>
        <p class="box-para">A newer version of PoE, based on IEEE 802.3at</p>
        </div>
        <p class="noindent">A newer version of Power over Ethernet, called <a id="ch8key22" href="glossary.xhtml#glo462"><span class="gray_kt"><strong>PoE+</strong></span></a>, defined by the IEEE 802.3at standard, was announced in 2009. Much like 802.3af PoE, PoE+ uses two pairs of twisted-pair cable to deliver power. PoE+ provides the following features:</p>
        <ul class="bullet">
        <li><p class="bullet">It can supply up to 30 watts of power to the PD.</p></li>
        <li><p class="bullet">It supports both 802.3af (PoE) and 802.3at (PoE+) PDs.</p></li>
        <li><p class="bullet">It supports midspan PSEs for 1000BASE-T.</p></li>
        <li><p class="bullet"><span epub:type="pagebreak" id="page_428"></span>It supports 10GBASE-T.</p></li>
        <li><p class="bullet">It operates over CAT5 and higher cabling.</p></li>
        </ul>
        <p class="noindent">The latest PoE standard, 802.3bt (ratified in 2018), is known as PoE++. This standard defines two type of PoE:</p>
        <ul class="bullet">
        <li><p class="bullet">Type 3 PoE can supply up to 60 watts of power to the PD.</p></li>
        <li><p class="bullet">Type 4 PoE can supply up to 100 watts of power to the PD.</p></li>
        </ul>
        <p class="noindent">The POE++ standard uses all four pairs of twisted-pair cable to deliver power and provides the following features:</p>
        <ul class="bullet">
        <li><p class="bullet">It is fully backward compatible with both 802.3af (PoE) and 802.3at (PoE+) PDs.</p></li>
        <li><p class="bullet">It supports 10GBASE-T.</p></li>
        <li><p class="bullet">It operates with CAT5 and higher cabling.</p></li>
        </ul>
        <aside class="sidebar" epub:type="sidebar">
        <p class="sidebar-title" id="ch8lev2sec13">Section 8-5 Review</p>
        <p class="s-para">This section covers the following Network+ exam objectives.</p>
        <p class="s-paran">1.3 Summarize the types of cables and connectors and explain which is the appropriate type for a solution.</p>
        <p class="s-para"><em>The Power over Ethernet standard (IEEE 802.3af) was approved in 2003 for networks running 10BASE-T, 100BASE-T, and 1000BASE-T technologies. It provides a standardized technology that can be used to supply power over existing CAT5 or better network cabling to networking devices.</em></p>
        <p class="s-paran">2.1 Compare and contrast various devices, their features, and their appropriate placement on the network.</p>
        <p class="s-para"><em>This section introduces PoE switches. Besides being PSEs, they provide typical switching functions. They are not meant to replace layer 2 switches because they are more expensive. These switches are used extensively in the VoIP environment to power IP phones.</em></p>
        <p class="s-paran">2.3 Given a scenario, configure and deploy common Ethernet switching features.</p>
        <p class="s-para"><em>It is not always practical or affordable to run electrical power to every place networking devices are needed. This challenge can be met with Power over Ethernet (PoE). The PoE standard (IEEE 802.3af) was approved in 2003 for networks running 10BASE-T, 100BASE-T, and 1000BASE-T technologies. It provides a standardized technology that can be used to supply power over existing CAT5 or better network cabling to networking devices.</em></p>
        <p class="s-paran"><span epub:type="pagebreak" id="page_429"></span>3.1 Given a scenario, use the appropriate statistics and sensors to ensure network availability.</p>
        <p class="s-para"><em>One of the challenges a network administrator faces as a campus network grows is making sure electrical power is available for the networking devices (for example, switches, wireless access points, and IP phones).</em></p>
        <p class="s-paran">5.2 Given a scenario, troubleshoot common cable connectivity issues and select the appropriate tools.</p>
        <p class="s-para"><em>This section describes the power provided by PoE standards:</em></p>
        <ul class="bullet">
        <li><p class="bullet"><strong>IEEE 802.3af (PoE):</strong> 15.4 watts per port to PDs</p></li>
        <li><p class="bullet"><strong>IEEE 802.3at (PoE+):</strong> 30 watts per port to PDs</p></li>
        <li><p class="bullet"><strong>IEEE 802.3bt (PoE++):</strong> 60–100 watts per port to PDs</p></li>
        </ul>
        <p class="sidebar-title1" id="ch8lev2sec14">Test Your Knowledge</p>
        <ol class="number">
        <li><p class="num">Which of the following is an advantage of running Power over Ethernet?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">It is not necessary to run external power to all networking devices.</p></li>
        <li><p class="alpha">PoE improves data throughput.</p></li>
        <li><p class="alpha">PoE works with all networking devices, regardless of manufacturer.</p></li>
        <li><p class="alpha">It allows you to run power and data over one cable.</p></li>
        </ol></li>
        <li><p class="num">How is a PD discovered, and which device discovers it?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">A PD is discovered through resistor power discovery by an ESE.</p></li>
        <li><p class="alpha">A PD is discovered through PoE discovery by a PSE.</p></li>
        <li><p class="alpha">A PD is discovered through resistive power discovery by a PSE.</p></li>
        <li><p class="alpha">A PD is discovered through PoE discovery by an ESE.</p></li>
        </ol></li>
        </ol>
        </aside>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec7"><span class="space">8-6</span> Troubleshooting the Switch Interface</h3>
        <p class="noindent">This section examines how to troubleshoot switches. The router troubleshooting concepts from <a href="ch07.xhtml#ch7">Chapter 7</a> also apply to switch troubleshooting. Much as when troubleshooting a router, you should verify the switch configuration to ensure that it is correct and verify the switch interfaces to make sure they are up and operating in the right mode. Many router commands can also be used for switches. On Cisco routers and switches, commands such as <strong>show running-config</strong> are universal. This <span epub:type="pagebreak" id="page_430"></span>command, for example, is used to display the currently running configuration of the network device.</p>
        <p class="noindent">Before you begin using commands to troubleshoot problems, remember to look at the most rudimentary way to troubleshoot connectivity issues: Be sure to check the physical connections—cables, physical equipment, and network connection LED status indicators. This type of troubleshooting is fondly referred to as “checking the blinking lights.”</p>
        <p class="noindent">The <strong>show ip int brief</strong> command, which can be used to check the status of the interfaces on a router, can also be used on a switch. The output of this command shows the statuses of the physical interfaces as well as the VLAN interfaces, if any are configured. The following example shows that VLAN1 is configured, and it is up and operational:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p430pro01a" id="p430pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>sh ip int brief</strong>
        Interface         IP-Address     OK?     Method     Status    Protocol
        Vlan1             10.123.124.2   YES     NVRAM      up        up
        FastEthernet0/1   unassigned     YES     unset      up        up
        FastEthernet0/2   unassigned     YES     unset      up        up
        FastEthernet0/3   unassigned     YES     unset      up        up
        FastEthernet0/4   unassigned     YES     unset      up        up
        FastEthernet0/5   unassigned     YES     unset      down      down
        </pre>
        <p class="noindent">You might find that the command <strong>show ip int brief</strong> does not offer enough layer 2 or layer 1 information. In such cases, you can use another useful command for displaying the statuses of the switch interfaces: <strong>show interface status</strong> (or <strong>sh int status</strong>). This command provides the following switch port information:</p>
        <ul class="bullet">
        <li><p class="bullet"><strong>Port:</strong> The type of interface: Ethernet (10Mbps), Fast Ethernet (100Mbps), or Gigabit Ethernet (1000Mbps)</p></li>
        <li><p class="bullet"><strong>Name:</strong> A description of the interface, if it is configured</p></li>
        <li><p class="bullet"><strong>Status:</strong> Can be either <strong>connect</strong> (which indicates that the interface is physically connected to another network device) or <strong>notconnect</strong> (which indicates that the switch port has no physical link to an active network device)</p></li>
        <li><p class="bullet"><strong>Vlan:</strong> The VLAN ID, which indicates the VLAN port membership</p></li>
        <li><p class="bullet"><strong>Duplex:</strong> The duplexing mode of the connection, which can be <strong>a-full</strong> (auto-negotiation full-duplex), <strong>a-half</strong> (auto-negotiation half-duplex), <strong>full</strong> (manual full-duplex), or <strong>half</strong> (manual half-duplex)</p></li>
        <li><p class="bullet"><strong>Speed:</strong> The speed at which the connection is negotiated or configured, which can be <strong>a-1000</strong> (auto-negotiation 1Gbps), <strong>a-100</strong> (auto-negotiation 100Mbps), <strong>a-10</strong> (auto-negotiation 10Mbps), <strong>1000</strong> (manual 1Gbps), <strong>100</strong> (manual 100Mbps), or <strong>10</strong> (manual 10Mbps)</p></li>
        <li><p class="bullet"><strong>Type:</strong> The physical connection type of the interface, which can be <strong>100BaseTX</strong> (100Mbps copper), <strong>1000BaseTX</strong> (1Gbps copper), <strong>100BaseFX</strong> (100Mbps fiber), <strong>1000BaseSX</strong> (1Gbps multimode fiber), or <strong>1000BaseLX</strong> (1Gbps single-mode fiber)</p></li>
        </ul>
        <p class="noindent"><span epub:type="pagebreak" id="page_431"></span>The following example shows output from a Cisco switch:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p431pro01a" id="p431pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>sh interface status</strong>
        Port     Name        Status      Vlan   Duplex    Speed     Type
        Gi0/1    Main feed   connected   1      a-full    a-1000    1000BaseLX
        Gi0/2    BuildingA   connected   2      a-full    a-1000    1000BaseSX
        Gi0/3    BuildingB   connected   2      a-full    a-1000    1000BaseSX
        Gi0/4    BuildingC   connected   1      a-full    a-1000    1000BaseSX
        Gi0/5                notconnect  1      auto      auto      unknown
        Gi0/6                notconnect  1      auto      auto      unknown
        </pre>
        <p class="noindent">This output shows the status of GigabitEthernet interfaces 0/1 to 0/6, where only Gi0/1–Gi0/4 have connections. All the ports are configured to be auto-negotiated. All the active ports are connected at 1Gbps full-duplex. The physical connection on GigabitEthernet0/1 is <strong>1000BaseLX</strong>, which indicates a single-mode fiber-type connection; the rest of the active ports are using multimode fiber-type connectors (<strong>1000BaseSX</strong>). GigabitEthernet0/1 and GigabitEthernet0/4 are configured to be members of VLAN 1, and GigabitEthernet0/2 and GigabitEthernet0/3 are members of VLAN2. Because GigabitEthernet0/5 and GigabitEthernet0/6 are not used, their statuses are shown as <strong>notconnect</strong>, and their types are <strong>unknown</strong>. The output shows that these two ports are configured to be auto-negotiated, and they are configured to be members of VLAN 1.</p>
        <div class="note">
        <p class="note-t">Note</p>
        <p class="box-para">It is very important to pay attention to VLAN port assignments as they report the configured VLAN membership of each switch port. A computer can be connected to a switch port and the interface status can be connected, but the computer may still be unable to access the network. This could be a result of a VLAN mismatch, where the computer is connected to the incorrect VLAN. This is a very common issue for network administrators.</p>
        </div>
        <p class="noindent">The duplex and speed are good information when you’re troubleshooting performance issues. When the reported duplex or speed does not match what the NIC is using, the result is performance degradation due to collisions and packet drops. Most NICs are typically left to auto-negotiate their speed and duplex. If auto-negotiation is configured at the switch interface and at the device NIC, then it will be no problem because auto-negotiation will do its job and find the proper speed and duplex. Issues arise when one end is configured to use auto-negotiation and the other end is not or when both ends are configured for manual duplex and speed and their settings do not match. It is a good fundamental troubleshooting practice to make sure the duplex and speed of the connection are matched at both ends.</p>
        <p class="noindent">When a network device is connected to an available port and the physical link is successful, messages are displayed on the switch console. The following example shows the messages displayed for GigabitEthernet0/5, indicating that the interface has successfully linked with an active network device:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p431pro02a" id="p431pro02">Click here to view code image</a></p>
        <pre class="pre1">2w0d: %LINK-3-UPDOWN: Interface GigabitEthernet 0/5, changed state to up
        <strong>2w0d: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet
         0/5,</strong><br>
        changed state to up
        </pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_432"></span>For a detailed view of a particular switch port, you can use the command <strong>sh int [</strong><em>Interface_ID</em><strong>]</strong>, as shown in this example:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p432pro01a" id="p432pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>sh int GigabitEthernet1/0/2</strong>
        GigabitEthernet1/0/2 is up, line protocol is up (connected)
          Hardware is Gigabit Ethernet, address is 6c9c.ed9f.4402 (bia 6c9c.ed9f.4402)
          Description: reserved for Data
          MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec,
             reliability 255/255, txload 1/255, rxload 1/255
          Encapsulation ARPA, loopback not set
          Keepalive set (10 sec)
          Full-duplex, 1000Mb/s, media type is 10/100/1000BaseTX
          input flow-control is off, output flow-control is unsupported
          ARP type: ARPA, ARP Timeout 04:00:00
          Last input never, output 00:00:03, output hang never
          Last clearing of "show interface" counters never
          Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops:
        43088
          Queueing strategy: fifo
          Output queue: 0/40 (size/max)
          5 minute input rate 1000 bits/sec, 2 packets/sec
          5 minute output rate 68000 bits/sec, 35 packets/sec
             25857744 packets input, 15164000519 bytes, 0 no buffer
             Received 149779 broadcasts (144381 multicasts)
             0 runts, 0 giants, 0 throttles
             0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
             0 watchdog, 144381 multicast, 0 pause input
             0 input packets with dribble condition detected
             104281005 packets output, 31296767730 bytes, 0 underruns
             0 output errors, 0 collisions, 1 interface resets
             0 unknown protocol drops
             0 babbles, 0 late collision, 0 deferred
             0 lost carrier, 0 no carrier, 0 pause output
             0 output buffer failures, 0 output buffers swapped out
        </pre>
        <p class="noindent">This is a very useful command for troubleshooting as it provides status details as well as interface errors or alerts. These errors are good indications of possible connection issues between the switch port and the end device, especially if the errors keep incrementing. <a href="ch08.xhtml#ch08tab02">Table 8-2</a> describes some notable errors.</p>
        <figure class="table" id="ch08tab02">
        <figcaption>
        <p class="title-t"><span class="tab_space">TABLE 8-2</span> <strong>Some of the Errors Displayed with the sh int [<em>Interface_ID</em>] Command</strong></p>
        </figcaption>
        <table>
        <thead>
        <tr>
        <th class="borderb"><p class="tab-para">Error</p></th>
        <th class="borderb"><p class="tab-para">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td class="borderb"><p class="tab-para">Input errors</p></td>
        <td class="borderb"><p class="tab-para">The accumulative counter of all input errors that have occurred</p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">CRC</p></td>
        <td class="borderb"><p class="tab-para">CRC (cyclic redundancy checksum) errors that occur when there is an FCS (frame check sequence) mismatch between the sender and the switch, causing an incoming Ethernet frame to be discarded</p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">Giants</p></td>
        <td class="borderb"><p class="tab-para">An illegal Ethernet frame size that exceeds the maximum Ethernet frame size (typically more than 1518 bytes)</p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">Runts</p></td>
        <td class="borderb"><p class="tab-para">An illegal Ethernet frame size that is very small (smaller than 64 bytes)</p></td>
        </tr>
        <tr>
        <td class="borderb"><p class="tab-para">Collisions</p></td>
        <td class="borderb"><p class="tab-para">The number of collisions detected</p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        <span epub:type="pagebreak" id="page_433"></span>
        <p class="noindent">Unlike a router, a switch is an OSI layer 2 device that operates by storing and forwarding MAC addresses. Also, a switch generally services more directly connected network devices than does a router. More populated switch ports mean more network clients, which makes troubleshooting more difficult. So it is very important to know how to isolate network devices. Being able to tell to which switch port a particular network device is connected comes in handy. On a Cisco switch, the switch command <strong>show mac-address-table</strong> (or the command <strong>show mac address-table</strong> on a newer switch) can be used to display the MAC address table of the switch, as shown here:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p433pro01a" id="p433pro01">Click here to view code image</a></p>
        <pre class="pre1">SwitchA# <strong>sh mac address-table</strong>
        VLAN   Mac Addre         Type         Ports
        All    0100.0ccc.cccc    STATIC       CPU
        All    0100.0ccc.cccd    STATIC       CPU
        All    0180.c200.0000    STATIC       CPU
        All    0180.c200.0001    STATIC       CPU
        All    0180.c200.0002    STATIC       CPU
        All    0180.c200.0003    STATIC       CPU
        All    0180.c200.0004    STATIC       CPU
        All    0180.c200.0005    STATIC       CPU
        All    0180.c200.0006    STATIC       CPU
        All    0180.c200.0007    STATIC       CPU
        All    0180.c200.0008    STATIC       CPU
        All    0180.c200.0009    STATIC       CPU
        All    0180.c200.000a    STATIC       CPU
        All    0180.c200.000b    STATIC       CPU
        All    0180.c200.000c    STATIC       CPU
        All    0180.c200.000d    STATIC       CPU
        All    0180.c200.000e    STATIC       CPU
        All    0180.c200.000f    STATIC       CPU
        All    0180.c200.0010    STATIC       CPU
        All    ffff.ffff.ffff    STATIC       CPU
        1      0003.ba53.164d    DYNAMIC      Gi1/0/9
        1      0006.5bf7.6e9a    DYNAMIC      Gi1/0/8
        1      000c.0c01.4711    DYNAMIC      Gi1/0/11
        1      000f.1f64.978b    DYNAMIC      Gi1/0/13
        1      000f.1f64.979f    DYNAMIC      Gi1/0/14
        1      0013.210b.20c8    DYNAMIC      Gi1/0/10
        1      0013.211d.6475    DYNAMIC      Gi1/0/5
        1      0016.3e09.39e7    DYNAMIC      Gi1/0/7
        1      0016.3e32.3198    DYNAMIC      Gi1/0/7
        1      0017.0850.17f0    DYNAMIC      Gi1/0/6
        1      001e.c9b5.1dd2    DYNAMIC      Gi1/0/3
        1      001e.c9b5.1e4f    DYNAMIC      Gi1/0/4
        1      0050.8bc2.5471    DYNAMIC      Gi1/0/12
        1      0060.2e00.529b    DYNAMIC      Gi1/0/1
        1      02d0.6819.1854    DYNAMIC      Gi1/0/2
        Total Mac Addresses for this criterion: 35
        </pre>
        <span epub:type="pagebreak" id="page_434"></span>
        <p class="noindent">A network administrator can use this command to map a network device to a switch port by using its MAC address. The connected device’s MAC address is a dynamic type because it is not stationary or specific to a switch port. When a device moves from one switch port to another, the switch relearns the MAC address’s new location. The switch deletes its old MAC entry and updates its database with the new MAC entry mapping. The static MAC addresses shown previously are those assigned to the switch interfaces. These MAC addresses do not change.</p>
        <p class="noindent">A common task for a network technician is to verify the uptime for a switch to help identify potential problems with switches that might be intermittently resetting. This is the command for viewing the switch uptime:</p>
        <pre class="pre1">switch# <strong>show version</strong></pre>
        <p class="noindent">It is important to check the uptime in order to see if a switch has been rebooting. Rebooting problems can be due to power fluctuations or switch problems. In either case, a network technician needs to know how to identify such a problem and propose a solution. The following is sample output from the <strong>show version</strong> command, which shows that SwitchA has been up for 1 year, 5 weeks, 8 hours, and 24 minutes:</p>
        <p class="codelink"><a href="ch08_images.xhtml#p434pro02a" id="p434pro02">Click here to view code image</a></p>
        <pre class="pre1">ROM: Bootstrap program is Alpha board boot loader
        BOOTLDR: C2960S Boot Loader (C2960S-HBOOT-M) Version 12.2(55r)SE,
        RELEASE SOFTWARE (fc1)
        SwitchA uptime is 1 year, 5 weeks, 8 hours, 24 minutes
        System returned to ROM by power-on
        System restarted at 06:11:00 MDT Sat Jul 12 2014
        System image file is "flash:/c2960s-universalk9-mz.122-<br>55.SE7/c2960s-universalk9-mz.122-55.SE7.bin"
        </pre>
        <aside class="sidebar" epub:type="sidebar">
        <p class="sidebar-title" id="ch8lev2sec15">Section 8-6 Review</p>
        <p class="s-para">This section covers the following Network+ exam objectives.</p>
        <p class="s-paran">1.6 Explain the use and purpose of network services.</p>
        <p class="s-para"><span epub:type="pagebreak" id="page_435"></span><em>This section talks about the importance of being able to tell to which switch port a particular network device is connected. On a Cisco switch, the switch command</em> <strong><em>show mac-address-table</em></strong> <em>(or the command</em> <strong><em>show mac address-table</em></strong> <em>on a newer switch) can be used to display the MAC address table of the switch.</em></p>
        <p class="s-paran">1.7 Explain basic corporate and datacenter network architecture.</p>
        <p class="s-para"><em>The command</em> <strong><em>show interface status</em></strong> <em>(or</em> <strong><em>sh int status</em></strong><em>) outputs switch port information such as the physical connection type—for example, 100Mbps copper or 1Gbps multimode fiber (</em><strong><em>1000BaseSX</em></strong><em>) or 1Gbps single-mode fiber (</em><strong><em>1000BaseLX</em></strong><em>).</em></p>
        <p class="s-paran">2.3 Given a scenario, configure and deploy common Ethernet switching features.</p>
        <p class="s-para"><em>This section presents an example of using the switch command</em> <strong><em>show mac-address-table</em></strong> <em>(or the command</em> <strong><em>show mac address-table</em></strong> <em>on a newer switch) to display the MAC address table of the switch. This is a very useful troubleshooting tool that a network administrator can use to map a network device to a switch port by using its MAC address.</em></p>
        <p class="s-paran">3.1 Given a scenario, use the appropriate statistics and sensors to ensure network availability.</p>
        <p class="s-para"><em>This section examines the use of the</em> <strong><em>show ip interface brief</em></strong> <em>and</em> <strong><em>show interface status</em></strong> <em>commands and how to interpret their output for a switch.</em></p>
        <p class="s-paran">5.2 Given a scenario, troubleshoot common cable connectivity issues and select the appropriate tools.</p>
        <p class="s-para"><em>This reminds you to look at the most rudimentary way to troubleshoot connectivity issues: Be sure to check the physical connections—cables, physical equipment, and network connection LED status indicators. This type of troubleshooting is fondly referred to as “checking the blinking lights.”</em></p>
        <p class="sidebar-title1" id="ch8lev2sec16">Test Your Knowledge</p>
        <ol class="number">
        <li><p class="num">True or false: Unlike a router, a switch is an OSI layer 2 device that operates by storing and forwarding MAC addresses.</p></li>
        <li><p class="num">On a switch, static MAC addresses are best characterized by which of the following?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><span epub:type="pagebreak" id="page_436"></span>They are dynamic and change as the device changes interface ports.</p></li>
        <li><p class="alpha">They are assigned to a specific interface and do not change.</p></li>
        <li><p class="alpha">They are not stationary for a switch port.</p></li>
        <li><p class="alpha">All of these answers are correct.</p></li>
        </ol></li>
        </ol>
        </aside>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec8">Summary</h3>
        <p class="noindent">This chapter presents the fundamentals of VLANs and switch configuration. It also introduces Spanning Tree Protocol and the process of selecting a root bridge. It also covers the operation of Power over Ethernet. You should understand the following concepts presented in this chapter:</p>
        <ul class="bullet">
        <li><p class="bullet">The three types of VLANs</p></li>
        <li><p class="bullet">The basics of switch configuration and static VLAN configuration</p></li>
        <li><p class="bullet">Spanning Tree Protocol</p></li>
        <li><p class="bullet">The operation of PoE and PoE+</p></li>
        <li><p class="bullet">Best practices for switch configuration</p></li>
        </ul>
        </section>
        <section>
        <h3 class="h3" id="ch8lev1sec9">Questions and Problems</h3>
        <section>
        <h4 class="h4" id="ch8lev2sec17">Section 8-2</h4>
        <ol class="number">
        <li><p class="num">What is a VLAN?</p></li>
        <li><p class="num">List the three types of VLANs.</p></li>
        <li><p class="num">When a port is not assigned to any VLAN, is it still a member of a VLAN?</p></li>
        <li><p class="num">What is an advantage of using VLANs?</p></li>
        <li><p class="num">What is a port-based VLAN?</p></li>
        <li><p class="num">What is a tag-based VLAN?</p></li>
        <li><p class="num"><span epub:type="pagebreak" id="page_437"></span>What is a protocol-based VLAN?</p></li>
        <li><p class="num">What is a VLAN ID?</p></li>
        <li><p class="num">What are the two approaches for assigning VLAN membership? Explain the function of each.</p></li>
        </ol>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec18">Section 8-3</h4>
        <ol class="number" start="10">
        <li><p class="num">What is the purpose of the enable secret for a switch?</p></li>
        <li><p class="num">What commands would you use to assign the IP address 192.168.20.5 to VLAN 1?</p></li>
        <li><p class="num">What switch command would you use to display the interfaces assigned to a VLAN?</p></li>
        <li><p class="num">What is the purpose of a VLAN database?</p></li>
        <li><p class="num">List the commands used to create VLAN 5 and name this VLAN Marketing-group.</p></li>
        <li><p class="num">List the commands used to assign FA0/5 to the Marketing-group VLAN (VLAN 5). Show the switch prompts.</p></li>
        <li><p class="num"><span epub:type="pagebreak" id="page_438"></span>What command is used to display the port assignments for the Software-Development VLAN? List both the prompt and the command.</p></li>
        <li><p class="num">List the commands used to configure the IP address for the default interface VLAN 1. The IP address should be set to 10.10.20.1 with subnet mask 255.255.255.0.</p></li>
        </ol>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec19">Section 8-4</h4>
        <ol class="number" start="18">
        <li><p class="num">What is the purpose of Spanning Tree Protocol?</p></li>
        <li><p class="num">What is a BPDU, and what is its purpose?</p></li>
        <li><p class="num">Discuss how a root switch is elected.</p></li>
        <li><p class="num">What are the five STP protocol states?</p></li>
        <li><p class="num">A BPDU data packet shows that the hello time is 2.0 seconds. What information does this provide?</p></li>
        <li><p class="num"><span epub:type="pagebreak" id="page_439"></span>A BPDU data packet lists the forward delay as 15 seconds. What information does this provide?</p></li>
        </ol>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec20">Section 8-5</h4>
        <ol class="number" start="24">
        <li><p class="num">What are the two types of devices defined by PoE?</p></li>
        <li><p class="num">What should you check if you are installing a Power over Ethernet connection using computer equipment from two different manufacturers?</p></li>
        <li><p class="num">List four benefits of Power over Ethernet.</p></li>
        <li><p class="num">What is resistive power discovery, and how does it work?</p></li>
        <li><p class="num">Which wire pairs are used in PoE?</p></li>
        <li><p class="num">How much power can a Class 0 PD PoE device source?</p></li>
        <li><p class="num">What are the benefits of PoE+?</p></li>
        </ol>
        <span epub:type="pagebreak" id="page_440"></span>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec21">Section 8-6</h4>
        <ol class="number" start="31">
        <li><p class="num">How does the <strong>show ip interface brief</strong> command differ for a switch and a router?</p></li>
        <li><p class="num">What does the following information indicate if the <strong>show interfaces status</strong> command is entered on a switch?</p>
        <p class="codelink"><a href="ch08_images.xhtml#p440pro01a" id="p440pro01">Click here to view code image</a></p>
        <pre class="pre1">Gi0/2        notconnect   1      auto   auto unknown</pre></li>
        <li><p class="num">The <strong>show interface status</strong> command is entered on a switch. What does it mean if the switch interface’s status shows <strong>connect</strong>?</p></li>
        <li><p class="num">What command is used to display the MAC address of a switch port?</p></li>
        <li><p class="num">If the command <strong>show ip int brief</strong> shows the interface status <strong>administratively down</strong> and the protocol status <strong>down</strong>, what will be the status of the port reported by the command <strong>show int status</strong>?</p></li>
        </ol>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec22">Critical Thinking</h4>
        <ol class="number" start="36">
        <li><p class="num">Your supervisor asks you if a layer 2 switch could be used in the core of the campus network. Prepare a response to your supervisor. Be sure to justify your recommendation.</p></li>
        <li><p class="num">A 10Gbps data link is to be set up between building A and building B in a campus network. Does it matter if the link is fiber or microwave or some other medium? Explain your answer.</p>
        <p class="num"><span epub:type="pagebreak" id="page_441"></span></p></li>
        <li><p class="num">You’ve just configured an IP VLAN interface on a switch, and the interface is not up. How do you troubleshoot the issue?</p></li>
        </ol>
        </section>
        <section>
        <h4 class="h4" id="ch8lev2sec23">Certification Questions</h4>
        <ol class="number" start="39">
        <li><p class="num">You are a network administration and have been asked to create a VLAN called Administrator. What command do you use on a Cisco switch to create the Administrator VLAN as VLAN 2?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><code>SwitchA# <strong>vlan</strong></code></p>
        <p class="alpha"><code>Switch# <strong>vlan</strong> <strong>2 name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>vlan</strong></code></p>
        <p class="alpha"><code>Switch(data)# <strong>vlan 2 name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA(config)# <strong>vlan 2</strong></code></p>
        <p class="alpha"><code>Switch(config-vlan)# <strong>name Administrator</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>vlan database</strong></code></p>
        <p class="alpha"><code>Switch(vlan)# <strong>vlan name Administrator</strong></code></p></li>
        </ol></li>
        <li><p class="num">You are configuring a switch so that a specific port on the switch is assigned to VLAN 3. What command do you use to assign FastEthernet port 0/4 to VLAN 3 on a Cisco switch?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><code>Switch(config)# <strong>int fa 0/4</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport mode access</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport access vlan 3</strong></code></p></li>
        <li><p class="alpha"><code>Switch(config)# <strong>int fa 0/4</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport mode access</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport access 3</strong></code></p></li>
        <li><p class="alpha"><code>Switch(config)# <strong>int fa 0/4</strong></code></p>
        <p class="alpha"><code>Switch(config)# <strong>switchport mode access</strong></code></p>
        <p class="alpha"><span epub:type="pagebreak" id="page_442"></span><code>Switch(config-if)# <strong>switchport access vlan 3</strong></code></p></li>
        <li><p class="alpha"><code>Switch(config)# <strong>int fa 0/4</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport mode access 3</strong></code></p>
        <p class="alpha"><code>Switch(config-if)# <strong>switchport access vlan</strong></code></p></li>
        </ol></li>
        <li><p class="num">You are cabling a UTP connection to a switch that will also be used for supplying power via Power over Ethernet. The power to the PoE devices is provided using which of the following pairs? (Select all that apply.)</p>
        <ol class="lower-alpha">
        <li><p class="alpha">1–3 and 4–6</p></li>
        <li><p class="alpha">1–6 and 5–8</p></li>
        <li><p class="alpha">1–2 and 3–6</p></li>
        <li><p class="alpha">4–5 and 7–8</p></li>
        </ol></li>
        <li><p class="num">The source port of an Ethernet switch that connects to a PD is an example of which of the following?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">A midpoint PSE</p></li>
        <li><p class="alpha">An endpoint PSE</p></li>
        <li><p class="alpha">A start PSE</p></li>
        <li><p class="alpha">None of these answers are correct.</p></li>
        </ol></li>
        <li><p class="num">Switches use bridge protocol data units for which of the following? (Select all that apply.)</p>
        <ol class="lower-alpha">
        <li><p class="alpha">To select ports that are part of STP</p></li>
        <li><p class="alpha">To calculate the longest distance to a root switch</p></li>
        <li><p class="alpha">To elect a root switch for the spanning tree network topology</p></li>
        <li><p class="alpha">To remove redundant data paths</p></li>
        </ol></li>
        <li><p class="num">What is the purpose of a VLAN?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">A VLAN is a group of host computers and servers that are configured as if they are not in the same LAN even if they reside across routers.</p></li>
        <li><p class="alpha">A VLAN is a group of host computers and servers that are configured as if they are in the same LAN even if they reside across routers.</p></li>
        <li><p class="alpha">A VLAN is a group of host computers and servers that are configured as if they are in the same LAN even if they reside across switches.</p></li>
        <li><p class="alpha">A VLAN is a group of host computers and servers that are configured as if they are not in the same LAN even if they reside across switches.</p></li>
        </ol></li>
        <li><p class="num">Your supervisor asks you to create a port-based VLAN to support the development group. Specifically, you are being asked to do which of the following?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><span epub:type="pagebreak" id="page_443"></span>Use the 802.1Q protocol for VLAN assignment.</p></li>
        <li><p class="alpha">Assign specific ports on a switch to a specific VLAN.</p></li>
        <li><p class="alpha">Specify which protocols control port assignment.</p></li>
        <li><p class="alpha">Specify which ports will share broadcasts.</p></li>
        </ol></li>
        <li><p class="num">A network administrator is configuring a VLAN named Development. Which of the following shows how to create this VLAN?</p>
        <ol class="lower-alpha">
        <li><p class="alpha"><code>SwitchA vlan database</code></p>
        <p class="alpha"><code>Switch(vlan)# <strong>vlan 2 name Development</strong></code></p>
        <p class="alpha"><code>VLAN 2 modified:</code></p>
        <p class="alpha"><code>  Name: Sales</code></p></li>
        <li><p class="alpha"><code>SwitchA(config)# <strong>vlan 2</strong></code></p>
        <p class="alpha">  <code>Switch(config-vlan)# <strong>name Development</strong></code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>vlan</strong></code></p>
        <p class="alpha"><code>  Switch(int-vlan)# <strong>vlan 2 name Development</strong></code></p>
        <p class="alpha">    <code>VLAN 2 modified:</code></p>
        <p class="alpha"><code>     Name: Sales</code></p></li>
        <li><p class="alpha"><code>SwitchA# <strong>vlan</strong></code></p>
        <p class="alpha"><code>Switch(config-vlan)# <strong>vlan 2 name Development</strong></code></p>
        <p class="alpha"><code>  VLAN 2 modified:</code></p>
        <p class="alpha"><code>    Name: Sales</code></p></li>
        </ol></li>
        <li><p class="num">A network administrator sees that the following data packet has been sent: <strong>BPDU Config BID=0030194A6940 PID=0x801B</strong>. What is the purpose of this data packet?</p>
        <ol class="lower-alpha">
        <li><p class="alpha">This BPDU indicates the peripheral interface device (<strong>PID=0x801B</strong>) requesting a data packet.</p></li>
        <li><p class="alpha">This BPDU indicates the peripheral interface device (<strong>PID=0x801B</strong>) requesting to send a data packet.</p></li>
        <li><p class="alpha"><strong>Config</strong> indicates that this is a configuration BPDU, which is used by the switches to elect the root switch.</p></li>
        <li><p class="alpha"><strong>Config</strong> indicates that this is a static BPDU, which is configured by the user that connects to the root bridge.</p></li>
        </ol></li>
        </ol>
        </section>
        </section>
        </section>
        </div></div><link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780137455911/files/9780137455799.css" crossorigin="anonymous"></div></div></section>
</div>


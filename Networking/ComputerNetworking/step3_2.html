<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><h2 class="h2" id="ch22"><a id="page_591"></a><strong>Chapter 22<br>Network Design Patterns</strong></h2>
        <div class="sidebar">
        <p class="sb-noindent"><strong>Learning Objectives</strong></p>
        <p class="sb-noindent">When you are finished reading this chapter, you should understand:</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The relationship between business problems and network design</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The different network ownership models</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> How network investment cycles relate to waste</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> What a choke point is and how it is used in network design</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> How hierarchical design is used</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> Common network topologies</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The concepts of planar, nonplanar, and regular topologies</p>
        </div>
        <p class="noindent">After “yet another outage,” a large service provider called on its primary vendor with a demand: <em>send these 16 (specific, by name) people to our office for one week so they can redesign our network and prevent this kind of outage from ever happening again</em>. On hearing of the plan, one of the 16 engineers chosen for the “field trip” convinced the vendor’s management not to send such a large group of designers in to rebuild this network. The reason? <em>When you get 16 designers in a room, what you will have is 1 person drawing on the white board, and the other 15 erasing</em>.</p>
        <p class="indent">This story encapsulates one of the primary truths about network design: there is no <em>one right way</em> to design a network. Of course, there are <em>better</em> designs and <em>worse designs</em>, but the protocols and systems that networks are built out of are designed <a id="page_592"></a>to be very forgiving in the face of imperfect conditions. If they were not, networks would be very fragile, failing completely with the first network device or link failure. So, given you can pretty much “slap stuff together” and “make it work,” what makes a design better or worse? This chapter will focus on answering this question.</p>
        <p class="indent">Getting to the answer, however, will require working through a range of ideas and concepts, beginning with the problem space itself.</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev1">The Problem Space</h3>
        <p class="noindentb">What problem are designers trying to solve? While this might seem like an obvious question, it is far too often forgotten in the design process. What generally happens is this:</p>
        </div>
        <p class="indenthangingN">1. Engineers are given a set of objectives to fulfill.</p>
        <p class="indenthangingN">2. A rough sketch is made of two or three possible solutions.</p>
        <p class="indenthangingN">3. These two or three solutions are considered and compared at a technical level.</p>
        <p class="indenthangingN">4. A solution is chosen, and the equipment and configurations are determined and deployed.</p>
        <p class="indentt">This is not a <em>bad</em> process, necessarily; rather, this process tends to take some points that should be considered in every step and push them into a “corner.” Once the first stage is passed, it is <em>never revisited</em>. Just like security is often left to the last, the larger questions of network design are often pushed to the first part of the process, and forgotten about when the real “geek-level stuff” of selecting equipment and building configurations arrives. It is better to use the basic problem set as a backdrop in <em>every</em> stage of the design.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev2"><strong>Solving Business Problems</strong></h4>
        <p class="noindent">The network exists to solve business and real-world problems. When you are in the thick of choosing which forwarding engine is better, or which network software package has the greatest number of features, what is the fundamental question that network design needs to answer—the one that should be kept in mind at every stage of the design process?</p>
        </div>
        <p class="blockquote"><strong>What is the least expensive and most flexible way to provide transport for the applications required to solve a real-world problem?</strong></p>
        <p class="indent"><a id="page_593"></a>This single question has many components, of course; it is worth looking at some of them in more detail.</p>
        <p class="indent">What does the least expensive really mean? This is actually a difficult question with many different facets—and any answer given is probably the result of a good deal of crystal ball gazing and reliance on assumptions. Some expenses that engineers often remember to include are</p>
        <p class="bullt">• <strong>Hardware:</strong> The cost of the actual, physical devices, cabling, power, racks, and other gear required to physically build the network. This should include the cost of physical devices to connect the network through providers, for instance, spare equipment and tools.</p>
        <p class="bull">• <strong>Software:</strong> The cost of licenses for the network operating system, routing stack, monitoring tools, and any ongoing maintenance costs.</p>
        <p class="bullb">• <strong>Services:</strong> The cost of having a technical assistance center to call, design services, offsite backup services, etc.</p>
        <p class="indent">These kinds of costs, both in terms of capital expenses (CAPEX) and operational expenses (OPEX) are generally well understood, even if they are difficult to predict. A number of costs, however, are not generally included in any sort of planning, nor are they even well understood.</p>
        <p class="indent">Many of these can be described as different forms of opportunity costs, and they often revolve around difficult operations and network modification driven by design complexity. Specifically, during the time it takes to bring the network up, modify the network, or troubleshoot and repair the network when there is a failure, the network is either not operational or is not fully supporting the business.</p>
        <p class="indent">The key problem with opportunity costs is how difficult they are to measure. Content providers, for instance, tend to have very good systems for measuring the impact of a less than optimal network, because it is actually possible to translate slower page speed (for instance) to reduced engagement or reduced product purchases (the conversion rate). The key is to learn the specific business that the network you are building supports, and find some way to measure the impact of a network running in a less than optimal way. This kind of feedback comes back to the network engineering team as a set of unquantifiable complaints far too often. As a network engineer, you cannot wait for your customers to complain to find creative ways to measure how effective the network is at supporting the business. You must be proactive in this area, especially if you expect to convert the network from a cost center into a strategic asset for the company.</p>
        <p class="indent">What does the most flexible really mean? Networks tend to be sold as “multiple-use systems,” meaning they can support any application and any change <a id="page_594"></a>in the business. In real life, however, this is rarely true. There are two enemies of flexibility in network design: <em>ossification</em> and <em>the forklift</em>.</p>
        <p class="indent">Ossification is the process of hardening (petrification) that turns wood, bones, and even sacks of flour into stone. What was originally a pliable, changeable object becomes something difficult to modify, and prone to massive, degenerative, and often unexpected failure states. Networks ossify over time, as well, in several ways:</p>
        <p class="bullt">• New systems are layered on top of old, creating interaction surfaces, which are difficult to understand, difficult to troubleshoot, and difficult to replace.</p>
        <p class="bull">• The network is successively tuned to meet the requirements of an ever-expanding array of applications and requirements. On the other hand, as older applications and requirements are removed, the corresponding tweaks and nerd knobs are not removed from the network. The resulting accretion of configuration often goes undocumented, and also creates a lot of state and unnecessary interaction surfaces in the network.</p>
        <p class="bullb">• Network architectures are often built at the intersection of vendor designs and products, “industry best practices,” and business needs. Vendors are (understandably) constantly trying to build future sales into current sales, and to convert the entire vertical to their product. At the same time, business leadership is often out reading reports and articles telling them about the latest trends and offerings, and then asking, “Why don’t we deploy these?” The result is a crucible of politics, trends, and practical considerations, often resulting in a less than optimal design, particularly in the area of flexibility.</p>
        <p class="indent">Ossified systems are generally fragile; while they appear to be “rock solid” from the outside, they break unexpectedly, and far too easily, in the face of what might appear to be small amounts of change or pressure.</p>
        <p class="indent">The forklift is a related but different problem in building flexible networks. The first half of the forklift problem is the general tendency to build networks out of appliances containing all the hardware and software in a single appliance; a router is purchased as a single appliance containing the routing protocols, the forwarding software and hardware, the power and cooling components, etc. This tie between the various parts of the system tends to result in strong vertical integration. While many systems from many different vendors will work together in a significant way, most vendor-driven appliance-based systems will enable special features and modes of operation only when their appliances are used in a single vendor environment.</p>
        <p class="indent">The process of upgrading such systems usually involves a forklift—hence the industry shorthand a <em>forklift upgrade</em>. To change the control plane architecture, the entire device must be replaced. If the control plane acts as an integrated whole in <a id="page_595"></a>some way, with special features available just on a small range of devices, the entire network must be forklift upgraded. This is a challenging situation, to say the least. Networks designed for the maximum flexibility are designed, instead, using some form of disaggregation. <a href="ch22.xhtml#ch22fig01">Figure 22-1</a> illustrates.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig01.jpg" aria-describedby="Al22fig01" alt="Network ownership is depicted in the illustration." width="389" height="219"><aside class="hidden" id="Al22fig01">
        <p>Illustration shows four rectangular boxes which reads, control plane, routing stack, network operating system, and hardware. An arrow enclosing all the four boxes reads, vendor driven. An arrow enclosing the last three boxes reads, open standards. An arrow enclosing the last two boxes reads, disaggregated. An arrow enclosing the last box reads, hardware.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig01"></a><strong>Figure 22-1</strong> <em>Network ownership</em></p>
        </div>
        <p class="indent"><a href="ch22.xhtml#ch22fig01">Figure 22-1</a> illustrates a number of different options in terms of <em>network ownership</em>:</p>
        <p class="bullt">• If you buy everything needed to build the network, including using vendor-proprietary extensions to the control plane, then your network is vendor driven. In this case, if the vendor changes its product architecture, or the philosophy behind its control plane in order to support some new network architecture, then you must change your network design to follow the vendor.</p>
        <p class="bull">• You can, instead, buy all your hardware and software from vendors, but use open-standards-based protocols to interconnect the equipment and build a network. Theoretically, this should make your network vendor independent (although it does not always work out this way in real life). When you are deploying this kind of network, it is important to keep up with new standards, and whether new features implemented by a single vendor are implemented in a way that allows routers from multiple vendors to successfully interoperate.</p>
        <p class="bull">• In the disaggregated model, you might purchase a network operating system and hardware from one or more vendors, and rely on an open source (whether “tweaked” for your network or not) implementation of the routing stack. There are various other “modes” within this model, as well, such as relying on an open source network operating system as well as an open source routing stack, or perhaps relying on an open source network operating system and creating your own control plane.</p>
        <p class="bullb">• In the roll your own model, you are just buying hardware from a vendor—and perhaps you are even giving the vendor a set of standards to build hardware to.</p>
        <div class="note">
        <p class="title"><a id="page_596"></a><strong>Note</strong></p>
        <p class="notepara">In the real world, the model that most network operators use might be called old and moldy, which means you buy your equipment and leave it in place until it falls apart. This is the “normal” way of managing network growth and management over time for a lot of operators.</p>
        </div>
        <p class="indent">None of these models are as clear cut as <a href="ch22.xhtml#ch22fig01">Figure 22-1</a> implies; there are many different gradations between these various models. The important point for you, as a network engineer, designer, or architect, is to understand there are many other options than simply purchasing from a vendor. It is important to choose a model that provides the most value and flexibility for your company, rather than simply relying on what other companies are doing, or what has been done before.</p>
        <p class="indent"><a href="ch22.xhtml#ch22fig02">Figure 22-2</a> illustrates another problem in the area of flexibility and fit to business in network design.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig02.jpg" aria-describedby="Al22fig02" alt="An illustration depicts the waste and lost opportunity in the area of flexibility." width="416" height="337"><aside class="hidden" id="Al22fig02">
        <p>Illustration shows two graphs: a line graph and a step graph. The line graph increases steadily and the peak point is marked business size. The peak point of the step graph is marked network size.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig02"></a><strong>Figure 22-2</strong> <em>Waste and lost opportunity in network scaling flexibility</em></p>
        </div>
        <p class="indent"><a href="ch22.xhtml#ch22fig02">Figure 22-2</a> illustrates company and network size (or capacity) overlaid on top of one another. Networks, particularly appliance-driven networks, tend to be upgradable only in large chunks, and often through some form of forklift upgrade. The business, on the other hand, tends to grow in spurts, with occasional retrenchment. When the business size and network capability are mismatched—which is almost all the time in the real world—one of two situations is occurring:</p>
        <p class="bullt">• The network is undersized, which holds the business back from being able to support as many customers, or as much operational load; this creates an opportunity cost.</p>
        <p class="bullb"><a id="page_597"></a>• The network is oversized, which means money is being spent unnecessarily— money invested in infrastructure that could have (most likely) been invested in some other way more profitably. This is another form of opportunity cost.</p>
        <p class="indent">The more flexible a network design is, the more the network engineering staff will be able to make the business size and the network capacity track closely. This can reduce waste and lost opportunity.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev3"><strong>Translating Business Requirements into Technical</strong></h4>
        <p class="noindent">Understanding the business side and translating business requirements into technical solutions are two different things. What tools does the network designer have to apply these business problems to network design? Modularity is the primary tool; just as nature often places a choke point between complex systems, network designers use choke points to separate complexity from complexity in network designs. <a href="ch22.xhtml#ch22fig03">Figure 22-3</a> illustrates this concept.</p>
        </div>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig03.jpg" aria-describedby="Al22fig03" alt="Illustration depicts the concept of modularity." width="449" height="246"><aside class="hidden" id="Al22fig03">
        <p>Illustration shows three circles labeled module 1, module 2, and module 3. The circles are connected by a black dot. The dots are labeled choke point 1.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig03"></a><strong>Figure 22-3</strong> <em>Modularity</em></p>
        </div>
        <p class="indent">The idea behind modularity is to split up a single problem into multiple pieces, solving each piece separately, and then using a set of connectors to allow information to flow edge to edge in the overall system. This concept is used almost everywhere in network engineering; you might recognize at least the following:</p>
        <p class="bullt">• Layering protocols into functional and topological units; in Day’s RINA model, there are two protocols, each with two functions, layered on top of one another. There are a pair of such protocols across each link, between each pair of hosts, and between each pair of applications.</p>
        <p class="bull">• Building layers of virtual topologies on top of a single physical topology. Complexity is controlled by carrying a subset of the topology and reachability information in each virtual topology, and restricting policy to the destinations attached to the virtual topology.</p>
        <p class="bullb"><a id="page_598"></a>• Breaking up a network into flooding domains in a link state protocol, and patching the network back together with L1/L2 intermediate systems, or Area Border Routers. The flooding domain boundary represents the boundary at which the topology information is summarized, and reachability information may potentially be.</p>
        <p class="indent">Information hiding and modularity are closely related concepts. Any time information is being hidden, modules are being created. Just considering network design, modularizing a network can offer a number of solutions for business problems. Some specific examples:</p>
        <p class="bullt">• Choke points provide a point at which information can be hidden to control the scope and speed of state in the control plane. This, in turn, allows the network to scale.</p>
        <p class="bull">• Choke points provide a point at which packets must move, providing a convenient place to implement packet forwarding policy, such as Quality of Service marking, security-focused filtering, etc.</p>
        <p class="bull">• If modules can be sorted into “classes,” with each class having repeatable designs and configurations within the module, then building at least some parts of the network can be simplified into deploying the right module for a particular purpose. For instance, if modules 1 and 3 in <a href="ch22.xhtml#ch22fig03">Figure 22-3</a> are both campus networks of a similar size and scope, then they can be built in the same way, saving design and deployment effort. Repeatable modules also help make the network scale more closely with the business, as modules can be added or removed as complete units as needed.</p>
        <p class="bullb">• Modules can be sorted into “generations,” with newer designs replacing modules using older modules over time. This can help reduce the impact of the forklift upgrade problem, and hence allow the network to be more flexible in the face of business changes.</p>
        <p class="indent">With all the positive points around modularization, are there negatives? In all areas of network design, it is important to remember:</p>
        <p class="blockquote"><strong>If you have not found the tradeoff, you have not looked hard enough.</strong></p>
        <p class="indent">Although you have probably read this statement several times in this book, it applies to so many areas of network design and operation, it is well worth repeating. Several rules of thumb might be helpful.</p>
        <p class="indent"><a id="page_599"></a><em>The first is the size of the modules</em>. If you make the modules too large, you are (probably) reducing the repeatability, not giving yourself enough places to hide information (which harms scaling), and not giving yourself enough places to insert policy into the network. If you make the modules too small, you reduce the effectiveness of the information hiding process. Finding the proper size is much like finding porridge that is just the right temperature—there is no clear-cut answer (or, perhaps a better answer, how many balloons fit in a bag?).</p>
        <p class="indent"><em>The second is the optimization tradeoff</em>. Each time you hide information, you (more than likely) lose some form of optimization in the network. This is a fundamental rule, built into network and protocol design just because of the shape of reality.</p>
        <p class="indent"><em>The third is using network complexity as your guide in determining where to place module boundaries</em>. In general, the best rule here is to separate complexity from complexity. For instance, if you have a large-scale spine and leaf data center fabric connected to a large partial mesh network core, it is probably best to put them into two different modules.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev4"><strong>What Is a Good Network Design?</strong></h4>
        <p class="noindent">Finally, with this background, it is possible to return to the original question this chapter began by asking: what is a good network design? The first point should be obvious: it should fulfill the business requirements laid out previously. This means the network should provide the connectivity needed to run the business at the lowest practical cost, and it should be easily adaptable to the size and scope of the business. Flexibility inherently implies scale, as well.</p>
        </div>
        <p class="indent">A second point is this: good network designs degrade gracefully, rather than falling over a cliff. <a href="ch22.xhtml#ch22fig04">Figure 22-4</a> illustrates.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig04.jpg" aria-describedby="Al22fig04" alt="Illustration depicts the network degradation styles." width="543" height="220"><aside class="hidden" id="Al22fig04">
        <p>Illustration shows a degrading dashed line which is labeled gradual degradation and another line which increases steadily and slopes down at a point which is labeled rapid degradation (the cliff).</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig04"></a><strong>Figure 22-4</strong> <em>Network degradation styles</em></p>
        </div>
        <p class="indent">Any system that performs well under one set of conditions and fails to adapt to any change under less than optimal conditions is fragile; it has either ossified, or <a id="page_600"></a>it was initially poorly designed. Another term sometimes applied to these sorts of systems is Robust Yet Fragile, which means these systems are apparently robust, and yet truly fragile under the right conditions.</p>
        <p class="indent">A third point is this: good network designs allow operational staff to quickly find and repair failures. In other words, good network design interacts with the Mean Time to Repair (MTTR).</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev5">Hierarchical Design</h3>
        <p class="noindent">The rules of thumb on how to break up a network into modules are a good start, but they do not give you an entire picture. While they do give you a good set of ideas around what the goals of modularization should be, they do not provide a framework grounded in an intentional, systemic view of the network. Hierarchy is one design pattern that can be overlaid on top of modularization, or rather one pattern of modularization, and is often used to build large-scale networks. The essential points of modularization are as follows:</p>
        </div>
        <p class="bullt">• Break up the functionality of the network into distinct pieces.</p>
        <p class="bull">• Build modules around each piece, or purpose.</p>
        <p class="bullb">• Connect these modules through a set of special-purpose “interconnection” modules in a roughly hub-and-spoke topology.</p>
        <p class="indent"><a href="ch22.xhtml#ch22fig05">Figure 22-5</a> is used to consider the basic three-layer hierarchical design model, which is often used in medium-scale networks.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig05.jpg" aria-describedby="Al22fig05" alt="Illustration shows a three-layer hierarchical design model." width="714" height="374"><aside class="hidden" id="Al22fig05">
        <p>The three layers are as follows: core, distribution, and access. The core layer has a cloud labeled 1. The distribution layer has four cloud labeled 2, 3, 4, and 5. The access layer has eight clouds labeled 6, 7, 8, 9, 10, 11, 12, and 13. 1 is connected to 2, 3, 4, and 5. 2 is connected to 6 and 7. 3 is connected to 8 and 9. 4 is connected to 10 and 11. 5 is connected to 12 and 13.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig05"></a><strong>Figure 22-5</strong> <em>A three-tier hierarchical design</em></p>
        </div>
        <p class="indent">Module 1 in <a href="ch22.xhtml#ch22fig05">Figure 22-5</a> is the network core. The primary—really the only— function assigned to the core module is to forward traffic as quickly as possible between distribution layer modules. There should be <em>no</em> control plane policy in this core; there should only be forwarding policy aimed at differentiated forwarding rules for Quality of Service and virtualization. This module will tend to be one of the more complex in terms of transports and equipment, and is also “unique” because there is just one core, so offsetting simplification in other areas allows the core to remain maintainable.</p>
        <p class="indent">Modules 2 through 5 are considered the distribution layer. This layer is primarily responsible for carrying traffic within a region and all control plane policy. Each of the four modules in this layer should be as similar as possible; the physical configuration, at least, should be completely repeatable within a generation of each module across the entire network. Standardizing the hardware configuration across all of the modules in the distribution layer simplifies one part of the problem, allowing the <a id="page_601"></a>complexity in this layer to reside in control plane policy, which is normally a complex problem.</p>
        <p class="indent">Modules 6 through 13 reside in the access layer. Modules in the access layer are primarily responsible for providing connections into the network. Because of this, there will likely be many kinds of modules in the access layer. For instance, there may be one kind of module for supporting campus environments, another for supporting data center fabrics, and another for supporting Internet and extranet access. Traffic classification and security access should be focused in this layer of the network. Physical and logical configurations should be as repeatable as possible between modules of the same kind within the access layer.</p>
        <p class="indent">An alternate form of hierarchy is the two-layer hierarchy, often used in smaller networks, illustrated in <a href="ch22.xhtml#ch22fig06">Figure 22-6</a>.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig06.jpg" aria-describedby="Al22fig06" alt="Illustration shows a two-layer hierarchy." width="713" height="282"><aside class="hidden" id="Al22fig06">
        <p>The layer at the top is labeled core and the layer at the bottom is labeled aggregation. The core layer has a cloud which is labeled 1. The aggregation layer has four clouds which is labeled 2, 3, 4, and 5. The cloud 1 is connected to cloud 2, 3, 4, and 5.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig06"></a><strong>Figure 22-6</strong> <em>A two-layer hierarchy</em></p>
        </div>
        <p class="indent">The two-layer hierarchy appears to be a three-layer hierarchy with the access layer removed—but there are other subtle changes involved, as well. The aggregation layer, modules 2 through 5, are primarily responsible for providing connectivity into the network, as well as packet filtering and classification. Security functions also tend to be focused in the aggregation layer. As with the three-layer hierarchy, these modules should be physically and logically repeatable where possible.</p>
        <p class="indent">The core, as in the three-layer model, is focused on forwarding traffic at high speed. The missing piece seems to be control plane policy; in the core/aggregation model, control plane policy is implemented along the edge between the core and aggregation modules.</p>
        <p class="indent"><a id="page_602"></a><a href="ch22.xhtml#ch22fig07">Figure 22-7</a> shows an example of a recursively layered hierarchy, often used in very large-scale networks.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig07.jpg" aria-describedby="Al22fig07" alt="Illustration shows a recursive hierarchy." width="712" height="327"><aside class="hidden" id="Al22fig07">
        <p>The layer at the top is labeled core and the layer at the bottom is labeled aggregation. The core layer has a cloud which is labeled 1. The aggregation layer has four clouds which is labeled 2, 3, 4, and 5. The cloud 1 is connected to cloud 2, 3, 4, and 5. The cloud 2 has a core layer and a aggregation layer. The core layer has a cloud labeled 6. The aggregation layer has three clouds labeled 7, 8, and 9. 6 is connected to 7, 8, and 9.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig07"></a><strong>Figure 22-7</strong> <em>A recursive hierarchy</em></p>
        </div>
        <p class="indent"><a href="ch22.xhtml#ch22fig07">Figure 22-7</a> illustrates what appears to be a simpler core/aggregation hierarchy. Looking more closely at module 2 in the aggregation layer, however, exposes an internal core/aggregation hierarchy, as well. The layer functions are the same; the core within module 2 (6) is focused on forwarding traffic quickly between the different aggregation modules (7 through 9) within module 2; the aggregation modules within module 2 are focused on providing connection, security, and classification; and control plane policy is imposed at the core/aggregation edge. This may appear to be a slightly modified version of a three-layer hierarchy, but there are several important differences:</p>
        <p class="bullt"><a id="page_603"></a>• Regional policy is handled regionally, providing more flexibility in this area. Of course, this also means the modules are less likely to be logically repeatable, so there is more complexity in this kind of design.</p>
        <p class="bullb">• It is possible to build layers within layers more than once; module 6 may contain core and aggregation modules, as well. Because of this, the recursive layering architecture is a very powerful paradigm for building and understanding network topologies.</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev6">Common Topologies</h3>
        <p class="noindent">Another basic pattern in network design is the network topology. While it might seem there would be an infinite number of possible topologies, there are a few basic kinds that this infinite variety will fit into. Control planes tend to converge on any particular topology type based on the basic components—rings, meshes, and triangles. This section will consider a few basic topology types and some of their characteristics.</p>
        </div>
        <div class="heading">
        <h4 class="h4" id="ch22lev7"><strong>Ring Topologies</strong></h4>
        <p class="noindent">Ring topologies are among the simplest to design and understand. They are also the least expensive option, especially when long haul links are involved, so they tend to predominate in wide area networks.</p>
        </div>
        <div class="heading">
        <h5 class="h5" id="ch22level1"><em><strong>Scaling Characteristics</strong></em></h5>
        <p class="noindent">Ring topologies have been scaled to large sizes; the additional cost to add a node is minimal. Generally, one new router (or switch), moving one circuit, and adding another new circuit is all that is needed. With careful planning, the addition of a new node into the ring can be accomplished without any real impact to overall network operations. <a href="ch22.xhtml#ch22fig08">Figure 22-8</a> depicts adding a node to a ring.</p>
        </div>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig08.jpg" aria-describedby="Al22fig08" alt="Illustration depicts adding a node to a ring." width="557" height="197"><aside class="hidden" id="Al22fig08">
        <p>The left section shows four routers A, B, C, and D are connected to each other. The right section shows five routers A, B, C, D, and E are connected to each other. The router E is an added node. A dashed line is shown from router A to D.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig08"></a><strong>Figure 22-8</strong> <em>Adding a node to a ring</em></p>
        </div>
        <p class="indent"><a id="page_604"></a>Adding new nodes to the ring increases the total hop count through the ring (from 4 to 5 in this case), and it does spread the available bandwidth across more devices. However, every device on the ring still has just two neighbors; this constant neighbor count is much of the secret behind the scaling properties of ring networks.</p>
        <p class="indent">As ring size increases, it becomes difficult to manage Quality of Service and optimal traffic flows. <a href="ch22.xhtml#ch22fig09">Figure 22-9</a> illustrates.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig09.jpg" aria-describedby="Al22fig09" alt="Network diagram illustrates traffic engineering in a ring topology." width="477" height="460"><aside class="hidden" id="Al22fig09">
        <p>The topology is shown to have 5 routers A, B, C, D, and E connected to each other. The connections form a pentagonal structure tilted to the left. Router A is placed on the top corner, router B on the left corner, router C on the bottom left corner, router D on the bottom right corner, and router E on the right corner of the pentagon. Router A is connected to a host F. Router E is connected to a host G. Router D is connected to a server H. Router C is connected to a server K. Dash-dotted lines are shown along the connections between A to F, A to E, D to H, and at the left of the connection between E to D. Dashed lines are shown along the connections between C to K, C to D, E to G, and along the right of the connection between E to D.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig09"></a><strong>Figure 22-9</strong> <em>Traffic engineering in a ring topology</em></p>
        </div>
        <p class="indent">In <a href="ch22.xhtml#ch22fig09">Figure 22-9</a>, assume F has a voice over Internet Protocol (VoIP) stream connected to H, while G has some large file transfer (perhaps a complete backup). One of these streams requires very small amounts of bandwidth, low delay, and small amounts of jitter; the other requires large amounts of bandwidth but can tolerate a lot of delay and jitter. These two streams, however, share the [D,E] link. One option may be to force traffic along the “back side” of the ring to avoid the problem of having two kinds of traffic on the same link, but this would require tunneling one of the two streams using something like Multiprotocol Label Switching (MPLS). Another option may be to use a well-designed Quality of Service (QoS) mechanism to ensure the two streams can coexist. Either of these two solutions, however, adds complexity into the control plane and forwarding process. In terms of complexity, then, the ring topology requires just two neighbors per device, but it can require a lot more traffic engineering work to support all the requirements that applications place on the network.</p>
        <div class="heading">
        <h5 class="h5" id="ch22level2"><a id="page_605"></a><em><strong>Resilience Characteristics</strong></em></h5>
        <p class="noindent">Rings can withstand a single failure anyplace in the ring; any two failures will cause the ring to split. However, a single failure can make the kinds of traffic engineering problems considered in the preceding section much more difficult to manage; a single failure essentially turns a ring into a bus, with just one path between each pair of connected devices. The “middle segment,” in this case, will be a bandwidth choke point in a very negative way.</p>
        </div>
        <div class="heading">
        <h5 class="h5" id="ch22level3"><em><strong>Convergence Characteristics</strong></em></h5>
        <p class="noindent">Convergence in ring topologies lays the foundation for truly understanding the convergence of every other network topology ever designed or deployed. After you understand the principles of routed convergence in a ring topology, it’s simple to apply these same principles to quickly understand the convergence of any other topology you might encounter.</p>
        </div>
        <p class="indent">In other words, pay attention!</p>
        <p class="indent">The crucial point to remember when considering how any control plane protocol—routed or switched—will operate on a particular topology is to think in terms of the “prime directive”: <em>thou shalt not loop packets!</em> This aversion to looping packets explains the convergence properties of ring topologies. Consider the rings in <a href="ch22.xhtml#ch22fig10">Figure 22-10</a>.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig10.jpg" aria-describedby="Al22fig10" alt="Network diagram illustrates convergence in a ring topology." width="484" height="303"><aside class="hidden" id="Al22fig10">
        <p>The topology has two circle shaped structures on either side. Over the circumference of the left circle, there are four routers A, B, C, and D placed at the top, left, bottom, and right respectively. Router A is connected to a network path with address "2001:db8:3e8:100::/64." Outside the circle, dash-dotted lines are shown along the circumference from B to C and C to D. Both lines are labeled "do not forward here." Over the circumference of the right circle, there are five routers E, F, G, H, and K placed at the top, right, bottom right, bottom left, and left respectively. Router E is connected to a network path with address "2001:db8:3e8:100::/64." Outside the circle, a dash-dotted line is shown along the circumference from H to G labeled "do not forward here."</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig10"></a><strong>Figure 22-10</strong> <em>Convergence in a ring topology</em></p>
        </div>
        <p class="indent">While it is common to think of routing as using <em>every</em> link in the network, protocols build a spanning tree per destination. For any given destination, specific links are blocked out of the path to prevent a packet forwarded toward the destination from looping in the network. In the two rings shown in <a href="ch22.xhtml#ch22fig10">Figure 22-10</a>, the links over which a routing protocol will not forward packets toward 2001:db8:3e8:100::/64 are marked.</p>
        <p class="indent"><a id="page_606"></a>In the case of the four-hop ring toward 100::/64:</p>
        <p class="bullt">• The link between B and C appears to be unidirectional toward B.</p>
        <p class="bullb">• The link between C and D appears to be unidirectional toward D.</p>
        <p class="indent">Why are these links blocked in this way by the routing protocol? To follow the prime directive—thou shalt not loop!</p>
        <p class="bullt">• If a packet destined to 100::/64 is forwarded from D to C, the packet will loop back to D.</p>
        <p class="bullb">• If a packet destined to 100::/64 is forwarded from B to C, the packet will loop back to D.</p>
        <p class="indent">In the case of the five-hop ring toward 100::/64, the link between G and H appears to be completely blocked. But why should this be? Suppose a packet destined to some host in 100::/64 is forwarded from G to H. This packet will be forwarded correctly to F, then to E, and finally to the destination itself.</p>
        <p class="indent">But what if G is forwarding traffic to H for 100::/64, and H is also forwarding traffic to G for 100::/64? A permanent routing loop results. This means</p>
        <p class="bullt">• If the link between A and D fails, D has no way to forward traffic toward 100::/64 until the routing protocol converges.</p>
        <p class="bullb">• If the link between E and K fails, H has no way to forward traffic toward 100::/64 until the routing protocol converges.</p>
        <div class="heading">
        <h5 class="h5" id="ch22level4"><em><strong>Generalizing Ring Convergence</strong></em></h5>
        <p class="noindent">Why is all this so important to understand? Because virtually every topology you can envision with any sort of redundancy is, ultimately, made up of rings (full mesh designs are considered by many to be an exception, and Clos fabrics are exceptions). To put it another way, virtually every network topology in the world can be broken into some set of interconnected rings, and each of these rings is going to converge according to a very basic set of rules:</p>
        </div>
        <p class="bullt">• Every ring has, for each destination, a set of links not used to forward traffic.</p>
        <p class="bullb">• The failure of any link or node on a ring will cause traffic to either be dropped (distance vector) or looped (link state) until the routing protocol converges.</p>
        <p class="indentb"><a id="page_607"></a>Given the speed at which a routing protocol can converge is directly related to the number of routers notified of a particular topology change, and hence the number of routers that must recalculate their best paths to any given destination, a third rule for control plane convergence on a ring is</p>
        <p class="bull">• The larger the ring, the more slowly the routing protocol will converge (and thus stop throwing packets on the floor or resolve the resulting microloop).</p>
        <p class="indentt">These three rules apply to virtually every topology you encounter. Find the rings, and you have found the most basic element of network convergence.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev8"><strong>Mesh Topologies</strong></h4>
        <p class="noindent">While ring topologies are the cheapest to deploy and the simplest to scale, full mesh topologies tend to be the most expensive to deploy and the most difficult to scale. Full mesh topologies, however, are simpler to understand (in terms of convergence and scaling) than ring topologies. <a href="ch22.xhtml#ch22fig11">Figure 22-11</a> illustrates a full mesh topology.</p>
        </div>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig11.jpg" aria-describedby="Al22fig11" alt="Network diagram illustrates full mesh topology." width="331" height="450"><aside class="hidden" id="Al22fig11">
        <p>The topology is shown to have 5 routers A, B, C, D, and E connected to each other. The connections form a pentagonal structure with five diagonals. Router A is placed on the top corner, router B on the left corner, router C on the right corner, router D on the bottom left corner, and router E on the bottom right corner of the pentagon. Router A is connected to a network path with address "2001:db8:3e8:100::/64." Router E is connected to a network path with address "2001:db8:3e8:101::/64."</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig11"></a><strong>Figure 22-11</strong> <em>A full mesh topology</em></p>
        </div>
        <p class="indentb"><a id="page_608"></a>There are ten paths from 2001:db8:3e8:101::/64 to 2001:db8:3e8:100::/64:</p>
        <p class="indenthangingN">1. [E,A]</p>
        <p class="indenthangingN">2. [E,C,A]</p>
        <p class="indenthangingN">3. [E,D,A]</p>
        <p class="indenthangingN">4. [E,B,A]</p>
        <p class="indenthangingN">5. [E,D,B,A]</p>
        <p class="indenthangingN">6. [E,D,C,A]</p>
        <p class="indenthangingN">7. [E,C,B,A]</p>
        <p class="indenthangingN">8. [E,C,D,A]</p>
        <p class="indenthangingN">9. [E,B,C,A]</p>
        <p class="indenthangingN1">10. [E,B,D,A]</p>
        <p class="indentt">Traffic engineering techniques can be used to direct specific traffic onto any of these paths, allowing the network designer to design traffic flows for optimal performance. The number of paths through the network and the number of links required to build a complete mesh between a set of nodes are given by</p>
        <p class="indentt">N(n−1)/2</p>
        <p class="indentt">For the five-node network in <a href="ch22.xhtml#ch22fig11">Figure 22-11</a>, this is</p>
        <p class="indentt">5(5−1)/2 = 10</p>
        <p class="indentt">This property of full mesh networks, however, also points to the weaknesses of this topology: scale and expense. These two weaknesses are closely related. Each new node added to the network means adding as many links as there are nodes already in the network. Adding a new node to the network in <a href="ch22.xhtml#ch22fig11">Figure 22-11</a> would mean adding five new links to bring the new node fully into the mesh.</p>
        <p class="indent">Each new link added means not only a cable, but also a new port used, and new ports mean new line cards, and so on. Each new link also represents a new set of neighbors for the control plane to manage, increasing memory utilization and processing requirements. There are protocol-level techniques that can reduce the control plane overhead in full mesh topologies, if they are properly managed and deployed. Open Shortest Path First (OSPF) and Intermediate System to Intermediate System <a id="page_609"></a>(IS-IS) both have the capability to build a mesh group, which treats the full mesh topology similar to a broadcast network; a small number of routers at the edge of the mesh are designated to flood topology information onto the mesh, while the remainder of the attached routers passively listen.</p>
        <p class="indent">The one place where network engineers often encounter full mesh topologies is in virtual overlays, particularly in deployments where traffic engineering is a fundamental part of the reason for deploying the virtual overlay. Although the port and link costs are reduced (or eliminated) when building a full mesh of tunnels, the cost of managing and troubleshooting a full mesh remains.</p>
        <p class="indent">A more commonly used mesh variant is a partial mesh topology. In a partial mesh, only some nodes are connected to one another, generally based on measured traffic patterns and perceived resilience requirements. Partial mesh topologies often reduce, in convergence and scaling terms, to a set of interacting ring topologies. Each “ring” within the partial mesh will scale and converge in the same way as the description of ring topologies already covered.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev9"><strong>Hub-and-Spoke Topologies</strong></h4>
        <p class="noindent">Hub-and-spoke topologies are built in just the way they sound; there is one or more hub router that is connected to a much larger number of remote routers. <a href="ch22.xhtml#ch22fig12">Figure 22-12</a> illustrates two such topologies.</p>
        </div>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig12.jpg" aria-describedby="Al22fig12" alt="Network diagram illustrates two hub-and-spoke topologies." width="537" height="266"><aside class="hidden" id="Al22fig12">
        <p>The first topology is shown to have a router A at the top connected to router B at the bottom left and 4 unnamed routers placed side by side at the right of B. Router B is connected to a network path with address "2001:db8:3e8:101::/64." Router A is connected to a network path with address "2001:db8:3e8:100::/64." The second topology shows 2 routers C and D at the top connected to a router E at the bottom left and 4 unnamed routers placed side by side at the right of "E." Router C and D are connected to a network path with address "2001:db8:3e8:102::/64."Router E is connected to a network path with address "2001:db8:3e8:103::/64."</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig12"></a><strong>Figure 22-12</strong> <em>Two hub-and-spoke topologies</em></p>
        </div>
        <p class="indent">In <a href="ch22.xhtml#ch22fig12">Figure 22-12</a>, there is just one path from 2001:db8:3e8:101::/64 and 2001:db8:3e8:100::/64, along [B,A]. If this path fails, connectivity fails between these two networks; this is called a single-homed network. To prevent a single point of failure from causing a complete outage for a particular site or application, many hub-and-spoke networks are designed with two hub routers, as shown in the network on the right side of <a href="ch22.xhtml#ch22fig12">Figure 22-12</a>; this is called a dual-homed network. Special <a id="page_610"></a>techniques are often used to scale such networks to support thousands of remote sites, such as</p>
        <p class="bullt">• Sending the remote site a minimal amount of routing information, such as just a default route.</p>
        <p class="bull">• Reducing neighbor state toward these remote sites; for instance, Open Shortest Path First has the concept of a demand circuit, which allows the hub router to advertise its routing information once, blocking the periodic reflooding normally required to synchronize the database.</p>
        <p class="bullb">• Not calculating routes through the remote sites, as they should never be used to transit traffic. For instance, the Enhanced Interior Gateway Routing Protocol (EIGRP) has the ability to mark a remote site router as a stub, which blocks calculation of alternate paths through the remote site. OSPF has the ability to mark a route through a remote site with the maximum metric, which discourages routing through the remote site.</p>
        <p class="indent">Without such special techniques, a dual-homed remote site will converge like a triangle; with them, it will converge more like a single-homed remote site. Because of the scaling, configuration, and management difficulties involved with managing large-scale hub-and-spoke networks, many such networks are now built using different options, such as</p>
        <p class="bullt">• A service-provider-provided service, where the hub and remote routers are actually managed by a service provider, and the customer receives the correct routing information and packets routed through the service provider network. This transfers the entire management load from the customer to the service provider.</p>
        <p class="bullb">• A Software-Defined Wide Area Network (SD-WAN) solution, which may be provided by a service provider, or installed and managed by the network operator. These services operate “over the top” of the standard Internet, using tunnels to build a virtual hub-and-spoke or full mesh network.</p>
        <div class="heading">
        <h4 class="h4" id="ch22lev10"><strong>Planar, Nonplanar, and Regular</strong></h4>
        <p class="noindent">Network topologies can be described in terms of their properties, as well as the shape of the topology. Three important concepts are planar, nonplanar, and regular.</p>
        </div>
        <p class="indent"><a id="page_611"></a>Planar topologies can be described using a single plane; this means links do not cross in a way that forces one link to “hop” over another link. In a nonplanar topology, at least two links will cross no matter how the topology is arranged. <a href="ch22.xhtml#ch22fig13">Figure 22-13</a> illustrates the difference between these two concepts.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig13.jpg" aria-describedby="Al22fig13" alt="Network diagram illustrates planar and nonplanar topologies." width="575" height="399"><aside class="hidden" id="Al22fig13">
        <p>In the topology, there are 4 regions. In the top left region named "A," a pentagonal structure with a router on each corner is displayed with a diagonal connecting the top router to the bottom right router. The top corner and left corner of the pentagon are tilted to the left. In the top right region named "B," a pentagonal structure similar to region A is displayed with a router on each corner and diagonals connecting all the corners. The top corner and left corner of the pentagon are tilted to the left. In the bottom left region named "C," connections form a square shaped tilted towards top left with two diagonals. A router is placed on each corner. In the bottom right region named "D," a square similar to region C is displayed with a router on each corner and only one diagonal connecting the top and bottom routers. The other two router are connected by acurved line flowing above the top router.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig13"></a><strong>Figure 22-13</strong> <em>Planar and nonplanar network topologies</em></p>
        </div>
        <p class="indent">Four networks are shown in <a href="ch22.xhtml#ch22fig13">Figure 22-13</a>, marked A, B, C, and D. Network A is a planar topology; there are no points at which two links cross, and hence would require one link “jumping” over the other—or rather requiring a second plane to accurately represent. The topology in B is a nonplanar topology.</p>
        <p class="indent">When examining networks to discover if they have a planar or nonplanar topology, try rearranging the links to see if they can be moved so that no two links will cross or overlap. For instance, network C in <a href="ch22.xhtml#ch22fig13">Figure 22-13</a> appears to be a nonplanar design, because of the two links crossing at the gray dashed circle; however, the same network is illustrated as D, but with one of the links moved so they no longer cross. The links in B cannot be rearranged to prevent any overlap in this way.</p>
        <p class="indent">Regular topologies have one characteristic: they are made up of smaller, repeating topologies. <a href="ch22.xhtml#ch22fig14">Figure 22-14</a> illustrates a fabric of four hop rings (or cubes), which is a regular topology.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/22fig14.jpg" aria-describedby="Al22fig14" alt="Network diagram illustrates a regular topology." width="361" height="353"><aside class="hidden" id="Al22fig14">
        <p>The topology resembles a side of 16*16 rubik's cube. A router is placed in each corner of the 16 squares. From top to bottom on the leftmost edge of the cube, three routers are named A, B, and F. The routers placed immediately next to A, B, and F are named D, E, and G.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch22fig14"></a><strong>Figure 22-14</strong> <em>A regular topology</em></p>
        </div>
        <p class="indent">In <a href="ch22.xhtml#ch22fig14">Figure 22-14</a>, the four routers A, B, D, and E are a small four-router loop within the same topology. Because any other four-router loop that you can pick out can replace any other four-router loop in the network, this is a regular topology; any set of four routers could be moved anyplace else in the network without changing the <a id="page_612"></a>overall topology, and the network topology can be increased in size by simply replicating one piece of the topology and adding it back on.</p>
        <p class="indent">Being able to pick out these kinds of topologies is helpful in understanding the way a particular network will converge, and what kinds of fast reroute and other options are available. It would take much more space than is available here in this chapter to draw these lessons out in detail, but being aware of these different design patterns is a good place to start.</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev11">Final Thoughts on Network Design Patterns</h3>
        <p class="noindent">Network design is often treated the same way network security is—left until the last moment, done as quickly as possible, with as little thought and fuss as possible. Real design, beginning with business requirements rather than speeds and feeds, or ports and racks, is often ignored in the tyranny of the immediate. “This project needs to be done now, forget the design stuff, just get it working.” This is the path to technical debt and—ultimately—crashed networks and failed businesses.</p>
        </div>
        <p class="indent">Proper network design needs to take a systemic view. This chapter, although a short overview, provides you with some of the basic mindsets and tools you need to start thinking through design problems and solutions. The next chapter will continue examining design topics by considering resilience and redundancy.</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev12"><a id="page_613"></a>Further Reading</h3>
        <p class="ref">Oppenheimer, Priscilla. <em>Top-Down Network Design</em>. 3rd edition. Indianapolis, IN: Cisco Press, 2010.</p>
        </div>
        <p class="ref">White, Russ, and Denise Donohue. <em>The Art of Network Architecture: Business-Driven Design</em>. 1st edition. Indianapolis, IN: Cisco Press, 2014.</p>
        <p class="ref">White, Russ, Alvaro Retana, and Don Slice. <em>Optimal Routing Design</em>. 1st edition. Indianapolis, IN: Cisco Press, 2005.</p>
        <p class="ref">White, Russ, and Jeff Tantsura. <em>Navigating Network Complexity: Next-Generation Routing with SDN, Service Virtualization, and Service Chaining</em>. Indianapolis, IN: Addison-Wesley Professional, 2015.</p>
        <div class="heading">
        <h3 class="h3" id="ch22lev13">Review Questions</h3>
        <p class="indenthangingN">1. Consider the objective of network design laid out in the text—to build the least expensive, most flexible way to provide transport. How does this goal set relate to the State/Optimization/Surface (SOS) model of managing network complexity?</p>
        </div>
        <p class="indenthangingN">2. Research an example of opportunity cost in the real world.</p>
        <p class="indenthangingN">3. Explain why ossified systems appear to be well built and solid, but are often actually fragile.</p>
        <p class="indenthangingN">4. Consider the disaggregated versus the vendor-independent model in terms of the State/Optimization/Surface tradeoff triad. Would either model increase state? Surfaces? In what way?</p>
        <p class="indenthangingN">5. Give examples of when you might use a two-layer hierarchy versus a three-layer hierarchy.</p>
        <p class="indenthangingN">6. Explain convergence in a ring topology. <a id="page_614"></a></p>
        </div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9780134762814/files/9780134762852.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
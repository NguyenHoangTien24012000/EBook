<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
</style>
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><div class="chapter" title="Chapter&nbsp;7.&nbsp;Routing Protocols: It’s a Matter of Protocol"><div class="titlepage"><div><div><h1 class="title"><a id="routing_protocols_itapostrophes_a_matter"></a>Chapter&nbsp;7.&nbsp;Routing Protocols: It’s a Matter of Protocol</h1></div></div></div><div class="informalfigure"><a id="med_id00283a"></a><div class="mediaobject"><a id="med_id00283"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566630.png.jpg" alt="image with no caption" width="429" height="496"></div></div><p><a id="iddle1449" class="indexterm"></a><a id="iddle1450" class="indexterm"></a><a id="iddle1451" class="indexterm"></a><a id="iddle1609" class="indexterm"></a><a id="iddle1614" class="indexterm"></a><a id="iddle1619" class="indexterm"></a><span class="strong"><strong>To build big networks, you need to use routers and they have to talk to each other.</strong></span></p><p>Routers need to exchange routes with each other. They use various routing protocols to exchange routes. In the chapter, you will first see how to manually enter a route, then you will learn how to implement the simple RIP routing protocol. Finally you will learn how to setup EIGRP, an advanced routing protocol.</p><div class="sect1" title="Houston, we have a problem..."><div class="titlepage"><div><div><h1 class="title"><a id="houstoncomma_we_have_a_problemhellip"></a>Houston, we have a problem...</h1></div></div></div><p>So far, you’ve successfully hooked up the Moonbase network so that it can communicate with the ISS. There’s just one problem: there are actually <span class="emphasis"><em>20</em></span> bases on the moon, and all the different moonbases need to keep in contact with each other through their network links in case they get into trouble. So is this possible?</p><p>When the international community started building the moonbases, they wisely decided to run fiber optic cables to all of the different moonbases. Each moonbase is directly connected to at least one other moonbase, and indirectly connected to all the others through the web of fiber optic cables. As an example, Moonbase 1 is directly connected to three other moonbases, and indirectly connected to all 20 others.</p><div class="informalfigure"><a id="med_id00284a"></a><div class="mediaobject"><a id="med_id00284"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566632.png.jpg" alt="image with no caption" width="552" height="475"></div></div><p>The Moonbase 1 router is able to send packets to the moonbases it’s directly connected to, but it can’t communicate with any of the other 18 moonbases it’s only connected to indirectly.</p><p><span class="strong"><strong>So how do we get routers to communicate with each other when they’re not directly connected?</strong></span></p></div><div class="sect1" title="Routing tables tell routers where to send packets"><div class="titlepage"><div><div><h1 class="title"><a id="routing_tables_tell_routers_where_to_sen"></a>Routing tables tell routers where to send packets</h1></div></div></div><p><a id="iddle1627" class="indexterm"></a>When two routers share a common IP network space or network address, they can automatically route packets to each other. But what about when routers aren’t connected to each other directly?</p><p>When routers aren’t directly connected to each other, they need to know how to send packets to the other router. They get this information from routing tables, tables which are stored in the memory of the router.</p><div class="sect2" title="We can see routes in the table using the show command"><div class="titlepage"><div><div><h2 class="title"><a id="we_can_see_routes_in_the_table_using_the"></a>We can see routes in the table using the show command</h2></div></div></div><p>To see the route table on a router, you need to use the <code class="literal">show</code> command. On a typical router such as a Cisco, you would run the <code class="literal">show ip route</code> command.</p><div class="informalfigure"><a id="med_id00285a"></a><div class="mediaobject"><a id="med_id00285"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566634.png" alt="image with no caption" width="696" height="428"></div></div><p>Let’s take a look at what the contents of the routing table actually mean.</p></div></div><div class="sect1" title="Each line represents a different route"><div class="titlepage"><div><div><h1 class="title"><a id="each_line_represents_a_different_route"></a>Each line represents a different route</h1></div></div></div><p><a id="iddle1367" class="indexterm"></a>The route table is a type of address book for the router. It looks at a packet’s destination IP address, then looks that up in its routing table. Based on that lookup, it sends the packet to the right place.</p><p>Each line in the routing table has two parts. The first part is a letter which tells how the route was established. The second part tells the router how to get to the route. The route table is constantly kept up-to-date by the router so it knows where to send packets.</p><div class="informalfigure"><a id="med_id00286a"></a><div class="mediaobject"><a id="med_id00286"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566636.png" alt="image with no caption" width="685" height="383"></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch07note01"></a>Brain Power</h3><p>How does a router <span class="strong"><strong>learn</strong></span> about routes if they are not entered or directly connected?</p></div><div class="informalfigure"><a id="med_id00287a"></a><div class="mediaobject"><a id="med_id00287"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566638.png.jpg" alt="image with no caption" width="350" height="507"></div></div><p><a id="iddle1086" class="indexterm"></a><a id="iddle1646" class="indexterm"></a><a id="iddle1651" class="indexterm"></a><a id="iddle1686" class="indexterm"></a><span class="strong"><strong>Routes in a table come from several sources.</strong></span></p><p>When you assign an IP address to an interface, this automatically places an entry in the routing table for that IP network. These are the routes that are <span class="strong"><strong>directly connected</strong></span> and have a C in the front of their table entry. Routes that are entered by hand are static and have a S in front of them. Finally routes that are learned have different letters based on how the route was learned.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>The simplest way to get routes into a table is just type them in. Those are called static routes because they don’t change unless you change them.</strong></span></p></blockquote></div><div class="informalfigure"><a id="med_id00288a"></a><div class="mediaobject"><a id="med_id00288"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566640.png" alt="image with no caption" width="644" height="302"></div></div></div><div class="sect1" title="So how do we enter routes?"><div class="titlepage"><div><div><h1 class="title"><a id="so_how_do_we_enter_routesquestion_mark"></a>So how do we enter routes?</h1></div></div></div><p>The first thing you need to do is get a connection to the router. You can either ssh into the router via the network or connect with a serial cable. You did this in <a class="xref" href="ch06.html" title="Chapter&nbsp;6.&nbsp;Connecting Networks with Routers: Bringing Things Together">Chapter&nbsp;6</a>.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>At the router’s console, issue the command <code class="literal">enable</code></strong></span></p><p>This puts the router into the privileged mode. You will probably need a password.</p></li><li class="listitem"><p><span class="strong"><strong>At the router’s console, issue the command <code class="literal">config t</code></strong></span></p><p>This puts the router into configuration mode.</p></li><li class="listitem"><p><span class="strong"><strong>Type <code class="literal">ip route 192.168.102.0 255.255.255.0 eth0/1 192.168.101.1</code></strong></span></p><p>This command enters a static route for the 192.168.102.0 network into the route table. This network is reached via the eth0/1 interface, and the router that can deal with that network is 192.168.101.1.</p></li><li class="listitem"><p><span class="strong"><strong>Type <code class="literal">exit</code></strong></span></p><p>This exits the router from configuration mode.</p></li><li class="listitem"><p><span class="strong"><strong>Type <code class="literal">write memory</code></strong></span></p><p>This saves our new configuration to memory.</p></li></ol></div></div><div class="sect1" title="Routes help routers figure out where to send network traffic"><div class="titlepage"><div><div><h1 class="title"><a id="routes_help_routers_figure_out_where_to"></a>Routes help routers figure out where to send network traffic</h1></div></div></div><p>So you need to enter all the network addresses that you want your router to be able to send traffic to.</p><div class="note" title="Watch it!"><h3 class="title"><a id="ch07note02"></a>Watch it!</h3><p><span class="strong"><strong>You can’t possibly enter all the networks of the world into your router’s table.</strong></span></p><p><span class="emphasis"><em>You have to set a default gateway. This is the location, another router, where your router sends all the traffic it does not know where to send.</em></span></p></div><div class="sidebar"><a id="sharpen_your_pencil-id00094"></a><p class="title">Sharpen your pencil</p><p>Here are three routers. See if you can fill in the two missing IP addresses on the lines in the routing tables below to get the packets flowing between the computers via the routers.</p><div class="informalfigure"><a id="med_id00289a"></a><div class="mediaobject"><a id="med_id00289"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566642.png" alt="image with no caption" width="692" height="482"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00095"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1634" class="indexterm"></a>Here are three routers. See if you can fill in the two missing IP addresses on the lines in the routing tables below to get the packets flowing between the routers.</p><div class="informalfigure"><a id="med_id00290a"></a><div class="mediaobject"><a id="med_id00290"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566644.png" alt="image with no caption" width="692" height="625"></div></div></div><div class="note" title="Watch it!"><h3 class="title"><a id="ch07note03"></a>Watch it!</h3><p><span class="strong"><strong>Computers are not generally connected directly to a router.</strong></span></p><p><span class="emphasis"><em>Usually there is a switch or hub in-between them.</em></span></p></div><div class="sidebar"><a id="exercise-id00096"></a><p class="title">Exercise</p><p><a id="iddle1652" class="indexterm"></a><a id="iddle1756" class="indexterm"></a><a id="iddle1842" class="indexterm"></a>Create routing tables from scratch for each router in the network below.</p><div class="informalfigure"><a id="med_id00291a"></a><div class="mediaobject"><a id="med_id00291"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566646.png" alt="image with no caption" width="727" height="746"></div></div></div><div class="sidebar"><a id="exercise_solution-id00097"></a><p class="title">Exercise Solution</p><p><a id="iddle1625" class="indexterm"></a><a id="iddle1841" class="indexterm"></a>Create routing tables from scratch for each router in the network below.</p><div class="informalfigure"><a id="med_id00292a"></a><div class="mediaobject"><a id="med_id00292"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566648.png" alt="image with no caption" width="739" height="752"></div></div></div></div><div class="sect1" title="So are the moonbases now connected?"><div class="titlepage"><div><div><h1 class="title"><a id="so_are_the_moonbases_now_connectedquesti"></a>So are the moonbases now connected?</h1></div></div></div><p>Let’s try sending a message from a computer at Moonbase 1 to a computer on Moonbase 3 and see what happens.</p><div class="informalfigure"><a id="med_id00293a"></a><div class="mediaobject"><a id="med_id00293"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566650.png" alt="image with no caption" width="556" height="595"></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>The computer on the Moonbase 1 network sends a packet destined for a device on a different network.</strong></span></p></li><li class="listitem"><p><span class="strong"><strong>The Moonbase 1 router looks up destination network address in its table. It forwards the packet on to the router responsible for that network, or a router that knows about that network.</strong></span></p></li><li class="listitem"><p><span class="strong"><strong>This other router looks in its route table and sees that the packet needs to go to a further router. It’s not directly responsible for that network, so it sends it along.</strong></span></p></li><li class="listitem"><p><span class="strong"><strong>This router responsible for the network sends the packet to the correct node on its network.</strong></span></p></li></ol></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00098"></a><p class="title">There are no Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa1qe1"></a><a id="ch07qa1q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: What do you mean by interface?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa1q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Interfaces are the physical network connections that a router has installed. These can be Ethernet RJ-45 type connectors, serial connectors, or even fiber optic connectors.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa1qe2"></a><a id="ch07qa1q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: What is the 0/0 and 0/1 in the interface name?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa1q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> The first 0 represents the interface card in a router. Many routers support multiple interface cards, and each card can have multiple connections. So the second number represents that actual interface on a given interface card. So 0/1 refers to the number 1 interface on the number 0 card installed in the router. If the router has other cards, you could see interface numbers like 1/1.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa1qe3"></a><a id="ch07qa1q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: In the “via” bit, do I need to specify something that the router’s directly linked to?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa1q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> When you enter a static route, you need to specify the IP address of the router that will handle that network route. It is optional to enter the interface number as well.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa1qe4"></a><a id="ch07qa1q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Does the routing table just contain IP addresses of routers? What about other devices?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa1q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes, it contains only IP addresses of other routers. Remember, the route table tells the router where to send network traffic to another network. So it is saying “to send network traffic to network X, you have to send it via router V, which knows how to send traffic to network X.</p><p>No other device addresses are entered into a route table.</p></td></tr></tbody></table></div></blockquote></div></div></div><div class="sect1" title="Back on the moon..."><div class="titlepage"><div><div><h1 class="title"><a id="back_on_the_moonhellip"></a>Back on the moon...</h1></div></div></div><div class="informalfigure"><a id="med_id00294a"></a><div class="mediaobject"><a id="med_id00294"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566652.png.jpg" alt="image with no caption" width="854" height="1000"></div></div><div class="sect2" title="Moonbase 1 still has problems"><div class="titlepage"><div><div><h2 class="title"><a id="moonbase_1_still_has_problems"></a>Moonbase 1 still has problems</h2></div></div></div><p>The Moonbase 1 routing table has been populated with all the static routes to the other moonbases, but unfortunately, network traffic isn’t getting through to one particular moon base. So what’s wrong?</p><p><span class="strong"><strong>How do we troubleshoot routes if the data isn’t getting through?</strong></span></p></div></div><div class="sect1" title="So how do we troubleshoot bad routes?"><div class="titlepage"><div><div><h1 class="title"><a id="so_how_do_we_troubleshoot_bad_routesques"></a>So how do we troubleshoot bad routes?</h1></div></div></div><p><a id="iddle1303" class="indexterm"></a><a id="iddle1421" class="indexterm"></a><a id="iddle1452" class="indexterm"></a><a id="iddle1637" class="indexterm"></a>If there’s a problem on an interface, the router can tell you whether the interface is up or down. But there isn’t really much it can tell you about a static route. It doesn’t know if the route is up or down; all it knows is that it can’t send traffic via it when it is down. Fortunately, there’s something that can help you—the <span class="strong"><strong><code class="literal">ping</code></strong></span> command.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>The ping command tells you if the network and host are reachable.</strong></span></p></blockquote></div><div class="sect2" title="We can start with the ping command"><div class="titlepage"><div><div><h2 class="title"><a id="we_can_start_with_the_ping_command"></a>We can start with the ping command</h2></div></div></div><p>The <code class="literal">ping</code> command is a great command line utility that can help you troubleshoot bad routes. It basically tells you whether or not the network and host are reachable. To use the ping command, type <code class="literal">ping</code> at a command prompt, followed by the IP address you want to check.</p><p>Here’s an example:</p><div class="informalfigure"><a id="med_id00295a"></a><div class="mediaobject"><a id="med_id00295"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566654.png" alt="image with no caption" width="710" height="200"></div></div></div><div class="sect2" title="So how does the ping command work?"><div class="titlepage"><div><div><h2 class="title"><a id="so_how_does_the_ping_command_workquestio"></a>So how does the ping command work?</h2></div></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>The ping command sends ICMP packets to the specified IP address.</strong></span></p><div class="informalfigure"><a id="med_id00296a"></a><div class="mediaobject"><a id="med_id00296"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566656.png.jpg" alt="image with no caption" width="530" height="125"></div></div></li><li class="listitem"><p><span class="strong"><strong>It waits for a reply, and then outputs how long the response took.</strong></span></p></li></ol></div></div></div><div class="sect1" title="The traceroute command is useful too"><div class="titlepage"><div><div><h1 class="title"><a id="traceroute_command_is_useful_too"></a>The traceroute command is useful too</h1></div></div></div><p>The traceroute command traces the route that the packets take to get to the destination IP address. This route is represented by the IP addresses of the routers in-between the sending host and the destination IP address.</p><p>Here’s an example:</p><div class="informalfigure"><a id="med_id00297a"></a><div class="mediaobject"><a id="med_id00297"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566658.png" alt="image with no caption" width="668" height="201"></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Traceroute from client A sends a block of three packets with a value of 1 in their time-to-live (TTL) field to client D.</p></li><li class="listitem"><p>Router B responds with a ICMP packet back to the client A because the packets have a TTL of 1.</p></li><li class="listitem"><p>Traceroute from client A then sends a second block of three packets with a value of 2 in their time-to-live (TTL) field to client D. Router B changes the packets TTL to 1 and sends them on the Router C.</p></li><li class="listitem"><p>Router C responds with a ICMP packet back to the client A because the packets have a TTL of 1.</p></li><li class="listitem"><p>Traceroute from client A then sends a third block of three packets with a value of 3 in their time-to-live (TTL) field to client D. Router B changes the packets’ TTL to 2 and sends them on the Router C, which changes the packets’ TTL to 1 and sends them on to client D. Client D sends an IMCP packet back to client A.</p><div class="informalfigure"><a id="med_id00298a"></a><div class="mediaobject"><a id="med_id00298"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566660.png" alt="image with no caption" width="518" height="181"></div></div></li></ol></div><p>Let’s see if we can use these tools to help us troubleshoot the Moonbase 1 routes.</p><div class="sidebar"><a id="there_are_no_dumb_questions-id00099"></a><p class="title">There are no Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe1"></a><a id="ch07qa2q1"></a><p>Q:</p></td><td align="left" valign="top"><p><a id="iddle1524" class="indexterm"></a><a id="iddle1641" class="indexterm"></a><a id="iddle1650" class="indexterm"></a><a id="iddle1761" class="indexterm"></a><span class="strong"><strong>Q: Can I ping any IP address on the Internet?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes, you can. Whether you get a reply is another question. Many times firewalls block ping packets. So you will not see any reply in that case.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe2"></a><a id="ch07qa2q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: When I ping some of the example addresses in the book, sometimes I get a response, and sometimes I don’t.</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Remember private IP addresess back in <a class="xref" href="ch06.html" title="Chapter&nbsp;6.&nbsp;Connecting Networks with Routers: Bringing Things Together">Chapter&nbsp;6</a>? Well most of the addresses we use in the book are private IP addresses. On your home network, some of these might be used by your local router, or your ISP might be using them as well.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe3"></a><a id="ch07qa2q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: It seems like you could write a program to constantly ping some devices on the network and alert you when the pings fail. Would this be a cool tool or what!</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> There are many tools like this. Nmap is one such tool. Nagio is another. Nmap is a network scanner. You enter in a range of IP addresses to scan, and it lets you know if there is a machine there or not. Nagios is more of a monitoring tool like you described above. It can alert you when devices go off line.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe4"></a><a id="ch07qa2q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Can I control how many ping packets I send?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Good question. Yes, you can. Many ping program have different options that control how many packets you send or even what information is inside the ping packets. Type ping --help or ping /h to find out more.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe5"></a><a id="ch07qa2q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Are those times on the return ping packets very important?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> A good network engineer learns what the various ping times around her network are. We are not saying you should memorize them, but you should have a good feel for what the times should be roughly. That way, when things go out of whack, with some simple pinging, you can tell what is and isn’t behaving properly.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe6"></a><a id="ch07qa2q6"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Isn’t traceroute a fancy ping?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q6a6"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Well traceroute sends ICMP packets just like ping does, but it is doing something totally different in that it sends out those series of packets to get the routers to respond in-between you and the destination.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe7"></a><a id="ch07qa2q7"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Sometimes my traceroutes seem to hang up then all of a sudden start going again. What is that all about?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q7a7"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> If you are having traceroute look up the DNS names of the routers, sometimes those routers don’t have DNS entries, so your ping command has to wait for the DNS request to timeout. This can take a bit. Plus, if it is doing this on a number of routers, it can really take some time. Run the traceroute command with the -n flag to turn off DNS lookups.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe8"></a><a id="ch07qa2q8"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Sometimes I see a little star when I run the traceroute command. Does the little star mean that the router is down?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q8a8"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No, often it means that the routers is configured to not respond to ICMP packets. This is done as a security measure.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe9"></a><a id="ch07qa2q9"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So each router along the path to the destination has to respond for my command to work?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q9a9"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No, traceroute will just timeout the packets going to that device and move on to the next one until it gets to the destination.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa2qe10"></a><a id="ch07qa2q10"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: How does it know when it gets to the destination?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa2q10a10"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Simple, it just keeps incrementing the TTL of the ICMP packets until it gets a response from the destination IP address.</p></td></tr></tbody></table></div></blockquote></div></div><div class="sidebar"><a id="exercise-id00100"></a><p class="title">Exercise</p><p><a id="iddle1648" class="indexterm"></a><a id="iddle1753" class="indexterm"></a>Based on the traceroute output, circle the routers or hosts which are not responding.</p><div class="informalfigure"><a id="med_id00299a"></a><div class="mediaobject"><a id="med_id00299"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566662.png" alt="image with no caption" width="648" height="698"></div></div></div><div class="sidebar"><a id="exercise_solution-id00101"></a><p class="title">Exercise Solution</p><p><a id="iddle1444" class="indexterm"></a><a id="iddle1457" class="indexterm"></a><a id="iddle1525" class="indexterm"></a><a id="iddle1642" class="indexterm"></a><a id="iddle1649" class="indexterm"></a><a id="iddle1754" class="indexterm"></a>Based on the traceroute output, circle the routers or hosts which are not responding.</p><div class="informalfigure"><a id="med_id00300a"></a><div class="mediaobject"><a id="med_id00300"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566664.png" alt="image with no caption" width="648" height="682"></div></div></div></div><div class="sect1" title="So what’s the problem with the network connection?"><div class="titlepage"><div><div><h1 class="title"><a id="so_whatapostrophes_the_problem_w-id00102"></a>So what’s the problem with the network connection?</h1></div></div></div><p>Unfortunately for Moonbase 1, it looks like Moonbase 16 and Moonbase 17 changed the network address their routers were using. As the Moonbase 1 router only had the old network addresses in the routing table as a static route, this meant that the router no longer knew where to send network traffic destined for these two networks.</p><p>So how do we fix this?</p><div class="note" title="Note"><h3 class="title"><a id="ch07note04"></a>Note</h3><p><span class="strong"><strong>When there are changes to routes, you have to modify those routes in your router’s route table to keep it current.</strong></span></p></div><div class="informalfigure"><a id="med_id00301a"></a><div class="mediaobject"><a id="med_id00301"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566666.png.jpg" alt="image with no caption" width="427" height="377"></div></div><p><span class="strong"><strong>Static routes don’t change automatically.</strong></span></p><p>This means that if you have static routes in your routing table, you need to change them manually</p><div class="note" title="Brain Power"><h3 class="title"><a id="ch07note05"></a>Brain Power</h3><p>What sorts of problems do you anticipate with this?</p></div></div><div class="sect1" title="The network address changes keep on coming..."><div class="titlepage"><div><div><h1 class="title"><a id="network_address_changes_keep_on_cominghe"></a>The network address changes keep on coming...</h1></div></div></div><p>Unfortunately, they aren’t the only moonbases to change their network addresses. With all the growth on the moon, other moonbases are changing their network configurations too. Before too long, Moonbase 1 is swamped with notifications from other moonbases that their network addresses have changed too.</p><div class="informalfigure"><a id="med_id00302a"></a><div class="mediaobject"><a id="med_id00302"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566668.png.jpg" alt="image with no caption" width="1000" height="761"></div></div><div class="informalfigure"><a id="med_id00303a"></a><div class="mediaobject"><a id="med_id00303"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566670.png.jpg" alt="image with no caption" width="500" height="352"></div></div><div class="informalfigure"><a id="med_id00304a"></a><div class="mediaobject"><a id="med_id00304"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566672.png.jpg" alt="image with no caption" width="518" height="714"></div></div></div><div class="sect1" title="Use RIP to get routes to update themselves"><div class="titlepage"><div><div><h1 class="title"><a id="use_rip_to_get_routes_to_update_themselv"></a>Use RIP to get routes to update themselves</h1></div></div></div><p><a id="iddle1647" class="indexterm"></a><a id="iddle1715" class="indexterm"></a>If you want to make your life easy, invest some time in getting a dynamic routing protocol running on your network. RIP, or Routing Information Protocol, is one such dynamic routing protocol. RIP is a way for routers to share network addresses. Routers use RIP to talk to each other, sharing their route information and allowing them to keep their route tables up-to-date.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p><span class="strong"><strong>Every 30 seconds, the router sends out its router table.</strong></span></p><p>It sends out its entire route table to all other routes in the form of RIP update packets. This means that any changes that have been made to the routing table since the last time are included.</p><div class="informalfigure"><a id="med_id00305a"></a><div class="mediaobject"><a id="med_id00305"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566674.png" alt="image with no caption" width="540" height="175"></div></div></li><li class="listitem"><p><span class="strong"><strong>Other routers receive the route information and check their route tables.</strong></span></p><div class="informalfigure"><a id="med_id00306a"></a><div class="mediaobject"><a id="med_id00306"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566676.png" alt="image with no caption" width="579" height="223"></div></div></li><li class="listitem"><p><span class="strong"><strong>The other routers update their own routing tables with any changes.</strong></span></p><p>Any new routes are added, existing routes are updated, and deleted routes are removed.</p><div class="informalfigure"><a id="med_id00307a"></a><div class="mediaobject"><a id="med_id00307"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566678.png" alt="image with no caption" width="546" height="242"></div></div></li><li class="listitem"><p><span class="strong"><strong>After 30 seconds, the process begins again.</strong></span></p><div class="informalfigure"><a id="med_id00308a"></a><div class="mediaobject"><a id="med_id00308"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566680.png" alt="image with no caption" width="697" height="235"></div></div></li></ol></div><div class="sect2" title="So what does this mean for Moonbase 1?"><div class="titlepage"><div><div><h2 class="title"><a id="so_what_does_this_mean_for_moonbase_1que"></a>So what does this mean for Moonbase 1?</h2></div></div></div><p>By implementing RIP across all the moonbases, we no longer have to maintain static routes for all the indirectly connected routers. Instead, we can let the routers maintain the routes for us—which makes life much easier.</p><div class="sidebar"><a id="long_exercise-id00103"></a><p class="title">Long Exercise</p><p><a id="iddle1186" class="indexterm"></a><a id="iddle1594" class="indexterm"></a><a id="iddle1629" class="indexterm"></a><a id="iddle1643" class="indexterm"></a>Based on the changes in the network, circle the router(s) which would <span class="strong"><strong>send out</strong></span> changes to their route table(s).</p><div class="informalfigure"><a id="med_id00309a"></a><div class="mediaobject"><a id="med_id00309"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566682.png" alt="image with no caption" width="725" height="574"></div></div></div><div class="informalfigure"><a id="med_id00310a"></a><div class="mediaobject"><a id="med_id00310"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566684.png" alt="image with no caption" width="724" height="775"></div></div><div class="sidebar"><a id="long_exercise_solution-id00104"></a><p class="title">Long Exercise Solution</p><p>Based on the changes in the network, circle the router(s) which would <span class="strong"><strong>send out</strong></span> changes to their route table(s).</p><div class="informalfigure"><a id="med_id00311a"></a><div class="mediaobject"><a id="med_id00311"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566686.png" alt="image with no caption" width="725" height="574"></div></div></div><div class="informalfigure"><a id="med_id00312a"></a><div class="mediaobject"><a id="med_id00312"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566688.png" alt="image with no caption" width="729" height="775"></div></div></div></div><div class="sect1" title="So how do we set up RIP?"><div class="titlepage"><div><div><h1 class="title"><a id="so_how_do_we_set_up_ripquestion_mark"></a>So how do we set up RIP?</h1></div></div></div><p>Setting up RIP on a router is really simple. You enter the config mode on the router, then we enter the router rip configuration. When you add some networks, the router turns on RIP. Remember to save your changes with the write memory command when you exit the command mode.</p><div class="informalfigure"><a id="med_id00313a"></a><div class="mediaobject"><a id="med_id00313"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566690.png" alt="image with no caption" width="631" height="141"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00105"></a><p class="title">There are no Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa3qe1"></a><a id="ch07qa3q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Does every type of router run RIP?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa3q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Just about any router you will come across will have a version of RIP available.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa3qe2"></a><a id="ch07qa3q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Is RIP a program running on the router?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa3q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> You could say that. It is an mixture of software running, a network protocol to communicate route information, and the configuration files. Depending on the type of router, it usually is some software function in the OS of the router.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa3qe3"></a><a id="ch07qa3q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: How do you guard against someone hooking their own router up and sending bad routes?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa3q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> There is really nothing to prevent that with the RIP v1 protocol. In RIP v2 there is simple password authentication, but those passwords are sent in plaintext, so if someone is connected to your network, they could probably get these.</p><p>Some routers have mechanisms such as peers that allow you to control which routers you receive updates from.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa3qe4"></a><a id="ch07qa3q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: It seem like it could take a while for routers to share all their changes if there are more than a few routers with lots of changes.</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa3q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes, that is one of RIPs problems. This is called convergence. Since a router broadcasts its router table every 30 seconds, it could take minutes for a change to propagate around even a small network.</p></td></tr></tbody></table></div></blockquote></div></div></div><div class="sect1" title="But there’s still a problem..."><div class="titlepage"><div><div><h1 class="title"><a id="but_thereapostrophes_still_a_problemhell"></a>But there’s still a problem...</h1></div></div></div><p>Unfortunately, there’s now a problem getting data to Moonbase 20. So what’s the problem?</p><p>Here’s the output from the traceroute command:</p><div class="informalfigure"><a id="med_id00314a"></a><div class="mediaobject"><a id="med_id00314"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566692.png" alt="image with no caption" width="666" height="319"></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch07note06"></a>Brain Power</h3><p>Take a look at the output above. What do you think the problem is? What could you look at on your router to help figure out this problem?</p></div></div><div class="sect1" title="There are too many hops"><div class="titlepage"><div><div><h1 class="title"><a id="there_are_too_many_hops"></a>There are too many hops</h1></div></div></div><p><a id="iddle1447" class="indexterm"></a><a id="iddle1596" class="indexterm"></a>Given a choice, the RIP protocol always chooses the route with the fewest number of routers in its path, or the fewest number of “hops.” We call the number of hops in a route the hop-count.</p><p>Unfortunately, the maximum number of hop-counts that the RIP protocol allows is 15—and it takes more than 15 hops to get to Moonbase 20.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>The Hop-Count is the number of routers a packet must “hop” through to get to a particular IP network.</strong></span></p></blockquote></div><div class="informalfigure"><a id="med_id00315a"></a><div class="mediaobject"><a id="med_id00315"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566694.png.jpg" alt="image with no caption" width="437" height="406"></div></div><p><span class="strong"><strong>RIP can only use the hop count to find the best route.</strong></span></p><p>RIP doesn’t know the speed of a particular network line, so it treats all lines equally. This means that if there are two possible routes to a particular nework, RIP will choose the one with the lowest hop count, even if the other route is really fast.</p><div class="informalfigure"><a id="med_id00316a"></a><div class="mediaobject"><a id="med_id00316"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566696.png" alt="image with no caption" width="653" height="178"></div></div><div class="sidebar"><a id="be_the_router-id00106"></a><p class="title">BE the Router</p><p>Your job is to play router and use the RIP route table to figure out which route you’d send a packet down.</p><div class="informalfigure"><a id="med_id00317a"></a><div class="mediaobject"><a id="med_id00317"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566698.png.jpg" alt="image with no caption" width="768" height="821"></div></div></div><div class="sidebar"><a id="be_the_router_solution-id00107"></a><p class="title">BE the Router Solution</p><p><a id="iddle1290" class="indexterm"></a><a id="iddle1635" class="indexterm"></a>Your job is to play router and use the RIP route table to figure out which route you’d send a packet down.</p><div class="informalfigure"><a id="med_id00318a"></a><div class="mediaobject"><a id="med_id00318"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566700.png.jpg" alt="image with no caption" width="700" height="738"></div></div></div><div class="informalfigure"><a id="med_id00319a"></a><div class="mediaobject"><a id="med_id00319"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566702.png.jpg" alt="image with no caption" width="410" height="567"></div></div><p><a id="iddle1187" class="indexterm"></a><a id="iddle1483" class="indexterm"></a><span class="strong"><strong>There are other routing protocols.</strong></span></p><p>Earlier in the chapter, we had you use the RIP protocol, which works fine for a network with a small number of routers and paths, but it just does not scale. There are several other advanced IP routing protocols available. These include OSPF, IGRP, EIRGP, and BGP. IGRP and EIGRP are Cisco proprietary routing protocols. IGRP is now considered obsolete. It was replaced by EIGRP, but you may come across it here and there. These protocols are only available on Cisco routers. OSPF and BGP are routing protocols that are standards based and run on many different brands of routers.</p><p><span class="strong"><strong>But, which one do you choose?</strong></span></p><p>If you are running all Cisco routers on your network, then using EIGRP is probably best. But if you have to interact with routers from other manufactures, then OSPF (Open Shortest Path First) and BGP (Border Gateway Protocol) are best. <span class="emphasis"><em>Also, if you are hooking a router into an existing network, you will need to use the routing protocol that the rest of the routers are using.</em></span></p><div class="note" title="Geek Bits"><h3 class="title"><a id="ch07note07"></a>Geek Bits</h3><p>You can find more information on RIP and OSPF by looking at RFC 1058, 2453, and 2328. Information on EIGRP can be found at Cisco’s website:</p><p><span class="strong"><strong><a class="ulink" href="http://tinyurl.com/cb6ny9">http://tinyurl.com/cb6ny9</a></strong></span></p></div></div><div class="sect1" title="The routing protocol zoo"><div class="titlepage"><div><div><h1 class="title"><a id="routing_protocol_zoo"></a>The routing protocol zoo</h1></div></div></div><p>So what are the differences between the routing protocols? Let’s take a look.</p><div class="sidebar"><a id="rip"></a><p class="title">RIP</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Advantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It’s easy to setup.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It’s great for interoperability, as not all routers support OSPF and EIGRP.</p></td></tr><tr><td style="" valign="top"><p>Router discoverability. Routers broadcast their changes, and other routers listen.</p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Disadvantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It can be too chatty. Routers broadcast every 30 seconds, so there can be a lot of traffic.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>RIP trusts the information it receives from other routers without authentication.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>RIP is slow to converge. When routes change, it takes a while for those changes to propagate across a network.</p></td></tr><tr><td style="" valign="top"><p>Its only metric is the hop count.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="ospf"></a><p class="title">OSPF</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Advantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>There are lots of metrics to adjust.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It needs authentication. It doesn’t trust information sent from an unauthenticated router.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It’s fast to converge. When routes change, they are quickly propagated across a network.</p></td></tr><tr><td style="" valign="top"><p>It’s widely supported by different brands of routers.</p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Disadvantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It can be complex to setup.</p></td></tr><tr><td style="" valign="top"><p>It needs lots of router memory</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="eigrp"></a><p class="title">EIGRP</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Advantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>There are lots of metrics to adjust.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It needs authentication.</p></td></tr><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It’s fast to converge.</p></td></tr><tr><td style="" valign="top"><p>It’s easy to setup.</p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Disadvantages</p></th></tr></thead><tbody><tr><td style="border-bottom: 0.5pt solid ; " valign="top"><p>It only works on Cisco Routers.</p></td></tr><tr><td style="" valign="top"><p>It needs lots of router memory.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00108"></a><p class="title">Sharpen your pencil</p><p><a id="iddle1031" class="indexterm"></a><a id="iddle1273" class="indexterm"></a><a id="iddle1301" class="indexterm"></a><a id="iddle1628" class="indexterm"></a><a id="iddle1630" class="indexterm"></a><a id="iddle1636" class="indexterm"></a><a id="iddle1638" class="indexterm"></a>Choose a routing protocol for the four different network scenarios presented below.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #1 is a small network with only 3 routers. It has a fixed Internet connection with a default gateway provided by an ISP. Two of the routers are Cisco and one is a Juniper. There are not many changes to this network</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00056"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00057"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00058"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00059"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #2 is a large network with 600 routers. It has a 2 Internet connections. Most of the routers are Cisco, but there are a number of Extreme Network routers. This network has frequent changes to its topology.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00060"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00061"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00062"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00063"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #3 is a medium size network with 83 routers. It has a fixed Internet connection with a default gateway provided by an ISP. All of the routers are Cisco. There are multiple paths amongst the routers.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00064"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00065"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00066"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00067"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #4 is a medium size network with 52 routers. It has a fixed Internet connection with a default gateway provided by an ISP. The routers are all different brands. There are not many changes to this network.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00068"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00069"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00070"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00071"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00109"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1595" class="indexterm"></a><a id="iddle1631" class="indexterm"></a><a id="iddle1639" class="indexterm"></a><a id="iddle1644" class="indexterm"></a>Based on the information below, choose a routing protocol and write down your reason for choosing one over the others.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #1 is a small network with only 3 routers. It has a fixed Internet connection with a default gateway provided by an ISP. Two of the routers are Cisco and one is a Juniper. There are not many changes to this network</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00072"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00073"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566706.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00074"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00075"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><p>Since there aren’t many changes and there are only 3 routers, it makes sense to just setup some static routes on each router.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #2 is a large network with 600 routers. It has a 2 Internet connections. Most of the routers are Cisco, but there are a number of Extreme Network routers. This network has frequent changes to its topology.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00076"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00077"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00078"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566706.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00079"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><p>With a larger network, we need a better protocol than RIP, mostly because of the convergence problems RIP has. So OSPF is a good choice since not all the routers are Ciscos.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #3 is a medium size network with 83 routers. It has a fixed Internet connection with a default gateway provided by an ISP. All of the routers are Ciscos. There are multiple paths amongst the routers.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00080"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00081"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00082"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00083"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566706.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><p>Again, RIP is not the best choice for a network of this size and complexity. Since all the equipment is Cisco, you can implement EIGRP.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col><col></colgroup><tbody><tr><td style="border-bottom: 0.5pt solid ; " colspan="3" valign="top"><p>Network #4 is a medium size network with 15 routers. It has a fixed Internet connection with a default gateway provided by an ISP. The routers are all different brands. There are not many changes to this network.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00084"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566706.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>RIP</strong></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00085"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>Static Route Tables</strong></span></p></td></tr><tr><td style="border-right: 0.5pt solid ; ">&nbsp;</td><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00086"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>OSPF</strong></span></p></td><td style="" valign="top"><p><span class="inlinemediaobject"><a id="inline_id00087"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566704.png.jpg" alt="" width="15" height="15"></span> <span class="strong"><strong>EIGRP</strong></span></p></td></tr></tbody></table></div><p>We could probably use any of the routing protocols for this scenario. RIP would be the easiest, but OSPF would work as well.</p></div><div class="informalfigure"><a id="med_id00320a"></a><div class="mediaobject"><a id="med_id00320"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566708.png.jpg" alt="image with no caption" width="299" height="549"></div></div><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Why is that, what is wrong with RIP?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;Just too many moonbases to hook-up. Some of the bases are more then 15 hops away from us, and that does not work with RIP.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;So what are our choices?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;OSPF or EIGRP.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;What’s the difference?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;OSPF is an open standard for routing, and most routers support it. It is fast to converge to boot.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;Well that sounds good; let’s use OSPF.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;But what about EIGRP?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;EIGRP is comparable to OSPF. The fact that it only runs on Cisco hardware is probably the big downside.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Well Cisco got the moonbase equipment contract, so all the routers are Ciscos. That’s not an issue.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;Are there network techs up here that have experience with one or the other?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;I know a couple of techs at the other bases have experience with EIGRP. They say it is pretty easy to setup.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;I say that we go with EIGRP. It sounds like we have people that can help get it going, and it is a straightforward setup. Sound good?</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Sounds good!</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;I’ll get it going...</p><div class="sidebar"><a id="eigrp_up_close"></a><p class="title">EIGRP Up Close</p><p>So what makes EIGRP so great? Let’s take a look.</p><p><span class="strong"><strong>Neighbors</strong></span></p><p>A router running the EIGRP protocol knows its neighboring routers and shares routes with them. Neighbors can be statically entered (a good security measure), or a router can discover its neighbors with EIGRP HELLO packets.</p><div class="informalfigure"><a id="med_id00321a"></a><div class="mediaobject"><a id="med_id00321"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566710.png" alt="image with no caption" width="723" height="497"></div></div><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>In order for routers to be neighbors, they must share a common IP subnet and a Autonomous System Number (ASN).</strong></span></p></blockquote></div><p><span class="strong"><strong>EIGRP uses the Diffusing Update Algorithm</strong></span></p><p>The Diffusing Update Algorithm (DUAL) is a way of calculating routes when there are changes to a network topology. It helps keep routes <span class="strong"><strong>loop free</strong></span>.</p><div class="informalfigure"><a id="med_id00322a"></a><div class="mediaobject"><a id="med_id00322"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566712.png" alt="image with no caption" width="351" height="191"></div></div><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>A router loop is where packets would just go from one router to the next and never get anywhere. They just go around the circle.</strong></span></p></blockquote></div><p><span class="strong"><strong>EIGRP uses the Reliable Transport Protocol to send its information</strong></span></p><p>RTP assures that EIGRP route information a router sends reliably gets to its neighboring routers in the correct order with no errors.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>A network is said to “converge” when all the routers have the correct routing information for the network.</strong></span></p></blockquote></div><p><span class="strong"><strong>EIGRP only sends route updates when there are changes</strong></span></p><p>A router only updates other routers when it has a change in the network topology it is connected to. This allows for very fast convergence of a network.</p></div></div><div class="sect1" title="So how do we setup EIGRP?"><div class="titlepage"><div><div><h1 class="title"><a id="so_how_do_we_setup_eigrpquestion_mark"></a>So how do we setup EIGRP?</h1></div></div></div><p><a id="iddle1023" class="indexterm"></a><a id="iddle1190" class="indexterm"></a><a id="iddle1633" class="indexterm"></a>Setting up EIGRP on a router is pretty straightforward. You enter the config mode, then enter the router EIGRP configuration. When you add some networks in here, the router turns on EIGRP. You will need to add the neighbor routers that this router will exchange EIGRP route information with. Remember to save your changes with the write memory command when you exit the command mode.</p><div class="informalfigure"><a id="med_id00323a"></a><div class="mediaobject"><a id="med_id00323"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566714.png" alt="image with no caption" width="554" height="238"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00110"></a><p class="title">There are no Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa4qe1"></a><a id="ch07qa4q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: How does a router know when a route goes down with EIGRP?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa4q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Great question. When a router detects that one of its interfaces goes down, like a broken cable or a router dies, it sends out an EIGRP update with that route being down. That way all the routers get the message and adjust their route tables.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa4qe2"></a><a id="ch07qa4q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: OK, the big question is, what do I do if not all my routers are Ciscos?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa4q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> If you don’t want to run RIP (who could blame you), then OSPF is your choice. It is widely supported, even on Cisco equipment.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa4qe3"></a><a id="ch07qa4q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Is OSPF much different than EIGRP?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa4q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes and no. It has very similar performance to EIGRP, but it is conceptually very different. Also its setup can be a bit more complex.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa4qe4"></a><a id="ch07qa4q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So why doesn’t everyone use EIGRP?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa4q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Because it is Cisco’s proprietary routing protocol, and they have not licensed it to anyone else that we know of.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch07qa4qe5"></a><a id="ch07qa4q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Does someone own OSPF?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch07qa4q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Nope, OSPF is an open standard. Any router manufacturer can implement it on their routers.</p></td></tr></tbody></table></div></blockquote></div></div><div class="sidebar"><a id="fireside_chats-id00111"></a><p class="title">Fireside Chats</p><p><a id="iddle1118" class="indexterm"></a><a id="iddle1604" class="indexterm"></a>Tonight’s talk: <span class="strong"><strong>RIP vs. EIGRP</strong></span></p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="strong"><strong>RIP:</strong></span></p></th><th style="border-bottom: 0.5pt solid ; " valign="top"><p><span class="strong"><strong>EIGRP:</strong></span></p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Hey youngster, how are you doing?</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Well, I am not really that young. I am based on IGRP after all. And that was developed in 1986. Now where were you developed?</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>My RFC was written in 1988, but I was in development a lot earlier than that. But that is all besides the point. I want to talk about setup with you. I mean I just need to know the network address and the router’s IP address, and I can get down to business. You know what I mean?</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Man you sure are chatty. Do you talk this much all the time?</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Yes, like every 30 seconds I send out my entire route table, keeping everyone on the network up-to-date.</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Ah, well I just think it is easier to let the other routers know when one of my routes changes.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Well I don’t really worry about that. I mean, I don’t deal with that many other routers.</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Yes, I have heard you have a 15 hop count limit. Mine is 244.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>WOW! You can deal with some really big networks then.</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>And because I just send out changes to routes, the network converges really fast.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>There still is the setup issue.</p></td><td style="border-bottom: 0.5pt solid ; ">&nbsp;</td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">&nbsp;</td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Not really, you just have to know what you are doing when you set me up. No newbies.</p></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p>I don’t think I like that last comment...</p></td><td style="">&nbsp;</td></tr></tbody></table></div></div><div class="sidebar"><a id="long_exercise-id00112"></a><p class="title">Long Exercise</p><p><a id="iddle1188" class="indexterm"></a><a id="iddle1413" class="indexterm"></a><a id="iddle1442" class="indexterm"></a><a id="iddle1484" class="indexterm"></a><a id="iddle1632" class="indexterm"></a><a id="iddle1640" class="indexterm"></a>Based on this network diagram of router connections, finish the EIGRP configuration. Because of security concerns, we want to statically enter this router’s neighbors.</p><div class="informalfigure"><a id="med_id00324a"></a><div class="mediaobject"><a id="med_id00324"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566716.png.jpg" alt="image with no caption" width="1000" height="680"></div></div></div><div class="sidebar"><a id="long_exercise_solution-id00113"></a><p class="title">Long Exercise Solution</p><p><a id="iddle1189" class="indexterm"></a><a id="iddle1218" class="indexterm"></a><a id="iddle1597" class="indexterm"></a><a id="iddle1645" class="indexterm"></a>Based on this network diagram of router connections, finish the EIGRP configuration. Because of security concerns, we want to statically enter this router’s neighbors.</p><div class="informalfigure"><a id="med_id00325a"></a><div class="mediaobject"><a id="med_id00325"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566718.png.jpg" alt="image with no caption" width="1000" height="677"></div></div></div></div><div class="sect1" title="We have lift off!"><div class="titlepage"><div><div><h1 class="title"><a id="we_have_lift_offexclamation_mark"></a>We have lift off!</h1></div></div></div><p>Thanks to your efforts, all of the moon bases are now able to communicate with each other through their individual network devices. Congratulations!</p><div class="informalfigure"><a id="med_id00326a"></a><div class="mediaobject"><a id="med_id00326"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/httpatomoreillycomsourceoreillyimages1566720.png.jpg" alt="image with no caption" width="1000" height="709"></div></div></div></div></div></div><link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780596804398/files/core.css" crossorigin="anonymous"></div></div></section>
</div>


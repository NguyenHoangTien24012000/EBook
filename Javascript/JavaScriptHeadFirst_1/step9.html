<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content" class="noOutline" tabindex="-1"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><div class="chapter" title="Chapter&nbsp;10.&nbsp;Liberated functions"><div class="titlepage"><div><div><h1 class="title"><a id="first_class_functions_liberated_function"></a>Chapter&nbsp;10.&nbsp;Liberated functions</h1></div><div><h3 class="subtitle">First Class Functions</h3></div></div></div><div class="informalfigure"><a id="med_id00726a"></a><div class="mediaobject"><a id="med_id00726"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113736.png.jpg" alt="image with no caption" width="711" height="494"></div></div><p><span class="strong"><strong>Know functions, then rock.</strong></span> Every art, craft, and discipline has a key principle that separates the intermediate players from the rock star virtuosos—when it comes to JavaScript, it’s truly understanding <span class="strong"><strong>functions</strong></span> that makes the difference. Functions are fundamental to JavaScript, and many of the techniques we use to <span class="strong"><strong>design and organize</strong></span> code depend on advanced knowledge and use of functions. The path to learning functions at this level is an interesting and often mind-bending one, so get ready... This chapter is going to be a bit like Willy Wonka giving a tour of the chocolate factory—you’re going to encounter some wild, wacky and wonderful things as you learn more about JavaScript functions.</p><div class="note" title="Note"><h3 class="title"><a id="ch10note01"></a>Note</h3><p>We’ll spare you the singing Oompa Loompas.</p></div><div class="sect1" title="The mysterious double life of the function keyword"><div class="titlepage"><div><div><h1 class="title"><a id="mysterious_double_life_of_the_function_k"></a>The mysterious double life of the function keyword</h1></div></div></div><div class="informalfigure"><a id="med_id00727a"></a><div class="mediaobject"><a id="med_id00727"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113738.png.jpg" alt="image with no caption" width="260" height="400"></div></div><p><a id="iddle1274" class="indexterm"></a><a id="iddle1279" class="indexterm"></a><a id="iddle1778" class="indexterm"></a><a id="iddle1813" class="indexterm"></a><a id="iddle1844" class="indexterm"></a><a id="iddle1857" class="indexterm"></a><a id="iddle1882" class="indexterm"></a><a id="iddle2118" class="indexterm"></a><a id="iddle2123" class="indexterm"></a><a id="iddle2609" class="indexterm"></a><a id="iddle2754" class="indexterm"></a>So far we’ve been declaring functions like this:</p><div class="informalfigure"><a id="med_id00728a"></a><div class="mediaobject"><a id="med_id00728"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113740.png.jpg" alt="image with no caption" width="522" height="182"></div></div><p>There are no surprises here, but let’s get our terminology down: formally, the first statement above is a <span class="emphasis"><em>function declaration,</em></span> which creates a function that has a name—in this case <code class="literal">quack</code>—that can be used to <span class="emphasis"><em>reference</em></span> and <span class="emphasis"><em>invoke</em></span> the function.</p><p>So far so good, but the story gets more mysterious because, as you saw at the end of the last chapter, there’s another way to use the function keyword:</p><div class="informalfigure"><a id="med_id00729a"></a><div class="mediaobject"><a id="med_id00729"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113742.png.jpg" alt="image with no caption" width="592" height="208"></div></div><p>Now when we use the function keyword this way—that is, within a statement, like an assignment statement—we call this a <span class="emphasis"><em>function expression</em></span>. Notice that, unlike the function declaration, this function doesn’t have a name. Also, the expression results in a value that is then assigned to the variable <code class="literal">fly</code>. What is that value? Well, we’re assigning it to the variable <code class="literal">fly</code> and then later invoking it, so it must be a <span class="emphasis"><em>reference to a function</em></span>.</p><div class="note" title="Serious Coding"><h3 class="title"><a id="ch10note02"></a>Serious Coding</h3><p>A function reference is exactly what it sounds like: a reference that refers to a function. You can use a function reference to invoke a function or, as you’ll see, you can assign them to variables, store them in objects, and pass them to or return them from functions (just like object references).</p><div class="informalfigure"><a id="med_id00730a"></a><div class="mediaobject"><a id="med_id00730"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113744.png.jpg" alt="image with no caption" width="484" height="269"></div></div></div></div><div class="sect1" title="Function declarations versus function expressions"><div class="titlepage"><div><div><h1 class="title"><a id="function_declarations_versus_function_ex"></a>Function declarations versus function expressions</h1></div></div></div><p><a id="iddle1243" class="indexterm"></a><a id="iddle1271" class="indexterm"></a><a id="iddle1444" class="indexterm"></a><a id="iddle1449" class="indexterm"></a><a id="iddle1450" class="indexterm"></a><a id="iddle1662" class="indexterm"></a><a id="iddle1782" class="indexterm"></a><a id="iddle1787" class="indexterm"></a><a id="iddle1788" class="indexterm"></a><a id="iddle1799" class="indexterm"></a><a id="iddle2115" class="indexterm"></a><a id="iddle3050" class="indexterm"></a>Whether you use a function declaration or a function expression you get the same thing: a function. So what’s the difference? Is the declaration just more convenient, or is there something about function expressions that makes them useful? Or are these just two ways to do the same thing?</p><p>At first glance, it might appear as if there isn’t a big difference between function declarations and function expressions. But, actually, there is something fundamentally different about the two, and to understand that difference we need to start by looking at how your code is treated by the browser at runtime. So let’s drop in on the browser as it parses and evaluates the code in your page:</p><div class="informalfigure"><a id="med_id00731a"></a><div class="mediaobject"><a id="med_id00731"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113746.png.jpg" alt="image with no caption" width="814" height="708"></div></div></div><div class="sect1" title="Parsing the function declaration"><div class="titlepage"><div><div><h1 class="title"><a id="parsing_the_function_declaration"></a>Parsing the function declaration</h1></div></div></div><p><a id="iddle2614" class="indexterm"></a>When the browser parses your page—before it evaluates any code—it’s looking for function declarations. When the browser finds one, it creates a function and assigns the resulting reference to a variable with the same name as the function. Like this:</p><div class="informalfigure"><a id="med_id00732a"></a><div class="mediaobject"><a id="med_id00732"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113748.png.jpg" alt="image with no caption" width="833" height="895"></div></div></div><div class="sect1" title="What’s next? The browser executes the code"><div class="titlepage"><div><div><h1 class="title"><a id="whatapostrophes_nextquestion_mark_the_br"></a>What’s next? The browser executes the code</h1></div></div></div><p><a id="iddle1242" class="indexterm"></a><a id="iddle1317" class="indexterm"></a><a id="iddle3049" class="indexterm"></a>Now that all the function declarations have been taken care of, the browser goes back up to the top of your code and starts executing it, top to bottom. Let’s check in on the browser at that point in the execution:</p><div class="informalfigure"><a id="med_id00733a"></a><div class="mediaobject"><a id="med_id00733"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113750.png.jpg" alt="image with no caption" width="806" height="859"></div></div></div><div class="sect1" title="Moving on... The conditional"><div class="titlepage"><div><div><h1 class="title"><a id="moving_onhellip_the_conditional"></a>Moving on... The conditional</h1></div></div></div><p><a id="iddle1240" class="indexterm"></a><a id="iddle1247" class="indexterm"></a><a id="iddle1363" class="indexterm"></a><a id="iddle1659" class="indexterm"></a><a id="iddle1796" class="indexterm"></a><a id="iddle3047" class="indexterm"></a><a id="iddle3054" class="indexterm"></a>Once the <code class="literal">fly</code> variable has been taken care of, the browser moves on. The next statement is the function declaration for <code class="literal">quack</code>, which was dealt with in the first pass through the code, so the browser skips the declaration and moves on to the conditional statement. Let’s follow along...</p><div class="informalfigure"><a id="med_id00734a"></a><div class="mediaobject"><a id="med_id00734"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113752.png.jpg" alt="image with no caption" width="854" height="980"></div></div><div class="sect2" title="And finishing up..."><div class="titlepage"><div><div><h2 class="title"><a id="and_finishing_uphellip"></a>And finishing up...</h2></div></div></div><p>All that’s left is to invoke the <code class="literal">fly</code> function created by the function expression. Let’s see how the browser handles this:</p><div class="informalfigure"><a id="med_id00735a"></a><div class="mediaobject"><a id="med_id00735"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113754.png.jpg" alt="image with no caption" width="841" height="979"></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00157"></a><p class="title">Sharpen your pencil</p><p><a id="iddle1244" class="indexterm"></a><a id="iddle1277" class="indexterm"></a><a id="iddle1445" class="indexterm"></a><a id="iddle1783" class="indexterm"></a><a id="iddle2121" class="indexterm"></a><a id="iddle3028" class="indexterm"></a><a id="iddle3051" class="indexterm"></a><span class="strong"><strong>What deductions can you make about function declarations and function expressions given how the browser treats the quack and fly code? Check each statement that applies. Check your answer at the end of the chapter before you go on.</strong></span></p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00096"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are evaluated before the rest of the code is evaluated.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00097"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function expressions get evaluated later, with the rest of the code.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00098"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>A function declaration doesn’t return a reference to a function; rather it creates a variable with the name of the function and assigns the new function to it.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00099"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>A function expression returns a reference to the new function created by the expression.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00100"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can hold function references in variables.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00101"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are statements; function expressions are used in statements.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00102"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>The process of invoking a function created by a declaration is exactly the same for one created with an expression.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00103"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are the tried and true way to create functions.</p></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00104"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="" valign="top"><p>You always want to use function declarations because they get evaluated earlier.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00158"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa1qe1"></a><a id="ch10qa1q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: We’ve seen expressions like 3+4 and Math.random() * 6, but how can a function be an expression?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa1q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> An expression is anything that evaluates to a value. 3+4 evaluates to 7, Math.random() * 6 evaluates to a random number, and a function expression evaluates to a function reference.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa1qe2"></a><a id="ch10qa1q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: But a function declaration is not an expression?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa1q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No, a function declaration is a statement. Think of it as having a hidden assignment that assigns the function reference to a variable for you. A function expression doesn’t assign a function reference to anything; you have to do that yourself.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa1qe3"></a><a id="ch10qa1q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: What good does it do me to have a variable that refers to a function?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa1q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Well for one thing you can use it to invoke the function:</p><a id="pro_id00102"></a><pre class="programlisting"><span class="strong"><strong>myFunctionReference();</strong></span></pre><p>But you can also pass a reference to a function or return a reference from a function. But, we’re getting a little ahead of ourselves. We’ll come back to this in a few pages.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa1qe4"></a><a id="ch10qa1q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Can function expressions only appear on the right hand side of an assignment statements?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa1q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Not at all. A function expression can appear in many different places, just like other kind of expressions can. Stay tuned because this is a really good question and we’ll be coming back to this in just a bit.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa1qe5"></a><a id="ch10qa1q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Okay, a variable can hold a reference to a function. But what is the variable really referencing? Just some code that is in the body of the function?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa1q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> That’s a good way to begin thinking about functions, but think of them more as a little crystallized version of the code, all ready to pull out at any time and invoke. You’re going to see later that this crystallized function has a bit more in it than just the code from the body.</p></td></tr></tbody></table></div></blockquote></div></div><div class="informalfigure"><a id="med_id00736a"></a><div class="mediaobject"><a id="med_id00736"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113756.png.jpg" alt="image with no caption" width="587" height="492"></div></div><p><a id="iddle1451" class="indexterm"></a><a id="iddle1663" class="indexterm"></a><a id="iddle1789" class="indexterm"></a><a id="iddle1800" class="indexterm"></a><span class="strong"><strong>It is a little subtle.</strong></span> First of all, you’re right—whether you use a function declaration or a function expression, you end up with a function. But there are some important differences between the two. For one, with a declaration, a function is created and setup <span class="emphasis"><em>before the rest of the code gets evaluated</em></span>. With a function expression, a function is created as the code executes, at <span class="emphasis"><em>runtime</em></span>.</p><p>Another difference has to do with function naming—when you use a declaration, the function name is used to create and set up as a variable that refers to the function. And, when you use a function expression, you typically don’t provide a name for the function, so either you end up assigning the function to a variable in code, or you use the function expression in other ways.</p><div class="note" title="Note"><h3 class="title"><a id="ch10note03"></a>Note</h3><p>We’ll take a look at what those are later in the chapter.</p></div><p>Now take these differences and stash them in the back of your brain as this is all going to become useful shortly. For now, just remember how function declarations and expressions are evaluated, and how names are handled.</p><div class="sidebar"><a id="be_the_browser-id00159"></a><p class="title">BE the Browser</p><div class="informalfigure"><a id="med_id00737a"></a><div class="mediaobject"><a id="med_id00737"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><a id="iddle1442" class="indexterm"></a><a id="iddle1657" class="indexterm"></a><a id="iddle1780" class="indexterm"></a><a id="iddle1794" class="indexterm"></a><span class="strong"><strong>Below, you’ll find JavaScript code. Your job is to play like you’re the browser evaluating the code. In the space to the right, record each function as it gets created. Remember to make two passes over the code: the pass that processes declarations, and the second pass that handles expressions.</strong></span></p><a id="pro_id00103"></a><pre class="programlisting"><span class="strong"><strong>var midi = true;</strong></span>
<span class="strong"><strong>var type = "piano";</strong></span>
<span class="strong"><strong>var midiInterface;</strong></span>

<span class="strong"><strong>function play(sequence) {</strong></span>
    <span class="strong"><strong>// code here</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>var pause = function() {</strong></span>
    <span class="strong"><strong>stop();</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>function stop() {</strong></span>
    <span class="strong"><strong>// code here</strong></span>


<span class="strong"><strong>function createMidi() {</strong></span>
   <span class="strong"><strong>// code here</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>if (midi) {</strong></span>
    <span class="strong"><strong>midiInterface = function(type) {</strong></span>
        <span class="strong"><strong>// code here</strong></span>
    <span class="strong"><strong>};</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="informalfigure"><a id="med_id00738a"></a><div class="mediaobject"><a id="med_id00738"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113758.png.jpg" alt="image with no caption" width="364" height="519"></div></div></div></div></div><div class="sect1" title="How functions are values too"><div class="titlepage"><div><div><h1 class="title"><a id="how_functions_are_values_too"></a>How functions are values too</h1></div></div></div><p><a id="iddle1275" class="indexterm"></a><a id="iddle1441" class="indexterm"></a><a id="iddle1656" class="indexterm"></a><a id="iddle1753" class="indexterm"></a><a id="iddle1756" class="indexterm"></a><a id="iddle1779" class="indexterm"></a><a id="iddle1793" class="indexterm"></a><a id="iddle1845" class="indexterm"></a><a id="iddle2119" class="indexterm"></a><a id="iddle2610" class="indexterm"></a><a id="iddle2935" class="indexterm"></a><a id="iddle2975" class="indexterm"></a>Sure, we all think of functions as things we invoke, but you can think of functions as <span class="emphasis"><em>values</em></span> too. That value is actually a reference to the function, and as you’ve seen, whether you define a function with a function declaration or a function expression, you get a reference to that function.</p><div class="informalfigure"><a id="med_id00739a"></a><div class="mediaobject"><a id="med_id00739"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113760.png.jpg" alt="image with no caption" width="498" height="229"></div></div><p>One of the most straightforward things we can do with functions is assign them to variables. Like this:</p><div class="informalfigure"><a id="med_id00740a"></a><div class="mediaobject"><a id="med_id00740"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113762.png.jpg" alt="image with no caption" width="829" height="574"></div></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch10note05"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Flying!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Flying!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Quack!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Quack!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Quack!</code></strong></span></p></div><div class="sidebar"><a id="sharpen_your_pencil-id00160"></a><p class="title">Sharpen your pencil</p><p>To get the idea of functions as values into your brain, let’s play a little game of chance. Try the shell game. Will you win or lose? Give it a try and find out.</p><div class="informalfigure"><a id="med_id00741a"></a><div class="mediaobject"><a id="med_id00741"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113764.png.jpg" alt="image with no caption" width="754" height="640"></div></div></div><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>Start thinking about functions as values, just like numbers, strings, booleans or objects. The thing that really makes a function value different from these other values is that we can <span class="underline">invoke it.</span></strong></span></p></blockquote></div><div class="sidebar"><a id="function_exposed-id00161"></a><p class="title">Function Exposed</p><p><span class="strong"><strong>This week’s interview: Understanding Function</strong></span></p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Function, we’re so happy to finally have you back on this show. You’re quite a mystery and our readers are dying to know more.</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;It’s true, I’m deep.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Let’s start with this idea that you can be created with a declaration, or created with an expression. Why two ways of defining you? Wouldn’t one be enough?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Well, remember, these two ways of defining a function do two slightly different things.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;But the result is the same: a function, right?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Yes, but look at it this way. A function declaration is doing a little bit of work behind the scenes for you: it’s creating the function, and then also creating a variable to store the function reference in. A function expression creates the function, which results in a reference and it’s up to you to do something with it.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;But don’t we always just store the reference we get from a function expression in a variable anyway?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Definitely not. In fact, we usually don’t. Remember a function reference is a value. Think of the kinds of things you can do with other kinds of values, like an object reference for instance. I can do all those things too.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;But how can you possibly do everything those other values can do? I declare a function, and I call it. That’s about as much as any language allows, right?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Wrong. You need to start thinking of a function as a value, just like objects or the primitive types. Once you get a hold of a function you can do all kinds of things with it. But there is one important difference between a function and other kinds of values, and that is what really makes me what I am: a function can be invoked, to execute the code in its body.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;That sounds very impressive and powerful, but I’d have no idea what to do with you other than define and call you.</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;This is where we separate the six figure coders from the scripters. When you can treat a function like any other value, all kinds of interesting programming constructs become possible.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Can you give us just one example?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Sure. Say you want to write a function that can sort <span class="emphasis"><em>anything</em></span>. No problem. All you need is a function that takes two things: the collection of items you need to sort, and <span class="emphasis"><em>another function</em></span> that knows how to compare any two items in your collection. Using JavaScript you can easily create code like that. You write one sort function for every kind of collection, and then just tell that function how to compare items by passing it a function that knows how to do the comparison.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Err...</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Like I said, this is where we separate the six figure coders from the scripters. Again, we’re <span class="emphasis"><em>passing a function</em></span> that knows how to do the comparison <span class="emphasis"><em>to the other function</em></span>. In other words we’re treating the function like a value by passing it to a function <span class="emphasis"><em>as a value</em></span>.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;And what does that get us other than confused?</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;It gets you less code, less hard work, more reliability, better flexibility, better maintainability, a higher salary.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;That all sounds good, but I’m still not sure how to get there.</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Getting there takes a little bit of work. This is definitely an area where your brain has to expand a bit.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Well, function, my head is expanding so much it’s about to explode, so I’m going to go lie down.</p><p title="Function:"><span class="title"><strong><span class="strong"><strong>Function:</strong></span></strong></span>&nbsp;Any time. Thanks for having me!</p></div></div><div class="sect1" title="Did we mention functions have First Class status in JavaScript?"><div class="titlepage"><div><div><h1 class="title"><a id="did_we_mention_functions_have_first_clas"></a>Did we mention functions have First Class status in JavaScript?</h1></div></div></div><p><a id="iddle1669" class="indexterm"></a><a id="iddle1737" class="indexterm"></a><a id="iddle2937" class="indexterm"></a>If you’re coming to JavaScript from a more traditional programming language you might expect functions to be... well, just functions. You can declare them and call them, but when you’re not doing either of those things they just sit around doing nothing.</p><p>Now you know that functions in JavaScript are values—values that can be assigned to variables. And you know that with values of other types, like numbers, booleans, strings and even objects, we can do all sorts of things with those values, like pass them to functions, return them from functions or even store them in objects or arrays.</p><div class="informalfigure"><a id="med_id00742a"></a><div class="mediaobject"><a id="med_id00742"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113766.png.jpg" alt="image with no caption" width="393" height="1000"></div></div><p>Computer scientists actually have a term for these kinds of values: they’re called <span class="emphasis"><em>first class values</em></span>. Here’s what you can do with a first class value:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Assign the value to a variable (or store it in a data structure like an array or object).</p></li><li class="listitem"><p>Pass the value to a function.</p></li><li class="listitem"><p>Return the value from a function.</p></li></ul></div><p>Guess what? We can do all these things with functions too. In fact, we can do <span class="emphasis"><em>everything</em></span> with a function that we can do with other values in JavaScript. So consider functions first class values in JavaScript, along with all the values of the types you already know: numbers, strings, booleans and objects.</p><p>Here’s a more formal definition of first class:</p><div class="note" title="Note"><h3 class="title"><a id="ch10note06"></a>Note</h3><p title="First class:"><span class="title"><strong><span class="strong"><strong>First class:</strong></span></strong></span>&nbsp;a value that can be treated like any other value in a programming language, including the ability to be assigned to a variable, passed as an argument, and returned from a function.</p></div><p>We’re going to see that JavaScript functions easily qualify as first class values—in fact, let’s spend a little time working through just what it means for a function to be first class in each of these cases. Here’s a little advice first: stop thinking about functions as something special and different from other values in JavaScript. There is great power in treating a function like a value. Our goal in the rest of the chapter is to show you why.</p></div><div class="sect1" title="Flying First Class"><div class="titlepage"><div><div><h1 class="title"><a id="flying_first_class"></a>Flying First Class</h1></div></div></div><div class="informalfigure"><a id="med_id00743a"></a><div class="mediaobject"><a id="med_id00743"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113768.png.jpg" alt="image with no caption" width="214" height="232"></div></div><p><a id="iddle1673" class="indexterm"></a><a id="iddle1741" class="indexterm"></a><a id="iddle1847" class="indexterm"></a><a id="iddle2941" class="indexterm"></a>The next time you’re in a job interview and you get asked “What makes JavaScript functions first class?” you’re going to pass with flying colors. But before you start celebrating your new career, remember that, so far, all your understanding of first class functions is <span class="emphasis"><em>book knowledge</em></span>. Sure, you can recite the definition of what you can do with first class functions:</p><div class="note" title="Note"><h3 class="title"><a id="ch10note07"></a>Note</h3><p>If that answer lands you the big job, don’t forget about us! We take donations in chocolate, pizza or bitcoins.</p></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00105"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113770.png.jpg" alt="" width="19" height="28"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can assign functions to variables.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch10note07a"></a>Note</h3><p>You’ve seen this already.</p></div></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00106"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can pass functions to functions.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch10note07b"></a>Note</h3><p>We’re going to work on this now.</p></div></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00107"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="" valign="top"><p>You can return functions from functions.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch10note07c"></a>Note</h3><p>And we’ll cover this in just a bit...</p></div></td></tr></tbody></table></div><p>But can you use those techniques in your code, or know when it would help you to do so? No worries; we’re going to deal with that now by learning how to pass functions to functions. We’re going to start simple, and take it from there. In fact, we’re going to start with just a simple data structure that represents passengers on an airline flight:</p><div class="informalfigure"><a id="med_id00744a"></a><div class="mediaobject"><a id="med_id00744"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113772.png.jpg" alt="image with no caption" width="813" height="288"></div></div><p>Here’s our goal: write some code that looks at the passenger list and makes sure that certain
conditions are met before the flight is allowed to take off. For instance, let’s make sure
there are no passengers on a no-fly list. And let’s make sure everyone has paid for the
flight. We might even want to create a list of everyone who is on the flight.</p><div class="note" title="Brain Power"><h3 class="title"><a id="ch10note08"></a>Brain Power</h3><p>Think about how you’d write code to perform these three tasks (no-fly list, paid
customers and a list of passengers).</p></div></div><div class="sect1" title="Writing code to process and check passengers"><div class="titlepage"><div><div><h1 class="title"><a id="writing_code_to_process_and_check_passen"></a>Writing code to process and check passengers</h1></div></div></div><p>Now typically you’d write a function for each of these conditions: one to check the no-fly-list, one to check that every passenger has paid, and one to print out all the passengers. But if we wrote that code and stepped back to look at it, we’d find that all these functions look roughly the same, like this:</p><div class="informalfigure"><a id="med_id00745a"></a><div class="mediaobject"><a id="med_id00745"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113774.png.jpg" alt="image with no caption" width="660" height="342"></div></div><p>That’s a lot of duplicated code: all these functions iterate through the passengers doing something with each passenger. And what if there are additional checks needed in the future? Say, checking to make sure laptops are powered down, checking to see if a passenger has an upgrade, checking to see if a passenger has a medical issue, and so on. That’s a lot of redundant code.</p><p>Even worse, what if the data structure holding the passengers changes from a simple array of objects to something else? Then you might have to open every one of these functions and rewrite it. Not good.</p><p>We can solve this little problem with first class functions. Here’s how: we’re going to write one function that knows how to iterate through the passengers, and pass to that function a second function that knows how to do the check we need (that is, to see if a name is on a no-fly list, to check whether or not a passenger has paid, and so on).</p><div class="sidebar"><a id="exercise-id00162"></a><p class="title">Exercise</p><p>Let’s do a little pre-work on this by first writing a function that takes a passenger as
an argument and checks to see if that passenger’s name is on the no-fly list. Return true if
it is and false otherwise. Write another function that takes a passenger and checks to see if the
passenger hasn’t paid. Return true if the passenger has not paid, and false otherwise.
We’ve started the code for you below; you just need to finish it. You’ll find our
solution on the next page, but don’t peek!</p><a id="pro_id00104"></a><pre class="programlisting"><span class="strong"><strong>function checkNoFlyList(passenger) {</strong></span>


<span class="strong"><strong>}</strong></span>


<span class="strong"><strong>function checkNotPaid(passenger) {</strong></span>


<span class="strong"><strong>}</strong></span></pre><div class="note" title="Note"><h3 class="title"><a id="ch10note09"></a>Note</h3><p>Hint: assume your no-fly list consists of one individual: Dr. Evel.</p></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00163"></a><p class="title">Sharpen your pencil</p><p>Let’s get your brain warmed up for passing your first function to another function. Evaluate the code below (in your head) and see what you come up with. Make sure you check your answer before moving on.</p><a id="pro_id00105"></a><pre class="programlisting"><span class="strong"><strong>function sayIt(translator) {</strong></span>
    <span class="strong"><strong>var phrase = translator("Hello");</strong></span>
    <span class="strong"><strong>alert(phrase);</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>function hawaiianTranslator(word) {</strong></span>
    <span class="strong"><strong>if (word === "Hello") return "Aloha";</strong></span>
    <span class="strong"><strong>if (word === "Goodbye") return "Aloha";</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>sayIt(hawaiianTranslator);</strong></span></pre></div></div><div class="sect1" title="Iterating through the passengers"><div class="titlepage"><div><div><h1 class="title"><a id="iterating_through_the_passengers"></a>Iterating through the passengers</h1></div></div></div><p>We need a function that takes the passengers and another function that knows how to test a single passenger for some condition, like being on the no-fly list. Here’s how we do that:</p><div class="informalfigure"><a id="med_id00746a"></a><div class="mediaobject"><a id="med_id00746"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113776.png.jpg" alt="image with no caption" width="734" height="419"></div></div><p>Now all we need are some functions that can test passengers (luckily you wrote these in the previous Sharpen Your Pencil exercise). Here they are:</p><div class="informalfigure"><a id="med_id00747a"></a><div class="mediaobject"><a id="med_id00747"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113778.png.jpg" alt="image with no caption" width="859" height="316"></div></div></div><div class="sect1" title="Passing a function to a function"><div class="titlepage"><div><div><h1 class="title"><a id="passing_a_function_to_a_function"></a>Passing a function to a function</h1></div></div></div><p>Okay, we’ve got a function that’s ready to accept a function as an argument (<code class="literal">processPassengers</code>), and we’ve got two functions that are ready to be passed as arguments to <code class="literal">processPassengers</code> (<code class="literal">checkNoFlyList</code> and <code class="literal">checkNotPaid</code>).</p><p>It’s time to put this all together. Drum roll please...</p><div class="informalfigure"><a id="med_id00748a"></a><div class="mediaobject"><a id="med_id00748"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113780.png.jpg" alt="image with no caption" width="656" height="345"></div></div><div class="informalfigure"><a id="med_id00749a"></a><div class="mediaobject"><a id="med_id00749"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113782.png.jpg" alt="image with no caption" width="258" height="433"></div></div><div class="sect2" title="Test drive flight"><div class="titlepage"><div><div><h2 class="title"><a id="test_drive_flight"></a>Test <span class="strikethrough">drive</span> flight <span class="inlinemediaobject"><a id="inline_id00108"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113784.png.jpg" alt="" width="94" height="52"></span></h2></div></div></div><p>To test drive your code, just add this JavaScript to a basic HTML page, and load it into your browser.</p><div class="note" title="JavaScript console"><h3 class="title"><a id="ch10note05a"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">The plane can’t take off: we have a passenger on the no-fly-list.</code></strong></span></p><p><span class="strong"><strong><code class="literal">The plane can’t take off: not everyone has paid.</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p>Well, looks like we won’t be taking off after all. We’ve got problems with our passengers! Good thing we checked...</p></blockquote></div></div><div class="sidebar"><a id="exercise-id00164"></a><p class="title">Exercise</p><p>Your turn again: write a function that prints a passenger’s name and whether or not they have paid to console.log. Pass your function to processPassengers to test it. We’ve started the code for you below; you just need to finish it up. Check your answer at the end of the chapter before you go on.</p><div class="informalfigure"><a id="med_id00750a"></a><div class="mediaobject"><a id="med_id00750"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113786.png.jpg" alt="image with no caption" width="635" height="361"></div></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00165"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa2qe1"></a><a id="ch10qa2q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Couldn’t we just put all this code into processPassengers? We could just put all the checks we need into one iteration, so each time through we do all the checks and print the list. Wouldn’t that be more efficient?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa2q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> If your code is short and simple, yes, that might be a reasonable approach. However, what we’re really after is flexibility. What if, in the future, you are constantly adding new checks (has everyone put their laptop away?) or requirements for your existing functions change? Or the underlying data structure for passengers changes? In these cases, the design we used allows you to make changes or additions in a way that reduces overall complexity and that is less likely to introduce bugs into your code.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa2qe2"></a><a id="ch10qa2q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: What exactly are we passing when we pass a function to a function?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa2q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> We’re passing a reference to the function. Think of that reference like a pointer that points to an internal representation of the function itself. The reference itself can be held in a variable and reassigned to other variables or passed as an argument to a function. And placing parentheses after a function reference causes the function to be invoked.</p></td></tr></tbody></table></div></blockquote></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00166"></a><p class="title">Sharpen your pencil</p><p><a id="iddle1754" class="indexterm"></a><a id="iddle2976" class="indexterm"></a>Below we’ve created a function and assigned it to the variable fun.</p><a id="pro_id00106"></a><pre class="programlisting"><span class="strong"><strong>function fun(echo) {</strong></span>
    <span class="strong"><strong>console.log(echo);</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="informalfigure"><a id="med_id00751a"></a><div class="mediaobject"><a id="med_id00751"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113788.png.jpg" alt="image with no caption" width="279" height="220"></div></div><p>Work your way through this code and write the resulting output on this page. Do this with your brain before you attempt it with your computer.</p><div class="informalfigure"><a id="med_id00752a"></a><div class="mediaobject"><a id="med_id00752"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113790.png.jpg" alt="image with no caption" width="767" height="435"></div></div><p>Super important: check and understand the answers before moving on!</p></div></div></div><div class="sect1" title="Returning functions from functions"><div class="titlepage"><div><div><h1 class="title"><a id="returning_functions_from_functions"></a>Returning functions from functions</h1></div></div></div><div class="informalfigure"><a id="med_id00753a"></a><div class="mediaobject"><a id="med_id00753"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113792.png.jpg" alt="image with no caption" width="322" height="222"></div></div><p><a id="iddle1678" class="indexterm"></a><a id="iddle1746" class="indexterm"></a><a id="iddle1866" class="indexterm"></a><a id="iddle2946" class="indexterm"></a>At this point we’ve exercised two of our first class requirements, assigning functions to variables and passing functions to functions, but we haven’t yet seen an example of returning a function from a function.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00109"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113794.png.jpg" alt="" width="19" height="27"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can assign functions to variables.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00110"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113796.png.jpg" alt="" width="19" height="32"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can pass functions to functions.</p></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00111"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="" valign="top"><p>You can return functions from functions.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch10note07d"></a>Note</h3><p>We’re doing this now</p></div></td></tr></tbody></table></div><p>Let’s extend the airline example a bit and explore why and where we might want to return a function from a function. To do that, we’ll add another property to each of our passengers, the ticket property, which is set to “coach” or “firstclass” depending on the type of ticket the passenger has purchased:</p><a id="pro_id00107"></a><pre class="programlisting"><span class="strong"><strong>var passengers = [ { name: "Jane Doloop", paid: true, <span class="gray-background">ticket: "coach"</span> },</strong></span>
                   <span class="strong"><strong>{ name: "Dr. Evel", paid: true, <span class="gray-background">ticket: "firstclass"</span> },</strong></span>
                   <span class="strong"><strong>{ name: "Sue Property", paid: false, <span class="gray-background">ticket: "firstclass"</span> },</strong></span>
                   <span class="strong"><strong>{ name: "John Funcall", paid: true, <span class="gray-background">ticket: "coach"</span> } ];</strong></span></pre><p>With that addition, we’ll write some code that handles the various things a flight attendant needs to do:</p><div class="informalfigure"><a id="med_id00754a"></a><div class="mediaobject"><a id="med_id00754"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113798.png.jpg" alt="image with no caption" width="460" height="231"></div></div><div class="informalfigure"><a id="med_id00755a"></a><div class="mediaobject"><a id="med_id00755"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113800.png.jpg" alt="image with no caption" width="417" height="465"></div></div><p>Now as you might know, service in first class tends to be a little different from the service in coach. In first class you’re able to order a cocktail or wine, while in coach you’re more likely to be offered a cola or water.</p><div class="note" title="Note"><h3 class="title"><a id="ch10note10"></a>Note</h3><p>At least that’s how it looks in the movies...</p></div></div><div class="sect1" title="Writing the flight attendant drink order code"><div class="titlepage"><div><div><h1 class="title"><a id="writing_the_flight_attendant_drink_order"></a>Writing the flight attendant drink order code</h1></div></div></div><p>Now your first attempt might look like this:</p><div class="informalfigure"><a id="med_id00756a"></a><div class="mediaobject"><a id="med_id00756"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113802.png.jpg" alt="image with no caption" width="701" height="271"></div></div><p>Not bad. For simple code this works well: we’re taking the passenger’s ticket and then displaying an alert based on the type of ticket they purchased. But let’s think through some potential downsides of this code. Sure, the code to take a drink order is simple, but what happens to the <code class="literal">serveCustomer</code> function if the problem becomes more complex. For instance, we might start serving three classes of passengers (firstclass, business and coach. And what about premium economy, that’s four!). What happens if the drink offerings get more complex? Or what if the choice of drinks is based on the location of the originating or destination airport?</p><div class="note" title="Note"><h3 class="title"><a id="ch10note11"></a>Note</h3><p>For instance they typically only serve Maitais to first class on trips to Hawaii (or so we’ve been told).</p></div><p>If we have to deal with these complexities then <code class="literal">serveCustomer</code> is quickly going to become a large function that is a lot more about managing drinks than serving customers, and when we design functions, a good rule of thumb is to have them do only one thing, but do it really well.</p><div class="note" title="Brain Power"><h3 class="title"><a id="ch10note12"></a>Brain Power</h3><p>Re-read all the potential issues listed in the last two paragraphs on this page. Then, think about what code design would allow us to keep serveCustomer focused, yet also allow for expansion of our drink-serving capability in the future.</p></div></div><div class="sect1" title="The flight attendant drink order code: a different approach"><div class="titlepage"><div><div><h1 class="title"><a id="flight_attendant_drink_order_code_a_diff"></a>The flight attendant drink order code: a different approach</h1></div></div></div><p>Our first pass wasn’t bad, but as you can see this code could be problematic over time as the drink serving code gets more complex. Let’s rework the code a little, as there’s another way we can approach this by placing the logic for the drink orders in a separate function. Doing so allows us to hide away all that logic in one place, and it also gives us a well-defined place to go if we need to update the drink order code:</p><div class="informalfigure"><a id="med_id00757a"></a><div class="mediaobject"><a id="med_id00757"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113804.png.jpg" alt="image with no caption" width="713" height="258"></div></div><p>Now we can revisit the <code class="literal">serveCustomer</code> function and remove all the drink order logic, replacing it with a call to this new function.</p><div class="informalfigure"><a id="med_id00758a"></a><div class="mediaobject"><a id="med_id00758"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113806.png.jpg" alt="image with no caption" width="682" height="275"></div></div><p>That’s definitely going to be more readable with a single function call replacing all the inline drink order logic. It’s also conveniently put all the drink order code in one, easy-to-find place. But, before we give this code a test drive, hold on, we’ve just heard about another issue...</p><div class="sect2" title="Wait, we need more drinks!"><div class="titlepage"><div><div><h2 class="title"><a id="waitcomma_we_need_more_drinksexclamation"></a>Wait, we need more drinks!</h2></div></div></div><div class="informalfigure"><a id="med_id00759a"></a><div class="mediaobject"><a id="med_id00759"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113808.png.jpg" alt="image with no caption" width="314" height="435"></div></div><p>Stop the presses, we’ve just heard that one drink order is not enough on a flight. In fact, the flight attendants say a typical flight looks more like this:</p><div class="informalfigure"><a id="med_id00760a"></a><div class="mediaobject"><a id="med_id00760"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113810.png.jpg" alt="image with no caption" width="522" height="226"></div></div><p>Now, on the one hand we designed our code well, because adding additional calls to <code class="literal">createDrinkOrder</code> works just fine. But, on the other hand, we’re unnecessarily recomputing what kind of passenger we’re serving in <code class="literal">createDrinkOrder</code> every time we take an order.</p><p>“But it’s only a few lines of code.” you say? Sure, but this is a simple example in a book. What if in the real world you had to check the ticket type by communicating with a web service from a mobile device? That gets time consuming and expensive.</p><p>Don’t worry though, because a first class function just rode in on a white horse to save us. You see, by making use of the capability to return functions from functions we can fix this problem.</p><div class="sidebar"><a id="sharpen_your_pencil-id00167"></a><p class="title">Sharpen your pencil</p><p>What do you think this code does? Can you come up with some examples of how to use it?</p><a id="pro_id00108"></a><pre class="programlisting"><span class="strong"><strong>function addN(n) {</strong></span>
   <span class="strong"><strong>var adder = function(x) {</strong></span>
                  <span class="strong"><strong>return n + x;</strong></span>
               <span class="strong"><strong>};</strong></span>
   <span class="strong"><strong>return adder;</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="note" title="Note"><h3 class="title"><a id="ch10note13"></a>Note</h3><p>Answer here.</p></div></div></div></div><div class="sect1" title="Taking orders with first class functions"><div class="titlepage"><div><div><h1 class="title"><a id="taking_orders_with_first_class_functions"></a>Taking orders with first class functions</h1></div></div></div><p>Now it’s time to wrap your head around how a first class function can help this situation. Here’s the plan: rather than calling <code class="literal">createDrinkOrder</code> multiple times per passenger, we’re instead going to call it once, and have it hand us back a function that knows how to do a drink order for that passenger. Then, when we need to take a drink order, we just call that function.</p><p>Let’s start by redefining <code class="literal">createDrinkOrder</code>. Now when we call it, it will package up the code to take a drink order into a function and return the function for us to use when we need it.</p><div class="informalfigure"><a id="med_id00761a"></a><div class="mediaobject"><a id="med_id00761"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113812.png.jpg" alt="image with no caption" width="666" height="306"></div></div><p>Now let’s rework <code class="literal">serveCustomer</code>. We’ll first call <code class="literal">createDrinkOrder</code> to get a function that knows how to take the passenger’s order. Then, we’ll use that same function over and over to take a drink order from the passenger.</p><div class="informalfigure"><a id="med_id00762a"></a><div class="mediaobject"><a id="med_id00762"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113814.png.jpg" alt="image with no caption" width="651" height="219"></div></div><div class="sect2" title="Test drive flight"><div class="titlepage"><div><div><h2 class="title"><a id="test_drive_flight-id00168"></a>Test <span class="strikethrough">drive</span> flight <span class="inlinemediaobject"><a id="inline_id00112"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113784.png.jpg" alt="" width="94" height="52"></span></h2></div></div></div><p>Let’s test the new code. To do that we need to write a quick function to iterate over all the passengers and call <code class="literal">serveCustomer</code> for each passenger. Once you’ve added the code to your file, load it in the browser and take some orders.</p><div class="informalfigure"><a id="med_id00763a"></a><div class="mediaobject"><a id="med_id00763"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113816.png.jpg" alt="image with no caption" width="786" height="280"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00169"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa3qe1"></a><a id="ch10qa3q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Just to make sure I understand... when we call createDrinkOrder, we get back a function that we have to call again to get the drink order?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa3q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> That’s right. We first call createDrinkOrder to get back a function, getDrinkOrderFunction, that knows how to ask a passenger for an order, and then we call that function every time we want to take the order. Notice that getDrinkOrderFunction is a lot simpler than createDrinkOrder: all getDrinkOrderFunction does is alert, asking for the passenger’s order.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa3qe2"></a><a id="ch10qa3q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So how does getDrinkOrderFunction know which alert to show?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa3q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Because we created it specifically for the passenger based on their ticket. Look back at createDrinkOrder again. The function we’re returning corresponds to the passenger’s ticket type: if the passenger is in first class, then getDrinkOrderFunction is created to show an alert asking for a first class order. But if the passenger is in coach, then getDrinkOrderFunction is created to show an alert asking for a coach order. By returning the correct kind of function for that specific passenger’s ticket type, the ordering function is simple, fast, and easy to call each time we need to take an order.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch10qa3qe3"></a><a id="ch10qa3q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: This code serves one passenger a drink, shows the movie, etc. Don’t flight attendants usually serve a drink to all the passengers and show the movie to all passengers and so on?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch10qa3q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> See we were testing you! You passed. You’re exactly right; this code applies the entire serveCustomer function to a single passenger at a time. That’s not really how it works in the real world. But, this is meant to be a simple example to demonstrate a complex topic (returning functions), and it’s not perfect. But now that you’ve <span class="emphasis"><em>pointed out our mistake</em></span>... students, take out a sheet of paper and:</p></td></tr></tbody></table></div></blockquote></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch10note14"></a>Brain Power</h3><p>How would you rework the code to serve drinks, dinner and a movie to all the passengers, and do it without endlessly recomputing their order based on their ticket class? Would you use first class functions?</p></div><div class="sidebar"><a id="exercise-id00170"></a><p class="title">Exercise</p><p>Your job is to add a third class of service to our code. Add “premium economy” class (“premium” for short). Premium economy gets wine in addition to cola or water. Also, implement getDinnerOrderFunction with the following menu:</p><p><span class="strong"><strong>First class: chicken or pasta</strong></span></p><p><span class="strong"><strong>Premium economy: snack box or cheese plate</strong></span></p><p><span class="strong"><strong>Coach: peanuts or pretzels</strong></span></p><p>Check your answer at the end of the chapter! And don’t forget to test your code.</p><div class="note" title="Note"><h3 class="title"><a id="ch10note15"></a>Note</h3><p>Make sure you use first class functions to implement this!</p></div></div></div></div><div class="sect1" title="Webville Cola"><div class="titlepage"><div><div><h1 class="title"><a id="webville_cola"></a>Webville Cola</h1></div></div></div><div class="informalfigure"><a id="med_id00764a"></a><div class="mediaobject"><a id="med_id00764"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113818.png.jpg" alt="image with no caption" width="363" height="169"></div></div><p><a id="iddle1095" class="indexterm"></a><a id="iddle1682" class="indexterm"></a><a id="iddle1750" class="indexterm"></a><a id="iddle2804" class="indexterm"></a><a id="iddle2950" class="indexterm"></a>Webville Cola needs a little help managing the code for their product line. To give them a hand, let’s take a look at the data structure they use to hold the sodas they produce:</p><div class="informalfigure"><a id="med_id00765a"></a><div class="mediaobject"><a id="med_id00765"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113820.png.jpg" alt="image with no caption" width="740" height="321"></div></div><div class="informalfigure"><a id="med_id00766a"></a><div class="mediaobject"><a id="med_id00766"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113822.png.jpg" alt="image with no caption" width="683" height="401"></div></div><div class="informalfigure"><a id="med_id00767a"></a><div class="mediaobject"><a id="med_id00767"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113824.png.jpg" alt="image with no caption" width="289" height="413"></div></div><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Hey guys, I got a call from Webville Cola and they need help with their product data. They want to be able to sort their products by any property, like name, bottles sold, soda color, calories per bottle, and so on, but they want it flexible in case they add more properties in the future.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;How are they storing this data?</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Oh, each soda is an object in an array, with properties for name, number sold, calories...</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;Got it.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;My first thought was just to search for a simple sort algorithm and implement it. Webville Cola doesn’t have many products so it just needs to be simple.</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;Oh, I’ve got a simpler way than that, but it requires you use your knowledge of first class functions.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;I like hearing simple! But how do first class functions fit in? That sounds complicated to me.</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;Not at all. It’s as easy as writing a function that knows how to compare two values, and then passing that to another function that does the real sorting for you.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;How does the function we’re writing work exactly?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;Well, instead of handling the entire sort, all you need to do is write a function that knows how to compare two values. Say you want to sort by a product property like the number of bottles sold. You set up a function like this:</p><div class="informalfigure"><a id="med_id00768a"></a><div class="mediaobject"><a id="med_id00768"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113826.png.jpg" alt="image with no caption" width="624" height="81"></div></div><p>We can fill in the details of the code in a minute, but for now, the key is that once you have this function you just pass it to a sort function and that sort function does the work for you—it just needs you to help it know how to compare things.</p><p title="Frank:"><span class="title"><strong><span class="strong"><strong>Frank:</strong></span></strong></span>&nbsp;Wait, where is this sort function?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;It’s actually a method that you can call on any array. So you can call the <code class="literal">sort</code> method on the <code class="literal">products</code> array and pass it this compare function we’re going to write. And, when <code class="literal">sort</code> is done, the <code class="literal">products</code> array will be sorted by whatever criteria <code class="literal">compareSold</code> used to sort the values.</p><p title="Joe:"><span class="title"><strong><span class="strong"><strong>Joe:</strong></span></strong></span>&nbsp;So if I’m sorting how many bottles are sold, those are numbers, so the <code class="literal">compareSold</code> function just needs to determine which value is less or greater?</p><p title="Jim:"><span class="title"><strong><span class="strong"><strong>Jim:</strong></span></strong></span>&nbsp;Right. Let’s take a closer look at how the array sort works...</p></div><div class="sect1" title="How the array sort method works"><div class="titlepage"><div><div><h1 class="title"><a id="how_the_array_sort_method_works"></a>How the array sort method works</h1></div></div></div><p><a id="iddle1558" class="indexterm"></a><a id="iddle1956" class="indexterm"></a><a id="iddle2179" class="indexterm"></a><a id="iddle2453" class="indexterm"></a><a id="iddle2840" class="indexterm"></a><a id="iddle2962" class="indexterm"></a><a id="iddle3169" class="indexterm"></a>JavaScript arrays provide a <code class="literal">sort</code> method that, given a function that knows how to compare two items in the array, sorts the array for you. Here’s the big picture of how this works and how your comparison function fits in: sort algorithms are well known and widely implemented, and the great thing about them is that sorting code can be reused for just about any set of items. But there’s one catch: to know how to sort a specific set of items, the sort code needs to know how those items compare. Think about sorting a set of numbers versus sorting a list of names versus sorting a set of objects. The way we compare values depends on the type of the items: for numbers we use &lt;, &gt; and ==, for strings we compare them alphabetically (in JavaScript, you can do that with &lt;, &gt; and ==) and for objects we’d have some custom way of comparing them based on their properties.</p><p>Let’s look at a simple example before we move on to Webville Cola’s products array. We’ll use a simple array of numbers and use the <code class="literal">sort</code> method to put them in ascending order. Here’s the array:</p><a id="pro_id00109"></a><pre class="programlisting"><span class="strong"><strong>var numbersArray = [60, 50, 62, 58, 54, 54];</strong></span></pre><p>Next we need to write our own function that knows how to compare two values in the array. Now, this is an array of numbers, so our function will need to compare two numbers at a time. Assume we’re going to sort the numbers in ascending order; for that the <code class="literal">sort</code> method expects us to return something greater than 0 if the first number is greater than the second, 0 if they are equal, and something less than 0 if the first number is less than the second. Like this:</p><div class="informalfigure"><a id="med_id00769a"></a><div class="mediaobject"><a id="med_id00769"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113828.png.jpg" alt="image with no caption" width="507" height="331"></div></div><div class="tip" title="Serious Tip"><h3 class="title"><a id="ch10note16"></a>Serious Tip</h3><p>JavaScript arrays have many useful methods you can use to manipulate arrays in various ways. A great reference on all these methods and how to use them is <span class="emphasis"><em>JavaScript: The Definitive Guide</em></span> by David Flanagan (O’Reilly).</p></div><div class="sidebar"><a id="sharpen_your_pencil-id00171"></a><p class="title">Sharpen your pencil</p><p>You know that the comparison function we pass to sort needs to return a number greater than 0, equal to 0, or less than 0 depending on the two items we’re comparing: if the first item is greater than second, we return a value greater than 0; if first item is equal to the second, we return 0; and if the first item is less than the second, we return a value less than 0.</p><p>Can you use this knowledge with the fact that we’re comparing two numbers in compareNumbers to rewrite compareNumbers using much less code?</p><p>Check your answer at the end of the chapter before you go on.</p></div></div><div class="sect1" title="Putting it all together"><div class="titlepage"><div><div><h1 class="title"><a id="putting_it_all_together"></a>Putting it all together</h1></div></div></div><p>Now that we’ve written a compare function, all we need to do is call the <code class="literal">sort</code> method on <code class="literal">numbersArray</code>, and pass it the function. Here’s how we do that:</p><div class="informalfigure"><a id="med_id00770a"></a><div class="mediaobject"><a id="med_id00770"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113830.png.jpg" alt="image with no caption" width="832" height="276"></div></div><div class="sidebar"><a id="exercise-id00172"></a><p class="title">Exercise</p><p>The sort method has sorted numbersArray in ascending order because when we return the values 1, 0 and -1, we’re telling the sort method:</p><p>1: place the first item after the second item</p><p>0: the items are equivalent, you can leave them in place</p><p>-1: place the first item before the second item.</p><p>Changing your code to sort in descending order is a matter of inverting this logic so that 1 means place the second item after the first item, and -1 means place the second item before the first item (0 stays the same). Write a new compare function for descending order:</p><a id="pro_id00110"></a><pre class="programlisting"><span class="strong"><strong>function compareNumbersDesc(num1, num2) {</strong></span>
    <span class="strong"><strong>if (_____ &gt; _____) {</strong></span>
        <span class="strong"><strong>return 1;</strong></span>
    <span class="strong"><strong>} else if (num1 === num2) {</strong></span>
        <span class="strong"><strong>return 0;</strong></span>
    <span class="strong"><strong>} else {</strong></span>
        <span class="strong"><strong>return -1;</strong></span>
    <span class="strong"><strong>}</strong></span>
<span class="strong"><strong>}</strong></span></pre></div><div class="sect2" title="Meanwhile back at Webville Cola"><div class="titlepage"><div><div><h2 class="title"><a id="meanwhile_back_at_webville_cola"></a>Meanwhile back at Webville Cola</h2></div></div></div><p>It’s time to help out Webville Cola with your new knowledge of array sorting. Of course all we really need to do is write a comparison function for them, but before we do that let’s quickly review the <code class="literal">products</code> array again:</p><div class="note" title="Note"><h3 class="title"><a id="ch10note17"></a>Note</h3><p>But we don’t have to tell them that.</p></div><div class="informalfigure"><a id="med_id00771a"></a><div class="mediaobject"><a id="med_id00771"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113832.png.jpg" alt="image with no caption" width="824" height="265"></div></div><p>So what are we going to sort first? Let’s start with sorting by the number of bottles sold, in ascending order. To do this we’ll need to compare the <code class="literal">sold</code> property of each object. Now one thing you should take note of is, because this is an array of product objects, the compare function is going to be passed two objects, not two numbers:</p><div class="informalfigure"><a id="med_id00772a"></a><div class="mediaobject"><a id="med_id00772"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113834.png.jpg" alt="image with no caption" width="694" height="258"></div></div><p>And of course, to use the <code class="literal">compareSold</code> function to sort the <code class="literal">products</code> array, we simply call the <code class="literal">products</code> array’s <code class="literal">sort</code> method:</p><div class="informalfigure"><a id="med_id00773a"></a><div class="mediaobject"><a id="med_id00773"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113836.png.jpg" alt="image with no caption" width="408" height="116"></div></div></div></div><div class="sect1" title="Take sorting for a test drive"><div class="titlepage"><div><div><h1 class="title"><a id="take_sorting_for_a_test_drive"></a>Take sorting for a test drive <span class="inlinemediaobject"><a id="inline_id00113"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112336.png.jpg" alt="" width="144" height="47"></span></h1></div></div></div><p>Time to test the first Webville Cola code. You’ll find all the code from the last few pages consolidated below along with some extras to test this out properly. So, just create a simple HTML page with this code (“cola.html”) and give it some QA:</p><div class="informalfigure"><a id="med_id00774a"></a><div class="mediaobject"><a id="med_id00774"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113838.png.jpg" alt="image with no caption" width="824" height="696"></div></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch10note05b"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Name: Grapefruit, Calories: 170, Color: red, Sold: 8200</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Raspberry, Calories: 180, Color: pink, Sold: 9427</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Root Beer, Calories: 200, Color: caramel, Sold: 9909</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Orange, Calories: 160, Color: orange, Sold: 12101</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Lemon, Calories: 200, Color: clear, Sold: 14983</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Cola, Calories: 210, Color: caramel, Sold: 25412</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Diet Cola, Calories: 0, Color: caramel, Sold: 43922</code></strong></span></p><p><span class="strong"><strong><code class="literal">Name: Water, Calories: 0, Color: clear, Sold: 62123</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p>Here’s our output running the code using the compareSold sort function. Notice the products are in order by the number of bottles sold.</p></blockquote></div></div><div class="sidebar"><a id="exercise-id00173"></a><p class="title">Exercise</p><p>Now that we have a way to sort colas by the sold property, it’s time to write compare functions for each of the other properties in the product object: name, calories, and color. Check the output you see in the console carefully; make sure for each kind of sort, the products are sorted correctly. Check the answer at the end of the chapter.</p><div class="informalfigure"><a id="med_id00775a"></a><div class="mediaobject"><a id="med_id00775"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113840.png.jpg" alt="image with no caption" width="918" height="975"></div></div></div><div class="sidebar"><a id="bullet_points-id00174"></a><p class="title">Bullet Points</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There are two ways to define a function: with a <span class="strong"><strong>function declaration</strong></span> and with a <span class="strong"><strong>function expression</strong></span>.</p></li><li class="listitem"><p>A <span class="strong"><strong>function reference</strong></span> is a value that refers to a function.</p></li><li class="listitem"><p>Function declarations are handled before your code is evaluated.</p></li><li class="listitem"><p>Function expressions are evaluated at runtime with the rest of your code.</p></li><li class="listitem"><p>When the browser evaluates a function declaration, it creates a function as well as a variable with the same name as the function, and stores the function reference in the variable.</p></li><li class="listitem"><p>When the browser evaluates a function expression, it creates a function, and it’s up to you what to do with the function reference.</p></li><li class="listitem"><p><span class="strong"><strong>First class</strong></span> values can be assigned to variables, included in data structures, passed to functions, or returned from functions.</p></li><li class="listitem"><p>A function reference is a first class value.</p></li><li class="listitem"><p>The array <span class="strong"><strong>sort</strong></span> method takes a function that knows how to compare two values in an array.</p></li><li class="listitem"><p>The function you pass to the sort method should return one of these values: a number greater than 0, 0, or a number less than 0.</p></li></ul></div></div><div class="sidebar"><a id="exercise_solutions"></a><p class="title">Exercise Solutions</p><p><a id="iddle1245" class="indexterm"></a><a id="iddle1248" class="indexterm"></a><a id="iddle1446" class="indexterm"></a><a id="iddle1660" class="indexterm"></a><a id="iddle1784" class="indexterm"></a><a id="iddle1797" class="indexterm"></a><a id="iddle3052" class="indexterm"></a><a id="iddle3055" class="indexterm"></a>What deductions can you make about function declarations and function expressions given how the browser treats the quack and fly code? Check each statement that applies. Check your answer at the end of the chapter before you go on.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00114"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113842.png.jpg" alt="" width="29" height="35"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are evaluated before the rest of the code is evaluated.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00115"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113844.png.jpg" alt="" width="30" height="31"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function expressions get evaluated later, with the rest of the code.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00116"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113846.png.jpg" alt="" width="29" height="37"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>A function declaration doesn’t return a reference to a function; rather it creates a variable with the name of the function and assigns the new function to it.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00117"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113848.png.jpg" alt="" width="30" height="34"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>A function expression returns a reference to the new function created by the expression.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00118"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113850.png.jpg" alt="" width="29" height="35"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>The process of invoking a function created by a declaration is exactly the same for one created with an expression.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00119"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113852.png.jpg" alt="" width="30" height="31"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>You can hold function references in variables.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00120"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113852.png.jpg" alt="" width="30" height="31"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are statements; function expressions are used in statements.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00121"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Function declarations are the tried and true way to create functions.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch10note18"></a>Note</h3><p>Not necessarily!</p></div></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00122"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="" valign="top"><p>You always want to use function declarations because they get evaluated earlier.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="be_the_browser_solution-id00175"></a><p class="title">BE the Browser Solution</p><div class="informalfigure"><a id="med_id00776a"></a><div class="mediaobject"><a id="med_id00776"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><a id="iddle1443" class="indexterm"></a><a id="iddle1658" class="indexterm"></a><a id="iddle1781" class="indexterm"></a><a id="iddle1795" class="indexterm"></a><span class="strong"><strong>Below, you’ll find JavaScript code. Your job is to play like you’re the browser evaluating the code. In the space to the right, record each function as it gets created. Remember to make two passes over the code: the pass that processes declarations, and the second pass that handles expressions.</strong></span></p><a id="pro_id00111"></a><pre class="programlisting"><span class="strong"><strong>var midi = true;</strong></span>
<span class="strong"><strong>var type = "piano";</strong></span>
<span class="strong"><strong>var midiInterface;</strong></span>

<span class="strong"><strong>function play(sequence) {</strong></span>
    <span class="strong"><strong>// code here</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>var pause = function() {</strong></span>
    <span class="strong"><strong>stop();</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>function stop() {</strong></span>
    <span class="strong"><strong>// code here</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>function createMidi() {</strong></span>
   <span class="strong"><strong>// code here</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>if (midi) {</strong></span>
    <span class="strong"><strong>midiInterface = function(type) {</strong></span>
        <span class="strong"><strong>// code here</strong></span>
    <span class="strong"><strong>};</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="informalfigure"><a id="med_id00777a"></a><div class="mediaobject"><a id="med_id00777"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113854.png.jpg" alt="image with no caption" width="364" height="520"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00176"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1757" class="indexterm"></a><a id="iddle2936" class="indexterm"></a>To get the idea of functions as values into your brain, let’s play a little game of chance. Try the shell game. Did you win or lose? Give it a try and find out. Here’s our solution.</p><div class="informalfigure"><a id="med_id00778a"></a><div class="mediaobject"><a id="med_id00778"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113856.png.jpg" alt="image with no caption" width="739" height="641"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00177"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1674" class="indexterm"></a><a id="iddle1742" class="indexterm"></a><a id="iddle1848" class="indexterm"></a><a id="iddle2942" class="indexterm"></a>Let’s get your brain warmed up for passing your first function to another function. Evalute the code below (in your head) and see what you come up with. Here’s our solution:</p><div class="informalfigure"><a id="med_id00779a"></a><div class="mediaobject"><a id="med_id00779"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113858.png.jpg" alt="image with no caption" width="766" height="277"></div></div></div><div class="sidebar"><a id="exercise_solution-id00178"></a><p class="title">Exercise Solution</p><p>Your turn again: write a function that prints a passenger’s name and whether or not they have paid to console.log. Pass your function to processPassengers to test it. We’ve started the code for you below; you just need to finish it up. Here’s our solution.</p><div class="informalfigure"><a id="med_id00780a"></a><div class="mediaobject"><a id="med_id00780"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113860.png.jpg" alt="image with no caption" width="356" height="278"></div></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch10note05c"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Jane Doloop has paid</code></strong></span></p><p><span class="strong"><strong><code class="literal">Dr. Evel has paid</code></strong></span></p><p><span class="strong"><strong><code class="literal">Sue Property has not paid</code></strong></span></p><p><span class="strong"><strong><code class="literal">John Funcall has paid</code></strong></span></p></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00179"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1755" class="indexterm"></a><a id="iddle2977" class="indexterm"></a>Below we’ve created a function and assigned it to the variable fun.</p><a id="pro_id00112"></a><pre class="programlisting"><span class="strong"><strong>function fun(echo) {</strong></span>
    <span class="strong"><strong>console.log(echo);</strong></span>
<span class="strong"><strong>};</strong></span></pre><div class="informalfigure"><a id="med_id00781a"></a><div class="mediaobject"><a id="med_id00781"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113862.png.jpg" alt="image with no caption" width="268" height="211"></div></div><p>Work your way through this code and write the resulting output on this page. Do this with your brain before you attempt it with your computer.</p><div class="note" title="Note"><h3 class="title"><a id="ch10note05d"></a>Note</h3><p>Warning note: your browser may display different values in the console for the fun and boo functions. Try this exercise in a couple of different browsers.</p></div><div class="informalfigure"><a id="med_id00782a"></a><div class="mediaobject"><a id="med_id00782"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113864.png.jpg" alt="image with no caption" width="767" height="427"></div></div><p>Super important: check and understand the answers before moving on!</p></div><div class="sidebar"><a id="exercise_solution-id00180"></a><p class="title">Exercise Solution</p><p><a id="iddle1679" class="indexterm"></a><a id="iddle1747" class="indexterm"></a><a id="iddle1867" class="indexterm"></a><a id="iddle2947" class="indexterm"></a>Your job is to add a third class of service to our code. Add “premium economy” class (“premium” for short). Premium economy gets wine in addition to cola or water. Also, implement getDinnerOrderFunction with the following menu:</p><p>First class: chicken or pasta</p><p>Premium economy: snack box or cheese plate</p><p>Coach: peanuts or pretzels</p><p>Here’s our solution.</p><div class="informalfigure"><a id="med_id00783a"></a><div class="mediaobject"><a id="med_id00783"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113866.png.jpg" alt="image with no caption" width="803" height="640"></div></div></div><div class="sidebar"><a id="exercise_solution-id00181"></a><p class="title">Exercise Solution</p><div class="informalfigure"><a id="med_id00784a"></a><div class="mediaobject"><a id="med_id00784"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113868.png.jpg" alt="image with no caption" width="795" height="909"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00182"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1096" class="indexterm"></a><a id="iddle1680" class="indexterm"></a><a id="iddle1683" class="indexterm"></a><a id="iddle1748" class="indexterm"></a><a id="iddle1751" class="indexterm"></a><a id="iddle1868" class="indexterm"></a><a id="iddle2805" class="indexterm"></a><a id="iddle2948" class="indexterm"></a><a id="iddle2951" class="indexterm"></a>What do you think this code does? Can you come up with some examples of how to use it? Here’s our solution.</p><div class="informalfigure"><a id="med_id00785a"></a><div class="mediaobject"><a id="med_id00785"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113870.png.jpg" alt="image with no caption" width="713" height="205"></div></div></div><div class="sidebar"><a id="exercise_solution-id00183"></a><p class="title">Exercise Solution</p><p>The sort method has sorted numbersArray in ascending order because when we return the values 1, 0 and -1, we’re telling the sort method:</p><p>1: place the first item after the second item</p><p>0: the items are equivalent, you can leave them in place</p><p>-1: place the first item before the second item.</p><p>Changing your code to sort in descending order is a matter of inverting this logic so that 1 means place the second item after the first item, and -1 means place the second item before the first item (0 stays the same). Write a new compare function for descending order:</p><div class="informalfigure"><a id="med_id00786a"></a><div class="mediaobject"><a id="med_id00786"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113872.png.jpg" alt="image with no caption" width="376" height="218"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00184"></a><p class="title">Sharpen your pencil Solution</p><p>You know that the comparison function we pass to sort needs to return a number greater than 0, equal to 0, or less than 0 depending on the two items we’re comparing: if the first item is greater than second, we return a value greater than 0; if first item is equal to the second, we return 0; and if the first item is less than the second, we return a value less than 0.</p><p>Can you use this knowledge with the fact we’re comparing two numbers in compareNumbers to rewrite compareNumbers using much less code?</p><p>Here’s our solution:</p><div class="informalfigure"><a id="med_id00787a"></a><div class="mediaobject"><a id="med_id00787"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113874.png.jpg" alt="image with no caption" width="338" height="230"></div></div></div><div class="sidebar"><a id="exercise_solution-id00185"></a><p class="title">Exercise Solution</p><p>Now that we have a way to sort colas by the sold property, it’s time to write compare functions for each of the other properties in the product object: name, calories, and color. Check the output you see in the console carefully; make sure for each kind of sort, the products are sorted correctly. Here’s our solution.</p><div class="informalfigure"><a id="med_id00788a"></a><div class="mediaobject"><a id="med_id00788"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113876.png.jpg" alt="image with no caption" width="875" height="939"></div></div></div></div></div></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781449340124/files/core.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
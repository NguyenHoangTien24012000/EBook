<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content" class="noOutline" tabindex="-1"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><div class="chapter" title="Chapter&nbsp;8.&nbsp;Building an app"><div class="titlepage"><div><div><h1 class="title"><a id="bringing_it_all_together_building_an_app"></a>Chapter&nbsp;8.&nbsp;Building an app</h1></div><div><h3 class="subtitle">Bringing it
        All Together</h3></div></div></div><div class="informalfigure"><a id="med_id00540a"></a><div class="mediaobject"><a id="med_id00540"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113386.png.jpg" alt="image with no caption" width="713" height="480"></div></div><p><span class="strong"><strong>Put on
     your toolbelt.</strong></span> That is, the toolbelt with all your new coding
skills, your knowledge of the DOM, and even some HTML &amp; CSS. We’re going to bring
everything together in this chapter to create our first true <span class="strong"><strong>web application</strong></span>. No more <span class="strong"><strong>silly toy games</strong></span> with one battleship and a single row of
hiding places. In this chapter we’re building the <span class="strong"><strong>entire
     experience</strong></span>: a nice big game board, multiple ships and user input
right in the web page. We’re going to create the page structure for the game with HTML,
visually style the game with CSS, and write JavaScript to code the game’s behavior. Get
ready: this is an all out, pedal to the metal development chapter where we’re going to
lay down some serious code.</p><div class="sect1" title="This time, let’s build a REAL Battleship game"><div class="titlepage"><div><div><h1 class="title"><a id="this_timecomma_letapostrophes_build_a_re"></a>This time, let’s build
           a <span class="underline">REAL</span> Battleship
  game</h1></div></div></div><p>Sure, you can feel good because back in <a class="xref" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Going further">Chapter&nbsp;2</a> you built a nice
  little battleship game from scratch, but let’s admit it: that was a bit of a <span class="emphasis"><em>toy</em></span> game—it worked, it was playable, but it
  wasn’t exactly the game you’d impress your friends with, or use to raise your first
  round of venture capital. To really impress, you’ll need a visual game board, snazzy
  battleship graphics, and a way for players to enter their moves right in the game
  (rather than a generic browser dialog box). You’ll also want to improve the previous
  version by supporting all three ships.</p><p>In other words, you’ll want to create
  something like this:</p><div class="informalfigure"><a id="med_id00541a"></a><div class="mediaobject"><a id="med_id00541"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113388.png.jpg" alt="image with no caption" width="893" height="558"></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch08note01"></a>Brain Power</h3><p>Forget JavaScript for
     a minute... look at the Battleship mockup above. If you focus on the structure and
     visual represention of the page, how would you create it using HTML and
  CSS?</p></div></div><div class="sect1" title="Stepping back... to HTML and CSS"><div class="titlepage"><div><div><h1 class="title"><a id="stepping_backhellip_to_html_and_css"></a>Stepping back... to HTML and
           CSS</h1></div></div></div><p><a id="iddle1030" class="indexterm"></a><a id="iddle1185" class="indexterm"></a><a id="iddle1425" class="indexterm"></a><a id="iddle2026" class="indexterm"></a><a id="iddle3072" class="indexterm"></a>To
  create a modern, interactive web page, or <span class="emphasis"><em>app</em></span>,
  you need to work with three technologies: HTML, CSS and JavaScript. You already know
  the mantra “HTML is for structure, CSS is for style and JavaScript is for behavior.”
  But rather than just stating it, in this chapter we’re going to fully embody it. And
  we’re going to start with the HTML and CSS first.</p><p>Our first goal is going to be
  to reproduce the look of the game board on the previous page. But not <span class="emphasis"><em>just</em></span> reproduce it; we need to implement the game
  board so it has a structure we can use in JavaScript to take player input and place
  hits, misses and messages on the page.</p><p>To pull that off we’re going to do
  things like use an image in the background to give us the slick grid over a radar
  look, and then we’ll lay a more functional HTML table over that so we can place
  things (like ships) on top of it. We’ll also use an HTML form to get the player
  input.</p><div class="informalfigure"><a id="med_id00542a"></a><div class="mediaobject"><a id="med_id00542"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113390.png.jpg" alt="image with no caption" width="441" height="366"></div></div><p>So, let’s build this game. We’re
  going to take a step back and spend a few pages on the crucial HTML and CSS, but once
  we have that in place, we’ll be ready for the JavaScript.</p><div class="sidebar"><a id="get_your_battelship_toolkit"></a><p class="title">Get your Battelship
     Toolkit</p><p>Here’s a toolkit to get you started on this new version of
     Battleship.</p><div class="informalfigure"><a id="med_id00543a"></a><div class="mediaobject"><a id="med_id00543"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113392.png.jpg" alt="image with no caption" width="228" height="307"></div></div><p>This toolkit contains three
     images, “board.jpg”, which is the main background board for the game including the
     grid; “ship.png”, which is a small ship for placement on the board—notice that it
     is a PNG image with transparency, so it will lay right on top of the
     background—and finally we have “miss.png”, which is also meant to be placed on the
     board. True to the original game, when we hit a ship we place a ship in the
     corresponding cell, and when we miss we place a miss graphic there.</p><p>Download
     everything you need for the game at <a class="ulink" href="http://wickedlysmart.com/hfjs">http://wickedlysmart.com/hfjs</a></p></div></div><div class="sect1" title="Creating the HTML page: the Big Picture"><div class="titlepage"><div><div><h1 class="title"><a id="creating_the_html_page_the_big_picture"></a>Creating
           the HTML page: the Big Picture</h1></div></div></div><p><a id="iddle1142" class="indexterm"></a><a id="iddle1153" class="indexterm"></a><a id="iddle1155" class="indexterm"></a><a id="iddle2016" class="indexterm"></a><a id="iddle2028" class="indexterm"></a>Here’s the plan of attack for creating the Battleship HTML
  page:</p><div class="orderedlist"><ol class="orderedlist">
     <li class="listitem"><p>First we’ll concentrate on the background of the game,
           which includes setting the background image to black and placing the radar
           grid image in the page.</p><div class="informalfigure"><a id="med_id00544a"></a><div class="mediaobject"><a id="med_id00544"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113394.png.jpg" alt="image with no caption" width="354" height="155"></div></div></li>
     <li class="listitem"><p>Next we’ll create an HTML table and lay it on top of the
           background image. Each cell in the table will represent a board cell in the
           game.</p><div class="informalfigure"><a id="med_id00545a"></a><div class="mediaobject"><a id="med_id00545"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113396.png.jpg" alt="image with no caption" width="297" height="147"></div></div></li>
     <li class="listitem"><p>Then we’ll add an HTML form element where players can
           enter their guesses, like “A4”. We’ll also add an area to display messages,
           like “You sank my battleship!”</p><div class="informalfigure"><a id="med_id00546a"></a><div class="mediaobject"><a id="med_id00546"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113398.png.jpg" alt="image with no caption" width="320" height="136"></div></div></li>
     <li class="listitem"><p>Finally, we’ll figure out how to use the table to place
           the images of a battleship (for a hit) and a MISS (for a miss) into the
           board.</p><div class="informalfigure"><a id="med_id00547a"></a><div class="mediaobject"><a id="med_id00547"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113400.png.jpg" alt="image with no caption" width="275" height="84"></div></div></li>
  </ol></div><div class="sect2" title="Step 1: The Basic HTML"><div class="titlepage"><div><div><h2 class="title"><a id="step_1_the_basic_html"></a>Step 1:
              The Basic HTML</h2></div></div></div><p>Let’s get started! First we need
     an HTML page. We’re going to start by creating a simple HTML5-compliant page;
     we’ll also add some styling for the background image. In the page we’re going to
     place a <code class="literal">&lt;body&gt;</code> element that contains a single
        <code class="literal">&lt;div&gt;</code> element. This <code class="literal">&lt;div&gt;</code> element is going to hold the game grid.</p><p>Go ahead and
     check out the next page that contains our starter HTML and CSS.</p><div class="note" title="Relax"><h3 class="title"><a id="ch08note02"></a>Relax</h3><div class="informalfigure"><a id="med_id00548a"></a><div class="mediaobject"><a id="med_id00548"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113402.png.jpg" alt="image with no caption" width="399" height="318"></div></div><p><span class="strong"><strong>A little rusty?</strong></span></p><p>If you’re feeling a bit
        rusty on your HTML and CSS, <span class="emphasis"><em>Head First HTML and
              CSS</em></span> was written to be the companion to this
     book.</p></div><div class="informalfigure"><a id="med_id00549a"></a><div class="mediaobject"><a id="med_id00549"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113404.png.jpg" alt="image with no caption" width="700" height="587"></div></div><div class="sidebar"><a id="test_drive-id00114"></a><p class="title">A Test Drive</p><div class="informalfigure"><a id="med_id00550a"></a><div class="mediaobject"><a id="med_id00550"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p>Go ahead and enter the code
        above (or download all the code for the book from <a class="ulink" href="http://wickedlysmart.com/hfjs">http://wickedlysmart.com/hfjs</a>) into
        the file “battleship.html” and then load it in your browser. Our test run is
        below.</p><div class="informalfigure"><a id="med_id00551a"></a><div class="mediaobject"><a id="med_id00551"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113406.png.jpg" alt="image with no caption" width="386" height="209"></div></div></div></div><div class="sect2" title="Step 2: Creating the table"><div class="titlepage"><div><div><h2 class="title"><a id="step_2_creating_the_table"></a>Step 2: Creating the
           table</h2></div></div></div><p><a id="iddle1141" class="indexterm"></a><a id="iddle1157" class="indexterm"></a><a id="iddle1285" class="indexterm"></a><a id="iddle2030" class="indexterm"></a><a id="iddle2031" class="indexterm"></a><a id="iddle2853" class="indexterm"></a><a id="iddle2857" class="indexterm"></a>Next up is the table. The table will overlay the visual grid in the
     background image, and provide the area to place the hit and miss graphics where
     you play the game. Each cell (or if you remember your HTML, each <code class="literal">&lt;td&gt;</code> element) is going to sit right on top of a
     cell in the background image. Now here is the trick: we’ll give each cell its own
     id, so we can manipulate it later with CSS and JavaScript. Let’s check out how
     we’re going to create these ids and add the HTML for the table:</p><div class="informalfigure"><a id="med_id00552a"></a><div class="mediaobject"><a id="med_id00552"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113408.png.jpg" alt="image with no caption" width="648" height="231"></div></div><p>Here’s the HTML for the table.
     Go ahead and add this between the <code class="literal">&lt;div&gt;</code>
     tags:</p><div class="informalfigure"><a id="med_id00553a"></a><div class="mediaobject"><a id="med_id00553"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113410.png.jpg" alt="image with no caption" width="841" height="420"></div></div></div><div class="sect2" title="Step 3: Player interaction"><div class="titlepage"><div><div><h2 class="title"><a id="step_3_player_interaction"></a>Step 3: Player
           interaction</h2></div></div></div><p><a id="iddle1695" class="indexterm"></a><a id="iddle2101" class="indexterm"></a>Okay, now we need an HTML element
     to enter guesses (like “A0” or “E4”), and an element to display messages to the
     player (like “You sank my battleship!”). We’ll use a <code class="literal">&lt;form&gt;</code> with a text <code class="literal">&lt;input&gt;</code> for
     the player to submit guesses, and a <code class="literal">&lt;div&gt;</code> to
     create an area where we can message the player:</p><div class="informalfigure"><a id="med_id00554a"></a><div class="mediaobject"><a id="med_id00554"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113412.png.jpg" alt="image with no caption" width="791" height="387"></div></div><div class="informalfigure"><a id="med_id00555a"></a><div class="mediaobject"><a id="med_id00555"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113414.png.jpg" alt="image with no caption" width="794" height="312"></div></div></div></div><div class="sect1" title="Adding some more style"><div class="titlepage"><div><div><h1 class="title"><a id="adding_some_more_style"></a>Adding some more
  style</h1></div></div></div><p><a id="iddle1154" class="indexterm"></a><a id="iddle1427" class="indexterm"></a><a id="iddle1463" class="indexterm"></a><a id="iddle1541" class="indexterm"></a><a id="iddle2027" class="indexterm"></a><a id="iddle2631" class="indexterm"></a><a id="iddle2633" class="indexterm"></a><a id="iddle2635" class="indexterm"></a>If you load the page now (go ahead, give it a
  try), most of the elements are going to be in the wrong places and the wrong size. So
  we need to provide some CSS to put everything in the right place, and make sure all
  the elements, like the table cells, have the right size to match up with the game
  board image.</p><p>To get the elements into the right places, we’re going to use CSS
  positioning to lay everything out. We’ve positioned the “board” <code class="literal">&lt;div&gt;</code> element using position relative, so we can now position the
  message area, table, and form at specific places within the “board” <code class="literal">&lt;div&gt;</code> to get them to display exactly where we want
  them.</p><div class="informalfigure"><a id="med_id00556a"></a><div class="mediaobject"><a id="med_id00556"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113416.png.jpg" alt="image with no caption" width="342" height="401"></div></div><p>Let’s start with the “messageArea”
     <code class="literal">&lt;div&gt;</code>. It’s nested inside the “board” <code class="literal">&lt;div&gt;</code>, and we want to position it at the very top
  left corner of the game board:</p><div class="informalfigure"><a id="med_id00557a"></a><div class="mediaobject"><a id="med_id00557"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113418.png.jpg" alt="image with no caption" width="476" height="501"></div></div><div class="sidebar"><a id="bullet_points-id00115"></a><p class="title">Bullet Points</p><div class="itemizedlist"><ul class="itemizedlist">
        <li class="listitem"><p>“position: relative” positions an element at its normal
              location in the flow of the page.</p></li>
        <li class="listitem"><p>“position: absolute” positions an element based on the
              position of its most closely positioned parent.</p></li>
        <li class="listitem"><p>The top and left properties can be used to specify the
              number of pixels to offset a positioned element from its default
              position.</p></li>
     </ul></div></div><p><a id="iddle1696" class="indexterm"></a><a id="iddle2102" class="indexterm"></a><a id="iddle2854" class="indexterm"></a><a id="iddle2858" class="indexterm"></a>We can also position the table and the form within the
  “board” <code class="literal">&lt;div&gt;</code>, again using absolute positions to
  get these elements precisely where we want them. Here’s the rest of the CSS:</p><div class="informalfigure"><a id="med_id00558a"></a><div class="mediaobject"><a id="med_id00558"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113420.png.jpg" alt="image with no caption" width="676" height="823"></div></div><div class="sidebar"><a id="test_drive-id00116"></a><p class="title">A Test Drive</p><div class="informalfigure"><a id="med_id00559a"></a><div class="mediaobject"><a id="med_id00559"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p><a id="iddle1140" class="indexterm"></a><a id="iddle1156" class="indexterm"></a><a id="iddle1294" class="indexterm"></a><a id="iddle1424" class="indexterm"></a><a id="iddle2019" class="indexterm"></a><a id="iddle2029" class="indexterm"></a><a id="iddle2285" class="indexterm"></a>It’s time for another game checkpoint. Get all the HTML
     and CSS entered into your HTML file and then reload the page in your browser.
     Here’s what you should see:</p><div class="informalfigure"><a id="med_id00560a"></a><div class="mediaobject"><a id="med_id00560"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113422.png.jpg" alt="image with no caption" width="589" height="315"></div></div></div><div class="sect2" title="Step 4: Placing the hits and misses"><div class="titlepage"><div><div><h2 class="title"><a id="step_4_placing_the_hits_and_misses"></a>Step 4:
              Placing the hits and misses</h2></div></div></div><p>The game board is
     looking great don’t you think? However, we still need to figure out how to
     visually add hits and misses to the board—that is, how to add either a “ship.png”
     image or a “miss.png” image to the appropriate spot on the board for each guess.
     Right now we’re only going to worry about how to craft the right markup or style
     to do this, and then later we’ll use the same technique in code.</p><div class="informalfigure"><a id="med_id00561a"></a><div class="mediaobject"><a id="med_id00561"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113424.png.jpg" alt="image with no caption" width="182" height="178"></div></div><p>So how do we get a “ship.png”
     image or a “miss.png” image on the board? A straightforward way is to add the
     appropriate image to the background of a <code class="literal">&lt;td&gt;</code>
     element using CSS. Let’s try that by creating two classes, one named “hit” and the
     other “miss”. We’ll use the <code class="literal">background</code> CSS property
     with these images so an element styled with the “hit” class will have the
     “ship.png” in its background, and an element styled with the “miss” class will
     have the “miss.png” image in its background. Like this:</p><div class="informalfigure"><a id="med_id00562a"></a><div class="mediaobject"><a id="med_id00562"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113426.png.jpg" alt="image with no caption" width="685" height="178"></div></div></div></div><div class="sect1" title="Using the hit and miss classes"><div class="titlepage"><div><div><h1 class="title"><a id="using_the_hit_and_miss_classes"></a>Using the hit and
           miss classes</h1></div></div></div><p><a id="iddle1158" class="indexterm"></a><a id="iddle2032" class="indexterm"></a><a id="iddle2859" class="indexterm"></a>Make sure you’ve added the hit and miss class definitions to your CSS. You may
  be wondering how we’re going to use these classes. Let’s do a little experiment right
  now to demonstrate: imagine you have a ship hidden at “B3”, “B4” and “B5”, and the
  user guesses “B3”—a hit! So, you need to place a “ship.png” image at B3. Here’s how
  you can do that: first convert the “B” into a number, 1 (since A is 0, B is 1, and so
  on), and find the <code class="literal">&lt;td&gt;</code> with the id “13” in your
  table. Now, add the class “hit” to that <code class="literal">&lt;td&gt;</code>, like
  this:</p><div class="informalfigure"><a id="med_id00563a"></a><div class="mediaobject"><a id="med_id00563"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113428.png.jpg" alt="image with no caption" width="847" height="467"></div></div><p>Now when you reload the page,
  you’ll see a battleship at location “B3” in the game board.</p><div class="sidebar"><a id="practice_drills"></a><p class="title">Practice Drills</p><div class="informalfigure"><a id="med_id00564a"></a><div class="mediaobject"><a id="med_id00564"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113430.png.jpg" alt="image with no caption" width="57" height="196"></div></div><p>Before we write the code that’s
     going to place hits and misses on the game board, get a little more practice to
     see how the CSS works. Manually play the game by adding the “hit” and “miss”
     classes into your markup, as dictated by the player’s moves below. Be sure to
     check your answers!</p><div class="informalfigure"><a id="med_id00565a"></a><div class="mediaobject"><a id="med_id00565"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113432.png.jpg" alt="image with no caption" width="411" height="108"></div></div><p>and here are the player’s
     guesses:</p><a id="pro_id00090"></a><pre class="programlisting"><span class="strong"><strong>A0, D4, F5, B2, C5, C6</strong></span></pre><p>Check
     your answer at the end of the chapter before you go on.</p><div class="note" title="Note"><h3 class="title"><a id="ch08note02a"></a>Note</h3><p>When you’re
        done, remove any classes that you’ve added to your &lt;td&gt; elements so
        you’ll have an empty board to use when we start coding.</p></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00117"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote">
        <div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set">
              <colgroup><col align="left" width="1%">
              <col>
              </colgroup><tbody>
                 <tr class="question" title="Q:">
                    <td align="left" valign="top"><a id="ch08qa1qe1"></a><a id="ch08qa1q1"></a><p>Q:</p></td>
                    <td align="left" valign="top"><p><a id="iddle1001" class="indexterm"></a><a id="iddle1132" class="indexterm"></a><a id="iddle1428" class="indexterm"></a><a id="iddle1694" class="indexterm"></a><a id="iddle2017" class="indexterm"></a><a id="iddle2041" class="indexterm"></a><a id="iddle2050" class="indexterm"></a><a id="iddle2632" class="indexterm"></a><a id="iddle2634" class="indexterm"></a><a id="iddle2636" class="indexterm"></a><span class="strong"><strong>Q: I didn’t know it was
                                okay to use a string of numbers for the id attributes
                                in our table?</strong></span></p></td>
                 </tr>
                 <tr class="answer">
                    <td align="left" valign="top"><a id="ch08qa1q1a1"></a><p>A:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes. As of HTML5, you are
                          allowed to use all numbers as an element id. As long as there
                          are no spaces in the id value, it’s fine. And for the
                          Battleship application, using numbers for each id works
                          perfectly as a way to keep track of each table position, so
                          we can access the element at that position quickly and
                          easily.</p></td>
                 </tr>
                 <tr class="question" title="Q:">
                    <td align="left" valign="top"><a id="ch08qa1qe2"></a><a id="ch08qa1q2"></a><p>Q:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>Q: So
                                just to make sure I understand, we’re using each td
                                element as a cell in the gameboard, and we’ll mark a
                                cell as being a hit or a miss with the class
                                attribute?</strong></span></p></td>
                 </tr>
                 <tr class="answer">
                    <td align="left" valign="top"><a id="ch08qa1q2a2"></a><p>A:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Right, there are a few
                          pieces here: we have a background image grid that is just for
                          eye candy, we have a transparent HTML table overlaying that,
                          and we use the classes “hit” and “miss” to put an image in
                          the background of each table cell when needed. This last part
                          will all be done from code, when we’re going to dynamically
                          add the class to an element.</p></td>
                 </tr>
                 <tr class="question" title="Q:">
                    <td align="left" valign="top"><a id="ch08qa1qe3"></a><a id="ch08qa1q3"></a><p>Q:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>Q: It
                                sounds like we’re going to need to convert letters, as
                                in “A6”, to numbers so we get “06”. Will JavaScript do
                                this automatically for us?</strong></span></p></td>
                 </tr>
                 <tr class="answer">
                    <td align="left" valign="top"><a id="ch08qa1q3a3"></a><p>A:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No, we’re going to have to
                          do that ourselves, but we have an easy way to do it—we’re
                          going to use what you know about arrays to do a quick
                          conversion... stay tuned.</p></td>
                 </tr>
                 <tr class="question" title="Q:">
                    <td align="left" valign="top"><a id="ch08qa1qe4"></a><a id="ch08qa1q4"></a><p>Q:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>Q:
                                I’m not sure I completely remember how CSS positioning
                                works.</strong></span></p></td>
                 </tr>
                 <tr class="answer">
                    <td align="left" valign="top"><a id="ch08qa1q4a4"></a><p>A:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Positioning allows you to
                          specify an exact position for an element. If an element is
                          positioned “relative”, then the element is positioned based
                          on its normal location in the flow of the page. If an element
                          is positioned “absolute”, then that element is positioned at
                          a specific location, relative to its most closely positioned
                          parent. Sometimes that’s the entire page, in which case the
                          position you specify could be its top left position based on
                          the corner of the web browser. In our case, we’re positioning
                          the table and message area elements absolutely, but in
                          relation to the game board (because the board is the most
                          closely positioned parent of the table and the message
                          area).</p><p>If you need a more in-depth refresher on CSS
                          positioning, check out <a class="xref" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Serious functions">Chapter&nbsp;11</a> of
                             <span class="emphasis"><em>Head First HTML and
                             CSS</em></span>.</p></td>
                 </tr>
                 <tr class="question" title="Q:">
                    <td align="left" valign="top"><a id="ch08qa1qe5"></a><a id="ch08qa1q5"></a><p>Q:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>Q:
                                When I learned about the HTML form element, I was
                                taught there is an action attribute that submits the
                                form. Why don’t we have one?</strong></span></p></td>
                 </tr>
                 <tr class="answer">
                    <td align="left" valign="top"><a id="ch08qa1q5a5"></a><p>A:</p></td>
                    <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> We don’t need the action
                          attribute in the &lt;form&gt; because we’re not submitting
                          the form to a server-side application. For this game, we’re
                          going to be handling everything in the browser, using code.
                          So, instead of submitting the form, we’re going to implement
                          an event handler to be notified when the form button is
                          clicked, and when that happens, we’ll handle everything in
                          our code, including getting the user’s input from the form.
                          Notice that the type of the form button is “button”, not
                          “submit”, like you might be used to seeing if you’ve
                          implemented forms that submit data to a PHP program or
                          another kind of program that runs on the server. It’s a good
                          question; more on this later in the chapter.</p></td>
                 </tr>
              </tbody>
           </table></div>
     </blockquote></div></div></div><div class="sect1" title="How to design the game"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_design_the_game"></a>How to design the game</h1></div></div></div><p><a id="iddle1145" class="indexterm"></a><a id="iddle1160" class="indexterm"></a><a id="iddle1167" class="indexterm"></a><a id="iddle1186" class="indexterm"></a><a id="iddle1187" class="indexterm"></a><a id="iddle1204" class="indexterm"></a><a id="iddle1414" class="indexterm"></a><a id="iddle1455" class="indexterm"></a><a id="iddle2288" class="indexterm"></a><a id="iddle2455" class="indexterm"></a><a id="iddle2503" class="indexterm"></a><a id="iddle2648" class="indexterm"></a><a id="iddle3041" class="indexterm"></a>With the HTML and CSS out of the way, let’s get to the real
  game design. Back in <a class="xref" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Going further">Chapter&nbsp;2</a>, we hadn’t covered functions or
  objects or encapsulation or learned about object-oriented design, so when we built
  the first version of the Battleship game, we used a procedural design—that is, we
  designed the game as a series of steps, with some decision logic and iteration mixed
  in. You also hadn’t learned about the DOM, so the game wasn’t very interactive. This
  time around, we’re going to organize the game into a set of objects, each with its
  own responsibilities, and we’re going to use the DOM to interact with the user.
  You’ll see how this design makes approaching the problem a lot more
  straightforward.</p><p>Let’s first get introduced to the objects we’re going to
  design and implement. There are three: the <span class="emphasis"><em>model</em></span>, which will hold the state of the game, like where each
  ship is located and where it’s been hit; the <span class="emphasis"><em>view</em></span>, which is responsible for updating the display; and the
     <span class="emphasis"><em>controller</em></span>, which glues everything together
  by handling the user input, making sure the game logic gets played and determining
  when the game is over.</p><div class="informalfigure"><a id="med_id00566a"></a><div class="mediaobject"><a id="med_id00566"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113434.png.jpg" alt="image with no caption" width="752" height="594"></div></div><div class="sidebar"><a id="exercise-id00118"></a><p class="title">Exercise</p><p><a id="iddle2261" class="indexterm"></a>It’s time for some object design. We’re going to start
     with the view object. Now, remember, the view object is responsible for updating
     the view. Take a look at the view below and see if you can determine the methods
     we want the view object to implement. Write the declarations for these methods
     below (just the declarations; we’ll code the bodies of the methods in a bit) along
     with a comment or two about what each does. We’ve done one for you. <span class="emphasis"><em>Check your answers before moving on:</em></span></p><div class="informalfigure"><a id="med_id00567a"></a><div class="mediaobject"><a id="med_id00567"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113436.png.jpg" alt="image with no caption" width="649" height="348"></div></div><div class="informalfigure"><a id="med_id00568a"></a><div class="mediaobject"><a id="med_id00568"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113438.png.jpg" alt="image with no caption" width="703" height="349"></div></div></div></div><div class="sect1" title="Implementing the View"><div class="titlepage"><div><div><h1 class="title"><a id="implementing_the_view"></a>Implementing the
  View</h1></div></div></div><p><a id="iddle1188" class="indexterm"></a><a id="iddle1459" class="indexterm"></a><a id="iddle1460" class="indexterm"></a><a id="iddle1461" class="indexterm"></a><a id="iddle2096" class="indexterm"></a><a id="iddle3042" class="indexterm"></a>If you checked the answer to the previous
  exercise, you’ve seen that we’ve broken the view into three separate methods: <code class="literal">displayMessage</code>, <code class="literal">displayHit</code> and
     <code class="literal">displayMiss</code>. Now, there is no one right answer. For
  instance, you might have just two methods, <code class="literal">displayMessage</code> and <code class="literal">displayPlayerGuess</code>, and
  pass an argument into <code class="literal">displayPlayerGuess</code> that indicates
  if the player’s guess was a hit or a miss. That is a perfectly reasonable design. But
  we’re sticking with our design for now... so let’s think through how to implement the
  first method, <code class="literal">displayMessage</code>:</p><div class="note" title="Note"><h3 class="title"><a id="ch08note03"></a>Note</h3><p>If not, shame on
     you. Do it now!</p></div><div class="informalfigure"><a id="med_id00569a"></a><div class="mediaobject"><a id="med_id00569"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113440.png.jpg" alt="image with no caption" width="527" height="265"></div></div></div><div class="sect1" title="How displayMessage works"><div class="titlepage"><div><div><h1 class="title"><a id="how_displaymessage_works"></a>How displayMessage
     works</h1></div></div></div><p>To implement the <code class="literal">displayMessage</code> method you need to review the HTML and see that we have a
     <code class="literal">&lt;div&gt;</code> with the id “messageArea” ready for
  messages:</p><div class="informalfigure"><a id="med_id00570a"></a><div class="mediaobject"><a id="med_id00570"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113442.png.jpg" alt="image with no caption" width="804" height="319"></div></div><p>We’ll use the DOM to get access to
  this <code class="literal">&lt;div&gt;</code>, and then set its text using <code class="literal">innerHTML</code>. And remember, whenever you change the DOM,
  you’ll see the changes immediately in the browser. Here’s what we’re going to
  do...</p><div class="informalfigure"><a id="med_id00571a"></a><div class="mediaobject"><a id="med_id00571"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113444.png.jpg" alt="image with no caption" width="427" height="582"></div></div><p><span class="strong"><strong>That’s one great thing about objects.</strong></span> We can make sure
  objects fulfill their responsibility without worrying about every other detail of the
  program. In this case the view just needs to know how to update the message area and
  place hit and miss markers on the grid. Once we’ve correctly implemented that
  behavior, we’re done with the view object and we can move on to other parts of the
  code.</p><p>The other advantage of this approach is we can test the view in isolation
  and make sure it works. When we test many aspects of the program at once, we increase
  the odds something is going to go wrong and at the same time make the job of finding
  the problem more difficult (because you have to examine more areas of the code to
  find the problem).</p><p>To test an isolated object (without having finished the rest
  of the program yet), we’ll need to write a little testing code that we’ll throw away
  later, but that’s okay.</p><p>So let’s finish the view, test it, and then move
  on!</p><div class="sect2" title="Implementing displayMessage"><div class="titlepage"><div><div><h2 class="title"><a id="implementing_displaymessage"></a>Implementing displayMessage</h2></div></div></div><p>Let’s get back
     to writing the code for <code class="literal">displayMessage</code>. Remember it
     needs to:</p><div class="itemizedlist"><ul class="itemizedlist">
        <li class="listitem"><p>Use the DOM to get the element with the id
              “messageArea”.</p></li>
        <li class="listitem"><p>Set that element’s <code class="literal">innerHTML</code> to the message passed to the <code class="literal">displayMessage</code> method.</p></li>
     </ul></div><p><a id="iddle1510" class="indexterm"></a><a id="iddle2787" class="indexterm"></a><a id="iddle2860" class="indexterm"></a>So open up your
     blank “battleship.js” file, and add the view object:</p><div class="informalfigure"><a id="med_id00572a"></a><div class="mediaobject"><a id="med_id00572"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113446.png.jpg" alt="image with no caption" width="759" height="255"></div></div><p>Now before we test this code,
     let’s go ahead and write the other two methods. They won’t be incredibly
     complicated methods, and this way we can test the entire object at
once.</p></div></div><div class="sect1" title="How displayHit and displayMiss work"><div class="titlepage"><div><div><h1 class="title"><a id="how_displayhit_and_displaymiss_work"></a>How displayHit and
           displayMiss work</h1></div></div></div><p>So we just talked about this, but
  remember, to have an image appear on the game board, we need to take a <code class="literal">&lt;td&gt;</code> element and add either the “hit” or the “miss”
  class to the element. The former results in a “ship.png” appearing in the cell and
  the latter results in “miss.png” being displayed.</p><div class="informalfigure"><a id="med_id00573a"></a><div class="mediaobject"><a id="med_id00573"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113448.png.jpg" alt="image with no caption" width="789" height="498"></div></div><p>Now in code, we’re going to use
  the DOM to get access to a <code class="literal">&lt;td&gt;</code>, and then set its
  class attribute to “hit” or “miss” using the <code class="literal">setAttribute</code> element method. As soon as we set the class attribute, you’ll
  see the appropriate image appear in the browser. Here’s what we’re going to
  do:</p><div class="itemizedlist"><ul class="itemizedlist">
     <li class="listitem"><p>Get a string id that consists of two numbers for the
           location of the hit or miss.</p></li>
     <li class="listitem"><p>Use the DOM to get the element with that id.</p></li>
     <li class="listitem"><p>Set that element’s class attribute to “hit” if we’re in
              <code class="literal">displayHit</code>, and “miss” if we’re in <code class="literal">displayMiss</code>.</p></li>
  </ul></div><div class="sect2" title="Implementing displayHit and displayMiss"><div class="titlepage"><div><div><h2 class="title"><a id="implementing_displayhit_and_displaymiss"></a>Implementing
              displayHit and displayMiss</h2></div></div></div><p>Both <code class="literal">displayHit</code> and <code class="literal">displayMiss</code>
     are methods that take the location of a hit or miss as an argument. That location
     should match the id of a cell (or <code class="literal">&lt;td&gt;</code> element)
     in the table representing the game board in the HTML. So the first thing we need
     to do is get a reference to that element with the <code class="literal">getElementById</code> method. Let’s try this in the <code class="literal">displayHit</code> method:</p><div class="informalfigure"><a id="med_id00574a"></a><div class="mediaobject"><a id="med_id00574"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113450.png.jpg" alt="image with no caption" width="699" height="90"></div></div><p>The next step is to add the
     class “hit” to the cell, which we can do with the <code class="literal">setAttribute</code> method like this:</p><div class="informalfigure"><a id="med_id00575a"></a><div class="mediaobject"><a id="med_id00575"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113452.png.jpg" alt="image with no caption" width="678" height="103"></div></div><p>Now let’s add this code to the
     view object, and write <code class="literal">displayMiss</code> as well:</p><div class="informalfigure"><a id="med_id00576a"></a><div class="mediaobject"><a id="med_id00576"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113454.png.jpg" alt="image with no caption" width="701" height="397"></div></div><p>Make sure you add the code for
        <code class="literal">displayHit</code> and <code class="literal">displayMiss</code> to your “battleship.js” file.</p></div><div class="sect2" title="Another Test Drive..."><div class="titlepage"><div><div><h2 class="title"><a id="another_test_drivehellip"></a>Another Test Drive... <span class="inlinemediaobject"><a id="inline_id00059"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="" width="144" height="47"></span></h2></div></div></div><p><a id="iddle1191" class="indexterm"></a><a id="iddle3045" class="indexterm"></a>Let’s put the
     code through its paces before moving on...in fact, let’s take the guesses from the
     previous Practice Drills exercise and implement them in code. Here’s the sequence
     we want to implement:</p><div class="informalfigure"><a id="med_id00577a"></a><div class="mediaobject"><a id="med_id00577"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113456.png.jpg" alt="image with no caption" width="626" height="129"></div></div><p>To represent that sequence in
     code, add this to the bottom of your “battleship.js” JavaScript file:</p><div class="informalfigure"><a id="med_id00578a"></a><div class="mediaobject"><a id="med_id00578"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113458.png.jpg" alt="image with no caption" width="603" height="175"></div></div><p>And, let’s not forget to test
        <code class="literal">displayMessage</code>:</p><div class="informalfigure"><a id="med_id00579a"></a><div class="mediaobject"><a id="med_id00579"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113460.png.jpg" alt="image with no caption" width="632" height="63"></div></div><p>After all that, reload the page
     in your browser and check out the updates to the display.</p><div class="informalfigure"><a id="med_id00580a"></a><div class="mediaobject"><a id="med_id00580"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113462.png.jpg" alt="image with no caption" width="598" height="350"></div></div><div class="blockquote"><blockquote class="blockquote">
        <p><span class="strong"><strong>One of the benefits of breaking up the code
                 into objects and giving each object only one responsibility is that we
                 can test each object to make sure it’s doing its job
                 correctly.</strong></span></p>
     </blockquote></div></div></div><div class="sect1" title="The Model"><div class="titlepage"><div><div><h1 class="title"><a id="model"></a>The
     Model</h1></div></div></div><p><a id="iddle1168" class="indexterm"></a><a id="iddle1173" class="indexterm"></a><a id="iddle1189" class="indexterm"></a><a id="iddle2289" class="indexterm"></a><a id="iddle2295" class="indexterm"></a><a id="iddle3043" class="indexterm"></a>With the view object out of the way, let’s
  move on to the model. The model is where we keep the <span class="emphasis"><em>state</em></span> of the game. The model often also holds some <span class="emphasis"><em>logic</em></span> relating to how the state changes. In this
  case the state includes the location of the ships, the ship locations that have been
  hit, and how many ships have been sunk. The only logic we’re going to need (for now)
  is determining when a player’s guess has hit a ship and then marking that ship with a
  hit.</p><p>Here’s what the model object is going to look like:</p><div class="informalfigure"><a id="med_id00581a"></a><div class="mediaobject"><a id="med_id00581"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113464.png.jpg" alt="image with no caption" width="654" height="344"></div></div><div class="sect2" title="How the model interacts with the view"><div class="titlepage"><div><div><h2 class="title"><a id="how_the_model_interacts_with_the_view"></a>How the
              model interacts with the view</h2></div></div></div><p>When the state of
     the game changes—that is, when you hit a ship, or miss—then the view needs to
     update the display. To do this, the model needs to talk to the view, and luckily
     we have a few methods the model can use to do that. We’ll get our game logic set
     first in the model, then we’ll add code to update the view.</p><div class="informalfigure"><a id="med_id00582a"></a><div class="mediaobject"><a id="med_id00582"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113466.png.jpg" alt="image with no caption" width="775" height="256"></div></div></div><div class="sect2" title="You’re gonna need a bigger boat... and game board"><div class="titlepage"><div><div><h2 class="title"><a id="youapostrophere_gonna_need_a_bigger_boat"></a>You’re gonna need a
              bigger boat... and game board</h2></div></div></div><p><a id="iddle1166" class="indexterm"></a><a id="iddle1179" class="indexterm"></a><a id="iddle2296" class="indexterm"></a><a id="iddle2301" class="indexterm"></a>Before we start
     writing model code, we need to think about how to represent the state of the ships
     in the model. Back in <a class="xref" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Going further">Chapter&nbsp;2</a> in the simple Battleship game,
     we had a single ship that sat on a 1x7 game board. Now things are a little more
     complex: we have <span class="emphasis"><em>three</em></span> ships on a 7x7
     board. Here’s how it looks now:</p><div class="informalfigure"><a id="med_id00583a"></a><div class="mediaobject"><a id="med_id00583"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113468.png.jpg" alt="image with no caption" width="791" height="374"></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00119"></a><p class="title">Sharpen your
           pencil</p><p><span class="strong"><strong>Given how we’ve described the new
              game board above, how would you represent the ships in the model (just
              the locations, we’ll worry about hits later). Check off the best solution
              below.</strong></span></p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
           <colgroup>
              <col>
              <col>
           </colgroup>
           <tbody>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00060"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use nine
                       variables for the ship locations, similar to the way we handled
                       the ships in <a class="xref" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Going further">Chapter&nbsp;2</a>.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00061"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an array
                       with an item for each cell in entire board (49 items total).
                       Record the ship number in each cell that holds part of a
                       ship.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00062"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an array
                       to hold all nine locations. Items 0-2 will hold the first ship,
                       3-5 the second, and so on.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00063"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use three
                       different arrays, one for each ship, with three locations
                       contained in each.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00064"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an
                       object named ship with three location properties. Put all the
                       ships in an array named ships.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00065"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="" valign="top"><p>______________________________________</p>
                    <p>______________________________________</p>
                    <p>______________________________________</p></td>
              </tr>
           </tbody>
        </table></div><div class="note" title="Note"><h3 class="title"><a id="ch08note04"></a>Note</h3><p>Or write in your own
     answer.</p></div></div></div></div><div class="sect1" title="How we’re going to represent the ships"><div class="titlepage"><div><div><h1 class="title"><a id="how_weapostrophere_going_to_represent_th"></a>How we’re
           going to represent the ships</h1></div></div></div><p><a id="iddle1066" class="indexterm"></a><a id="iddle1177" class="indexterm"></a><a id="iddle2299" class="indexterm"></a>As you can see there are many ways we can represent ships,
  and you may have even come up with a few other ways of your own. You’ll find that no
  matter what kind of data you’ve got, there are many choices for storing that data,
  with various tradeoffs depending on your choice—some methods will be space efficient,
  others will optimize run time, some will just be easier to understand, and so
  on.</p><div class="informalfigure"><a id="med_id00584a"></a><div class="mediaobject"><a id="med_id00584"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113470.png.jpg" alt="image with no caption" width="245" height="265"></div></div><p>We’ve chosen a representation for
  ships that is fairly simple—we’re representing each ship as an object that holds the
  locations it sits in, along with the hits it’s taken. Let’s take a look at how we
  represent one ship:</p><div class="informalfigure"><a id="med_id00585a"></a><div class="mediaobject"><a id="med_id00585"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113472.png.jpg" alt="image with no caption" width="735" height="248"></div></div><p>Here’s what all three ships would
  look like:</p><div class="informalfigure"><a id="med_id00586a"></a><div class="mediaobject"><a id="med_id00586"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113474.png.jpg" alt="image with no caption" width="684" height="138"></div></div><p>And, rather than managing three
  different variables to hold the ships, we’ll create a single array variable to hold
  them all, like this:</p><div class="informalfigure"><a id="med_id00587a"></a><div class="mediaobject"><a id="med_id00587"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113476.png.jpg" alt="image with no caption" width="785" height="201"></div></div><div class="sidebar"><a id="ship_magnets"></a><p class="title">Ship Magnets</p><div class="informalfigure"><a id="med_id00588a"></a><div class="mediaobject"><a id="med_id00588"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112316.png.jpg" alt="image with no caption" width="124" height="184"></div></div><p>Use the following player moves,
     along with the data structure for the ships, to place the ship and miss magnets
     onto the game board. Does the player sink all the ships? We’ve done the first move
     for you.</p><p>Here are the moves:</p><p>A6, B3, C4, D1, B0, D4, F0, A1, C6, B1,
     B2, E4, B6</p><div class="note" title="Note"><h3 class="title"><a id="ch08note04a"></a>Note</h3><p>Execute these moves on the game board.</p></div><div class="informalfigure"><a id="med_id00589a"></a><div class="mediaobject"><a id="med_id00589"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113478.png.jpg" alt="image with no caption" width="808" height="717"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00120"></a><p class="title">Sharpen your
     pencil</p><p>Let’s practice using the ships data structure to simulate some ship
     activities. Using the ships definition below, work through the questions and the
     code below and fill in the blanks. Make sure you check your answers before moving
     on, as this is an important part of how the game works:</p><a id="pro_id00091"></a><pre class="programlisting"><span class="strong"><strong>var ships = [{ locations: ["31", "41", "51"], hits: ["", "", ""] },</strong></span>
<span class="strong"><strong>{ locations: ["14", "24", "34"], hits: ["", "hit", ""] },</strong></span>
<span class="strong"><strong>{ locations: ["00", "01", "02"], hits: ["hit", "", ""] }];</strong></span></pre><p>Which
     ships are already hit?____________ And, at what locations?
     ______________</p><p>The player guesses “D4”, does that hit a ship?______ If so,
     which one? __________</p><p>The player guesses “B3”, does that hit a ship?______
     If so, which one? __________</p><p>Finish this code to access the second ship’s
     middle location and print its value with console.log.</p><a id="pro_id00092"></a><pre class="programlisting"><span class="strong"><strong>var ship2 = ships[____];</strong></span>
<span class="strong"><strong>var locations = ship2.locations;</strong></span>
<span class="strong"><strong>console.log("Location is " + locations[____]);</strong></span></pre><p>Finish
     this code to see if the third ship has a hit in its first location:</p><a id="pro_id00093"></a><pre class="programlisting"><span class="strong"><strong>var ship3 = ships[____];</strong></span>
<span class="strong"><strong>var hits = ship3._____;</strong></span>
<span class="strong"><strong>if (_____ === "hit") {</strong></span>
<span class="strong"><strong>console.log("Ouch, hit on third ship at location one");</strong></span>
<span class="strong"><strong>}</strong></span></pre><p>Finish
     this code to hit the first ship at the third location:</p><a id="pro_id00094"></a><pre class="programlisting"><span class="strong"><strong>var ______ = ships[0];</strong></span>
<span class="strong"><strong>var hits = ship1._______;</strong></span>
<span class="strong"><strong>hits[____] = ________;</strong></span></pre></div></div><div class="sect1" title="Implementing the model object"><div class="titlepage"><div><div><h1 class="title"><a id="implementing_the_model_object"></a>Implementing the
           model object</h1></div></div></div><p><a id="iddle1172" class="indexterm"></a><a id="iddle2294" class="indexterm"></a>Now that you know how to represent
  the ships and the hits, let’s get some code down. First, we’ll create the model
  object, and then take the <code class="literal">ships</code> data structure we just
  created, and add it as a property. And, while we’re at it, there are a few other
  properties we’re going to need as well, like <code class="literal">numShips</code>,
  to hold the number of ships we have in the game. Now, if you’re asking, “What do you
  mean, we know there are three ships, why do we need a <code class="literal">numShips</code> property?” Well, what if you wanted to create a new version of
  the game that was more difficult and had four or five ships? By not “hardcoding” this
  value, and using a property instead (and then using the property throughout the code
  rather than the number), we can save ourselves a future headache if we need to change
  the number of ships, because we’ll only need to change it in one place.</p><div class="informalfigure"><a id="med_id00590a"></a><div class="mediaobject"><a id="med_id00590"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113480.png.jpg" alt="image with no caption" width="352" height="385"></div></div><p>Now, speaking of “hardcoding”, we
     <span class="emphasis"><em>are</em></span> going to hardcode the ships’ initial
  locations, for now. By knowing where the ships are, we can test the game more easily,
  and focus on the core game logic for now. We’ll tackle the code for placing random
  ships on the game board a little later.</p><p>So let’s get the model object
  created:</p><div class="informalfigure"><a id="med_id00591a"></a><div class="mediaobject"><a id="med_id00591"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113482.png.jpg" alt="image with no caption" width="801" height="480"></div></div><div class="sect2" title="Thinking about the fire method"><div class="titlepage"><div><div><h2 class="title"><a id="thinking_about_the_fire_method"></a>Thinking about
              the fire method</h2></div></div></div><p><a id="iddle1171" class="indexterm"></a><a id="iddle1667" class="indexterm"></a><a id="iddle2292" class="indexterm"></a>The <code class="literal">fire</code> method is what
     turns a player’s guess into a hit or a miss. We already know the <code class="literal">view</code> object is going to take care of displaying the hits
     and misses, but the <code class="literal">fire</code> method has to provide the
     game logic for determining if a hit or a miss has occurred.</p><div class="informalfigure"><a id="med_id00592a"></a><div class="mediaobject"><a id="med_id00592"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113484.png.jpg" alt="image with no caption" width="284" height="313"></div></div><p>Knowing that a ship is hit is
     straightforward: given a player’s guess, you just need to:</p><div class="itemizedlist"><ul class="itemizedlist">
        <li class="listitem"><p>Examine each ship and see if it occupies that
              location.</p></li>
        <li class="listitem"><p>If it does, you have a hit, and we’ll mark the
              corresponding item in the <code class="literal">hits</code> array (and
              let the view know we got a hit). We’ll also return <code class="literal">true</code> from the method, meaning we got a hit.</p></li>
        <li class="listitem"><p>If no ship occupies the guessed location, you’ve got a
              miss. We’ll let the view know, and return <code class="literal">false</code> from the method.</p></li>
     </ul></div><p>Now the <code class="literal">fire</code> method should also
     determine if a ship isn’t just hit, but if it’s sunk. We’ll worry about that once
     we have the rest of the logic worked out.</p></div></div><div class="sect1" title="Setting up the fire method"><div class="titlepage"><div><div><h1 class="title"><a id="setting_up_the_fire_method"></a>Setting up the fire
     method</h1></div></div></div><p>Let’s get a basic skeleton of the <code class="literal">fire</code> method set up. The method will take a guess as an
  argument, and then iterate over each ship to determine if that ship was hit. We won’t
  write the hit detection code just yet, but let’s get the rest set up now:</p><div class="informalfigure"><a id="med_id00593a"></a><div class="mediaobject"><a id="med_id00593"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113486.png.jpg" alt="image with no caption" width="766" height="401"></div></div><div class="sect2" title="Looking for hits"><div class="titlepage"><div><div><h2 class="title"><a id="looking_for_hits"></a>Looking for hits</h2></div></div></div><p><a id="iddle1174" class="indexterm"></a><a id="iddle1689" class="indexterm"></a><a id="iddle2023" class="indexterm"></a><a id="iddle2066" class="indexterm"></a><a id="iddle2233" class="indexterm"></a>So now, each time through the loop, we
     need to see if the guess is one of the locations of the ship:</p><div class="informalfigure"><a id="med_id00594a"></a><div class="mediaobject"><a id="med_id00594"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113488.png.jpg" alt="image with no caption" width="579" height="161"></div></div><p>Here’s the situation: we have a
     string, <code class="literal">guess</code>, that we’re looking for in an array,
        <code class="literal">locations</code>. If <code class="literal">guess</code>
     matches one of those locations, we know we have a hit:</p><div class="informalfigure"><a id="med_id00595a"></a><div class="mediaobject"><a id="med_id00595"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113490.png.jpg" alt="image with no caption" width="543" height="67"></div></div><p>We could write yet another loop
     to go through each item in the <code class="literal">locations</code> array,
     compare the item to <code class="literal">guess</code>, and if they match, we have
     a hit.</p><p>But rather than write another loop, we have an easier way to do
     this:</p><div class="informalfigure"><a id="med_id00596a"></a><div class="mediaobject"><a id="med_id00596"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113492.png.jpg" alt="image with no caption" width="768" height="48"></div></div><p>So, using <code class="literal">indexOf</code>, we can write the code to find a hit like this:</p><div class="informalfigure"><a id="med_id00597a"></a><div class="mediaobject"><a id="med_id00597"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113494.png.jpg" alt="image with no caption" width="655" height="186"></div></div><p>Using <code class="literal">indexOf</code> isn’t any more efficient than writing a loop, but it is a
     little clearer and it’s definitely less code. We’d also argue that the intent of
     this code is clearer than if we wrote a loop: it’s easier to see what value we’re
     looking for in an array using <code class="literal">indexOf</code>. In any case,
     you now have another tool in your programming toolbelt.</p></div><div class="sect2" title="Putting that all together..."><div class="titlepage"><div><div><h2 class="title"><a id="putting_that_all_togetherhellip"></a>Putting that all together...</h2></div></div></div><p><a id="iddle1065" class="indexterm"></a><a id="iddle1169" class="indexterm"></a><a id="iddle2021" class="indexterm"></a><a id="iddle2290" class="indexterm"></a>To
     finish this up, we have one more thing to determine here: if we have a hit, what
     do we do? All we need to do, for now, is mark the hit in the model, which means
     adding a “hit” string to the <code class="literal">hits</code> array. Let’s put
     all the pieces together:</p><div class="informalfigure"><a id="med_id00598a"></a><div class="mediaobject"><a id="med_id00598"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113496.png.jpg" alt="image with no caption" width="695" height="636"></div></div><p>That’s a great start on our
     model object. There are only a couple of other things we need to do: determine if
     a ship is sunk, and let the view know about the changes in the model so it can
     keep the player updated. Let’s get started on those...</p></div><div class="sect2" title="Wait, can we talk about your verbosity again?"><div class="titlepage"><div><div><h2 class="title"><a id="waitcomma_can_we_talk_about_your_verbosi"></a>Wait, can we talk
              about your verbosity again?</h2></div></div></div><div class="informalfigure"><a id="med_id00599a"></a><div class="mediaobject"><a id="med_id00599"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113498.png.jpg" alt="image with no caption" width="216" height="253"></div></div><p><a id="iddle1286" class="indexterm"></a><a id="iddle2067" class="indexterm"></a><a id="iddle3121" class="indexterm"></a>Sorry, we have to bring this up again. You’re being a bit
     verbose in some of your references to objects and arrays. Take another look at the
     code:</p><div class="informalfigure"><a id="med_id00600a"></a><div class="mediaobject"><a id="med_id00600"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113500.png.jpg" alt="image with no caption" width="558" height="141"></div></div><p>Some would call this code
     overly verbose. Why? Because some of these references can be shortened using <span class="emphasis"><em>chaining</em></span>. Chaining allows us to string
     together object references so that we don’t have to create temporary variables,
     like the <code class="literal">locations</code> variable in the code
     above.</p><p>Now you might ask why <code class="literal">locations</code> is a
     temporary variable? That’s because we’re using <code class="literal">locations</code> only to temporarily store the <code class="literal">ship.locations</code> array so we can then turn around and call the <code class="literal">indexOf</code> method on it to get the <code class="literal">index</code> of the <code class="literal">guess</code>. We don’t need <code class="literal">locations</code> for anything else in this method. With
     chaining, we can get rid of that temporary <code class="literal">locations</code>
     variable, like this:</p><div class="informalfigure"><a id="med_id00601a"></a><div class="mediaobject"><a id="med_id00601"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113502.png.jpg" alt="image with no caption" width="696" height="43"></div></div><div class="sidebar"><a id="how_chaining_workshellip"></a><p class="title">How chaining
        works...</p><div class="informalfigure"><a id="med_id00602a"></a><div class="mediaobject"><a id="med_id00602"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112734.png.jpg" alt="image with no caption" width="170" height="130"></div></div><p>Chaining is really just a
        shorthand for a longer series of steps to access properties and methods of
        objects (and arrays). Let’s take a closer look at what we just did to combine
        two statements with chaining.</p><div class="informalfigure"><a id="med_id00603a"></a><div class="mediaobject"><a id="med_id00603"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113504.png.jpg" alt="image with no caption" width="708" height="120"></div></div><p>We can combine the bottom
        two statements by chaining together the expressions (and getting rid of the
        variable <code class="literal">locations</code>):</p><div class="informalfigure"><a id="med_id00604a"></a><div class="mediaobject"><a id="med_id00604"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113506.png.jpg" alt="image with no caption" width="445" height="99"></div></div></div></div><div class="sect2" title="Meanwhile back at the battleship..."><div class="titlepage"><div><div><h2 class="title"><a id="meanwhile_back_at_the_battleshiphellip"></a>Meanwhile back at the battleship...</h2></div></div></div><p><a id="iddle1170" class="indexterm"></a><a id="iddle1668" class="indexterm"></a><a id="iddle2022" class="indexterm"></a><a id="iddle2127" class="indexterm"></a><a id="iddle2291" class="indexterm"></a><a id="iddle2293" class="indexterm"></a>Now we need to write the code to determine if a ship is sunk. You know the
     rules: a battleship is sunk when all of its locations are hit. We can add a little
     helper method to check to see if a ship is sunk:</p><div class="informalfigure"><a id="med_id00605a"></a><div class="mediaobject"><a id="med_id00605"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113508.png.jpg" alt="image with no caption" width="539" height="317"></div></div><p>Now, we can use that method in
     the <code class="literal">fire</code> method to find out if a ship is
     sunk:</p><div class="informalfigure"><a id="med_id00606a"></a><div class="mediaobject"><a id="med_id00606"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113510.png.jpg" alt="image with no caption" width="717" height="429"></div></div></div><div class="sect2" title="A view to a kill..."><div class="titlepage"><div><div><h2 class="title"><a id="view_to_a_killhellip"></a>A view to a
     kill...</h2></div></div></div><p><a id="iddle1175" class="indexterm"></a><a id="iddle1190" class="indexterm"></a><a id="iddle2024" class="indexterm"></a><a id="iddle2287" class="indexterm"></a><a id="iddle2297" class="indexterm"></a><a id="iddle3044" class="indexterm"></a>That’s about it for the model object. The
     model maintains the state of the game, and has the logic to test guesses for hits
     and misses. The only thing we’re missing is the code to notify the view when we
     get a hit or a miss in the model. Let’s do that now:</p><div class="informalfigure"><a id="med_id00607a"></a><div class="mediaobject"><a id="med_id00607"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113512.png.jpg" alt="image with no caption" width="811" height="829"></div></div><div class="sidebar"><a id="test_drive-id00121"></a><p class="title">A Test Drive</p><div class="informalfigure"><a id="med_id00608a"></a><div class="mediaobject"><a id="med_id00608"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p><a id="iddle1080" class="indexterm"></a><a id="iddle1181" class="indexterm"></a><a id="iddle1287" class="indexterm"></a><a id="iddle2303" class="indexterm"></a><a id="iddle2506" class="indexterm"></a><a id="iddle3122" class="indexterm"></a>Add all the model code to “battleship.js”. Test it by
        calling the model’s fire method, passing in a row and column of a guess each
        time. Our ships are hardcoded still, so it’ll be easy for you to hit them all.
        Try adding some of your own as well (a few more misses). (Download
        “battleship_tester.js” to see our version of the test code.)</p><div class="informalfigure"><a id="med_id00609a"></a><div class="mediaobject"><a id="med_id00609"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113514.png.jpg" alt="image with no caption" width="792" height="334"></div></div><p>Reload “battleship.html”.
        You should see your hits and misses appear on the game board.</p></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00122"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote">
           <div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set">
                 <colgroup><col align="left" width="1%">
                 <col>
                 </colgroup><tbody>
                    <tr class="question" title="Q:">
                       <td align="left" valign="top"><a id="ch08qa2qe1"></a><a id="ch08qa2q1"></a><p>Q:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>Q:
                                   Is using chaining to combine statements better than
                                   keeping statements
                          separate?</strong></span></p></td>
                    </tr>
                    <tr class="answer">
                       <td align="left" valign="top"><a id="ch08qa2q1a1"></a><p>A:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Not necessarily better,
                             no. Chaining isn’t much more efficient (you save one
                             variable), but it does make your code shorter. We’d argue
                             that short chains (2 or 3 levels at most) are easier to
                             read than multiple lines of code, but that’s our
                             preference. If you want to keep your statements separate,
                             that’s fine. And if you do use chaining, make sure you
                             don’t create really long chains; they will be harder to
                             read and understand if they’re too long.</p></td>
                    </tr>
                    <tr class="question" title="Q:">
                       <td align="left" valign="top"><a id="ch08qa2qe2"></a><a id="ch08qa2q2"></a><p>Q:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>Q:
                                   We have arrays (locations) inside an object (ship)
                                   inside an array (ships). How many levels deep can
                                   you nest objects and arrays like
                                this?</strong></span></p></td>
                    </tr>
                    <tr class="answer">
                       <td align="left" valign="top"><a id="ch08qa2q2a2"></a><p>A:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Pretty much as deep as
                             you want. Practically, of course, it’s unlikely you’ll
                             ever go too deep (and if you find yourself with more than
                             three or four levels of nesting, it’s likely your data
                             structure is getting too complex and you should rethink
                             things a bit).</p></td>
                    </tr>
                    <tr class="question" title="Q:">
                       <td align="left" valign="top"><a id="ch08qa2qe3"></a><a id="ch08qa2q3"></a><p>Q:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>Q:
                                   I noticed we added a property named boardSize to the
                                   model, but we haven’t used it in the model code.
                                   What is that for?</strong></span></p></td>
                    </tr>
                    <tr class="answer">
                       <td align="left" valign="top"><a id="ch08qa2q3a3"></a><p>A:</p></td>
                       <td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> We’re going to be using
                             model.boardSize, and the other properties in model, in the
                             code coming up. The model’s responsibility is to manage
                             the state of the game, and boardSize is definitely part of
                             the state. The controller will access the state it needs
                             by accessing the model’s properties, and we’ll be adding
                             more model methods later that will use these properties
                             too.</p></td>
                    </tr>
                 </tbody>
              </table></div>
        </blockquote></div></div></div></div><div class="sect1" title="Implementing the Controller"><div class="titlepage"><div><div><h1 class="title"><a id="implementing_the_controller"></a>Implementing the
        Controller</h1></div></div></div><p><a id="iddle1149" class="indexterm"></a><a id="iddle1418" class="indexterm"></a><a id="iddle1959" class="indexterm"></a><a id="iddle2459" class="indexterm"></a><a id="iddle2649" class="indexterm"></a>Now
  that you have the view and the model complete, we’re going to start to bring this app
  together by implementing the controller. At a high level, the controller glues
  everything together by getting a guess, processing the guess and getting it to the
  model. It also keeps track of some administrative details, like the current number of
  guesses and the player’s progress in the game. To do all this the controller relies
  on the model to keep the state of the game and on the view to display the
  game.</p><p>More specifically, here’s the set of responsibilities we’re giving the
  controller:</p><div class="itemizedlist"><ul class="itemizedlist">
     <li class="listitem"><p>Get and process the player’s guess (like “A0” or
           “B1”).</p></li>
     <li class="listitem"><p>Keep track of the number of guesses.</p></li>
     <li class="listitem"><p>Ask the model to update itself based on the latest
           guess.</p></li>
     <li class="listitem"><p>Determine when the game is over (that is, when all ships
           have been sunk).</p></li>
  </ul></div><p>Let’s get started on the controller by first defining a property, <code class="literal">guesses</code>, in the controller object. Then we’ll implement a
  single method, <code class="literal">processGuess</code>, that takes an alphanumeric
  guess, processes it and passes it to the model.</p><div class="informalfigure"><a id="med_id00610a"></a><div class="mediaobject"><a id="med_id00610"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113516.png.jpg" alt="image with no caption" width="513" height="202"></div></div><p>Here’s the skeleton of the
  controller code; we’ll fill this in over the next few pages:</p><div class="informalfigure"><a id="med_id00611a"></a><div class="mediaobject"><a id="med_id00611"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113518.png.jpg" alt="image with no caption" width="724" height="169"></div></div></div><div class="sect1" title="Processing the player’s guess"><div class="titlepage"><div><div><h1 class="title"><a id="processing_the_playerapostrophes_guess"></a>Processing the
           player’s guess</h1></div></div></div><p><a id="iddle1151" class="indexterm"></a><a id="iddle1420" class="indexterm"></a><a id="iddle2461" class="indexterm"></a>The controller’s responsibility is to get the player’s guess, make sure it’s
  valid, and then get it to the model object. But, where does it get the player’s
  guess? Don’t worry, we’ll get to that in a bit. For now we’re just going to assume,
  at some point, some code is going to call the controller’s <code class="literal">processGuess</code> method and give it a string in the form:</p><div class="note" title="Note"><h3 class="title"><a id="ch08note05"></a>Note</h3><p>This is a great
     technique when you are coding. Focus on the requirements for the specific code
     you’re working on. Thinking about the whole problem at once is often a less
     successful technique.</p></div><div class="informalfigure"><a id="med_id00612a"></a><div class="mediaobject"><a id="med_id00612"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113520.png.jpg" alt="image with no caption" width="370" height="65"></div></div><p>Now after you receive a guess in
  this form (an alpha-numeric set of characters, like “A3”), you’ll need to transform
  the guess into a form the model understands (a string of two numeric characters, like
  “03”). Here’s a high level view of how we’re going to convert a valid input into the
  number-only form:</p><div class="note" title="Note"><h3 class="title"><a id="ch08note05a"></a>Note</h3><p>Surely a player would never enter in an
     invalid guess, right? Ha! We’d better make sure we’ve got valid
  input.</p></div><div class="informalfigure"><a id="med_id00613a"></a><div class="mediaobject"><a id="med_id00613"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113522.png.jpg" alt="image with no caption" width="667" height="415"></div></div><p>But first things first. We also
  need to check that the input is valid. Let’s plan this all out before we write the
  code.</p></div><div class="sect1" title="Planning the code..."><div class="titlepage"><div><div><h1 class="title"><a id="planning_the_codehellip"></a>Planning
           the code...</h1></div></div></div><p><a id="iddle1148" class="indexterm"></a><a id="iddle1417" class="indexterm"></a><a id="iddle2458" class="indexterm"></a><a id="iddle2612" class="indexterm"></a>Rather than putting all this
  guess-processing code into the <code class="literal">processGuess</code> method,
  we’re going to write a little helper function (after all we might be able to use this
  again). We’ll name the function <code class="literal">parseGuess</code>.</p><p>Let’s
  step through how it is going to work before we start writing code:</p><div class="orderedlist"><ol class="orderedlist">
     <li class="listitem"><p>We get a player’s guess in classic Battleship-style as a
           single letter followed by a number.</p></li>
     <li class="listitem"><p>Check the input to make sure it is valid (not null or too
           long or too short).</p></li>
     <li class="listitem"><p>Take the letter and convert it to a number: A to 0, B to
           1, and so on.</p></li>
     <li class="listitem"><p>See if the number from step 3 is valid (between 0 and
           6).</p></li>
     <li class="listitem"><p>Check the second number for validity (also between 0 and
           6).</p></li>
     <li class="listitem"><p>If any check failed, return null. Otherwise concatenate
           the two numbers into a string and return the string.</p></li>
  </ol></div><div class="informalfigure"><a id="med_id00614a"></a><div class="mediaobject"><a id="med_id00614"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113524.png.jpg" alt="image with no caption" width="355" height="711"></div></div></div><div class="sect1" title="Implementing parseGuess"><div class="titlepage"><div><div><h1 class="title"><a id="implementing_parseguess"></a>Implementing
  parseGuess</h1></div></div></div><p><a id="iddle2068" class="indexterm"></a>We have a
  solid plan for coding this, so let’s get started:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
     <colgroup>
        <col>
        <col>
     </colgroup>
     <tbody>
        <tr>
           <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="strong"><strong>1-2</strong></span></p></td>
           <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Let’s tackle steps
                 one and two. All we need to do is accept the player’s guess and check
                 to make sure it is valid. At this point we’re just going to define
                 validity as accepting a string that has exactly two characters in
                 it.</p>
              <p><span class="mediaobject"><a id="inline_id00066"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113526.png.jpg" alt="" width="674" height="183"></span></p></td>
        </tr>
        <tr>
           <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="strong"><strong>3</strong></span></p></td>
           <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Next, we take the
                 letter and convert it to a number by using a helper array that
                 contains the letters A-G. To get the number, we can use the indexOf
                 method to get the index of the letter in the array, like this:</p>
              <p><span class="mediaobject"><a id="inline_id00067"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113528.png.jpg" alt="" width="683" height="326"></span></p></td>
        </tr>
        <tr>
           <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><a id="iddle1176" class="indexterm"></a><a id="iddle1812" class="indexterm"></a><a id="iddle2126" class="indexterm"></a><a id="iddle2298" class="indexterm"></a><span class="strong"><strong>4-5</strong></span></p></td>
           <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Now we’ll handle
                 checking both characters of the guess to see if they are numbers
                 between zero and six (in other words, to make sure they are both valid
                 positions on the board). <span class="mediaobject"><a id="inline_id00068"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113530.png.jpg" alt="" width="818" height="600"></span></p>
              <div class="note" title="Brain Power"><h3 class="title"><a id="ch08note06"></a>Brain Power</h3><p>Rather than hard-coding
                    the value six as the biggest value a row or column can hold, we
                    used the model’s boardSize property. What advantage do you think
                    that has in the long run?</p></div></td>
        </tr>
        <tr>
           <td style="border-right: 0.5pt solid ; " valign="top"><p><a id="iddle1356" class="indexterm"></a><a id="iddle2630" class="indexterm"></a><a id="iddle2837" class="indexterm"></a><span class="strong"><strong>6</strong></span></p></td>
           <td style="" valign="top"><p>Now for our final bit of code for the
                 parseGuess function... If any check for valid input fails, we’ll
                 return null. Otherwise we’ll return the row and column of the guess,
                 combined into a string.</p>
              <p><span class="mediaobject"><a id="inline_id00069"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113532.png.jpg" alt="" width="783" height="582"></span></p></td>
        </tr>
     </tbody>
  </table></div><div class="sidebar"><a id="test_drive-id00123"></a><p class="title">A
     Test Drive</p><div class="informalfigure"><a id="med_id00615a"></a><div class="mediaobject"><a id="med_id00615"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p>Okay, make sure all this code
     is entered into “battleship.js” and then add some function calls below it all that
     look like this:</p><a id="pro_id00095"></a><pre class="programlisting"><span class="strong"><strong>console.log(parseGuess("A0"));</strong></span>
<span class="strong"><strong>console.log(parseGuess("B6"));</strong></span>
<span class="strong"><strong>console.log(parseGuess("G3"));</strong></span>
<span class="strong"><strong>console.log(parseGuess("H0"));</strong></span>
<span class="strong"><strong>console.log(parseGuess("A7"));</strong></span></pre><p>Reload
     “battleship.html”, and make sure your console window is open. You should see the
     results of parseGuess displayed in the console and possibly an alert or
     two.</p><div class="informalfigure"><a id="med_id00615b"></a><div class="mediaobject"><a id="med_id00615c"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113534.png.jpg" alt="image with no caption" width="267" height="234"></div></div></div><div class="sect2" title="Meanwhile back at the controller..."><div class="titlepage"><div><div><h2 class="title"><a id="meanwhile_back_at_the_controllerhellip"></a>Meanwhile back at the controller...</h2></div></div></div><p><a id="iddle1146" class="indexterm"></a><a id="iddle1415" class="indexterm"></a><a id="iddle2456" class="indexterm"></a>Now that we have the <code class="literal">parseGuess</code> helper function written we move on to implementing the
     controller. Let’s first integrate the <code class="literal">parseGuess</code>
     function with the existing controller code:</p><div class="informalfigure"><a id="med_id00616a"></a><div class="mediaobject"><a id="med_id00616"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113536.png.jpg" alt="image with no caption" width="766" height="254"></div></div><p>That completes the first
     responsibility of the controller. Let’s see what’s left:</p><div class="itemizedlist"><ul class="itemizedlist">
        <li class="listitem"><p><span class="strikethrough">Get and process the
                 player’s guess (like “A0” or “B1”).</span></p></li>
        <li class="listitem"><p>Keep track of the number of guesses.</p></li>
        <li class="listitem"><p>Ask the model to update itself based on the latest
              guess.</p><div class="note" title="Note"><h3 class="title"><a id="ch08note08"></a>Note</h3><p>We’ll tackle these
           next.</p></div></li>
        <li class="listitem"><p>Determine when the game is over (that is, when all
              ships have been sunk).</p></li>
     </ul></div></div></div><div class="sect1" title="Counting guesses and firing the shot"><div class="titlepage"><div><div><h1 class="title"><a id="counting_guesses_and_firing_the_shot"></a>Counting
           guesses and firing the shot</h1></div></div></div><p>The next item on our
  list is straightforward: to keep track of the number of guesses we just need to
  increment the <code class="literal">guesses</code> property each time the player
  makes a guess. As you’ll see in the code, we’ve chosen not to penalize players if
  they enter an invalid guess.</p><p>Next, we’ll ask the model to update itself based
  on the guess by calling the model’s <code class="literal">fire</code> method. After
  all, the point of a player’s guess is to fire hoping to hit a battleship. Now
  remember, the <code class="literal">fire</code> method takes a string, which contains
  the row and column, and by some luck we get that string by calling <code class="literal">parseGuess</code>. How convenient.</p><p>Let’s put all this
  together and implement the next step...</p><div class="informalfigure"><a id="med_id00617a"></a><div class="mediaobject"><a id="med_id00617"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113538.png.jpg" alt="image with no caption" width="822" height="285"></div></div><div class="sect2" title="Game over?"><div class="titlepage"><div><div><h2 class="title"><a id="game_overquestion_mark"></a>Game over?</h2></div></div></div><p><a id="iddle1147" class="indexterm"></a><a id="iddle1416" class="indexterm"></a><a id="iddle2457" class="indexterm"></a>All we have left is to determine when the game is
     complete. How do we do that? Well, we know that when three ships are sunk the game
     is over. So, each time the guess is a hit, we’ll check to see if there are three
     sunken ships, using the <code class="literal">model.shipsSunk</code> property.
     Let’s generalize this a bit, and instead of just comparing it to the number 3,
     we’ll use the model’s <code class="literal">numShips</code> property for the
     comparison. You might decide later to set the number of ships to, say, 2 or 4, and
     this way, you won’t need to revisit this code to make it work correctly.</p><div class="informalfigure"><a id="med_id00618a"></a><div class="mediaobject"><a id="med_id00618"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113540.png.jpg" alt="image with no caption" width="590" height="304"></div></div><div class="sidebar"><a id="test_drive-id00124"></a><p class="title">A Test Drive</p><div class="informalfigure"><a id="med_id00619a"></a><div class="mediaobject"><a id="med_id00619"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p><a id="iddle1152" class="indexterm"></a><a id="iddle1421" class="indexterm"></a><a id="iddle2462" class="indexterm"></a><a id="iddle2650" class="indexterm"></a>Okay, make sure all the controller code is entered into your
        “battleship.js” file and then add some function calls below it all to test your
        controller. Reload your “battleship.html” page and note the hits and misses on
        the board. Are they in the right places? (Download “battleship_tester.js” to
        see our version.)</p><div class="informalfigure"><a id="med_id00620a"></a><div class="mediaobject"><a id="med_id00620"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113542.png.jpg" alt="image with no caption" width="826" height="517"></div></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch08note09"></a>Brain Power</h3><p>We
        let the player know the game ended in the message area, after they sink all
        three ships. But the player can still enter guesses. If you wanted to fix this
        so a player isn’t allowed to enter guesses after they’ve sunk all the ships,
        how would you handle that?</p></div></div><div class="sect2" title="Getting a player’s guess"><div class="titlepage"><div><div><h2 class="title"><a id="getting_a_playerapostrophes_guess"></a>Getting a player’s
              guess</h2></div></div></div><p><a id="iddle1106" class="indexterm"></a><a id="iddle1165" class="indexterm"></a><a id="iddle1580" class="indexterm"></a><a id="iddle1593" class="indexterm"></a><a id="iddle1966" class="indexterm"></a><a id="iddle1980" class="indexterm"></a>Now that you’ve implemented the core game
     logic and display, you need a way to enter and retrieve a player’s guesses so the
     game can actually be played. You might remember that in the HTML we’ve already got
     a <code class="literal">&lt;form&gt;</code> element ready for entering guesses,
     but how do we hook that into the game?</p><div class="informalfigure"><a id="med_id00621a"></a><div class="mediaobject"><a id="med_id00621"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113544.png.jpg" alt="image with no caption" width="281" height="261"></div></div><p>To do that we need an <span class="emphasis"><em>event handler</em></span>. We’ve talked a little about
     event handlers already. For now, we’re going to spend just enough time with event
     handlers again to get the game working, and we’ll undertake learning the
     nitty-gritty details of event handlers in the next chapter. Our goal is for you to
     get a high-level understanding of how event handlers work with form elements, but
     not necessarily understand everything about how it works at the detailed level,
     right now.</p><p>Here’s the big picture:</p><div class="orderedlist"><ol class="orderedlist">
        <li class="listitem"><p>The player enters a guess and clicks on the Fire!
              button.</p></li>
        <li class="listitem"><p>When Fire! is clicked, a pre-assigned event handler is
              called.</p></li>
        <li class="listitem"><p>The handler for the Fire! button grabs the player’s
              input from the form and hands it to the controller.</p></li>
     </ol></div><div class="informalfigure"><a id="med_id00622a"></a><div class="mediaobject"><a id="med_id00622"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113546.png.jpg" alt="image with no caption" width="875" height="536"></div></div></div></div><div class="sect1" title="How to add an event handler to the Fire! button"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_add_an_event_handler_to_the_firee"></a>How to add an event
           handler to the Fire! button</h1></div></div></div><p><a id="iddle1162" class="indexterm"></a><a id="iddle1472" class="indexterm"></a><a id="iddle1807" class="indexterm"></a><a id="iddle1830" class="indexterm"></a><a id="iddle1924" class="indexterm"></a><a id="iddle1960" class="indexterm"></a><a id="iddle2087" class="indexterm"></a><a id="iddle2205" class="indexterm"></a><a id="iddle2567" class="indexterm"></a><a id="iddle2570" class="indexterm"></a><a id="iddle2578" class="indexterm"></a><a id="iddle3086" class="indexterm"></a><a id="iddle3099" class="indexterm"></a>To get this all rolling the first thing we need to do is add
  an event handler to the Fire! button. To do that, we first need to get a reference to
  the button using the button’s id. Review your HTML again, and you’ll find the Fire!
  button has the id “fireButton”. With that, all you need to do is call <code class="literal">document.getElementById</code> to get a reference to the button.
  Once we have the button reference, we can assign a handler function to the <code class="literal">onclick</code> property of the button, like this:</p><div class="informalfigure"><a id="med_id00623a"></a><div class="mediaobject"><a id="med_id00623"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113548.png.jpg" alt="image with no caption" width="733" height="374"></div></div><div class="sect2" title="Getting the player’s guess from the form"><div class="titlepage"><div><div><h2 class="title"><a id="getting_the_playerapostrophes_guess_from"></a>Getting the player’s guess from the
     form</h2></div></div></div><p>The Fire! button is what initiates the guess, but
     the player’s guess is actually contained in the “guessInput” form element. We can
     get the value from the form input by accessing the input element’s <code class="literal">value</code> property. Here’s how you do it:</p><div class="informalfigure"><a id="med_id00624a"></a><div class="mediaobject"><a id="med_id00624"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113550.png.jpg" alt="image with no caption" width="751" height="213"></div></div></div></div><div class="sect1" title="Passing the input to the controller"><div class="titlepage"><div><div><h1 class="title"><a id="passing_the_input_to_the_controller"></a>Passing the
           input to the controller</h1></div></div></div><p><a id="iddle1150" class="indexterm"></a><a id="iddle1419" class="indexterm"></a><a id="iddle2460" class="indexterm"></a>Here’s where it all comes together. We have a controller
  waiting—just dying—to get a guess from the player. All we need to do is pass the
  player’s guess to the controller. Let’s do that:</p><div class="informalfigure"><a id="med_id00625a"></a><div class="mediaobject"><a id="med_id00625"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113552.png.jpg" alt="image with no caption" width="614" height="207"></div></div><div class="sidebar"><a id="test_drive-id00125"></a><p class="title">A Test Drive</p><div class="informalfigure"><a id="med_id00626a"></a><div class="mediaobject"><a id="med_id00626"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p>This is no mere test drive.
     You’re finally ready to play the real game! Make sure you’ve added all the code to
     “battleship.js”, and reload “battleship.html” in your browser. Now, remember the
     ship locations are hardcoded, so you’ll have a good idea of how to win this game.
     Below you’ll find the winning moves, but be sure to fully test this code. Enter
     misses, invalid guesses and downright incorrect guesses.</p><div class="informalfigure"><a id="med_id00627a"></a><div class="mediaobject"><a id="med_id00627"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113554.png.jpg" alt="image with no caption" width="568" height="358"></div></div></div><div class="note" title="Serious Coding"><h3 class="title"><a id="ch08note10"></a>Serious
        Coding</h3><p><a id="iddle1107" class="indexterm"></a><a id="iddle1581" class="indexterm"></a><a id="iddle1594" class="indexterm"></a><a id="iddle1808" class="indexterm"></a><a id="iddle1961" class="indexterm"></a><a id="iddle1967" class="indexterm"></a><a id="iddle1981" class="indexterm"></a><a id="iddle2088" class="indexterm"></a>Finding it clumsy to have to click the Fire! button with
     every guess? Sure, clicking works, but it’s slow and inconvenient. It would be so
     much easier if you could just press RETURN, right? Here’s a quick bit of code to
     handle a RETURN key press:</p><div class="informalfigure"><a id="med_id00628a"></a><div class="mediaobject"><a id="med_id00628"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113556.png.jpg" alt="image with no caption" width="642" height="522"></div></div><p>Update your init function and
     add the handleKeyPress function anywhere in your code. Reload and let the game
     play begin!</p></div><div class="sect2" title="What’s left? Oh yeah, darn it, those hardcoded ships!"><div class="titlepage"><div><div><h2 class="title"><a id="whatapostrophes_leftquestion_mark_oh_yea"></a>What’s left? Oh
              yeah, darn it, those hardcoded ships!</h2></div></div></div><p><a id="iddle1163" class="indexterm"></a><a id="iddle2747" class="indexterm"></a>At
     this point you’ve got a pretty amazing browser-based game created from a little
     HTML, some images, and roughly 100 lines of code. But, the one aspect of this game
     that is a little unsatisfying is that the ships are always in the same location.
     You still need to write the code to generate random locations for the ships every
     time we start a new game (otherwise, it’ll be a pretty boring game).</p><p>Now,
     before we start, we want to let you know that we’re going to cover this code at a
     slightly faster clip—you’re getting to the point where you can read and understand
     code better, and there aren’t a lot of new things in this code. So, let’s get
     started. Here’s what we need to consider:</p><div class="informalfigure"><a id="med_id00629a"></a><div class="mediaobject"><a id="med_id00629"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113558.png.jpg" alt="image with no caption" width="744" height="578"></div></div><div class="sidebar"><a id="code_magnets-id00126"></a><p class="title">Code Magnets</p><div class="informalfigure"><a id="med_id00630a"></a><div class="mediaobject"><a id="med_id00630"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112316.png.jpg" alt="image with no caption" width="124" height="184"></div></div><p>An algorithm to generate
        ships is all scrambled up on the fridge. Can you put the magnets back in the
        right places to produce a working algorithm? Check your answer at the end of
        the chapter before you go on.</p><div class="note" title="Note"><h3 class="title"><a id="ch08note11"></a>Note</h3><p>An algorithm is just a
           fancy word for a sequence of steps that solve a problem.</p></div><div class="informalfigure"><a id="med_id00631a"></a><div class="mediaobject"><a id="med_id00631"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113560.png.jpg" alt="image with no caption" width="325" height="390"></div></div></div></div></div><div class="sect1" title="How to place ships"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_place_ships"></a>How to place
     ships</h1></div></div></div><p><a id="iddle1342" class="indexterm"></a><a id="iddle1519" class="indexterm"></a><a id="iddle1910" class="indexterm"></a><a id="iddle1913" class="indexterm"></a><a id="iddle2229" class="indexterm"></a>There
  are two things you need to consider when placing ships on the game board. The first
  is that ships can be oriented either vertically or horizontally. The second is that
  ships don’t overlap on the board. The bulk of the code we’re about to write handles
  these two constraints. Now, as we said, we’re not going to go through the code in
  gory detail, but you have everything you need to work through it, and if you spend
  enough time with the code you’ll understand each part in detail. There’s nothing in
  it that you haven’t already encountered so far in the book (with one exception that
  we’ll talk about). So let’s dive in...</p><p>We’re going to organize the code into
  three methods that are part of the model object:</p><div class="itemizedlist"><ul class="itemizedlist">
     <li class="listitem"><p title="generateShipLocations:"><span class="title"><strong><span class="strong"><strong>generateShipLocations:</strong></span></strong></span>&nbsp;This
           is the master method. It creates a <code class="literal">ships</code> array
           in the model for you, with the number of ships in the model’s <code class="literal">numShips</code> property.</p></li>
     <li class="listitem"><p title="generateShip:"><span class="title"><strong><span class="strong"><strong>generateShip:</strong></span></strong></span>&nbsp;This method
           creates a single ship, located somewhere on the board. The locations may or
           may not overlap other ships.</p></li>
     <li class="listitem"><p title="collision:"><span class="title"><strong><span class="strong"><strong>collision:</strong></span></strong></span>&nbsp;This method takes a
           single ship and makes sure it doesn’t overlap with a ship already on the
           board.</p></li>
  </ul></div><div class="sect2" title="The generateShipLocations function"><div class="titlepage"><div><div><h2 class="title"><a id="generateshiplocations_function"></a>The generateShipLocations
              function</h2></div></div></div><p>Let’s get started with the <code class="literal">generateShipLocations</code> method. This method iterates,
     creating ships, until it has filled the model’s <code class="literal">ships</code>
     array with enough ships. Each time it generates a new ship (which it does using
     the <code class="literal">generateShip</code> method), it uses the <code class="literal">collision</code> method to make sure there are no overlaps. If
     there is an overlap, it throws that ship away and keeps trying.</p><p>One thing to
     note in this code is that we’re using a new iterator, the <span class="strong"><strong>do while</strong></span> loop. The do while loop works almost
     exactly like <span class="strong"><strong>while</strong></span>, except that you
        <span class="emphasis"><em>first</em></span> execute the statements in the
     body, and <span class="emphasis"><em>then</em></span> check the condition. You’ll
     find certain logic conditions, while rare, work better with do while than with the
     while statement.</p><div class="informalfigure"><a id="med_id00632a"></a><div class="mediaobject"><a id="med_id00632"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113562.png.jpg" alt="image with no caption" width="786" height="284"></div></div></div></div><div class="sect1" title="Writing the generateShip method"><div class="titlepage"><div><div><h1 class="title"><a id="writing_the_generateship_method"></a>Writing the
           generateShip method</h1></div></div></div><p><a id="iddle1062" class="indexterm"></a><a id="iddle1547" class="indexterm"></a><a id="iddle1687" class="indexterm"></a><a id="iddle1818" class="indexterm"></a><a id="iddle1822" class="indexterm"></a><a id="iddle2231" class="indexterm"></a><a id="iddle2249" class="indexterm"></a><a id="iddle2255" class="indexterm"></a>The <code class="literal">generateShip</code> method creates an array with random locations
  for one ship without worrying about overlap with other ships on the board. We’ll go
  through this method in a couple of steps. The first step is to randomly pick a
  direction for the ship: will it be horizontal or vertical? We’re going to determine
  this with a random number. If the number is 1, then the ship is horizontal; if it’s
  0, then the ship is vertical. We’ll use our friends the <code class="literal">Math.random</code> and <code class="literal">Math.floor</code> methods to do this
  as we’ve done before:</p><div class="informalfigure"><a id="med_id00633a"></a><div class="mediaobject"><a id="med_id00633"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113564.png.jpg" alt="image with no caption" width="883" height="985"></div></div></div><div class="sect1" title="Generate the starting location for the new ship"><div class="titlepage"><div><div><h1 class="title"><a id="generate_the_starting_location_for_the_n"></a>Generate the starting
           location for the new ship</h1></div></div></div><p><a id="iddle1183" class="indexterm"></a>Now that you know how the ship is oriented, you can generate
  the locations for the ship. First, we’ll generate the starting location (the first
  position for the ship) and then the rest of the locations will just be the next two
  columns (if the ship is horizontal) or the next two rows (if it’s vertical).</p><p>To
  do this we need to generate two random numbers—a row and a column—for the starting
  location of the ship. The numbers both have to be between 0 and 6, so the ship will
  fit on the game board. But remember, if the ship is going to be placed <span class="emphasis"><em>horizontally</em></span>, then the starting <span class="emphasis"><em>column</em></span> must be between 0 and 4, so that we have
  room for the rest of the ship:</p><div class="informalfigure"><a id="med_id00634a"></a><div class="mediaobject"><a id="med_id00634"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113566.png.jpg" alt="image with no caption" width="660" height="312"></div></div><p>And, likewise, if the ship is
  going to be placed <span class="emphasis"><em>vertically</em></span>, then the
  starting <span class="emphasis"><em>row</em></span> must be between 0 and 4, so that
  we have room for the rest of the ship:</p><div class="informalfigure"><a id="med_id00635a"></a><div class="mediaobject"><a id="med_id00635"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113568.png.jpg" alt="image with no caption" width="653" height="190"></div></div></div><div class="sect1" title="Completing the generateShip method"><div class="titlepage"><div><div><h1 class="title"><a id="completing_the_generateship_method"></a>Completing the
           generateShip method</h1></div></div></div><p><a id="iddle1063" class="indexterm"></a><a id="iddle1548" class="indexterm"></a><a id="iddle1688" class="indexterm"></a><a id="iddle1911" class="indexterm"></a><a id="iddle1914" class="indexterm"></a><a id="iddle2232" class="indexterm"></a>Plugging that code
  in, now all we have to do is make sure we add the starting location along with the
  next two locations to the <code class="literal">newShipLocations</code>
  array.</p><div class="informalfigure"><a id="med_id00636a"></a><div class="mediaobject"><a id="med_id00636"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113570.png.jpg" alt="image with no caption" width="658" height="667"></div></div><div class="sect2" title="Avoiding a collision!"><div class="titlepage"><div><div><h2 class="title"><a id="avoiding_a_collisionexclamation_mark"></a>Avoiding a
              collision!</h2></div></div></div><p><a id="iddle1343" class="indexterm"></a><a id="iddle2069" class="indexterm"></a><a id="iddle2241" class="indexterm"></a>The <code class="literal">collision</code> method takes a
     ship and checks to see if any of the locations overlap—or collide—with any of the
     existing ships already on the board.</p><div class="note" title="Note"><h3 class="title"><a id="ch08note12"></a>Note</h3><p>Look back at <a class="xref" href="ch08.html#how_to_place_ships" title="How to place ships">How to place
           ships</a> to see where we call the collision method.</p></div><p>We’ve
     implemented this using two nested for loops. The outer loop iterates over all the
     ships in the model (in the <code class="literal">model.ships</code> property). The
     inner loop iterates over all the new ship’s locations in the <code class="literal">locations</code> array, and checks to see if any of those locations is already
     taken by an existing ship on the board.</p><div class="informalfigure"><a id="med_id00637a"></a><div class="mediaobject"><a id="med_id00637"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113572.png.jpg" alt="image with no caption" width="756" height="481"></div></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch08note13"></a>Brain Power</h3><p>In
        this code, we have two loops: an outer loop to iterate over all the ships in
        the model, and an inner loop to iterate over each of the locations we’re
        checking for a collision. For the outer loop, we used the loop variable i, and
        for the inner loop, we used the loop variable j. Why did we use two different
        loop variable names?</p></div></div><div class="sect2" title="Two final changes"><div class="titlepage"><div><div><h2 class="title"><a id="two_final_changes"></a>Two final
        changes</h2></div></div></div><p><a id="iddle1144" class="indexterm"></a><a id="iddle1809" class="indexterm"></a><a id="iddle1912" class="indexterm"></a><a id="iddle2089" class="indexterm"></a>We’ve written all the code we need to
     generate random locations for the ships; now all we have to do is integrate it.
     Make these two final changes to your code, and then take your new Battleship game
     for a test drive!</p><div class="informalfigure"><a id="med_id00638a"></a><div class="mediaobject"><a id="med_id00638"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113574.png.jpg" alt="image with no caption" width="783" height="790"></div></div><div class="sidebar"><a id="final_test_drive"></a><p class="title">A <span class="underline">Final</span> Test Drive</p><div class="informalfigure"><a id="med_id00639a"></a><div class="mediaobject"><a id="med_id00639"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p><a id="iddle1182" class="indexterm"></a><a id="iddle1184" class="indexterm"></a><a id="iddle1369" class="indexterm"></a><a id="iddle2741" class="indexterm"></a>This is the FINAL test drive of the real game, with random ship locations.
        Make sure you’ve got all the code added to “battleship.js”, reload
        “battleship.html” in your browser, and play the game! Give it a good run
        through. Play it a few times, reloading the page each time to generate new ship
        locations for each new game.</p><div class="informalfigure"><a id="med_id00640a"></a><div class="mediaobject"><a id="med_id00640"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113576.png.jpg" alt="image with no caption" width="456" height="354"></div></div><div class="note" title="Oh, and how to cheat!"><h3 class="title"><a id="ch08note14"></a>Oh, and
           how to cheat!</h3><p>To cheat, open up the developer console, and type <code class="literal">model.ships</code>. Press return and you should see the
           three ship objects containing the locations and hits arrays. Now you have
           the inside scoop on where the ships are sitting in the game board. But, you
           didn’t hear this from us!</p><div class="informalfigure"><a id="med_id00641a"></a><div class="mediaobject"><a id="med_id00641"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113578.png.jpg" alt="image with no caption" width="240" height="321"></div></div><div class="informalfigure"><a id="med_id00642a"></a><div class="mediaobject"><a id="med_id00642"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113580.png.jpg" alt="image with no caption" width="495" height="255"></div></div></div></div></div><div class="sect2" title="Congrats, It’s Startup Time!"><div class="titlepage"><div><div><h2 class="title"><a id="congratscomma_itapostrophes_startup_time"></a>Congrats, It’s
              Startup Time!</h2></div></div></div><p>You’ve just built a great web
     application, all in 150 (or so) lines of code and some HTML &amp; CSS. Like we
     said, the code is yours. Now all that’s standing between you and your venture
     capital is a real business plan. But then again, who ever let that stand in their
     way!?</p><div class="informalfigure"><a id="med_id00643a"></a><div class="mediaobject"><a id="med_id00643"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113582.png.jpg" alt="image with no caption" width="312" height="641"></div></div><p>So now, after all the hard
     work, you can relax and play a few rounds of Battleship. Pretty darn engaging,
     right?</p><p>Oh, but we’re just getting started. With a little more JavaScript
     horse power we’re going to be able to take on apps that rival those written in
     native code.</p><p>For now, we’ve been through a lot of code in this chapter. Get
     some good food and plenty of rest to let it all sink in. But before you do that,
     you’ve got some bullet points to review and a crossword puzzle to do. Don’t skip
     them; repetition is what really drives the learning home!</p><div class="informalfigure"><a id="med_id00644a"></a><div class="mediaobject"><a id="med_id00644"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113584.png.jpg" alt="image with no caption" width="540" height="911"></div></div><div class="sidebar"><a id="bullet_points-id00127"></a><p class="title">Bullet Points</p><div class="itemizedlist"><ul class="itemizedlist">
           <li class="listitem"><p><a id="iddle1520" class="indexterm"></a><a id="iddle2230" class="indexterm"></a>We use HTML to build the
                 structure of the Battleship game, CSS to style it, and JavaScript to
                 create the behavior.</p></li>
           <li class="listitem"><p>The id of each &lt;td&gt; element in the table is
                 used to update the image of the element to indicate a HIT or a
                 MISS.</p></li>
           <li class="listitem"><p>The form uses an input with type “button”. We attach
                 an <span class="strong"><strong>event handler</strong></span> to the
                 button so we can know in the code when a player has entered a
                 guess.</p></li>
           <li class="listitem"><p>To get a value from a form input text element, use
                 the element’s <span class="strong"><strong>value</strong></span>
                 property.</p></li>
           <li class="listitem"><p>CSS positioning can be used to position elements
                 precisely in a web page.</p></li>
           <li class="listitem"><p>We organized the code using three objects: a <span class="strong"><strong>model</strong></span>, a <span class="strong"><strong>view</strong></span>, and a <span class="strong"><strong>controller</strong></span>.</p></li>
           <li class="listitem"><p>Each object in the game has one <span class="strong"><strong>primary responsibility</strong></span>.</p></li>
           <li class="listitem"><p>The responsibility of the model is to store the
                 state of the game and implement logic that modifies that
              state.</p></li>
           <li class="listitem"><p>The responsibility of the view is to update the
                 display when the state in the model changes.</p></li>
           <li class="listitem"><p>The responsibility of the controller is to glue the
                 game together, to make sure the player’s guess is sent to the model to
                 update the state, and to check to see when the game is
              complete.</p></li>
           <li class="listitem"><p>By designing the game with objects that each have a
                    <span class="strong"><strong>separate
                    responsibility</strong></span>, we can build and test each part of
                 the game independently.</p></li>
           <li class="listitem"><p>To make it easier to create and test the model, we
                 initially hardcoded the locations of the ships. After ensuring the
                 model was working, we replaced these hardcoded locations with random
                 locations generated by code.</p></li>
           <li class="listitem"><p>We used properties in the model, like numShips and
                 shipLength, so we don’t hardcode values in the methods that we might
                 want to change later.</p></li>
           <li class="listitem"><p>Arrays have an <span class="strong"><strong>indexOf</strong></span> method that is similar to the
                 string indexOf method. The array indexOf method takes a value, and
                 returns the index of that value if it exists in the array, or -1 if it
                 does not.</p></li>
           <li class="listitem"><p>With <span class="strong"><strong>chaining</strong></span>, you can string together object
                 references (using the dot operator), thus combining statements and
                 eliminating temporary variables.</p></li>
           <li class="listitem"><p>The <span class="strong"><strong>do
                    while</strong></span> loop is similar to the while loop, except
                 that the condition is checked after the statements in the body of the
                 loop have executed once.</p></li>
           <li class="listitem"><p><span class="strong"><strong>Quality
                       assurance</strong></span> (QA) is an important part of
                 developing your code. QA requires testing not just valid input, but
                 invalid input as well.</p></li>
        </ul></div></div><p><span class="strong"><strong>JavaScript
        cross</strong></span></p><p>Your brain is frying from the coding challenges in
     this chapter. Do the crossword to get that final sizzle.</p><div class="informalfigure"><a id="med_id00645a"></a><div class="mediaobject"><a id="med_id00645"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113586.png" alt="image with no caption" width="689" height="552"></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
        <colgroup>
           <col>
           <col>
        </colgroup>
        <thead>
           <tr>
              <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Across</p></th>
              <th style="border-bottom: 0.5pt solid ; " valign="top"><p>Down</p></th>
           </tr>
        </thead>
        <tbody>
           <tr>
              <td style="border-right: 0.5pt solid ; " valign="top"><p>2. We use the
                    __________ method to set the class of an element.</p>
                 <p>4. To add a ship or miss image to the board, we place the image in
                    the ________ of a &lt;td&gt; element.</p>
                 <p>6. The __________ loop executes the statements in its body at least
                    once.</p>
                 <p>8. Modern, interactive web apps use HTML, CSS and _________.</p>
                 <p>10. We represent each ship in the game with an __________.</p>
                 <p>11. The id of a &lt;td&gt; element corresponds to a _____ on the
                    game board.</p>
                 <p>12. The responsibility of the collision function is to make sure
                    that ships don’t _________.</p>
                 <p>15. We call the _______ method to ask the model to update the state
                    with the guess.</p>
                 <p>17. Who is responsible for state?</p>
                 <p>18. You can cheat and get the answers to Battleship using the
                    _______.</p></td>
              <td style="" valign="top"><p>1. To get the guess from the form input, we
                    added an event ________ for the click event.</p>
                 <p>3. Chaining is for _________ references, not just jailbirds.</p>
                 <p>5. The __________ is good at gluing things together.</p>
                 <p>7. To add a “hit” to the game board in the display, we add the ____
                    class to the corresonding &lt;td&gt; element.</p>
                 <p>9. Arrays have an _________ method too.</p>
                 <p>13. The three objects in our game design are the model, _____, and
                    controller.</p>
                 <p>14. 13 is the keycode for the _______ key.</p>
                 <p>16. The __________ notifies the view when its state
                 changes.</p></td>
           </tr>
        </tbody>
     </table></div><div class="sidebar"><a id="practice_drills_solution"></a><p class="title">Practice Drills Solution</p><div class="informalfigure"><a id="med_id00646a"></a><div class="mediaobject"><a id="med_id00646"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113430.png.jpg" alt="image with no caption" width="57" height="196"></div></div><p><a id="iddle1159" class="indexterm"></a><a id="iddle1295" class="indexterm"></a><a id="iddle2020" class="indexterm"></a><a id="iddle2033" class="indexterm"></a><a id="iddle2286" class="indexterm"></a>In just a few pages, you’re
        going to learn how to add the MISS and ship images to the game board with
        JavaScript. But before we get to the real thing, you need to practice in the
        HTML simulator. We’ve got two CSS classes set up and ready for you to practice
        with. Go ahead and add these two rules to your CSS, and then imagine you’ve got
        ships hidden at the following locations:</p><p>Ship 1: A6, B6, C6</p><p>Ship 2:
        C4, D4, E4</p><p>Ship 3: B0, B1, B2</p><p>and that the player has entered the
        following guesses:</p><p>A0, D4, F5, B2, C5, C6</p><div class="informalfigure"><a id="med_id00647a"></a><div class="mediaobject"><a id="med_id00647"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113588.png.jpg" alt="image with no caption" width="207" height="245"></div></div><p>You need to add one of the
        two classes below to the correct cells in the grid (the correct &lt;td&gt;
        elements in the table) so that your grid shows MISS and a ship in the right
        places.</p><a id="pro_id00096"></a><pre class="programlisting"><span class="strong"><strong>.hit {</strong></span>
<span class="strong"><strong>background: url("ship.png") no-repeat center center;</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>.miss {</strong></span>
<span class="strong"><strong>background: url("miss.png") no-repeat center center;</strong></span>
<span class="strong"><strong>}</strong></span></pre><p>Here’s
        our solution. The right spots for the .hit class are in &lt;td&gt;s with the
        ids: “34”, “12”, and “26”, and the ids for the .miss class are “00”, “25”, and
        “55”. To add a class to an element, you use the class attribute, like
        this:</p><a id="pro_id00097"></a><pre class="programlisting"><span class="strong"><strong>&lt;td class="miss" id="55"&gt;</strong></span></pre><div class="informalfigure"><a id="med_id00648a"></a><div class="mediaobject"><a id="med_id00648"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113590.png.jpg" alt="image with no caption" width="616" height="354"></div></div></div><div class="sidebar"><a id="exercise_solution-id00128"></a><p class="title">Exercise Solution</p><p><a id="iddle1161" class="indexterm"></a><a id="iddle1456" class="indexterm"></a><a id="iddle2262" class="indexterm"></a>It’s time for some object
        design. We’re going to start with the view object. Now, remember, the view
        object is responsible for updating the view. Take a look at the view below and
        see if you can determine the methods we want the view object to implement.
        Write the declarations for these methods below (just the declarations; we’ll
        code the bodies of the methods in a bit) along with a comment or two about what
        each does. Here’s our solution:</p><div class="informalfigure"><a id="med_id00649a"></a><div class="mediaobject"><a id="med_id00649"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113592.png.jpg" alt="image with no caption" width="761" height="775"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00129"></a><p class="title">Sharpen your
        pencil Solution</p><p><a id="iddle1180" class="indexterm"></a><a id="iddle2302" class="indexterm"></a><span class="strong"><strong>Given how we’ve described
              the new game board above, how would you represent the ships in the model
              (just the locations, we’ll worry about hits later). Check off the best
              solution below.</strong></span></p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
           <colgroup>
              <col>
              <col>
           </colgroup>
           <tbody>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00070"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use nine
                       variables for the ship locations, similar to the way we handled
                       the ships in <a class="xref" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Going further">Chapter&nbsp;2</a>.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00071"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an array
                       with an item for each cell in entire board (49 items total).
                       Record the ship number in each cell that holds part of a
                       ship.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00072"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an array
                       to hold all nine locations. Items 0-2 will hold the first ship,
                       3-5 the second, and so on.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00073"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use three
                       different arrays, one for each ship, with three locations
                       contained in each.</p></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00074"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113594.png.jpg" alt="" width="27" height="25"></span></p></td>
                 <td style="border-bottom: 0.5pt solid ; " valign="top"><p>Use an
                       object named ship with three location properties. Put all the
                       ships in an array named ships.</p>
                    <div class="note" title="Note"><h3 class="title"><a id="ch08note15"></a>Note</h3><p>Any of these solutions could work! (In fact
                          we tried each one when we were figuring out the best way to
                          do it.) This is the one we use in the chapter.</p></div></td>
              </tr>
              <tr>
                 <td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00075"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td>
                 <td style="" valign="top"><p>______________________________________</p>
                    <p>______________________________________</p>
                    <p>______________________________________</p>
                    <div class="note" title="Note"><h3 class="title"><a id="ch08note16"></a>Note</h3><p>Or write in your own answer.</p></div></td>
              </tr>
           </tbody>
        </table></div></div><div class="sidebar"><a id="javascript_cross_solution-id00130"></a><p class="title">JavaScript cross
        solution</p><div class="informalfigure"><a id="med_id00650a"></a><div class="mediaobject"><a id="med_id00650"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113596.png" alt="image with no caption" width="623" height="500"></div></div></div><div class="sidebar"><a id="ship_magnets_solution"></a><p class="title">Ship Magnets Solution</p><div class="informalfigure"><a id="med_id00651a"></a><div class="mediaobject"><a id="med_id00651"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112316.png.jpg" alt="image with no caption" width="124" height="184"></div></div><p><a id="iddle1178" class="indexterm"></a><a id="iddle2300" class="indexterm"></a>Use the
        following player moves, along with the data structure for the ships, to place
        the ship and miss magnets onto the game board. Does the player sink all the
        ships? We’ve done the first move for you.</p><p>Here are the moves:</p><p>A6,
        B3, C4, D1, B0, D4, F0, A1, C6, B1, B2, E4, B6</p><div class="note" title="Note"><h3 class="title"><a id="ch08note15a"></a>Note</h3><p>Execute
           these moves on the game board.</p></div><p>And here’s our solution:</p><div class="informalfigure"><a id="med_id00652a"></a><div class="mediaobject"><a id="med_id00652"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113598.png.jpg" alt="image with no caption" width="754" height="683"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00131"></a><p class="title">Sharpen your
        pencil Solution</p><p>Let’s practice using the ships data structure to simulate
        some ship activities. Using the ships definition below, work through the
        questions and the code below and fill in the blanks. Make sure you check your
        answers before moving on, as this is an important part of how the game works:
        The player guesses “D4”, does that hit a ship?______ If so, which one?
        __________</p><a id="pro_id00098"></a><pre class="programlisting"><span class="strong"><strong>var ships = [{ locations: ["31", "41", "51"], hits: ["", "", ""] },</strong></span>
<span class="strong"><strong>{ locations: ["14", "24", "34"], hits: ["", "hit", ""] },</strong></span>
<span class="strong"><strong>{ locations: ["00", "01", "02"], hits: ["hit", "", ""] }];</strong></span></pre><p>Which
        ships are already hit? <span class="underline">Ships 2 and 3</span> And at what
        locations? <span class="underline">C4, AO</span></p><p>The player guesses “D4”,
        does that hit a ship? <span class="underline">Yes</span> If so, which one?
           <span class="underline">Ship 2</span></p><p>The player guesses “B3”, does
        that hit a ship? <span class="underline">no</span> If so, which one?
        __________</p><p>Finish this code to access the second ship’s middle location
        and print its value with console.log.</p><div class="informalfigure"><a id="med_id00653a"></a><div class="mediaobject"><a id="med_id00653"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113600.png.jpg" alt="image with no caption" width="405" height="67"></div></div><p>Finish this code to see if
        the third ship has a hit in its first location:</p><div class="informalfigure"><a id="med_id00654a"></a><div class="mediaobject"><a id="med_id00654"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113602.png.jpg" alt="image with no caption" width="511" height="116"></div></div><p>Finish this code to hit the
        first ship at the third location:</p><div class="informalfigure"><a id="med_id00655a"></a><div class="mediaobject"><a id="med_id00655"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113604.png.jpg" alt="image with no caption" width="220" height="68"></div></div></div><div class="sidebar"><a id="code_magnets_solution-id00132"></a><p class="title">Code Magnets
        Solution</p><div class="informalfigure"><a id="med_id00656a"></a><div class="mediaobject"><a id="med_id00656"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112316.png.jpg" alt="image with no caption" width="124" height="184"></div></div><p><a id="iddle1164" class="indexterm"></a><a id="iddle2748" class="indexterm"></a>An algorithm
        to generate ships is all scrambled up on the fridge. Can you put the magnets
        back in the right places to produce a working algorithm? Here’s our
        solution.</p><div class="informalfigure"><a id="med_id00657a"></a><div class="mediaobject"><a id="med_id00657"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113606.png.jpg" alt="image with no caption" width="331" height="385"></div></div></div></div></div></div>
</div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781449340124/files/core.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content" class="noOutline" tabindex="-1"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><div class="chapter" title="Chapter&nbsp;6.&nbsp;Getting to know the DOM"><div class="titlepage"><div><div><h1 class="title"><a id="interacting_with_your_web_page_getting_t"></a>Chapter&nbsp;6.&nbsp;Getting to know the DOM</h1></div><div><h3 class="subtitle">Interacting with Your Web Page</h3></div></div></div><div class="informalfigure"><a id="med_id00396a"></a><div class="mediaobject"><a id="med_id00396"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113104.png.jpg" alt="image with no caption" width="556" height="488"></div></div><p><span class="strong"><strong>You’ve come a long way with JavaScript.</strong></span> In fact you’ve evolved from a newbie to a scripter to, well, a <span class="strong"><strong>programmer</strong></span>. But, there’s something missing. To really begin leveraging your JavaScript skills you need to know how to interact with the web page your code lives in. Only by doing that are you going to be able to write pages that are <span class="strong"><strong>dynamic</strong></span>, pages that react, that respond, that update themselves after they’ve been loaded. So how do you interact with the page? By using the <span class="strong"><strong>DOM</strong></span>, otherwise known as the <span class="strong"><strong>document object model</strong></span>. In this chapter we’re going to break down the DOM and see just how we can use it, along with JavaScript, to teach your page a few new tricks.</p><div class="sect1" title="In our last chapter, we left you with a little challenge. The “crack the code challenge.”"><div class="titlepage"><div><div><h1 class="title"><a id="in_our_last_chaptercomma_we_left_you_wit"></a>In our last chapter, we left you with a little challenge. The “crack the code challenge.”</h1></div></div></div><div class="informalfigure"><a id="med_id00397a"></a><div class="mediaobject"><a id="med_id00397"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113106.png.jpg" alt="image with no caption" width="214" height="293"></div></div><p><a id="iddle1467" class="indexterm"></a><a id="iddle1516" class="indexterm"></a><a id="iddle1919" class="indexterm"></a><a id="iddle2046" class="indexterm"></a>You were given some HTML with code in an external file, captured from Dr. Evel’s web site, that looked like this:</p><div class="informalfigure"><a id="med_id00398a"></a><div class="mediaobject"><a id="med_id00398"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113108.png.jpg" alt="image with no caption" width="811" height="716"></div></div><p>And you needed to figure out Dr. Evel’s passcode using your deductive powers on this code.</p></div><div class="sect1" title="So what does the code do?"><div class="titlepage"><div><div><h1 class="title"><a id="so_what_does_the_code_doquestion_mark"></a>So what does the code do?</h1></div></div></div><p><a id="iddle1469" class="indexterm"></a><a id="iddle1526" class="indexterm"></a><a id="iddle1921" class="indexterm"></a><a id="iddle2484" class="indexterm"></a>Let’s walk through this code to see how Dr Evel is generating his passcodes. After we break down each step you’ll start to see how this all works:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>First, the code sets the variable <code class="literal">access</code> to the result of calling the <code class="literal">document</code> object’s <code class="literal">getElementById</code> method and passing it “code9”. What gets returned is an element object.</p><div class="note" title="Note"><h3 class="title"><a id="ch06note01"></a>Note</h3><p>We’ll learn all about document and element objects in this chapter.</p></div><div class="informalfigure"><a id="med_id00399a"></a><div class="mediaobject"><a id="med_id00399"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113110.png.jpg" alt="image with no caption" width="712" height="397"></div></div></li><li class="listitem"><p>Next we take that element (that is, the element with the id “code9”) and we use its <code class="literal">innerHTML</code> property to get its content, which we assign to the variable <code class="literal">code</code>.</p></li><li class="listitem"><p>Dr. Evel’s code adds the string “midnight” to the end of string contained in <code class="literal">code</code>, which is “My watch stopped at”. Then, the page creates an alert with the passcode contained in the variable <code class="literal">code</code>.</p><div class="informalfigure"><a id="med_id00400a"></a><div class="mediaobject"><a id="med_id00400"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113112.png.jpg" alt="image with no caption" width="746" height="244"></div></div></li></ol></div><div class="sect2" title="A quick recap"><div class="titlepage"><div><div><h2 class="title"><a id="quick_recap"></a>A quick recap</h2></div></div></div><p>So, what did we just do? Well, we had some JavaScript that reached into the page (otherwise known as the <span class="emphasis"><em>document</em></span>), grabbed an element (the one with the id equal to <code class="literal">"code9"</code>), took that element’s content (which is <code class="literal">"My watch stopped at"</code>), slapped a <code class="literal">" midnight"</code> on the end, and then displayed the result as a passcode.</p><div class="informalfigure"><a id="med_id00401a"></a><div class="mediaobject"><a id="med_id00401"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113114.png.jpg" alt="image with no caption" width="803" height="593"></div></div><p>Now, more power to Dr. Evel and his JavaScript skills, and we wish him the best in his security schemes, but what is important here is to notice that the web page is a living, breathing <span class="emphasis"><em>data structure</em></span> that your JavaScript can interact with—you can access and read the content of the elements in your page. You can also go the other way, and use JavaScript to change the content or structure of your page. To do all that, let’s step back for a moment and understand better how JavaScript and HTML work together.</p></div></div><div class="sect1" title="How JavaScript really interacts with your page"><div class="titlepage"><div><div><h1 class="title"><a id="how_javascript_really_interacts_with_you"></a>How JavaScript <span class="underline">really</span> interacts with your page</h1></div></div></div><p><a id="iddle1504" class="indexterm"></a><a id="iddle2044" class="indexterm"></a><a id="iddle2145" class="indexterm"></a><a id="iddle3074" class="indexterm"></a>JavaScript and HTML are <span class="emphasis"><em>two different things</em></span>. HTML is markup and JavaScript is code. So how do they interact? It all happens through a representation of your page, called the <span class="emphasis"><em>document object model</em></span>, or the DOM for short. Where does the DOM come from? It’s created when the browser loads your page. Here’s how:</p><div class="informalfigure"><a id="med_id00402a"></a><div class="mediaobject"><a id="med_id00402"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113116.png.jpg" alt="image with no caption" width="795" height="639"></div></div></div><div class="sect1" title="How to bake your very own DOM"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_bake_your_very_own_dom"></a>How to bake your very own DOM</h1></div></div></div><p><a id="iddle1493" class="indexterm"></a>Let’s take some markup and create a DOM for it. Here’s a simple recipe for doing that:</p><div class="informalfigure"><a id="med_id00403a"></a><div class="mediaobject"><a id="med_id00403"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113118.png.jpg" alt="image with no caption" width="867" height="526"></div></div><p><span class="strong"><strong>Instructions</strong></span></p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Start by creating a document node at the top.</p><div class="informalfigure"><a id="med_id00404a"></a><div class="mediaobject"><a id="med_id00404"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113120.png.jpg" alt="image with no caption" width="130" height="46"></div></div></li><li class="listitem"><p>Next, take the top level element of your HTML page, in our case the &lt;html&gt; element, call it the current element and add it as a child of the document.</p><div class="informalfigure"><a id="med_id00405a"></a><div class="mediaobject"><a id="med_id00405"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113122.png.jpg" alt="image with no caption" width="130" height="96"></div></div></li><li class="listitem"><p>For each element nested in the current element, add that element as a child of the current element in the DOM.</p><div class="informalfigure"><a id="med_id00406a"></a><div class="mediaobject"><a id="med_id00406"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113124.png.jpg" alt="image with no caption" width="441" height="151"></div></div></li><li class="listitem"><p>Return to (3) for each element you just added, and repeat until you are out of elements.</p><div class="informalfigure"><a id="med_id00407a"></a><div class="mediaobject"><a id="med_id00407"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113126.png.jpg" alt="image with no caption" width="181" height="402"></div></div></li></ol></div></div><div class="sect1" title="A first taste of the DOM"><div class="titlepage"><div><div><h1 class="title"><a id="first_taste_of_the_dom"></a>A first taste of the DOM</h1></div></div></div><p><a id="iddle1482" class="indexterm"></a><a id="iddle1495" class="indexterm"></a><a id="iddle1497" class="indexterm"></a><a id="iddle2479" class="indexterm"></a><a id="iddle2882" class="indexterm"></a>If you follow the recipe for creating a DOM you’ll end up with a structure like the one below. Every DOM has a document object at the top and then a tree complete with branches and leaf nodes for each element in the HTML markup. Let’s take a closer look.</p><div class="informalfigure"><a id="med_id00408a"></a><div class="mediaobject"><a id="med_id00408"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113128.png.jpg" alt="image with no caption" width="795" height="633"></div></div><div class="informalfigure"><a id="med_id00409a"></a><div class="mediaobject"><a id="med_id00409"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113130.png.jpg" alt="image with no caption" width="436" height="260"></div></div><div class="sidebar"><a id="be_the_browser-id00080"></a><p class="title">BE the Browser</p><div class="informalfigure"><a id="med_id00410a"></a><div class="mediaobject"><a id="med_id00410"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><a id="iddle1255" class="indexterm"></a><a id="iddle1506" class="indexterm"></a><a id="iddle2038" class="indexterm"></a><span class="strong"><strong>Your job is to act like you’re the browser. You need to parse the HTML and build your very own DOM from it. Go ahead and parse the HTML to the right, and draw your DOM below. We’ve already started it for you.</strong></span></p><div class="note" title="Note"><h3 class="title"><a id="ch06note02"></a>Note</h3><p>Check your answer with our solution at the end of the chapter before you go on.</p></div><div class="informalfigure"><a id="med_id00411a"></a><div class="mediaobject"><a id="med_id00411"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113132.png.jpg" alt="image with no caption" width="623" height="441"></div></div><div class="informalfigure"><a id="med_id00412a"></a><div class="mediaobject"><a id="med_id00412"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113134.png.jpg" alt="image with no caption" width="493" height="595"></div></div></div><div class="informalfigure"><a id="med_id00413a"></a><div class="mediaobject"><a id="med_id00413"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113136.png.jpg" alt="image with no caption" width="332" height="546"></div></div><p><a id="iddle1468" class="indexterm"></a><a id="iddle1920" class="indexterm"></a><a id="iddle2137" class="indexterm"></a><a id="iddle2146" class="indexterm"></a><span class="strong"><strong>Or, how two totally different technologies hooked up.</strong></span></p><p>HTML and JavaScript are from different planets for sure. The proof? HTML’s DNA is made of declarative markup that allows you to describe a set of nested elements that make up your pages. JavaScript, on the other hand, is made of pure algorithmic genetic material, meant for describing computations.</p><p>Are they so far apart they can’t even communicate? Of course not, because they have something in common: the DOM. Through the DOM, JavaScript can communicate with your page, and vice versa. There are a few ways to make this happen, but for now let’s concentrate on one—it’s a little wormhole of sorts that allows JavaScript to get access to any element in your page. That wormhole is <span class="emphasis"><em>getElementById</em></span>.</p><p><a id="iddle1476" class="indexterm"></a><a id="iddle1530" class="indexterm"></a><a id="iddle1928" class="indexterm"></a><a id="iddle2048" class="indexterm"></a><a id="iddle2478" class="indexterm"></a><span class="strong"><strong>Let’s start with a DOM.</strong></span> Here’s a simple DOM; it’s got a few HTML paragraphs, each with an id identifying it as the green, red or blue planet. Each paragraph has some text as well. Of course there’s a &lt;head&gt; element too, but we’ve left the details out to keep things simpler.</p><div class="informalfigure"><a id="med_id00414a"></a><div class="mediaobject"><a id="med_id00414"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113138.png.jpg" alt="image with no caption" width="494" height="231"></div></div><p><span class="strong"><strong>Now let’s use JavaScript to make things more interesting.</strong></span> Let’s say we want to change the greenplanet’s text from “All is well” to “Red Alert: hit by phaser fire!” Down the road you might want to do something like this based on a user’s actions, or even based on data from a web service. We’ll get to all that; for now let’s just get the greenplanet’s text updated. To do that we need the element with the id “greenplanet”. Here’s some code that does that:</p><div class="informalfigure"><a id="med_id00415a"></a><div class="mediaobject"><a id="med_id00415"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113140.png.jpg" alt="image with no caption" width="779" height="347"></div></div><p><a id="iddle2097" class="indexterm"></a><span class="strong"><strong>Once getElementById gives you an element, you’re ready do something with it</strong></span> (like change its text to “Red Alert: hit by phaser fire!”). To do that, we typically assign the element to a variable so we can refer to the element thoughout our code. Let’s do that and then change the text:</p><div class="informalfigure"><a id="med_id00416a"></a><div class="mediaobject"><a id="med_id00416"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113142.png.jpg" alt="image with no caption" width="691" height="791"></div></div></div><div class="sect1" title="Getting an element with getElementById"><div class="titlepage"><div><div><h1 class="title"><a id="getting_an_element_with_getelementbyid"></a>Getting an element with getElementById</h1></div></div></div><p><a id="iddle1465" class="indexterm"></a><a id="iddle1470" class="indexterm"></a><a id="iddle1531" class="indexterm"></a><a id="iddle1922" class="indexterm"></a><a id="iddle2477" class="indexterm"></a>So, what did we just do? Let’s step through it in a little more detail. We’re using the <code class="literal">document</code> object to get access to the DOM from our code. The <code class="literal">document</code> object is a built-in object that comes with a bunch of properties and methods, including <code class="literal">getElementById</code>, which we can use to grab an element from the DOM. The <code class="literal">getElementById</code> method takes an id and returns the element that has that id. Now in the past you’ve probably used ids to select and style elements with CSS. But here, what we’re doing is using an id to grab an element—the <code class="literal">&lt;p&gt;</code> element with the id “greenplanet”—from the DOM.</p><p>Once we have the right element, we can modify it. We’ll get to that in just a moment; for now, let’s focus on how <code class="literal">getElementById</code> works by tracing through these steps:</p><div class="informalfigure"><a id="med_id00417a"></a><div class="mediaobject"><a id="med_id00417"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113144.png.jpg" alt="image with no caption" width="815" height="703"></div></div></div><div class="sect1" title="What, exactly, am I getting from the DOM?"><div class="titlepage"><div><div><h1 class="title"><a id="whatcomma_exactlycomma_am_i_getting_from"></a>What, exactly, am I getting from the DOM?</h1></div></div></div><p><a id="iddle1498" class="indexterm"></a><a id="iddle1536" class="indexterm"></a><a id="iddle2098" class="indexterm"></a>When you grab an element from the DOM using <code class="literal">getElementById</code>, what you get is an <span class="emphasis"><em>element object</em></span>, which you can use to read, change or replace the element’s content and attributes. And here’s the magic: when you change an element, <span class="emphasis"><em>you change what is displayed in your page as well</em></span>.</p><p>But, first things first. Let’s take another look at the element object we just grabbed from the DOM. We know that this element object represents the <code class="literal">&lt;p&gt;</code> element in our page that has the id “greenplanet” and that the text content in the element is “All is well”. Just like other kinds of JavaScript objects, an element object has properties and methods. In the case of an element object, we can use these properties and methods to read and change the element. Here are a few things you can do with element objects:</p><div class="informalfigure"><a id="med_id00418a"></a><div class="mediaobject"><a id="med_id00418"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113146.png.jpg" alt="image with no caption" width="751" height="227"></div></div><p>What we want to do with our <code class="literal">&lt;p&gt;</code> element—which, remember, is the <code class="literal">&lt;p&gt;</code> element with the id “greenplanet”—is change the content “All is well” to “Red Alert: hit by phaser fire!”. We’ve got the element object stashed in the <code class="literal">planet</code> variable in our code; let’s use that to modify one of its properties, <code class="literal">innerHTML</code>:</p><div class="informalfigure"><a id="med_id00419a"></a><div class="mediaobject"><a id="med_id00419"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113148.png.jpg" alt="image with no caption" width="630" height="222"></div></div></div><div class="sect1" title="Finding your inner HTML"><div class="titlepage"><div><div><h1 class="title"><a id="finding_your_inner_html"></a>Finding your inner HTML</h1></div></div></div><p><a id="iddle2640" class="indexterm"></a>The <code class="literal">innerHTML</code> property is an important property that we can use to read or replace the content of an element. If you look at the value of <code class="literal">innerHTML</code> then you’ll see the content contained <span class="emphasis"><em>within</em></span> the element, not including the HTML element tags. The “withIN” is why it’s called “inner” HTML. Let’s try a little experiment. We’ll try displaying the content of the <code class="literal">planet</code> element object in the console by logging the <code class="literal">innerHTML</code> property. Here’s what we get:</p><div class="informalfigure"><a id="med_id00420a"></a><div class="mediaobject"><a id="med_id00420"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113150.png.jpg" alt="image with no caption" width="729" height="217"></div></div><p>Now let’s try changing the value of the <code class="literal">innerHTML</code> property. When we do this, we’re changing the content of the “greenplanet” <code class="literal">&lt;p&gt;</code> element in the page, so you’ll see your page change too!</p><div class="informalfigure"><a id="med_id00421a"></a><div class="mediaobject"><a id="med_id00421"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113152.png.jpg" alt="image with no caption" width="756" height="422"></div></div><div class="sidebar"><a id="quick_refresher"></a><p class="title">A Quick Refresher</p><div class="informalfigure"><a id="med_id00422a"></a><div class="mediaobject"><a id="med_id00422"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113154.png.jpg" alt="image with no caption" width="95" height="186"></div></div><p><a id="iddle1296" class="indexterm"></a><a id="iddle1462" class="indexterm"></a><a id="iddle1533" class="indexterm"></a><a id="iddle1537" class="indexterm"></a><a id="iddle1538" class="indexterm"></a><a id="iddle2035" class="indexterm"></a><a id="iddle2049" class="indexterm"></a>Hey, sit down; take a quick break. You might be saying to yourself, “Wait, I remember something about ids and classes but I don’t remember the specifics, and don’t they have something to do with CSS anyway?” No, problem, let’s just have a quick refresher, get some context, and we’ll have you back on your way in no time...</p><p>With HTML, ids give us a way to uniquely identify an element, and, once an element is unique, we can use that to select it with CSS for styling. And, as you’ve seen, we can get an element by its id in JavaScript as well.</p><p>Let’s look at an example:</p><div class="informalfigure"><a id="med_id00423a"></a><div class="mediaobject"><a id="med_id00423"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113156.png.jpg" alt="image with no caption" width="502" height="71"></div></div><p>And once we have that, we can select it with CSS to style it. Like this:</p><div class="informalfigure"><a id="med_id00424a"></a><div class="mediaobject"><a id="med_id00424"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113158.png.jpg" alt="image with no caption" width="616" height="90"></div></div><p>And we can access this element through its id in JavaScript too:</p><a id="pro_id00075"></a><pre class="programlisting"><span class="strong"><strong>var myMenu = document.getElementById("menu");</strong></span></pre><p>Don’t forget, there’s another way to label your elements: with classes. Classes give us a way to label a set of elements, like this:</p><div class="informalfigure"><a id="med_id00425a"></a><div class="mediaobject"><a id="med_id00425"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113160.png.jpg" alt="image with no caption" width="607" height="86"></div></div><p>And we can select elements by classes too, both in CSS and JavaScript. We’ll see how to make use of classes with JavaScript in a bit. And, by the way, if this reminder isn’t quite enough, check out <a class="xref" href="ch07.html" title="Chapter&nbsp;7.&nbsp;Serious types">Chapter&nbsp;7</a> of <span class="emphasis"><em>Head First HTML and CSS,</em></span> or your favorite HTML &amp; CSS reference guide.</p></div></div><div class="sect1" title="What happens when you change the DOM"><div class="titlepage"><div><div><h1 class="title"><a id="what_happens_when_you_change_the_dom"></a>What happens when you change the DOM</h1></div></div></div><p><a id="iddle1490" class="indexterm"></a><a id="iddle2094" class="indexterm"></a>So, what exactly happens when you change the content of an element using <code class="literal">innerHTML</code>? What you’re doing is changing actual content of your web page, on the fly. And when you change the content in the DOM, you’ll see that change immediately in your web page, too.</p><p><span class="strong"><strong>Before...</strong></span></p><div class="informalfigure"><a id="med_id00426a"></a><div class="mediaobject"><a id="med_id00426"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113162.png.jpg" alt="image with no caption" width="765" height="348"></div></div><p><span class="strong"><strong>... and after.</strong></span></p><div class="informalfigure"><a id="med_id00427a"></a><div class="mediaobject"><a id="med_id00427"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113164.png.jpg" alt="image with no caption" width="767" height="383"></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00081"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch06qa1qe1"></a><a id="ch06qa1q1"></a><p>Q:</p></td><td align="left" valign="top"><p><a id="iddle1218" class="indexterm"></a><a id="iddle1473" class="indexterm"></a><a id="iddle1477" class="indexterm"></a><a id="iddle1480" class="indexterm"></a><a id="iddle1502" class="indexterm"></a><a id="iddle1527" class="indexterm"></a><a id="iddle1534" class="indexterm"></a><a id="iddle1925" class="indexterm"></a><a id="iddle1929" class="indexterm"></a><a id="iddle1932" class="indexterm"></a><a id="iddle2093" class="indexterm"></a><a id="iddle2095" class="indexterm"></a><span class="strong"><strong>Q: What happens if I use document. getElementById and pass in an id that doesn’t exist?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch06qa1q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> If you try to get an element from the DOM by id, and that id doesn’t exist in an element, then the call to getElementById returns a null value. Testing for null is a good idea when you use getElementById to ensure that the element is there before you try to access its properties. We’ll talk more about null in the next chapter.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch06qa1qe2"></a><a id="ch06qa1q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Can we use document.getElementById to get elements by class as well—for instance, say I have a bunch of elements in the class “planets”?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch06qa1q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No, but you’re thinking along the right lines. You can only use getElementById with an id. But there is another DOM method named getElementsByClassName that you can use to get elements by class name. With this method, what you get back is a collection of elements that belong to the class (because multiple elements can be in the same class). Another method that returns a collection of elements is getElementsByTagName, which returns all elements that match the tag name you specify. We’ll see getElementsByTagName a little later in the book and see how to handle the collection of elements it returns.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch06qa1qe3"></a><a id="ch06qa1q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: What exactly is an element object anyway?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch06qa1q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Great question. An element object is the browser’s internal representation of what you type into your HTML file, like &lt;p&gt;some text&lt;/p&gt;. When the browser loads and parses your HTML file, it creates an element object for every element in your page, and adds all those element objects to the DOM. So the DOM is really just a big tree of element objects. And, keep in mind that, just like other objects, element objects can have properties, like innerHTML, and methods, too. We’ll explore a few more of the properties and methods of element objects later in the book.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch06qa1qe4"></a><a id="ch06qa1q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: I would have expected a property named “content” or maybe “html” in the element object. Why is it called innerHTML instead?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch06qa1q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> We agree, it’s kind of a weird name. The innerHTML property represents all the content contained in your element, including other nested elements (like a paragraph might include &lt;em&gt; and &lt;img&gt; elements in addition to the text in the paragraph). In other words, it’s the HTML that’s “INside” your element. Is there an outerHTML property? Yes! And that property gets you all the HTML inside the element, as well as the element itself. In practice you won’t see outerHTML used very often, but you will see innerHTML used frequently to update the content of elements.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch06qa1qe5"></a><a id="ch06qa1q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So by assigning something to innerHTML I can replace the content of any element with something else. What if I used innerHTML to change, say, the &lt;body&gt; element’s content?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch06qa1q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Right, innerHTML gives you a convenient way to replace the content of an element. And, yes, you could use it to replace the content of the &lt;body&gt; element, which would result in your entire page being replaced with something new.</p></td></tr></tbody></table></div></blockquote></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00082"></a><p class="title">Sharpen your pencil</p><p><a id="iddle1512" class="indexterm"></a>Here’s a DOM with a secret message hidden in it. Evaluate the code below to reveal the secret! The answer is upside down on this page.</p><div class="informalfigure"><a id="med_id00428a"></a><div class="mediaobject"><a id="med_id00428"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113166.png.jpg" alt="image with no caption" width="319" height="288"></div></div><div class="informalfigure"><a id="med_id00429a"></a><div class="mediaobject"><a id="med_id00429"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113168.png.jpg" alt="image with no caption" width="1000" height="747"></div></div><p>Answer: “you can turn back pages but not time”</p></div></div><div class="sect1" title="A test drive around the planets"><div class="titlepage"><div><div><h1 class="title"><a id="test_drive_around_the_planets"></a>A test drive around the planets <span class="inlinemediaobject"><a id="inline_id00055"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113170.png.jpg" alt="" width="104" height="38"></span></h1></div></div></div><div class="informalfigure"><a id="med_id00430a"></a><div class="mediaobject"><a id="med_id00430"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113172.png.jpg" alt="image with no caption" width="249" height="159"></div></div><p><a id="iddle1471" class="indexterm"></a><a id="iddle1511" class="indexterm"></a><a id="iddle1923" class="indexterm"></a><a id="iddle2099" class="indexterm"></a><a id="iddle2639" class="indexterm"></a>Okay, you know how to use <code class="literal">document.getElementById</code> to get access to an element, and how to use <code class="literal">innerHTML</code> to change the content of that element. Let’s do it for real, now.</p><p>Here’s the HTML for the planets. We’ve got a <code class="literal">&lt;script&gt;</code> element in the <code class="literal">&lt;head&gt;</code> where we’ll put the code, and three paragraphs for the green, red, and blue planets. If you haven’t already, go ahead and type in the HTML and the JavaScript to update the DOM:</p><div class="informalfigure"><a id="med_id00431a"></a><div class="mediaobject"><a id="med_id00431"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113174.png.jpg" alt="image with no caption" width="806" height="429"></div></div><p>After you’ve got it typed in, go ahead and load the page into your browser and see the DOM magic happen on the green planet.</p><div class="informalfigure"><a id="med_id00432a"></a><div class="mediaobject"><a id="med_id00432"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113176.png.jpg" alt="image with no caption" width="718" height="342"></div></div><div class="informalfigure"><a id="med_id00433a"></a><div class="mediaobject"><a id="med_id00433"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113178.png.jpg" alt="image with no caption" width="485" height="476"></div></div><p><span class="strong"><strong>Oh yeah, we forgot to mention one thing.</strong></span> When you’re dealing with the DOM it’s important to execute your code only <span class="emphasis"><em>after</em></span> the page is <span class="emphasis"><em>fully loaded</em></span>. If you don’t, there’s a good chance the DOM won’t be created by the time your code executes.</p><p>Let’s think about what just happened: we put code in the <code class="literal">&lt;head&gt;</code> of the page, so it begins executing before the browser even sees the rest of the page. That’s a big problem because that paragraph element with an id of “greenplanet” doesn’t exist, yet.</p><p>So what happens exactly? The call to <code class="literal">getElementById</code> returns null instead of the element we want, causing an error, and the browser, being the good sport that it is, just keeps moving and renders the page anyway, but without the change to the green planet’s content.</p><p>How do we fix this? Well, we could move the code to the bottom of the <code class="literal">&lt;body&gt;</code>, but there’s actually a more foolproof way to make sure this code runs at the right time; a way to tell the browser “run my code after you’ve fully loaded in the page and created the DOM.” Let’s see how to do that next.</p><div class="informalfigure"><a id="med_id00434a"></a><div class="mediaobject"><a id="med_id00434"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113180.png.jpg" alt="image with no caption" width="236" height="398"></div></div></div><div class="sect1" title="Don’t even think about running my code until the page is fully loaded!"><div class="titlepage"><div><div><h1 class="title"><a id="donapostrophet_even_think_about_running"></a>Don’t even think about running my code until the page is fully loaded!</h1></div></div></div><p><a id="iddle1109" class="indexterm"></a><a id="iddle1583" class="indexterm"></a><a id="iddle1596" class="indexterm"></a><a id="iddle1805" class="indexterm"></a><a id="iddle1829" class="indexterm"></a><a id="iddle1969" class="indexterm"></a><a id="iddle1983" class="indexterm"></a><a id="iddle2085" class="indexterm"></a><a id="iddle2204" class="indexterm"></a><a id="iddle2547" class="indexterm"></a><a id="iddle2566" class="indexterm"></a><a id="iddle2569" class="indexterm"></a><a id="iddle2577" class="indexterm"></a><a id="iddle3085" class="indexterm"></a><a id="iddle3098" class="indexterm"></a>Ah, but how? Besides moving the code to the bottom of the body, there’s another—and, one might argue—cleaner way to do it: <span class="emphasis"><em>with code</em></span>.</p><p>Here’s how it works: first create a function that has the code you’d like executed <span class="emphasis"><em>once the page is fully loaded</em></span>. After you’ve done that, you take the window object, and assign the function to its <code class="literal">onload</code> property.</p><div class="note" title="Note"><h3 class="title"><a id="ch06note03"></a>Note</h3><p>The window object is built-in to JavaScript. It represents the browser window.</p></div><p>What does that do? The window object will call any function you’ve assigned to its <code class="literal">onload</code> property, but only <span class="emphasis"><em>after</em></span> the page is fully loaded. So, thank the designers of the window object for giving you a way to supply the code that gets called after the page has loaded. Check this out:</p><div class="informalfigure"><a id="med_id00435a"></a><div class="mediaobject"><a id="med_id00435"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113182.png.jpg" alt="image with no caption" width="708" height="288"></div></div><div class="sect2" title="Let’s try that again..."><div class="titlepage"><div><div><h2 class="title"><a id="letapostrophes_try_that_againhellip"></a>Let’s try that again... <span class="inlinemediaobject"><a id="inline_id00056"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113170.png.jpg" alt="" width="104" height="38"></span></h2></div></div></div><p>Go ahead and reload the page with the new <code class="literal">init</code> function and the <code class="literal">onload</code> property. This time the browser will load the page completely, build the entire DOM and <span class="emphasis"><em>only then</em></span> call your <code class="literal">init</code> function.</p><div class="informalfigure"><a id="med_id00436a"></a><div class="mediaobject"><a id="med_id00436"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113184.png.jpg" alt="image with no caption" width="605" height="274"></div></div></div></div><div class="sect1" title="You say “event handler,” I say “callback”"><div class="titlepage"><div><div><h1 class="title"><a id="you_say_quotation_markevent_handercommaq"></a>You say “event handler,” I say “callback”</h1></div></div></div><p><a id="iddle1104" class="indexterm"></a><a id="iddle1268" class="indexterm"></a><a id="iddle1578" class="indexterm"></a><a id="iddle1588" class="indexterm"></a><a id="iddle1977" class="indexterm"></a><a id="iddle2452" class="indexterm"></a>Let’s think about how <code class="literal">onload</code> works just a bit more, because it uses a common coding pattern you’ll see over and over again in JavaScript.</p><p>Let’s say there’s a big important event that’s going to occur, and you <span class="emphasis"><em>definitely</em></span> want to know about it. Say that event is the “page is loaded” event. Well, a common way to deal with that situation is through a <span class="emphasis"><em>callback</em></span>, also known as an <span class="emphasis"><em>event handler.</em></span></p><p>A callback works like this: give a function to the object that knows about the event. When the event occurs, that object will call you back, or notify you, by calling that function. You’re going to see this pattern in JavaScript for a variety of events.<a id="iddle1806" class="indexterm"></a><a id="iddle2086" class="indexterm"></a></p><div class="informalfigure"><a id="med_id00437a"></a><div class="mediaobject"><a id="med_id00437"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113186.png.jpg" alt="image with no caption" width="769" height="698"></div></div><div class="informalfigure"><a id="med_id00438a"></a><div class="mediaobject"><a id="med_id00438"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113188.png.jpg" alt="image with no caption" width="679" height="975"></div></div><div class="informalfigure"><a id="med_id00439a"></a><div class="mediaobject"><a id="med_id00439"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113190.png.jpg" alt="image with no caption" width="525" height="567"></div></div><p><a id="iddle1108" class="indexterm"></a><a id="iddle1582" class="indexterm"></a><a id="iddle1595" class="indexterm"></a><a id="iddle1982" class="indexterm"></a><span class="strong"><strong>That’s right, and there are many kinds of events you can handle if you want to.</strong></span> Some events, like the load event, are generated by the browser, while others are generated by a user interacting with the page, or even by your own JavaScript code.</p><p>You’ve seen an example of “the page is loaded” event, which we handle by setting the <code class="literal">onload</code> property of the window object. You can also write event handlers that handle things like “call this function every five seconds,” or “some data arrived from a web service that we need to deal with,” or “the user clicked a button and we need to get some data from a form,” and there are many more. All these types of events are heavily used when you’re creating pages that act more like applications than static documents (and who doesn’t want that). Right now, we’ve had just a brief glimpse of event handlers, but we’ll be spending a lot more time on them a bit later given their important role in JavaScript programming.</p><div class="sidebar"><a id="sharpen_your_pencil-id00083"></a><p class="title">Sharpen your pencil</p><p><a id="iddle1084" class="indexterm"></a><a id="iddle1968" class="indexterm"></a><a id="iddle2184" class="indexterm"></a><a id="iddle2190" class="indexterm"></a><a id="iddle2622" class="indexterm"></a>Here’s some HTML for a playlist of songs, except that the list is empty. It’s your job to complete the JavaScript below to add the songs to the list. Fill in the blank with the JavaScript that will do the job. Check your answer with our solution at the end of the chapter before you go on.</p><div class="informalfigure"><a id="med_id00440a"></a><div class="mediaobject"><a id="med_id00440"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113192.png.jpg" alt="image with no caption" width="810" height="922"></div></div></div><div class="sect2" title="Why stop now? Let’s take it further"><div class="titlepage"><div><div><h2 class="title"><a id="why_stop_nowquestion_mark_letapostrophes"></a>Why stop now? Let’s take it further</h2></div></div></div><p><a id="iddle1137" class="indexterm"></a><a id="iddle1429" class="indexterm"></a><a id="iddle1508" class="indexterm"></a>Let’s think for a second about what you just did: you took a static web page and you dynamically changed the content of one of its paragraphs <span class="emphasis"><em>using code</em></span>. It seems like a simple step, but this is really the beginning of making a <span class="emphasis"><em>truly interactive</em></span> page.</p><div class="note" title="Note"><h3 class="title"><a id="ch06note04"></a>Note</h3><p>And that’s our goal, which we’ll fully realize in <a class="xref" href="ch08.html" title="Chapter&nbsp;8.&nbsp;Building an app">Chapter&nbsp;8</a>.</p></div><p>Let’s take the second step: now that you know how to get your hands on an element in the DOM, let’s set an <span class="emphasis"><em>attribute</em></span> of an element with code.</p><p>Why would that be interesting? Well, take our simple planets example. When we set the paragraph to read “Red Alert,” we could also set the paragraph’s color to red. That would certainly more clearly communicate our message.</p><div class="informalfigure"><a id="med_id00441a"></a><div class="mediaobject"><a id="med_id00441"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113194.png.jpg" alt="image with no caption" width="347" height="424"></div></div><p>Here’s how we’re going to do that:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>We’ll define a CSS rule for the class “redtext” that specifies a red color for the text of the paragraph. That way any element we add to this class will have red text.</p></li><li class="listitem"><p>Next, we’ll add code to take the greenplanet paragraph element and add the class “redtext”.</p></li></ol></div><p>That’s it. All we need now is to learn how to set an attribute of an element and then we can write the code.</p><div class="sidebar"><a id="sharpen_your_pencil-id00084"></a><p class="title">Sharpen your pencil</p><p>How about getting another part of your brain working? We’re going to need the CSS style for the class “redtext” that sets the color to “red” for the text in the planet paragraph. If it’s been a while since you wrote CSS, don’t worry; give it a shot anyway. If you can do it in your sleep, awesome. Either way, you’ll find the answer at the end of this chapter.</p></div></div></div><div class="sect1" title="How to set an attribute with setAttribute"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_set_an_attribute_with_setattribut"></a>How to set an attribute with setAttribute</h1></div></div></div><p><a id="iddle1134" class="indexterm"></a><a id="iddle1138" class="indexterm"></a><a id="iddle1293" class="indexterm"></a><a id="iddle1509" class="indexterm"></a><a id="iddle2786" class="indexterm"></a>Element objects have a method named <code class="literal">setAttribute</code> that you can call to set the value of an HTML element’s attribute. The <code class="literal">setAttribute</code> method looks like this:</p><div class="informalfigure"><a id="med_id00442a"></a><div class="mediaobject"><a id="med_id00442"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113196.png.jpg" alt="image with no caption" width="824" height="176"></div></div><p>We can call <code class="literal">setAttribute</code> on any element to change the value of an existing attribute, or, if the attribute doesn’t already exist, to add a new attribute to the element. As an example, let’s check out how executing the code above affects our DOM.</p><p><span class="strong"><strong>Before...</strong></span></p><div class="informalfigure"><a id="med_id00443a"></a><div class="mediaobject"><a id="med_id00443"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113198.png.jpg" alt="image with no caption" width="670" height="193"></div></div><p><span class="strong"><strong>And After</strong></span></p><div class="informalfigure"><a id="med_id00444a"></a><div class="mediaobject"><a id="med_id00444"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113200.png.jpg" alt="image with no caption" width="717" height="219"></div></div></div><div class="sect1" title="More fun with attributes! (you can GET attributes too)"><div class="titlepage"><div><div><h1 class="title"><a id="more_fun_with_attributesexclamation_mark"></a>More fun with attributes! (you can GET attributes too)</h1></div></div></div><p><a id="iddle1009" class="indexterm"></a><a id="iddle1100" class="indexterm"></a><a id="iddle1133" class="indexterm"></a><a id="iddle1135" class="indexterm"></a><a id="iddle1136" class="indexterm"></a><a id="iddle1474" class="indexterm"></a><a id="iddle1532" class="indexterm"></a><a id="iddle1915" class="indexterm"></a><a id="iddle1926" class="indexterm"></a><a id="iddle2335" class="indexterm"></a><a id="iddle3140" class="indexterm"></a>Need to know the value of an attribute in an element? No problem, we have a <code class="literal">getAttribute</code> method that you can call to get the value of an HTML element’s attribute.</p><div class="informalfigure"><a id="med_id00445a"></a><div class="mediaobject"><a id="med_id00445"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113202.png.jpg" alt="image with no caption" width="710" height="196"></div></div><div class="sect2" title="What happens if my attribute doesn’t exist in the element?"><div class="titlepage"><div><div><h2 class="title"><a id="what_happens_if_my_attribute_doesnapostr"></a>What happens if my attribute doesn’t exist in the element?</h2></div></div></div><p>Remember what happens when you call <code class="literal">getElementById</code> and the id doesn’t exist in the DOM? You get null. Same thing with <code class="literal">getAttribute</code>. If the attribute doesn’t exist, you’ll get back null. Here’s how you test for that:</p><div class="informalfigure"><a id="med_id00446a"></a><div class="mediaobject"><a id="med_id00446"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113204.png.jpg" alt="image with no caption" width="764" height="192"></div></div><div class="sidebar"><a id="donapostrophet_forget_getelementbyid_can"></a><p class="title">Don’t forget getElementById can return null too!</p><p><span class="strong"><strong>Any time you ask for something, you need to make sure you got back what you expected...</strong></span></p><p>The call to getElementById can return a null value if the element id does not exist in the DOM. So, to follow best practices, you’ll want to make sure you test for null after getting elements too. We could follow that rule ourselves, but then the book would end up being 1000 pages longer.</p></div></div><div class="sect2" title="Meanwhile, back at the solar system..."><div class="titlepage"><div><div><h2 class="title"><a id="meanwhilecomma_back_at_the_solar_systemh"></a>Meanwhile, back at the <span class="inlinemediaobject"><a id="inline_id00057"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113206.png.jpg" alt="" width="92" height="44"></span> solar system...</h2></div></div></div><p>It’s time to put all the code for the planets together and do a final test drive.</p><div class="informalfigure"><a id="med_id00447a"></a><div class="mediaobject"><a id="med_id00447"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113208.png.jpg" alt="image with no caption" width="833" height="591"></div></div></div><div class="sect2" title="Test driving the planets one last time..."><div class="titlepage"><div><div><h2 class="title"><a id="test_driving_the_planets_one_last_timehe"></a>Test driving the planets one last time... <span class="inlinemediaobject"><a id="inline_id00058"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113170.png.jpg" alt="" width="104" height="38"></span></h2></div></div></div><p>Load this page up in your browser and you’ll see the green planet has been hit by phaser fire, and now we see the message in bright red, so we’ll be sure not to miss it!</p><div class="informalfigure"><a id="med_id00448a"></a><div class="mediaobject"><a id="med_id00448"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113210.png.jpg" alt="image with no caption" width="294" height="354"></div></div></div></div><div class="sect1" title="So what else is a DOM good for anyway?"><div class="titlepage"><div><div><h1 class="title"><a id="so_what_else_is_a_dom_good_for_anywayque"></a>So what else is a DOM good for anyway?</h1></div></div></div><p><a id="iddle1494" class="indexterm"></a><a id="iddle1535" class="indexterm"></a>The DOM can do a fair bit more than we’ve seen so far and we’ll be seeing some of its other functionality as we move forward in the book, but for now let’s just take a quick look so you’ve got it in the back of your mind:</p><div class="informalfigure"><a id="med_id00449a"></a><div class="mediaobject"><a id="med_id00449"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113212.png.jpg" alt="image with no caption" width="325" height="183"></div></div><p><span class="strong"><strong>Get elements from the DOM.</strong></span></p><p>Of course you already know this because we’ve been using document.getElementById, but there are other ways to get elements as well; in fact, you can use tag names, class names and attributes to retrieve not just one element, but a whole set of elements (say all elements in the class “on_sale”). And you can get form values the user has typed in, like the text of an input element.</p><div class="informalfigure"><a id="med_id00450a"></a><div class="mediaobject"><a id="med_id00450"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113214.png.jpg" alt="image with no caption" width="279" height="272"></div></div><p><span class="strong"><strong>Create and add elements to the DOM.</strong></span></p><p>You can create new elements and you can also add those elements to the DOM. Of course, any changes you make to the DOM will show up immediately as the DOM is rendered by the browser (which is a good thing!).</p><div class="informalfigure"><a id="med_id00451a"></a><div class="mediaobject"><a id="med_id00451"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113216.png.jpg" alt="image with no caption" width="244" height="156"></div></div><p><span class="strong"><strong>Remove elements from the DOM.</strong></span></p><p>You can also remove elements from the DOM by taking a parent element and removing any of its children. Again, you’ll see the element removed in your browser window as soon as it is deleted from the DOM.</p><div class="informalfigure"><a id="med_id00452a"></a><div class="mediaobject"><a id="med_id00452"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113218.png.jpg" alt="image with no caption" width="349" height="186"></div></div><p><span class="strong"><strong>Traverse the elements in the DOM.</strong></span></p><p>Once you have a handle to an element, you can find all its children, you can get its siblings (all the elements at the same level), and you can get its parent. The DOM is structured just like a family tree!</p><div class="sidebar"><a id="bullet_points-id00085"></a><p class="title">Bullet Points</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <span class="strong"><strong>Document Object Model</strong></span>, or DOM, is the browser’s internal representation of your web page.</p></li><li class="listitem"><p>The browser creates the DOM for your page as it loads and parses the HTML.</p></li><li class="listitem"><p>You get access to the DOM in your JavaScript code with the document object.</p></li><li class="listitem"><p>The document object has properties and methods you can use to access and modify the DOM.</p></li><li class="listitem"><p>The <span class="strong"><strong>document.getElementById</strong></span> method grabs an element from the DOM using its id.</p></li><li class="listitem"><p>The document.getElementById method returns an <span class="strong"><strong>element object</strong></span> that represents an element in your page.</p></li><li class="listitem"><p>An element object has properties and methods you can use to read an element’s content, and change it.</p></li><li class="listitem"><p>The <span class="strong"><strong>innerHTML</strong></span> property holds the text content, as well as all nested HTML content, of an element.</p></li><li class="listitem"><p>You can modify the content of an element by changing the value of its innerHTML property.</p></li><li class="listitem"><p>When you modify an element by changing its innerHTML property, you see the change in your web page immediately.</p></li><li class="listitem"><p>You can get the value of an element’s attributes using the <span class="strong"><strong>getAttribute</strong></span> method.</p></li><li class="listitem"><p>You can set the value of an element’s attributes using the <span class="strong"><strong>setAttribute</strong></span> method.</p></li><li class="listitem"><p>If you put your code in a &lt;script&gt; element in the &lt;head&gt; of your page, you need to make sure you don’t try to modify the DOM until the page is fully loaded.</p></li><li class="listitem"><p>You can use the window object’s <span class="strong"><strong>onload</strong></span> property to set an <span class="strong"><strong>event handler</strong></span>, or callback, function for the load event.</p></li><li class="listitem"><p>The event handler for the window’s onload property will be called as soon as the page is fully loaded.</p></li><li class="listitem"><p>There are many different kinds of events we can handle in JavaScript with event handler functions.</p></li></ul></div></div><div class="sidebar"><a id="javascript_cross-id00086"></a><p class="title">JavaScript cross</p><p>Load the DOM into your brain with this puzzle.</p><div class="informalfigure"><a id="med_id00453a"></a><div class="mediaobject"><a id="med_id00453"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113220.png" alt="image with no caption" width="619" height="496"></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Across</p></th><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Down</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; " valign="top"><p>5. Functions that handle events are known as event ________.</p>
<p>7. Dr. Evel’s passcode clue was in the element with the id _____.</p>
<p>9. Assign a ________ to the window.onload property to handle the load event.</p>
<p>12. Use the element object’s property, ________, to change the HTML inside an element.</p>
<p>14. The setAttribute method is a method of an ________ object.</p>
<p>15. The DOM is shaped like a _____.</p></td><td style="" valign="top"><p>1. Which planet gets hit by phaser fire?</p>
<p>2. Use the _______ to see if you have errors in your code.</p>
<p>3. It’s important to make sure the ____ is completely loaded before using code to get or change elements in the page.</p>
<p>4. The getElementById method gets an element by its ___.</p>
<p>6. Change the class of an element using the _________ method.</p>
<p>8. The ______ object is always at the top of the DOM tree.</p>
<p>10. It’s a good idea to check for ____ when using getElementById.</p>
<p>11. When you load a page into the browser, the browser creates a ____ representing all the elements and content in the page.</p>
<p>13. getElementById is a ________ of the document object.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="be_the_browser_solution-id00087"></a><p class="title">BE the Browser Solution</p><div class="informalfigure"><a id="med_id00454a"></a><div class="mediaobject"><a id="med_id00454"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><a id="iddle1256" class="indexterm"></a><a id="iddle1507" class="indexterm"></a><a id="iddle2039" class="indexterm"></a><a id="iddle3062" class="indexterm"></a><span class="strong"><strong>Your job is to act like you’re the browser. You need to parse the HTML and build your very own DOM from it. Go ahead and parse the HTML to the right, and draw your DOM below. We’ve already started it for you.</strong></span></p><div class="informalfigure"><a id="med_id00455a"></a><div class="mediaobject"><a id="med_id00455"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113222.png.jpg" alt="image with no caption" width="622" height="442"></div></div><div class="informalfigure"><a id="med_id00456a"></a><div class="mediaobject"><a id="med_id00456"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113224.png.jpg" alt="image with no caption" width="713" height="761"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00088"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1085" class="indexterm"></a><a id="iddle2185" class="indexterm"></a><a id="iddle2191" class="indexterm"></a><a id="iddle2623" class="indexterm"></a>Here’s some HTML for a playlist of songs, except that the list is empty. It’s your job to complete the JavaScript below to add the songs to the list. Fill in the blank with the JavaScript that will do the job. Here’s our solution.</p><div class="informalfigure"><a id="med_id00457a"></a><div class="mediaobject"><a id="med_id00457"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113226.png.jpg" alt="image with no caption" width="747" height="851"></div></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00089"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1430" class="indexterm"></a>How about getting another part of your brain working? We’re going to need the CSS style for the class “redtext” that sets the color to “red” for the text in the planet paragraph. If it’s been a while since you wrote CSS, don’t worry; give it a shot anyway. If you can do it in your sleep, awesome. Here’s our solution.</p><a id="pro_id00076"></a><pre class="programlisting"><span class="strong"><strong>.redtext { color: red; }</strong></span></pre></div><div class="sidebar"><a id="javascript_cross_solution-id00090"></a><p class="title">JavaScript cross Solution</p><p>Load the DOM into your brain with this puzzle.</p><div class="informalfigure"><a id="med_id00458a"></a><div class="mediaobject"><a id="med_id00458"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113228.png" alt="image with no caption" width="661" height="529"></div></div></div></div></div></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781449340124/files/core.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content" class="noOutline" tabindex="-1"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><div class="chapter" title="Chapter&nbsp;12.&nbsp;Creating objects"><div class="titlepage"><div><div><h1 class="title"><a id="advanced_object_construction_creating_ob"></a>Chapter&nbsp;12.&nbsp;Creating objects</h1></div><div><h3 class="subtitle">Advanced Object Construction</h3></div></div></div><div class="informalfigure"><a id="med_id00850a"></a><div class="mediaobject"><a id="med_id00850"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114014.png.jpg" alt="image with no caption" width="562" height="427"></div></div><p><a id="iddle1377" class="indexterm"></a><a id="iddle2353" class="indexterm"></a><span class="strong"><strong>So far we’ve been crafting objects by hand.</strong></span> For each object, we’ve used an <span class="strong"><strong>object literal</strong></span> to specify each and every property. That’s okay on a small scale, but for serious code we need something better. That’s where <span class="strong"><strong>object constructors</strong></span> come in. With constructors we can create objects much more easily, and we can create objects that all adhere to the same <span class="strong"><strong>design blueprint</strong></span>—meaning we can use constructors to ensure each object has the same properties and includes the same methods. And with constructors we can write object code that is much more <span class="strong"><strong>concise</strong></span> and a lot less error prone when we’re creating lots of objects. So, let’s get started and after this chapter you’ll be talking constructors just like you grew up in Objectville.</p><div class="sect1" title="Creating objects with object literals"><div class="titlepage"><div><div><h1 class="title"><a id="creating_objects_with_object_literals"></a>Creating objects with object literals</h1></div></div></div><p><a id="iddle1386" class="indexterm"></a><a id="iddle1437" class="indexterm"></a><a id="iddle2193" class="indexterm"></a><a id="iddle2468" class="indexterm"></a>So far in this book, you’ve been using <span class="emphasis"><em>object literals</em></span> to create objects. With an object literal, you create an object by writing it out... well, literally. Like this:</p><div class="informalfigure"><a id="med_id00851a"></a><div class="mediaobject"><a id="med_id00851"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114016.png.jpg" alt="image with no caption" width="650" height="382"></div></div><p>Object literals give you a convenient way to create objects anywhere in your code, but when you need to create lots of objects—say a whole fleet of taxis—you wouldn’t want to type in a hundred different object literals now would you?</p><div class="note" title="Brain Power"><h3 class="title"><a id="ch12note01"></a>Brain Power</h3><p>Think about creating a fleet of taxi objects. What other issues might using object literals cause?</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00139"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Tired fingers from a lot of typing!</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00140"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Can you ensure that each taxi has the same properties? What if you make a mistake or typo, or leave out a property?</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00141"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>A lot of object literals means a lot of code. Isn’t that going to lead to slow download times for the browser?</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00142"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>The code for the start, stop and drive methods would have to be duplicated over and over.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00143"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>What if you decide to add or delete a property (or to change the way start or stop work)? You’d have to make the change in all the taxis.</p></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00144"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112508.png.jpg" alt="" width="25" height="24"></span></p></td><td style="" valign="top"><p>Who needs taxis when we have Uber?</p></td></tr></tbody></table></div></div></div><div class="sect1" title="Using conventions for objects"><div class="titlepage"><div><div><h1 class="title"><a id="using_conventions_for_objects"></a>Using conventions for objects</h1></div></div></div><p><a id="iddle1385" class="indexterm"></a><a id="iddle2361" class="indexterm"></a><a id="iddle2521" class="indexterm"></a>The other thing we’ve been doing, so far, is creating objects <span class="emphasis"><em>by convention</em></span>. For example, we’ve been putting properties and methods together and saying “it’s a car!” or “it’s a dog!”, but the only thing that makes two such objects cars (or dogs) is that we’ve followed our own conventions.</p><p>Now, this technique might work on a small scale but it’s problematic when we have lots of objects, or even lots of developers working in the same code who might not fully know or follow the conventions.</p><p>But don’t take our word for it. Take a look at some of the objects we’ve seen earlier in the book, which we’ve been told are cars:</p><div class="informalfigure"><a id="med_id00852a"></a><div class="mediaobject"><a id="med_id00852"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114018.png.jpg" alt="image with no caption" width="649" height="780"></div></div><div class="informalfigure"><a id="med_id00853a"></a><div class="mediaobject"><a id="med_id00853"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114020.png.jpg" alt="image with no caption" width="657" height="648"></div></div></div><div class="sect1" title="Introducing Object Constructors"><div class="titlepage"><div><div><h1 class="title"><a id="introducing_object_constructors"></a>Introducing Object Constructors</h1></div></div></div><p><a id="iddle1378" class="indexterm"></a><a id="iddle1380" class="indexterm"></a><a id="iddle2354" class="indexterm"></a><a id="iddle2356" class="indexterm"></a><span class="emphasis"><em>Object constructors</em></span>, or “constructors” for short, are your path to better object creation. Think of a constructor like a little factory that can create an endless number of similar objects.</p><p>In terms of code, a constructor is quite similar to a function that returns an object: you define it once and invoke it every time you want to create a new object. But as you’ll see there’s a little extra that goes into a constructor.</p><p>The best way to see how constructors work is to create one. Let’s revisit our old friend, the dog object, from earlier in the book and write a constructor to create as many dogs as we need. Here’s a version of the dog object we’ve used before, with a name, a breed and a weight.</p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>Object constructors and functions are closely related. Keep that in mind as you’re learning how to write and use constructors.</strong></span></p></blockquote></div><div class="informalfigure"><a id="med_id00854a"></a><div class="mediaobject"><a id="med_id00854"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114022.png.jpg" alt="image with no caption" width="220" height="141"></div></div><p>Now, if we were going to define such a dog with an object literal, it would look like this:</p><div class="informalfigure"><a id="med_id00855a"></a><div class="mediaobject"><a id="med_id00855"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114024.png.jpg" alt="image with no caption" width="446" height="111"></div></div><p>But we don’t want <span class="emphasis"><em>just a Fido</em></span> dog, we want a way to create <span class="emphasis"><em>any dog</em></span> that has a name, a breed and a weight. And, again, to do that we’re going to write some code that looks like a function, with a dash of object syntax thrown in.</p><p>With that introduction, you must be a bit curious—go ahead and turn the page and let’s get these constructors figured out and working for us.</p><div class="informalfigure"><a id="med_id00856a"></a><div class="mediaobject"><a id="med_id00856"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114026.png.jpg" alt="image with no caption" width="302" height="403"></div></div></div><div class="sect1" title="How to create a Constructor"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_create_a_constructor"></a>How to create a Constructor</h1></div></div></div><div class="informalfigure"><a id="med_id00857a"></a><div class="mediaobject"><a id="med_id00857"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114028.png.jpg" alt="image with no caption" width="244" height="200"></div></div><p>Using constructors is a two-step process: first we define a constructor, and then we use it to create objects. Let’s first focus on creating a constructor.</p><p>What we want is a constructor that we can use to create dogs, and, more specifically, dogs with names, breeds and weights. So, we’re going to define a function, called the constructor, that knows how to create dogs. Like this:</p><div class="informalfigure"><a id="med_id00858a"></a><div class="mediaobject"><a id="med_id00858"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114030.png.jpg" alt="image with no caption" width="699" height="416"></div></div><div class="sidebar"><a id="sharpen_your_pencil-id00205"></a><p class="title">Sharpen your pencil</p><p>We need your help. We’ve been using object literals to create ducks. Given what you learned above, can you write a constructor to create ducks for us? You’ll find one of our object literals below to base your constructor on:</p><div class="informalfigure"><a id="med_id00859a"></a><div class="mediaobject"><a id="med_id00859"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114032.png.jpg" alt="image with no caption" width="709" height="173"></div></div></div></div><div class="sect1" title="How to use a Constructor"><div class="titlepage"><div><div><h1 class="title"><a id="how_to_use_a_constructor"></a>How to use a Constructor</h1></div></div></div><p><a id="iddle1404" class="indexterm"></a><a id="iddle2379" class="indexterm"></a>We said using a constructor is a two-step process: first we create a constructor, then we use it. Well, we’ve created a Dog constructor, so let’s use it. Here’s how we do that:</p><div class="informalfigure"><a id="med_id00860a"></a><div class="mediaobject"><a id="med_id00860"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114034.png.jpg" alt="image with no caption" width="693" height="119"></div></div><p>So, to create a new dog object with a name of “Fido”, a breed of “Mixed” and a weight of 38, we start with the <code class="literal">new</code> keyword and follow it by a call to the constructor function with the appropriate arguments. After this statement is evaluated, the variable <code class="literal">fido</code> will hold a reference to our new dog object.</p><p>Now that we have a constructor for dogs, we can keep making them:</p><a id="pro_id00125"></a><pre class="programlisting"><span class="strong"><strong>var fluffy = new Dog("Fluffy", "Poodle", 30);</strong></span>
<span class="strong"><strong>var spot = new Dog("Spot", "Chihuahua", 10);</strong></span></pre><p>That’s a bit easier than using object literals isn’t it? And by creating dog objects this way, we know each dog has the same set of properties: name, breed, and weight.</p><div class="sidebar"><a id="exercise-id00206"></a><p class="title">Exercise</p><div class="informalfigure"><a id="med_id00861a"></a><div class="mediaobject"><a id="med_id00861"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114036.png.jpg" alt="image with no caption" width="682" height="387"></div></div></div></div><div class="sect1" title="How constructors work"><div class="titlepage"><div><div><h1 class="title"><a id="how_constructors_work"></a>How constructors work</h1></div></div></div><p><a id="iddle1406" class="indexterm"></a><a id="iddle1413" class="indexterm"></a><a id="iddle2324" class="indexterm"></a><a id="iddle2381" class="indexterm"></a><a id="iddle2388" class="indexterm"></a><a id="iddle2529" class="indexterm"></a><a id="iddle2863" class="indexterm"></a>We’ve seen how to declare a constructor and also how to use it to create objects, but we should also take a look behind the scenes to see how a constructor actually works. Here’s the key: to understand constructors we need to know what the <code class="literal">new</code> operator is doing.</p><p>We’ll start with the statement we used to create <code class="literal">fido</code>:</p><a id="pro_id00126"></a><pre class="programlisting"><span class="strong"><strong>var fido = new Dog("Fido", "Mixed", 38);</strong></span></pre><p>Take a look at the right-hand side of the assignment, where all the action is. Let’s follow its execution:</p><div class="note" title="Behind the Scenes"><h3 class="title"><a id="ch12note02"></a>Behind the Scenes</h3><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>The first thing <code class="literal">new</code> does is create a new, empty object:</p><div class="informalfigure"><a id="med_id00862a"></a><div class="mediaobject"><a id="med_id00862"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114038.png.jpg" alt="image with no caption" width="90" height="89"></div></div></li><li class="listitem"><p>Next, <code class="literal">new</code> sets <code class="literal">this</code> to point to the new object.</p><div class="informalfigure"><a id="med_id00863a"></a><div class="mediaobject"><a id="med_id00863"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114040.png.jpg" alt="image with no caption" width="313" height="120"></div></div></li><li class="listitem"><p>With <code class="literal">this</code> set up, we now call the function Dog, passing “Fido”, “Mixed” and 38 as arguments.</p><div class="informalfigure"><a id="med_id00864a"></a><div class="mediaobject"><a id="med_id00864"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114042.png.jpg" alt="image with no caption" width="273" height="144"></div></div></li><li class="listitem"><p>Next the body of the function is invoked. Like most constructors, Dog assigns values to properties in the newly created <code class="literal">this</code> object.</p><div class="informalfigure"><a id="med_id00865a"></a><div class="mediaobject"><a id="med_id00865"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114044.png.jpg" alt="image with no caption" width="543" height="315"></div></div></li><li class="listitem"><p><a id="iddle1387" class="indexterm"></a><a id="iddle2362" class="indexterm"></a>Finally, once the Dog function has completed its execution the <code class="literal">new</code> operator returns <code class="literal">this</code>, which is a reference to the newly created object. Notice <code class="literal">this</code> is returned for you; you don’t have to explicitly return it in your code. And after the new object has been returned, we assign that reference to the variable <code class="literal">fido</code>.</p><div class="informalfigure"><a id="med_id00866a"></a><div class="mediaobject"><a id="med_id00866"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114046.png.jpg" alt="image with no caption" width="470" height="144"></div></div></li></ol></div></div><div class="sidebar"><a id="be_the_browser-id00207"></a><p class="title">BE the Browser</p><div class="informalfigure"><a id="med_id00867a"></a><div class="mediaobject"><a id="med_id00867"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><span class="strong"><strong>Below, you’ll find JavaScript code with some mistakes in it. Your job is to play like you’re the browser and find the errors in the code. After you’ve done the exercise look at the end of the chapter to see if you found them all. And, hey by the way, this is <a class="xref" href="ch12.html" title="Chapter&nbsp;12.&nbsp;Creating objects">Chapter&nbsp;12</a>. Feel free to make style comments too. You’ve earned the right.</strong></span></p><a id="pro_id00127"></a><pre class="programlisting"><span class="strong"><strong>function widget(partNo, size) {</strong></span>
    <span class="strong"><strong>var this.no = partNo;</strong></span>
    <span class="strong"><strong>var this.breed = size;</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>function FormFactor(material, widget) {</strong></span>
    <span class="strong"><strong>this.material = material,</strong></span>
    <span class="strong"><strong>this.widget = widget,</strong></span>
    <span class="strong"><strong>return this;</strong></span>
<span class="strong"><strong>}</strong></span>

<span class="strong"><strong>var widgetA = widget(100, "large");</strong></span>
<span class="strong"><strong>var widgetB = new widget(101, "small");</strong></span>
<span class="strong"><strong>var formFactorA = newFormFactor("plastic", widgetA);</strong></span>
<span class="strong"><strong>var formFactorB = new ForumFactor("metal", widgetB);</strong></span></pre></div></div><div class="sect1" title="You can put methods into constructors as well"><div class="titlepage"><div><div><h1 class="title"><a id="you_can_put_methods_into_constructors_as"></a>You can put methods into constructors as well</h1></div></div></div><p><a id="iddle1018" class="indexterm"></a><a id="iddle1392" class="indexterm"></a><a id="iddle1717" class="indexterm"></a><a id="iddle2268" class="indexterm"></a><a id="iddle2367" class="indexterm"></a>The dog objects that the Dog constructor creates are just like the dogs from earlier in the book... except that our newly constructed dogs can’t bark (because they don’t have a <code class="literal">bark</code> method). This is easily fixed because in addition to assigning values to properties in the constructor, we can set up methods too. Let’s extend the code to include a <code class="literal">bark</code> method:</p><div class="note" title="Note"><h3 class="title"><a id="ch12note03"></a>Note</h3><p>By the way, as you know, methods in objects are properties too. They just happen to have a function assigned to them.</p></div><div class="informalfigure"><a id="med_id00868a"></a><div class="mediaobject"><a id="med_id00868"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114048.png.jpg" alt="image with no caption" width="643" height="387"></div></div><div class="sect2" title="Take the bark method for a quick test drive"><div class="titlepage"><div><div><h2 class="title"><a id="take_the_bark_method_for_a_quick_test_dr"></a>Take the bark method for a quick test drive <span class="inlinemediaobject"><a id="inline_id00145"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114050.png.jpg" alt="" width="218" height="43"></span></h2></div></div></div><p>Enough talking about constructors, let’s add the code above to an HTML page, and then add the code below to test it:</p><a id="pro_id00128"></a><pre class="programlisting"><span class="strong"><strong>var fido = new Dog("Fido", "Mixed", 38);</strong></span>
<span class="strong"><strong>var fluffy = new Dog("Fluffy", "Poodle", 30);</strong></span>
<span class="strong"><strong>var spot = new Dog("Spot", "Chihuahua", 10);</strong></span>
<span class="strong"><strong>var dogs = [fido, fluffy, spot];</strong></span>

<span class="strong"><strong>for (var i = 0; i &lt; dogs.length; i++) {</strong></span>
    <span class="strong"><strong>dogs[i].bark();</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="informalfigure"><a id="med_id00869a"></a><div class="mediaobject"><a id="med_id00869"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114052.png.jpg" alt="image with no caption" width="661" height="441"></div></div><div class="sidebar"><a id="exercise-id00208"></a><p class="title">Exercise</p><p><a id="iddle1936" class="indexterm"></a><a id="iddle2872" class="indexterm"></a>We’ve got a constructor to create coffee drinks, but it’s missing its methods.</p><div class="informalfigure"><a id="med_id00870a"></a><div class="mediaobject"><a id="med_id00870"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114054.png.jpg" alt="image with no caption" width="186" height="115"></div></div><p>We need a method, getSize, that returns a string depending on the number of ounces of coffee:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>8oz is a small</p></li><li class="listitem"><p>12oz is a medium</p></li><li class="listitem"><p>16oz is a large</p></li></ul></div><p>We also need a method, toString, that returns a string that represents your order, like “You’ve ordered a small House Blend coffee.”</p><p>Write your code below, and then test it in the browser. Try creating a few different sizes of coffee. Check your answer before you go on.</p><div class="informalfigure"><a id="med_id00871a"></a><div class="mediaobject"><a id="med_id00871"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114056.png.jpg" alt="image with no caption" width="595" height="456"></div></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note08a"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">You’ve ordered a medium House Blend coffee.</code></strong></span></p><p><span class="strong"><strong><code class="literal">You’ve ordered a large Dark Roast coffee.</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p>Here’s our output; yours should look similar.</p></blockquote></div></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00209"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe1"></a><a id="ch12qa1q1"></a><p>Q:</p></td><td align="left" valign="top"><p><a id="iddle1390" class="indexterm"></a><a id="iddle1391" class="indexterm"></a><a id="iddle1407" class="indexterm"></a><a id="iddle1410" class="indexterm"></a><a id="iddle2194" class="indexterm"></a><a id="iddle2309" class="indexterm"></a><a id="iddle2325" class="indexterm"></a><a id="iddle2365" class="indexterm"></a><a id="iddle2366" class="indexterm"></a><a id="iddle2382" class="indexterm"></a><a id="iddle2385" class="indexterm"></a><a id="iddle2469" class="indexterm"></a><a id="iddle2530" class="indexterm"></a><a id="iddle2603" class="indexterm"></a><a id="iddle2864" class="indexterm"></a><span class="strong"><strong>Q: Why do constructor names start with a capital letter?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> This is a convention that JavaScript developers use so they can easily identify which functions are constructors, and which functions are just regular old functions. Why? Because with constructor functions, you need to use the new operator. In general, using a capital letter for constructors makes them easier to pick out when you’re reading code.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe2"></a><a id="ch12qa1q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So, other than setting up the properties of the</strong></span> <code class="literal">this</code> <span class="strong"><strong>object, a constructor’s just like a regular function?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> If you mean computationally, yes. You can do anything in a constructor you can do in a regular function, like declare and use variables, use for loops, call other functions, and so on. The only thing you don’t want to do is return a value (other than <span class="strong"><strong>this</strong></span>) from a constructor because that will cause the constructor to not return the object it’s supposed to be constructing.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe3"></a><a id="ch12qa1q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Do the parameter names of a constructor function have to match the property names?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> No. You can use whatever names you want for the parameters. The parameters are just used to hold values that we want to assign to the object’s properties to customize the object. What matters is the name of the properties you use for the object. That said, we often do use the same names for clarity, so we know which properties we’re assigning by looking at the constructor function definition.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe4"></a><a id="ch12qa1q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Is an object created by a constructor just like an object created with a literal?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes, until you get into more advanced object design, which we’ll do in the next chapter.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe5"></a><a id="ch12qa1q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Why do we need</strong></span> <code class="literal">new</code> <span class="strong"><strong>to create objects? Couldn’t we create an object in a regular function and return it (kind of like we did with makeCar in <a class="xref" href="ch05.html" title="Chapter&nbsp;5.&nbsp;A trip to Objectville">Chapter&nbsp;5</a>)?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Yes, you could create objects that way, but like we said in the previous answer, there are some extra things that happen when you use <code class="literal">new</code>. We’ll get more into these issues later in this chapter, and again in <a class="xref" href="ch13.html" title="Chapter&nbsp;13.&nbsp;Extra strength objects">Chapter&nbsp;13</a>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe6"></a><a id="ch12qa1q6"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: I’m still a bit confused by</strong></span> <code class="literal">this</code> <span class="strong"><strong>in the constructor. We’re using</strong></span> <code class="literal">this</code> <span class="strong"><strong>to assign properties to the object, and we’re also using</strong></span> <code class="literal">this</code> <span class="strong"><strong>in the methods of the object. Are these the same thing?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q6a6"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> When you call a constructor (to create an object) the value of <span class="strong"><strong>this</strong></span> is set to the new object that’s being created so all the code that is evaluated in the constructor applies to that new object.</p><p>Later, when you call a method on an object, <span class="strong"><strong>this</strong></span> is set to the object whose method you called. So the <span class="strong"><strong>this</strong></span> in your methods will always refer to the object whose method was called.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa1qe7"></a><a id="ch12qa1q7"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Is it better to create objects with a constructor than with object literals?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa1q7a7"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Both are useful. A constructor is useful when you want to create lots of objects with the same property names and methods. Using them is convenient, reuses code, and provides consistency across your objects.</p><p>But sometimes we just need a quick object, perhaps a one-time-use only object, and literals are concise and expressive to use for this.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note04"></a>Note</h3><p>We’ll see a good example of this a bit later.</p></div><p>So it really depends what your needs are. Both are great ways to create an object.</p></td></tr></tbody></table></div></blockquote></div></div><div class="sidebar"><a id="danger_zone"></a><p class="title">Danger Zone</p><div class="informalfigure"><a id="med_id00872a"></a><div class="mediaobject"><a id="med_id00872"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114058.png.jpg" alt="image with no caption" width="150" height="194"></div></div><p>There’s one aspect of constructors you need to be very careful about: don’t forget to use the <span class="strong"><strong>new</strong></span> keyword. It’s easy to do because a constructor is, after all, a function, and you can call it without <span class="strong"><strong>new</strong></span>. <span class="emphasis"><em>But if you forget <span class="strong"><strong>new</strong></span> on a constructor it can lead to buggy code that is hard to troubleshoot.</em></span> Let’s take a look at what can happen when you forget the <span class="strong"><strong>new</strong></span> keyword...</p><div class="informalfigure"><a id="med_id00873a"></a><div class="mediaobject"><a id="med_id00873"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114060.png.jpg" alt="image with no caption" width="647" height="325"></div></div><p><span class="strong"><strong>SAFETY CHECKLIST</strong></span></p><p>Okay, let’s read the checklist to see why this might have happened:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00146"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>Remember that <span class="strong"><strong>new</strong></span> first creates a new object before assigning it to <span class="strong"><strong>this</strong></span> (and then calling your constructor function). If you don’t use <span class="strong"><strong>new</strong></span>, a new object will never be created.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00147"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="border-bottom: 0.5pt solid ; " valign="top"><p>That means any references to <span class="strong"><strong>this</strong></span> in your constructor won’t refer to a new album object, but rather, will refer to the global object of your application.</p>
<div class="note" title="Note"><h3 class="title"><a id="ch12note05"></a>Note</h3><p>The global object is the top-level object, which is where global variables get stored. In browsers, this object is the window object.</p></div></td></tr><tr><td style="border-right: 0.5pt solid ; " valign="top"><p><span class="inlinemediaobject"><a id="inline_id00148"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2113016.png.jpg" alt="" width="16" height="16"></span></p></td><td style="" valign="top"><p>If you don’t use <span class="strong"><strong>new</strong></span> there’s no object to return from the constructor, which means there is no object assigned to the darkside variable, so darkside is undefined. That’s why when we try to call the play method, we get an error saying the object we’re trying to call it on is undefined.</p></td></tr></tbody></table></div><div class="informalfigure"><a id="med_id00874a"></a><div class="mediaobject"><a id="med_id00874"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114062.png.jpg" alt="image with no caption" width="200" height="125"></div></div></div><div class="informalfigure"><a id="med_id00875a"></a><div class="mediaobject"><a id="med_id00875"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114064.png.jpg" alt="image with no caption" width="498" height="625"></div></div><div class="sidebar"><a id="constructor_exposed"></a><p class="title">The Constructor Exposed</p><p><span class="strong"><strong>This week’s interview: Getting to know new</strong></span></p><p><span class="strong"><strong>Head First:</strong></span> <code class="literal">new</code>, where have you been hiding? How did we get to <a class="xref" href="ch12.html" title="Chapter&nbsp;12.&nbsp;Creating objects">Chapter&nbsp;12</a> before seeing you?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;There are still a lot of scripts out there that don’t use me, or use me without understanding me.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Why is that?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Because many scripters just use object literals or copy &amp; paste code that uses me, without understanding how I work.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;That’s a good point... object literals are convenient, and I myself am not quite clear on when or how to use you just yet.</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Well it’s true, I am kind of an advanced feature. After all, to know how to use me, you first have to know how objects work, and how functions work, and how <code class="literal">this</code> works... it’s a lot to wrap your head around before you even learn about me at all!</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Can you give us the elevator pitch about yourself? Now that our readers know about objects, functions, and <code class="literal">this</code>, it would be great for them to get motivated for learning about you.</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Let me think for a second... Okay here you go: I’m the operator that operates on constructor functions to create new objects.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Umm, I hate to break it to you but that isn’t the best elevator pitch.</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Gimme a break, I’m an operator, not a PR lackey.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Well, you do raise several questions with that pitch. First of all, you’re an operator?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Yup! I’m an operator. Put me in front of a function call and I change everything. An operator operates on its operands. In my case, I have only one operand and that operand is a function call.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Right, so explain exactly how you operate.</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Well, first, I make a new object. Everyone thinks that the constructor function is what does it, but it’s actually me. It’s a thankless job.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Go on...</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Okay, so then I call the constructor function and make sure that the new object I’ve created is referenced by the <code class="literal">this</code> keyword in the body of the function.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Why do you do that?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;So that the statements in the body of the function have a way to refer to the object. After all, the whole point of a constructor function is to extend that object using new properties and methods. If you’re using the constructor to create objects like dogs and cars, you’re going to want those objects to have some properties, right?</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;Right. And then?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Then I make sure that the new object that was created is returned from the constructor. It’s a nice convenience so that developers don’t have to remember to return it themselves.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;It does sound very convenient. Now why would anyone use an object literal after learning you?</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Oh, object literal and I go way back. He’s a great guy, and I’d use him in a second if I had to create a quick object. But, you want me when you’ve got to create a lot of similar objects, when you want to make sure your objects are taking advantage of code reuse, when you want to ensure some consistency, and after you’ve learned a little more, to support some even more advanced uses.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;More advanced? Oh do tell!</p><p title="new:"><span class="title"><strong><span class="strong"><strong>new:</strong></span></strong></span>&nbsp;Now now, let’s keep these readers focused. We’ll talk more in the next chapter.</p><p title="Head First:"><span class="title"><strong><span class="strong"><strong>Head First:</strong></span></strong></span>&nbsp;I think I need to re-read this interview first! Until then...</p></div></div></div><div class="sect1" title="It’s Production Time!"><div class="titlepage"><div><div><h1 class="title"><a id="itapostrophes_production_timeexclamation"></a>It’s Production Time!</h1></div></div></div><div class="informalfigure"><a id="med_id00876a"></a><div class="mediaobject"><a id="med_id00876"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114066.png.jpg" alt="image with no caption" width="548" height="248"></div></div><p><a id="iddle1381" class="indexterm"></a><a id="iddle2357" class="indexterm"></a>You’ve learned your object construction skills just in time because we’ve just received a big order for cars and we can’t be creating them all by hand. We need to use a constructor so we can get the job done on time. We’re going to do that by taking the car object literals we’ve used so far in the book, and using them as a guide for creating a constructor to make cars.</p><p>Check out the various kinds of cars we need to build below. Notice we’ve already taken the liberty of making their properties and methods uniform, so they all match across each car. For now, we won’t worry about special options, or toy cars and rocket cars (we’ll come back to that later). Go ahead and take a look, and then let’s build a constructor that can create car objects for any kind of car that has these property names and methods:</p><div class="informalfigure"><a id="med_id00877a"></a><div class="mediaobject"><a id="med_id00877"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114068.png.jpg" alt="image with no caption" width="858" height="627"></div></div><div class="sidebar"><a id="exersice"></a><p class="title">Exersice</p><p>Use everything you’ve learned to create a Car constructor. We suggest the following order:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Start by providing the function keyword (actually we did that for you) followed by the constructor name. Next supply the parameters; you’ll need one for each property that you want to supply an initial value for.</p></li><li class="listitem"><p>Next, assign each property in the object its initial value (make sure you use <code class="literal">this</code> along with the property name).</p></li><li class="listitem"><p>Finally, add in the three car methods: start, drive and stop.</p></li></ol></div><a id="pro_id00129"></a><pre class="programlisting"><span class="strong"><strong>function ________(______________________________________________) {</strong></span>





<span class="strong"><strong>}</strong></span></pre><div class="note" title="Note"><h3 class="title"><a id="ch12note05a"></a>Note</h3><p>All your work goes here.</p></div><div class="note" title="Note"><h3 class="title"><a id="ch12note05b"></a>Note</h3><p>Make sure you check all your work with the answer at the end of the chapter before proceeding!</p></div></div></div><div class="sect1" title="Let’s test drive some new cars"><div class="titlepage"><div><div><h1 class="title"><a id="letapostrophes_test_drive_some_new_cars"></a>Let’s test drive some new cars</h1></div></div></div><div class="informalfigure"><a id="med_id00878a"></a><div class="mediaobject"><a id="med_id00878"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114070.png.jpg" alt="image with no caption" width="343" height="52"></div></div><p>Now that we have a way to mass-produce car objects, let’s make some, and put them through their paces. Start by putting the Car constructor in an HTML page, then add some test code.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note06"></a>Note</h3><p>Note: you won’t be able to do this unless you did the exercise on the previous page! <span class="inlinemediaobject"><a id="inline_id00149"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114072.png.jpg" alt="" width="32" height="28"></span></p></div><p>Here’s the code we used; feel free to alter and extend it:</p><div class="informalfigure"><a id="med_id00879a"></a><div class="mediaobject"><a id="med_id00879"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114074.png.jpg" alt="image with no caption" width="765" height="600"></div></div><p>Are you starting to see how easy creating new objects can be with constructors? Now let’s take these cars for a test drive:</p><a id="pro_id00130"></a><pre class="programlisting"><span class="strong"><strong>var cars = [chevy, cadi, taxi, fiat, testCar];</strong></span>

<span class="strong"><strong>for(var i = 0; i &lt; cars.length; i++) {</strong></span>
    <span class="strong"><strong>cars[i].start();</strong></span>
    <span class="strong"><strong>cars[i].drive();</strong></span>
    <span class="strong"><strong>cars[i].drive();</strong></span>
    <span class="strong"><strong>cars[i].stop();</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note08b"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Chevy Bel Air goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Chevy Bel Air goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">GM Cadillac goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">GM Cadillac goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Webville Motors Taxi goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Webville Motors Taxi goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Fiat 500 goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Fiat 500 goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Webville Motors Test Car goes zoom zoom!</code></strong></span></p><p><span class="strong"><strong><code class="literal">Webville Motors Test Car goes zoom zoom!</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p>Here’s the output we got. Did you add your own car to the mix? Try changing what the cars do (like driving before the car is started). Or, maybe you can make the number of times we call the drive method random?</p></blockquote></div></div></div><div class="sect1" title="Don’t count out object literals just yet"><div class="titlepage"><div><div><h1 class="title"><a id="donapostrophet_count_out_object_literals"></a>Don’t count out object literals just yet</h1></div></div></div><p><a id="iddle1411" class="indexterm"></a><a id="iddle2195" class="indexterm"></a><a id="iddle2386" class="indexterm"></a><a id="iddle2470" class="indexterm"></a>We’ve had some discussion of object constructors versus object literals, and mentioned that object literals are still quite useful, but you really haven’t seen a good example of that. Well, let’s do a little reworking of the Car constructor code, so you can see where using some object literals actually cleans up the code and makes it more readable and maintainable.</p><p>Let’s look at the Car constructor again and see how we might be able to clean it up a bit.</p><div class="informalfigure"><a id="med_id00880a"></a><div class="mediaobject"><a id="med_id00880"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114076.png.jpg" alt="image with no caption" width="678" height="397"></div></div><p>So the problem we’re highlighting here is that we have a heck of a lot of parameters in the Car constructor, making it difficult to read and maintain. It’s also difficult to write code to call this constructor. While that might seem like a minor inconvenience, it actually causes more bugs than you might think, and not only that, they’re often nasty bugs that are hard to diagnose at first.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note07"></a>Note</h3><p>They’re hard to diagnose because if you switch two variables, the code is still syntactically correct, but it doesn’t function correctly because you’ve switched two values.</p></div><div class="note" title="Note"><h3 class="title"><a id="ch12note08"></a>Note</h3><p>Or if you leave out a value, all kinds of craziness can ensue!</p></div><p>However, there is a common technique that we can use when passing all these arguments that can be used for any function, whether or not it’s a constructor. The technique works like this: take all your arguments, throw them in an object literal, and then pass that literal to your function—that way you’re passing all your values in one container (the literal object) and you don’t have worry about matching the order of your arguments and parameters.</p><p>Let’s rewrite the code to call the Car constructor, and then do a slight rework of the constructor code to see how this works.</p></div><div class="sect1" title="Rewiring the arguments as an object literal"><div class="titlepage"><div><div><h1 class="title"><a id="rewiring_the_arguments_as_an_object_lite"></a>Rewiring the arguments as an object literal</h1></div></div></div><div class="informalfigure"><a id="med_id00881a"></a><div class="mediaobject"><a id="med_id00881"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114078.png.jpg" alt="image with no caption" width="200" height="149"></div></div><p>Let’s take the call to the Car constructor and rework its arguments into an object literal:</p><div class="informalfigure"><a id="med_id00882a"></a><div class="mediaobject"><a id="med_id00882"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114080.png.jpg" alt="image with no caption" width="780" height="363"></div></div><p>And then we can rewrite the call to the Car constructor like this:</p><div class="informalfigure"><a id="med_id00883a"></a><div class="mediaobject"><a id="med_id00883"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114082.png.jpg" alt="image with no caption" width="733" height="210"></div></div><p>But we’re not done yet because the constructor itself is still expecting seven arguments, not one object. Let’s rework the constructor code, and then we’ll give this a test.</p></div><div class="sect1" title="Reworking the Car constructor"><div class="titlepage"><div><div><h1 class="title"><a id="reworking_the_car_constructor"></a>Reworking the Car constructor</h1></div></div></div><p>Now you need to remove all the individual parameters in the Car constructor and replace them with properties from the object that we’re passing in. We’ll call that parameter <code class="literal">params</code>. You also need to rework the code a bit to use this object. Here’s how:</p><div class="informalfigure"><a id="med_id00884a"></a><div class="mediaobject"><a id="med_id00884"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114084.png.jpg" alt="image with no caption" width="738" height="756"></div></div><div class="sidebar"><a id="test_drive-id00210"></a><p class="title">Test drive</p><div class="informalfigure"><a id="med_id00885a"></a><div class="mediaobject"><a id="med_id00885"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112444.png.jpg" alt="image with no caption" width="144" height="47"></div></div><p>Update the <code class="literal">cadi</code> and all your other cars, and test your code.</p><a id="pro_id00131"></a><pre class="programlisting"><span class="strong"><strong>cadi.start();</strong></span>
<span class="strong"><strong>cadi.drive();</strong></span>
<span class="strong"><strong>cadi.drive();</strong></span>
<span class="strong"><strong>cadi.stop();</strong></span></pre></div><div class="sidebar"><a id="exercise-id00211"></a><p class="title">Exercise</p><p><a id="iddle2895" class="indexterm"></a>Copy the Car and Dog constructors into one file, and then add the code below along with it. Give this a run and capture the output.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note09"></a>Note</h3><p>You’ll find the Dog constructor in <a class="xref" href="ch12.html#you_can_put_methods_into_constructors_as" title="You can put methods into constructors as well">You can put methods into constructors as well</a>.</p></div><a id="pro_id00132"></a><pre class="programlisting"><span class="strong"><strong>var limoParams = {make: "Webville Motors",</strong></span>
                  <span class="strong"><strong>model: "limo",</strong></span>
                  <span class="strong"><strong>year: 1983,</strong></span>
                  <span class="strong"><strong>color: "black",</strong></span>
                  <span class="strong"><strong>passengers: 12,</strong></span>
                  <span class="strong"><strong>convertible: true,</strong></span>
                  <span class="strong"><strong>mileage: 21120};</strong></span>

<span class="strong"><strong>var limo = new Car(limoParams);</strong></span>
<span class="strong"><strong>var limoDog = new Dog("Rhapsody In Blue", "Poodle", 40);</strong></span>

<span class="strong"><strong>console.log(limo.make + " " + limo.model + " is a " + typeof limo);</strong></span>
<span class="strong"><strong>console.log(limoDog.name + " is a " + typeof limoDog);</strong></span></pre><div class="note" title="Note"><h3 class="title"><a id="ch12note10"></a>Note</h3><p>Put the output here.</p></div><div class="note" title="Brain Power"><h3 class="title"><a id="ch12note11"></a>Brain Power</h3><p>Say someone handed you an object and you wanted to know what type of object it was (is it a Car? a Dog? Superman?), or you wanted to see if it was the same type as another object. Would the typeof operator be helpful?</p></div></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00212"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa2qe1"></a><a id="ch12qa2q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Remind me what typeof does again?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa2q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> The typeof operator returns the type of its operand. If you pass it a string you’ll get back “string”, if you pass it an object you’ll get back “object” and so on. You can pass it any type: a number, a string, a boolean, or a more complex type like an object or function. But typeof can’t be more specific and tell you the object is a dog or a car.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa2qe2"></a><a id="ch12qa2q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: So if typeof can’t tell me that my object is a dog or car, how do I determine what is what?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa2q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Many other object-oriented languages, like Java or C++, have a strong notion of object typing. In those languages you can examine an object and determine exactly what type of object it is. But, JavaScript treats objects and their types in a looser, more dynamic way. Because of this, many developers have jumped to the conclusion that JavaScript has a less powerful object system, but the truth is, its object system is actually more general and flexible. Because JavaScript’s type system is more dynamic, it’s a little more difficult to determine if an object is a dog or a car, and it depends on what you think a dog is or a car is. However, we have another operator that can give us a little more information... so continue reading.</p></td></tr></tbody></table></div></blockquote></div></div></div><div class="sect1" title="Understanding Object Instances"><div class="titlepage"><div><div><h1 class="title"><a id="understanding_object_instances"></a>Understanding Object Instances</h1></div></div></div><p><a id="iddle1395" class="indexterm"></a><a id="iddle1408" class="indexterm"></a><a id="iddle2105" class="indexterm"></a><a id="iddle2326" class="indexterm"></a><a id="iddle2370" class="indexterm"></a><a id="iddle2383" class="indexterm"></a><a id="iddle2389" class="indexterm"></a><a id="iddle2536" class="indexterm"></a><a id="iddle2902" class="indexterm"></a>You can’t look at a JavaScript object and determine that it is an object of a specific type, like a dog or a car. In JavaScript, objects are dynamic structures, and the type of all objects is just “object,” no matter what properties and methods it has. But we can get some information about an object if we know the <span class="emphasis"><em>constructor</em></span> that created the object.</p><p>Remember that each time you call a constructor using the <code class="literal">new</code> operator, you are creating a new instance of an object. And, if you used, say, the Car constructor to do that, then we say, informally, that the object is a car. More formally, we say that object is an <span class="emphasis"><em>instance of</em></span> a Car.</p><div class="informalfigure"><a id="med_id00886a"></a><div class="mediaobject"><a id="med_id00886"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114086.png.jpg" alt="image with no caption" width="736" height="236"></div></div><p>Now saying an object is an instance of some constructor is more than just talk. We can actually write code to inspect the constructor that made an object with the <code class="literal">instanceof</code> operator. Let’s look at some code:</p><div class="informalfigure"><a id="med_id00887a"></a><div class="mediaobject"><a id="med_id00887"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114088.png.jpg" alt="image with no caption" width="755" height="174"></div></div><p>As it turns out, one of the things the <code class="literal">new</code> operator does behind the scenes when the object is created is to store information that allows it to determine, at any time, the constructor that created the object. And <code class="literal">instanceof</code> uses that to determine if an object is an instance of a certain constructor.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note12"></a>Note</h3><p>It’s a bit more complicated than we’re describing here, but we’ll talk about that in the next chapter.</p></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note13"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Congrats, it's a Car!</code></strong></span></p></div><div class="sidebar"><a id="exercise-id00213"></a><p class="title">Exercise</p><p>We need a function named dogCatcher that returns true if the object passed to it is a dog, and false otherwise. Write that function and test it with the rest of the code below. Don’t forget to check your answer at the end of the chapter before you go on!</p><div class="informalfigure"><a id="med_id00888a"></a><div class="mediaobject"><a id="med_id00888"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114090.png.jpg" alt="image with no caption" width="757" height="795"></div></div></div><div class="informalfigure"><a id="med_id00889a"></a><div class="mediaobject"><a id="med_id00889"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114092.png.jpg" alt="image with no caption" width="422" height="527"></div></div><p><span class="strong"><strong>Yes, that’s how it works.</strong></span> JavaScript doesn’t have a strong sense of an object’s type, so if you need to compare objects to see if they are both cats or both dogs, you check to see if they were constructed the same way—that is, with the same constructor function. As we’ve said, a cat is a cat if it was created by the Cat constructor, and a dog is a dog if it was created by the Dog constructor.</p><p>Now in the next chapter you’re going to see JavaScript constructors and objects are even more flexible than we’ve already seen. For instance, we might have an object that was created with a Taxi constructor, and yet we know that it is also a car. But for now, just stash that idea in the back of your brain and we’ll come back to it later.</p></div><div class="sect1" title="Even constructed objects can have their own independent properties"><div class="titlepage"><div><div><h1 class="title"><a id="even_constructed_objects_can_have_their"></a>Even constructed objects can have their own independent properties</h1></div></div></div><p><a id="iddle1389" class="indexterm"></a><a id="iddle2364" class="indexterm"></a><a id="iddle2670" class="indexterm"></a>We’ve talked a lot about how to use constructors to create consistent objects—objects that have the same set of properties and the same methods. But what we haven’t mentioned is that using constructors still doesn’t prevent us from changing an object into something else later, because after an object has been created by a constructor, it can be altered.</p><p>What exactly are we talking about? Remember when we introduced object literals? We looked at how we could add and delete properties after the object was created. You can do the same with objects created from constructors:</p><div class="informalfigure"><a id="med_id00890a"></a><div class="mediaobject"><a id="med_id00890"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114094.png.jpg" alt="image with no caption" width="494" height="184"></div></div><p>You can even add new methods if you like:</p><div class="informalfigure"><a id="med_id00891a"></a><div class="mediaobject"><a id="med_id00891"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114096.png.jpg" alt="image with no caption" width="489" height="159"></div></div><p>Notice that here we’re changing only the <code class="literal">fido</code> object. If we add a method to <code class="literal">fido</code>, only <code class="literal">fido</code> has that method. No other dogs have it:</p><div class="informalfigure"><a id="med_id00892a"></a><div class="mediaobject"><a id="med_id00892"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114098.png.jpg" alt="image with no caption" width="736" height="168"></div></div><div class="informalfigure"><a id="med_id00893a"></a><div class="mediaobject"><a id="med_id00893"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114100.png.jpg" alt="image with no caption" width="450" height="582"></div></div><p><a id="iddle2106" class="indexterm"></a><a id="iddle2903" class="indexterm"></a><span class="strong"><strong>Yes, a car is still a car, even if you change it later.</strong></span> And what we mean by that is if you check to see if your object is still an instance of Car, it will be. For instance, if we create a car object:</p><a id="pro_id00133"></a><pre class="programlisting"><span class="strong"><strong>var cadiParams = {make: "GM", model: "Cadillac",</strong></span>
                  <span class="strong"><strong>year: 1955, color: "tan",</strong></span>
                  <span class="strong"><strong>passengers: 5, convertible: false,</strong></span>
                  <span class="strong"><strong>mileage: 12892};</strong></span>
<span class="strong"><strong>var cadi = new Car(cadiParams);</strong></span></pre><p>We can add a new property <code class="literal">chrome</code> and delete the property <code class="literal">convertible</code>:</p><a id="pro_id00134"></a><pre class="programlisting"><span class="strong"><strong>cadi.chrome = true;</strong></span>
<span class="strong"><strong>delete cadi.convertible;</strong></span></pre><p>and yet, the <code class="literal">cadi</code> is still a car:</p><a id="pro_id00135"></a><pre class="programlisting"><span class="strong"><strong>cadi instanceof Car</strong></span></pre><div class="note" title="Note"><h3 class="title"><a id="ch12note14a"></a>Note</h3><p>Evaluates to true.</p></div><p>Now is it really a car in practical terms? What if we deleted every property in the object? Would it still be a car? The <code class="literal">instanceof</code> operator would tell us yes. But judging by our own terms, probably not.</p><div class="note" title="Note"><h3 class="title"><a id="ch12note14"></a>Note</h3><p>This is what we meant earlier when we said that JavaScript has a dynamic type system.</p></div><p>Chances are, you won’t often want to use a constructor to create an object and then later change it into something that’s unrecognizable as an object created by that constructor. In general, you’ll use constructors to create objects that are fairly consistent. But if you need objects that are more flexible, well, JavaScript can handle that. It’s your job as a code designer to decide how to use constructors and objects in a way that makes sense for you (and don’t forget your coworkers).</p></div><div class="sect1" title="Real World Constructors"><div class="titlepage"><div><div><h1 class="title"><a id="real_world_constructors"></a>Real World Constructors</h1></div></div></div><p><a id="iddle1266" class="indexterm"></a><a id="iddle1394" class="indexterm"></a><a id="iddle1409" class="indexterm"></a><a id="iddle1439" class="indexterm"></a><a id="iddle1917" class="indexterm"></a><a id="iddle1935" class="indexterm"></a><a id="iddle2327" class="indexterm"></a><a id="iddle2369" class="indexterm"></a><a id="iddle2384" class="indexterm"></a><a id="iddle2450" class="indexterm"></a><a id="iddle2473" class="indexterm"></a><a id="iddle2873" class="indexterm"></a>JavaScript comes with a set of constructors for instantiating some handy objects—like objects that know how to deal with dates and times, objects that are great at finding patterns in text, and even objects that will give you a new perspective on arrays. Now that you know how constructors work, and also how to use the <code class="literal">new</code> keyword, you’re in a great position to make use of these constructors, or more importantly the objects they create. Let’s just take a quick dip into a couple, and then you’ll be all ready to go out and explore them on your own.</p><div class="informalfigure"><a id="med_id00894a"></a><div class="mediaobject"><a id="med_id00894"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114102.png.jpg" alt="image with no caption" width="438" height="551"></div></div><p>Let’s start with JavaScript’s built-in date object. To get one we just use its constructor:</p><div class="informalfigure"><a id="med_id00895a"></a><div class="mediaobject"><a id="med_id00895"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114104.png.jpg" alt="image with no caption" width="460" height="37"></div></div><p>Calling the Date constructor gives you back an instance of Date that represents the current local date and time. With a date object in hand, you can then use its methods to manipulate dates (and times) and also retrieve various properties of a date and time. Here are a few examples:</p><div class="informalfigure"><a id="med_id00896a"></a><div class="mediaobject"><a id="med_id00896"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114106.png.jpg" alt="image with no caption" width="727" height="174"></div></div><p>You can easily create date objects representing any date and time by passing additional arguments to the Date constructor. For instance, say you need a date object representing “May 1, 1983”, you can do that with:</p><div class="informalfigure"><a id="med_id00897a"></a><div class="mediaobject"><a id="med_id00897"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114108.png.jpg" alt="image with no caption" width="600" height="37"></div></div><p>And you can get even more specific by including a time:</p><div class="informalfigure"><a id="med_id00898a"></a><div class="mediaobject"><a id="med_id00898"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114110.png.jpg" alt="image with no caption" width="608" height="49"></div></div><p>We are, of course, just giving you a flyby of the date object; you’ll want to check out its full set of properties and methods in <span class="emphasis"><em>JavaScript: The Definitive Guide</em></span>.</p></div><div class="sect1" title="The Array object"><div class="titlepage"><div><div><h1 class="title"><a id="array_object"></a>The Array object</h1></div></div></div><p><a id="iddle1045" class="indexterm"></a><a id="iddle1064" class="indexterm"></a><a id="iddle1376" class="indexterm"></a><a id="iddle1549" class="indexterm"></a><a id="iddle2444" class="indexterm"></a><a id="iddle2445" class="indexterm"></a>Next up, another interesting built-in object: the array object. While we’ve been creating arrays using the square bracket notation [1, 2, 3], you can create arrays using a constructor too:</p><div class="informalfigure"><a id="med_id00899a"></a><div class="mediaobject"><a id="med_id00899"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114112.png.jpg" alt="image with no caption" width="447" height="40"></div></div><p>Here, we’re creating a new, empty array object. And at any time we can add items to it, like this:</p><div class="informalfigure"><a id="med_id00900a"></a><div class="mediaobject"><a id="med_id00900"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114114.png.jpg" alt="image with no caption" width="491" height="44"></div></div><p>We can also create array objects that have a specific size. Say we want an array with three items:</p><div class="informalfigure"><a id="med_id00901a"></a><div class="mediaobject"><a id="med_id00901"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114116.png.jpg" alt="image with no caption" width="522" height="87"></div></div><p>Here we’ve created an array of length three. Initially the three items in <code class="literal">oddNumbers</code> are undefined, but we then set each item in the array to a value. You could easily add more items to the array if you wanted.</p><p>None of this should be shockingly different than what you’re used to. Where the array object gets interesting is in its set of methods. You already know about array’s <code class="literal">sort</code> method, and here are a few other interesting ones:</p><div class="informalfigure"><a id="med_id00902a"></a><div class="mediaobject"><a id="med_id00902"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114118.png.jpg" alt="image with no caption" width="760" height="262"></div></div><p>Again, that’s just the tip of the iceberg, so take a look at <span class="emphasis"><em>JavaScript: The Definitive Guide</em></span> to fully explore the array object. You’ve got all the knowledge you need to take it on.</p><div class="informalfigure"><a id="med_id00903a"></a><div class="mediaobject"><a id="med_id00903"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114120.png.jpg" alt="image with no caption" width="424" height="509"></div></div><p><a id="iddle1046" class="indexterm"></a><a id="iddle2811" class="indexterm"></a><span class="strong"><strong>Good catch.</strong></span> The bracket notation, [ ], that you’ve been using to create arrays is actually just a shorthand for using the Array constructor directly. Check out these two equivalent ways of creating empty arrays:</p><div class="informalfigure"><a id="med_id00904a"></a><div class="mediaobject"><a id="med_id00904"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114122.png.jpg" alt="image with no caption" width="493" height="80"></div></div><p>Likewise, if you write code like this:</p><div class="informalfigure"><a id="med_id00905a"></a><div class="mediaobject"><a id="med_id00905"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114124.png.jpg" alt="image with no caption" width="461" height="41"></div></div><p>That’s just a shorthand for using the constructor in another way:</p><div class="informalfigure"><a id="med_id00906a"></a><div class="mediaobject"><a id="med_id00906"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114126.png.jpg" alt="image with no caption" width="454" height="68"></div></div><p>And, the objects created from the literal notation or by using the constructor directly are the same, so you can use methods on either one.</p><p>You might be asking why you’d ever use the constructor rather than the literal notation. The constructor comes in handy when you need to create an array of a specific size you determine at runtime, and then add items to it later, like this:</p><div class="informalfigure"><a id="med_id00907a"></a><div class="mediaobject"><a id="med_id00907"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114128.png.jpg" alt="image with no caption" width="508" height="111"></div></div><p>So, for creating a quick array, using the array literal syntax to create your array objects works wonderfully, but using the Array constructor might make sense when you’re creating the array programmatically. You can use either or both as much as you want.</p></div><div class="sect1" title="Even more fun with built-in objects"><div class="titlepage"><div><div><h1 class="title"><a id="even_more_fun_with_built-in_objects"></a>Even more fun with built-in objects</h1></div></div></div><p><a id="iddle1440" class="indexterm"></a><a id="iddle1564" class="indexterm"></a><a id="iddle2251" class="indexterm"></a><a id="iddle2349" class="indexterm"></a><a id="iddle2487" class="indexterm"></a><a id="iddle2500" class="indexterm"></a><a id="iddle2523" class="indexterm"></a><a id="iddle2765" class="indexterm"></a>Date and array aren’t the only built-in objects in JavaScript. There are lots of other objects that come with the language you might find handy at times. Here’s a short list (there are more, so search online for “JavaScript’s standard built-in objects” if you’re curious!).</p><div class="note" title="Object"><h3 class="title"><a id="ch12note15"></a>Object</h3><p>By using the Object constructor you can create objects. Like arrays, the object literal notation { } is equivalent to using new Object(). More on this later.</p></div><div class="note" title="Math"><h3 class="title"><a id="ch12note16"></a>Math</h3><p>This object has properties and methods for doing math stuff. Like Math. PI and Math.random().</p></div><div class="note" title="RegExp"><h3 class="title"><a id="ch12note17"></a>RegExp</h3><p>Use this constructor to create regular expression objects, which allow you to search for patterns, even complex ones, in text.</p></div><div class="note" title="Error"><h3 class="title"><a id="ch12note18"></a>Error</h3><p>This constructor creates standard error objects that are handy when catching errors in your code.</p></div><div class="sidebar"><a id="there_are_no_dumb_questions-id00214"></a><p class="title">There are No Dumb Questions</p><div class="blockquote"><blockquote class="blockquote"><div class="qandaset" title="Frequently Asked Questions"><table border="0" width="100%" summary="Q and A Set"><colgroup><col align="left" width="1%"><col></colgroup><tbody><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa3qe1"></a><a id="ch12qa3q1"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: I’m confused by how the Date and Array constructors work: they seem to support zero or more arguments. Like with Date, if I don’t provide an argument, then I get today’s date, but I can also pass arguments to get other dates. How does that work?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa3q1a1"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Right, good catch. It’s possible to write
functions that do different things based on the number of arguments. So if the Array constructor has
zero arguments, the constructor knows it is creating an empty array; if it has one argument that’s a
number, it knows that’s the size of the array, and if it has more, then those arguments are
all initial values.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa3qe2"></a><a id="ch12qa3q2"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: Can we do that with our constructors?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa3q2a2"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Of course. This is something we haven’t covered, but every function gets passed an arguments object that contains all the arguments passed to the function. You can use this to determine what was passed and act appropriately (check the appendix for more on the arguments object). There are other techniques based on checking to see which of your parameters is set to undefined.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa3qe3"></a><a id="ch12qa3q3"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: We used Math earlier in the book. Why don’t I have to say “new Math” to instantiate a math object before I use it?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa3q3a3"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> Great question. Actually, Math is not a constructor, or even a function. It’s an object. As you know, Math is a built-in object that you can use to do things like get the value of pi (with <code class="literal">Math.PI</code>) or generate a random number (with <code class="literal">Math.random</code>). Think of Math as just like an object literal that has a bunch of useful properties and methods in it, built-in for you to use whenever you write JavaScript code. It just happens to have a capital first letter to let you know that it’s built-in to JavaScript.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa3qe4"></a><a id="ch12qa3q4"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: I know how to check if an object is an instance of a constructor name, but how do I write the code to ask if two objects have the same constructor?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa3q4a4"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> You can check to see if two objects have the same constructor like this:</p><a id="pro_id00136"></a><pre class="programlisting">((fido instanceof Dog) &amp;&amp;
          (spot instanceof Dog))</pre><p>If this expression results in true, then fido and spot were indeed created by the same constructor.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a id="ch12qa3qe5"></a><a id="ch12qa3q5"></a><p>Q:</p></td><td align="left" valign="top"><p><span class="strong"><strong>Q: If I create an object with an object literal, what is it an instance of? Or is it not an instance of anything?</strong></span></p></td></tr><tr class="answer"><td align="left" valign="top"><a id="ch12qa3q5a5"></a><p>A:</p></td><td align="left" valign="top"><p><span class="strong"><strong>A:</strong></span> An object literal is an instance of Object. Think of Object as the constructor for the most generic kind of object in JavaScript. You’ll learn much more about how Object figures into JavaScript’s object system in the next chapter.</p></td></tr></tbody></table></div></blockquote></div></div><div class="informalfigure"><a id="med_id00908a"></a><div class="mediaobject"><a id="med_id00908"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114130.png.jpg" alt="image with no caption" width="745" height="527"></div></div><p><span class="strong"><strong>Webville Motors</strong></span> is revolutionizing car production by creating all their cars from a prototype car. The prototype gives you all the basics you need: a way to start, drive and stop it along with a couple properties like the make and year it was manufactured—but the rest is up to you. Want it to be red or blue? No problem, just customize it. Need for it to have a fancy stereo? No problem, go crazy, add it.</p><p>So this is your opportunity to design your perfect car. Create a CarPrototype object below, and make the car of your dreams. Check out our design at the end of the chapter before moving on.</p><div class="informalfigure"><a id="med_id00909a"></a><div class="mediaobject"><a id="med_id00909"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114132.png.jpg" alt="image with no caption" width="822" height="391"></div></div><div class="sidebar"><a id="bullet_points-id00215"></a><p class="title">Bullet Points</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>An <span class="strong"><strong>object literal</strong></span> works well when you need to create a small number of objects.</p></li><li class="listitem"><p>A <span class="strong"><strong>constructor</strong></span> works well when you need to create many similar objects.</p></li><li class="listitem"><p>Constructors are functions that are meant to be used with the <span class="strong"><strong>new</strong></span> operator. We capitalize the names of constructors by convention.</p></li><li class="listitem"><p>Using a constructor we can create objects that are consistent, having the same property names and methods.</p></li><li class="listitem"><p>Use the <span class="strong"><strong>new</strong></span> operator with a constructor function call to create an object.</p></li><li class="listitem"><p>When you use <span class="strong"><strong>new</strong></span> with a constructor function call, it creates a new, empty object, which is assigned to <span class="strong"><strong>this</strong></span> within the body of the constructor.</p></li><li class="listitem"><p>Use <span class="strong"><strong>this</strong></span> in a constructor function to access the object being constructed and add properties to the object.</p></li><li class="listitem"><p>A new object is returned automatically by the constructor function.</p></li><li class="listitem"><p>If you forget to use <span class="strong"><strong>new</strong></span> with a constructor, no object is created. This will cause errors in your code that can be difficult to debug.</p></li><li class="listitem"><p>To customize objects, we pass arguments to a constructor, and use those values to initialize the properties of the object being created.</p></li><li class="listitem"><p>If a constructor has a lot of parameters, consider consolidating them into one object parameter.</p></li><li class="listitem"><p>To know if an object was created by a specific constructor, use the <span class="strong"><strong>instanceof</strong></span> operator.</p></li><li class="listitem"><p>You can modify an object that was created by a constructor just like you can modify an object literal.</p></li><li class="listitem"><p>JavaScript comes with a number of constructors you can use to create useful objects like date objects, regular expressions and arrays.</p></li></ul></div></div><div class="sidebar"><a id="javascript_cross-id00216"></a><p class="title">JavaScript cross</p><p>Construct some new connections in your brain with this crossword puzzle.</p><div class="informalfigure"><a id="med_id00910a"></a><div class="mediaobject"><a id="med_id00910"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114134.png" alt="image with no caption" width="686" height="467"></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col><col></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="top"><p>Across</p></th><th style="border-bottom: 0.5pt solid ; " valign="top"><p>Down</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; " valign="top"><p>2. A constructor is a ____________.</p>
<p>7. If you want to save my birthday in a variable, you’ll need a ______ constructor.</p>
<p>9. You can use an object literal to pass arguments to a constructor when the constructor has lots of these.</p>
<p>10. When you create an object from a constructor, we say it is an __________ of the constructor.</p>
<p>11. A constructor is a bit like a _______ cutter.</p>
<p>14. The constructor function returns the newly constructed __________.</p>
<p>15. If you forget to use new with a constructor, you might see a ___________.</p></td><td style="" valign="top"><p>1. Constructor syntax is a bit ______________.</p>
<p>3. You can add a property to an object created by a ________ whenever you want.</p>
<p>4. new is an __________, not a PR lackey.</p>
<p>5. The Webville Motors test car comes in this color.</p>
<p>6. Using a constructor, we can make our cars so they have all the same ___________.</p>
<p>8. Never hold a ___________ over your laptop.</p>
<p>12. The limo and the limoDog are the same _________.</p>
<p>13. To create an object with a constructor, you use the ____ operator.</p></td></tr></tbody></table></div></div><div class="sidebar"><a id="sharpen_your_pencil_solution-id00217"></a><p class="title">Sharpen your pencil Solution</p><p><a id="iddle1382" class="indexterm"></a><a id="iddle1405" class="indexterm"></a><a id="iddle2358" class="indexterm"></a><a id="iddle2380" class="indexterm"></a>We need your help. We’ve been using object literals to create ducks. Given what you learned above, can you write a constructor to create ducks for us? You’ll find one of our object literals below to base your constructor on. Here’s our solution.</p><div class="informalfigure"><a id="med_id00911a"></a><div class="mediaobject"><a id="med_id00911"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114136.png.jpg" alt="image with no caption" width="733" height="190"></div></div><div class="note" title="Note"><h3 class="title"><a id="ch12note19"></a>Note</h3><p>P.S. We know you haven’t fully figured out how this all works yet, so for now concentrate on the syntax.</p></div></div><div class="sidebar"><a id="exercise_solution-id00218"></a><p class="title">Exercise Solution</p><p>Get some quick hands on experience to help this all sink in. Go ahead and put this code in a page and give it a test drive. Write your output here.</p><a id="pro_id00137"></a><pre class="programlisting"><span class="strong"><strong>function Dog(name, breed, weight) {</strong></span>
    <span class="strong"><strong>this.name = name;</strong></span>
    <span class="strong"><strong>this.breed = breed;</strong></span>
    <span class="strong"><strong>this.weight = weight;</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>var fido = new Dog("Fido", "Mixed", 38);</strong></span>
<span class="strong"><strong>var fluffy = new Dog("Fluffy", "Poodle", 30);</strong></span>
<span class="strong"><strong>var spot = new Dog("Spot", "Chihuahua", 10);</strong></span>
<span class="strong"><strong>var dogs = [fido, fluffy, spot];</strong></span>

<span class="strong"><strong>for (var i = 0; i &lt; dogs.length; i++) {</strong></span>
    <span class="strong"><strong>var size = "small";</strong></span>
    <span class="strong"><strong>if (dogs[i].weight &gt; 10) {</strong></span>
        <span class="strong"><strong>size = "large";</strong></span>
    <span class="strong"><strong>}</strong></span>
    <span class="strong"><strong>console.log("Dog: " + dogs[i].name</strong></span>
                 <span class="strong"><strong>+ " is a " + size</strong></span>
                 <span class="strong"><strong>+ " " + dogs[i].breed);</strong></span>
<span class="strong"><strong>}</strong></span></pre><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note20"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Dog: Fido is a large Mixed</code></strong></span></p><p><span class="strong"><strong><code class="literal">Dog: Fluffy is a large Poodle</code></strong></span></p><p><span class="strong"><strong><code class="literal">Dog: Spot is a small Chihuahua</code></strong></span></p></div></div><div class="sidebar"><a id="be_the_browser_solution-id00219"></a><p class="title">BE the Browser Solution</p><div class="informalfigure"><a id="med_id00912a"></a><div class="mediaobject"><a id="med_id00912"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2112372.png.jpg" alt="image with no caption" width="136" height="156"></div></div><p><a id="iddle1388" class="indexterm"></a><a id="iddle2363" class="indexterm"></a><span class="strong"><strong>Below, you’ll find JavaScript code with some mistakes in it. Your job is to play like you’re the browser and find the errors in the code. Here’s our solution.</strong></span></p><div class="informalfigure"><a id="med_id00913a"></a><div class="mediaobject"><a id="med_id00913"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114138.png.jpg" alt="image with no caption" width="912" height="614"></div></div></div><div class="sidebar"><a id="exercise_solution-id00220"></a><p class="title">Exercise Solution</p><p><a id="iddle1019" class="indexterm"></a><a id="iddle1393" class="indexterm"></a><a id="iddle1718" class="indexterm"></a><a id="iddle1937" class="indexterm"></a><a id="iddle2269" class="indexterm"></a><a id="iddle2368" class="indexterm"></a><a id="iddle2874" class="indexterm"></a>We’ve got a constructor to create coffee drinks, but it’s missing its methods.</p><div class="informalfigure"><a id="med_id00914a"></a><div class="mediaobject"><a id="med_id00914"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114140.png.jpg" alt="image with no caption" width="211" height="129"></div></div><p>We need a method, getSize, that returns a string depending on the number of ounces of coffee:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>8oz is a small</p></li><li class="listitem"><p>12oz is a medium</p></li><li class="listitem"><p>16oz is a large</p></li></ul></div><p>We also need a method, toString, that returns a string specifying your order.</p><p>Write your code below, and then test it in the browser. Try creating a few different sizes of coffee. Here’s our solution.</p><div class="informalfigure"><a id="med_id00915a"></a><div class="mediaobject"><a id="med_id00915"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114142.png.jpg" alt="image with no caption" width="862" height="644"></div></div><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note20a"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">You’ve ordered a medium House Blend coffee.</code></strong></span></p><p><span class="strong"><strong><code class="literal">You’ve ordered a large Dark Roast coffee</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p>Here’s our output; yours should look similar.</p></blockquote></div></div></div><div class="sidebar"><a id="exercise_solution-id00221"></a><p class="title">Exercise Solution</p><p><a id="iddle1383" class="indexterm"></a><a id="iddle2359" class="indexterm"></a>Use everything you’ve learned to create a Car constructor. We suggest the following order:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>Start by providing the function keyword (actually we did that for you) followed by the constructor name. Next supply the parameters; you’ll need one for each property that you want to supply an initial value for.</p></li><li class="listitem"><p>Next, assign each property in the object its initial value (make sure you use <code class="literal">this</code> along with the property name).</p></li><li class="listitem"><p>Finally, add in the three car methods: start, drive and stop.</p></li></ol></div><p>Here’s our solution.</p><div class="informalfigure"><a id="med_id00916a"></a><div class="mediaobject"><a id="med_id00916"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114144.png.jpg" alt="image with no caption" width="614" height="519"></div></div></div><div class="sidebar"><a id="exercise_solution-id00222"></a><p class="title">Exercise Solution</p><p><a id="iddle1412" class="indexterm"></a><a id="iddle2196" class="indexterm"></a><a id="iddle2387" class="indexterm"></a><a id="iddle2471" class="indexterm"></a>Copy the Car and Dog constructors into one file, and then add the code below along with it. Give this a run and capture the output. Here’s our result:</p><a id="pro_id00138"></a><pre class="programlisting"><span class="strong"><strong>var limoParams = {make: "Webville Motors",</strong></span>
                  <span class="strong"><strong>model: "limo",</strong></span>
                  <span class="strong"><strong>year: 1983,</strong></span>
                  <span class="strong"><strong>color: "black",</strong></span>
                  <span class="strong"><strong>passengers: 12,</strong></span>
                  <span class="strong"><strong>convertible: true,</strong></span>
                  <span class="strong"><strong>mileage: 21120};</strong></span>

<span class="strong"><strong>var limo = new Car(limoParams);</strong></span>
<span class="strong"><strong>var limoDog = new Dog("Rhapsody In Blue", "Poodle", 40);</strong></span>

<span class="strong"><strong>console.log(limo.make + " " + limo.model + " is a " + typeof limo);</strong></span>
<span class="strong"><strong>console.log(limoDog.name + " is a " + typeof limoDog);</strong></span></pre><div class="note" title="JavaScript console"><h3 class="title"><a id="ch12note21"></a>JavaScript console</h3><p><span class="strong"><strong><code class="literal">Webville Motors limo is a object</code></strong></span></p><p><span class="strong"><strong><code class="literal">Rhapsody In Blue is a object</code></strong></span></p><div class="blockquote"><blockquote class="blockquote"><p><span class="strong"><strong>What we got.</strong></span></p></blockquote></div></div></div><div class="sidebar"><a id="exercise_solution-id00223"></a><p class="title">Exercise Solution</p><p><a id="iddle1396" class="indexterm"></a><a id="iddle2371" class="indexterm"></a><a id="iddle2390" class="indexterm"></a><a id="iddle2537" class="indexterm"></a>We need a function, dogCatcher, that returns true if the object passed to it is a Dog, and false otherwise. Write that function and test it with the rest of the code below. Here’s our solution:</p><div class="informalfigure"><a id="med_id00917a"></a><div class="mediaobject"><a id="med_id00917"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114146.png.jpg" alt="image with no caption" width="789" height="816"></div></div></div><div class="informalfigure"><a id="med_id00918a"></a><div class="mediaobject"><a id="med_id00918"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114148.png.jpg" alt="image with no caption" width="776" height="547"></div></div><p><span class="strong"><strong>Webville Motors</strong></span> is revolutionizing car production by creating all their cars from a prototype car. The prototype gives you all the basics you need: a way to start, drive and stop it along with a couple properties like the make and year it was manufactured—but the rest is up to you. Want it to be red or blue? No problem, just customize it. Need for it to have a fancy stereo? No problem, go crazy, add it.</p><p>So this is your opportunity to design your perfect car. Check out our design below.</p><div class="informalfigure"><a id="med_id00919a"></a><div class="mediaobject"><a id="med_id00919"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114150.png.jpg" alt="image with no caption" width="856" height="404"></div></div><div class="sidebar"><a id="javascript_cross_solution-id00224"></a><p class="title">JavaScript cross Solution</p><div class="informalfigure"><a id="med_id00920a"></a><div class="mediaobject"><a id="med_id00920"></a><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781449340124/files/httpatomoreillycomsourceoreillyimages2114152.png" alt="image with no caption" width="667" height="454"></div></div></div></div></div></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781449340124/files/core.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
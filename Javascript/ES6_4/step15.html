<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content" class="noOutline" tabindex="-1"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><h2 class="h2" id="app02"><span epub:type="pagebreak" id="page_305"></span><strong><span class="big">B</span><br>UNDERSTANDING ECMASCRIPT 7 (2016)</strong></h2>
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492017509/files/images/common-01.jpg" alt="image" width="204" height="203"></div>
        <p class="noindent">The development of ECMAScript 6 took about four years, and after that, TC-39 decided that such a long development process was unsustainable. Instead, it moved to a yearly release cycle to ensure new language features would make it into development sooner.</p>
        <p class="indent">More frequent releases mean that each new edition of ECMAScript should have fewer new features than ECMAScript 6. To signify this change, new versions of the specification no longer prominently feature the edition number and instead refer to the year in which the specification was published. As a result, ECMAScript 6 is also known as ECMAScript 2015, and ECMAScript 7 is formally known as ECMAScript 2016. TC-39 expects to use the year-based naming system for all future ECMAScript editions.</p>
        <p class="indent">ECMAScript 2016 was finalized in March 2016 and contained only three additions to the language: a new mathematical operator, a new array method, and a new syntax error. All three are covered in this appendix.</p>
        <h3 class="h3" id="app02lev1sec01"><span epub:type="pagebreak" id="page_306"></span><strong>The Exponentiation Operator</strong></h3>
        <p class="noindent">The only change to JavaScript syntax introduced in ECMAScript 2016 is the <em>exponentiation operator</em>, which is a mathematical operation that applies an exponent to a base. JavaScript already had the <span class="literal">Math.pow()</span> method to perform exponentiation, but JavaScript was also one of the only languages that required a method rather than a formal operator. In addition, some developers argue the operator is easier to read and reason about.</p>
        <p class="indent">The exponentiation operator is two asterisks (<span class="literal">**</span>): the left operand is the base, and the right operand is the exponent. For example:</p>
        <p class="programs">let result = 5 ** 2;<br><br>console.log(result);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 25<br>console.log(result === Math.pow(5, 2));&nbsp;&nbsp;&nbsp;&nbsp;// true</p>
        <p class="indent">This example calculates 5<sup>2</sup>, which is equal to 25. You can still use <span class="literal">Math.pow()</span> to achieve the same result.</p>
        <h4 class="h4" id="app02lev2sec01"><em><strong>Order of Operations</strong></em></h4>
        <p class="noindent">The exponentiation operator has the highest precedence of all binary operators in JavaScript (unary operators have higher precedence than <span class="literal">**</span>). That means it is applied first to any compound operation, as in this example:</p>
        <p class="programs">let result = 2 * 5 ** 2;<br>console.log(result);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 50</p>
        <p class="indent">The calculation of 5<sup>2</sup> happens first. The resulting value is then multiplied by 2 for a final result of 50.</p>
        <h4 class="h4" id="app02lev2sec02"><em><strong>Operand Restriction</strong></em></h4>
        <p class="noindent">The exponentiation operator does have a somewhat unusual restriction that other operators lack. The left side of an exponentiation operation cannot be a unary expression other than <span class="literal">++</span> or <span class="literal">--</span>. For example, this code uses invalid syntax:</p>
        <p class="programs">// syntax error<br>let result = -5 ** 2;</p>
        <p class="indent">The <span class="literal">-5</span> in this example is a syntax error because the order of operations is ambiguous. Does the <span class="literal">-</span> apply just to <span class="literal">5</span> or the result of the <span class="literal">5 ** 2</span> expression? Disallowing unary expressions on the left side of the exponentiation operator eliminates that ambiguity. To clearly specify intent, you need to include parentheses either around <span class="literal">-5</span> or around <span class="literal">5 ** 2</span> as follows:</p>
        <p class="programs">// okay<br>let result1 = -(5 ** 2);&nbsp;&nbsp;&nbsp;&nbsp;// equal to -25<br><span epub:type="pagebreak" id="page_307"></span><br>// also okay<br>let result2 = (-5) ** 2;&nbsp;&nbsp;&nbsp;&nbsp;// equal to 25</p>
        <p class="indent">If you put the parentheses around the expression, the <span class="literal">-</span> is applied to the entire expression. Surrounding <span class="literal">-5</span> with parentheses makes it clear that you want to raise –5 to the second power.</p>
        <p class="indent">You don’t need parentheses to use <span class="literal">++</span> and <span class="literal">--</span> on the left side of the exponentiation operator because both operators have clearly defined behavior on their operands. A prefix <span class="literal">++</span> or <span class="literal">--</span> changes the operand before any other operations take place, and the postfix versions don’t apply any changes until after the entire expression has been evaluated. Both use cases are safe on the left side of the operator in the following code:</p>
        <p class="programs">let num1 = 2,<br>&nbsp;&nbsp;&nbsp;&nbsp;num2 = 2;<br><br>console.log(++num1 ** 2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 9<br>console.log(num1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 3<br><br>console.log(num2-- ** 2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 4<br>console.log(num2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1</p>
        <p class="indent">In this example, <span class="literal">num1</span> is incremented before the exponentiation operator is applied, so <span class="literal">num1</span> becomes 3 and the result of the operation is 9. For <span class="literal">num2</span>, the value remains 2 for the exponentiation operation and then is decremented to 1.</p>
        <h3 class="h3" id="app02lev1sec02"><strong>The Array.prototype.includes() Method</strong></h3>
        <p class="noindent">You might recall that ECMAScript 6 added <span class="literal">String.prototype.includes()</span> to check whether certain substrings exist within a given string. Originally, ECMAScript 6 was also going to introduce an <span class="literal">Array.prototype.includes()</span> method to continue the trend of treating strings and arrays similarly. But the specification for <span class="literal">Array.prototype.includes()</span> was incomplete by the ECMAScript 6 deadline, so <span class="literal">Array.prototype.includes()</span> ended up in ECMAScript 2016 instead.</p>
        <h4 class="h4" id="app02lev2sec03"><em><strong>How to Use Array.prototype.includes()</strong></em></h4>
        <p class="noindent">The <span class="literal">Array.prototype.includes()</span> method accepts two arguments: the value to search for and an optional index from which to start the search. When the second argument is provided, <span class="literal">includes()</span> starts the match from that index. (The default starting index is 0.) The return value is <span class="literal">true</span> if the value is found inside the array and <span class="literal">false</span> if not. For example:</p>
        <p class="programs">let values = [1, 2, 3];<br><br>console.log(values.includes(1));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// true<br>console.log(values.includes(0));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// false<br><span epub:type="pagebreak" id="page_308"></span><br>// start the search from index 2<br>console.log(values.includes(1, 2));&nbsp;&nbsp;&nbsp;// false</p>
        <p class="indent">Here, calling <span class="literal">values.includes()</span> returns <span class="literal">true</span> for the value of <span class="literal">1</span> and <span class="literal">false</span> for the value of <span class="literal">0</span> because <span class="literal">0</span> isn’t in the array. When the second argument is used to start the search at index 2 (which contains the value 3), the <span class="literal">values.includes()</span> method returns <span class="literal">false</span> because <span class="literal">1</span> is not between index 2 and the end of the array.</p>
        <h4 class="h4" id="app02lev2sec04"><em><strong>Value Comparison</strong></em></h4>
        <p class="noindent">The value comparison performed by the <span class="literal">includes()</span> method uses the <span class="literal">===</span> operator with one exception: <span class="literal">NaN</span> is considered equal to <span class="literal">NaN</span> even though <span class="literal">NaN === NaN</span> evaluates to <span class="literal">false</span>. This is different than the behavior of the <span class="literal">indexOf()</span> method, which strictly uses <span class="literal">===</span> for comparison. To see the difference, consider this code:</p>
        <p class="programs">let values = [1, NaN, 2];<br><br>console.log(values.indexOf(NaN));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// -1<br>console.log(values.includes(NaN));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// true</p>
        <p class="indent">The <span class="literal">values.indexOf()</span> method returns –1 for <span class="literal">NaN</span> even though <span class="literal">NaN</span> is contained in the <span class="literal">values</span> array. On the other hand, <span class="literal">values.includes()</span> returns <span class="literal">true</span> for <span class="literal">NaN</span> because it uses a different value comparison operator.</p>
        <p class="indent">When you just want to check for the existence of a value in an array and don’t need to know the index, I recommend using <span class="literal">includes()</span> because of the difference in how <span class="literal">NaN</span> is treated by the <span class="literal">includes()</span> and <span class="literal">indexOf()</span> methods. If you do need to know where in the array a value exists, you have to use the <span class="literal">indexOf()</span> method.</p>
        <p class="indent">Another quirk of this implementation is that +0 and -0 are considered equal. In this case, the behavior of <span class="literal">indexOf()</span> and <span class="literal">includes()</span> is the same:</p>
        <p class="programs">let values = [1, +0, 2];<br><br>console.log(values.indexOf(-0));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 1<br>console.log(values.includes(-0));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// true</p>
        <p class="indent">Here, both <span class="literal">indexOf()</span> and <span class="literal">includes()</span> find +0 when -0 is passed because the two values are considered equal. Note that this is different than the behavior of the <span class="literal">Object.is()</span> method, which considers +0 and -0 to be different values.</p>
        <h3 class="h3" id="app02lev1sec03"><strong>A Change to Function-Scoped Strict Mode</strong></h3>
        <p class="noindent">When strict mode was introduced in ECMAScript 5, the language was quite a bit simpler than it became in ECMAScript 6, but ECMAScript 6 still allowed you to specify strict mode using the <span class="literal">"use strict"</span> directive. When the directive was used in the global scope, all code would run in strict mode; using the directive in a function scope caused the function to run only in strict <span epub:type="pagebreak" id="page_309"></span>mode. The latter was a problem in ECMAScript 6 because parameters could be defined in more complex ways—specifically, through destructuring and default parameter values.</p>
        <p class="indent">To understand the problem, consider the following code:</p>
        <p class="programs">function doSomething(first = this) {<br>&nbsp;&nbsp;&nbsp;&nbsp;"use strict";<br>&nbsp;&nbsp;&nbsp;&nbsp;return first;<br>}</p>
        <p class="indent">Here, the named parameter <span class="literal">first</span> is assigned a default value of <span class="literal">this</span>. You might expect the value of <span class="literal">first</span> to be <span class="literal">undefined</span> because the ECMAScript 6 specification instructed JavaScript engines to treat the parameters as being run in strict mode in cases like this. But implementing parameters running in strict mode when <span class="literal">"use strict"</span> is present inside the function was quite difficult because parameter default values can be functions as well. This difficulty led most JavaScript engines to not implement this feature and instead leave <span class="literal">this</span> equal to the global object.</p>
        <p class="indent">This implementation difficulty is why ECMAScript 2016 makes using a <span class="literal">"use strict"</span> directive inside a function whose parameters are either destructured or have default values illegal. Only <em>simple parameter lists</em>, those that don’t contain destructuring or default values, are allowed when <span class="literal">"use strict"</span> is present in the body of a function. For reference, here are some legal and illegal uses of the directive:</p>
        <p class="programs">// okay - uses simple parameter list<br>function okay(first, second) {<br>&nbsp;&nbsp;&nbsp;&nbsp;"use strict";<br>&nbsp;&nbsp;&nbsp;&nbsp;return first;<br>}<br><br>// syntax error<br>function notOkay1(first, second=first) {<br>&nbsp;&nbsp;&nbsp;&nbsp;"use strict";<br>&nbsp;&nbsp;&nbsp;&nbsp;return first;<br>}<br><br>// syntax error<br>function notOkay2({ first, second }) {<br>&nbsp;&nbsp;&nbsp;&nbsp;"use strict";<br>&nbsp;&nbsp;&nbsp;&nbsp;return first;<br>}</p>
        <p class="indent">You can still use <span class="literal">"use strict"</span> with simple parameter lists, which is why <span class="literal">okay()</span> works as you would expect (that is, the same way it would in ECMAScript 5). The <span class="literal">notOkay1()</span> function is a syntax error because you can no longer use <span class="literal">"use strict"</span> in functions with default parameter values in ECMAScript 2016. Similarly, the <span class="literal">notOkay2()</span> function is a syntax error because you can’t use <span class="literal">"use strict"</span> in a function with destructured parameters.</p>
        <p class="indent">Overall, this change removes a point of confusion for JavaScript developers and an implementation problem for JavaScript engines.<span epub:type="pagebreak" id="page_310"></span></p>
        </div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781492017509/files/styles/9781593277574.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section epub:type="chapter">
        <h2 class="ch2" id="ch02"><span epub:type="pagebreak" id="page_26"></span>Chapter 2. Control Structures</h2>
        <figure class="image-1">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/squirrel.jpg" alt="Images" width="119" height="119">
        </figure>
        <div class="outline">
        <p class="outh">Topics in This Chapter</p>
        <p class="chap-lev1"><a href="#ch02lev1sec1">2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expressions and Statements</a></p>
        <p class="chap-lev1"><a href="#ch02lev1sec2">2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Semicolon Insertion</a></p>
        <p class="chap-lev1"><a href="#ch02lev1sec3">2.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Branches</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/jokerc.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch02lev1sec4">2.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Boolishness</a></p>
        <p class="chap-lev1"><a href="#ch02lev1sec5">2.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comparison and Equality Testing</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/jokerc.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch02lev1sec6">2.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mixed Comparisons</a></p>
        <p class="chap-lev1"><a href="#ch02lev1sec7">2.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Boolean Operators</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queenc.jpg" alt="Images" width="24" height="24"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch02lev1sec8">2.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The <code>switch</code> Statement</a></p>
        <p class="chap-lev1"><a href="#ch02lev1sec9">2.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>while</code> and <code>do</code> Loops</a></p>
        <p class="chap-lev1a"><a href="#ch02lev1sec10">2.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>for</code> Loops</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queenc.jpg" alt="Images" width="24" height="24"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch02lev1sec11">2.11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Breaking and Continuing</a></p>
        <p class="chap-lev1a"><a href="#ch02lev1sec12">2.12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Catching Exceptions</a></p>
        <p class="chap-lev1a"><a href="#ch02lev1sec13">Exercises</a></p>
        </div>
        <p class="noindent"><span epub:type="pagebreak" id="page_27"></span>In this chapter, you will learn about the control structures of the JavaScript language: branches, loops, and catching exceptions. The chapter also gives an overview of JavaScript statements and describes the process of automatic semicolon insertion.</p>
        <section>
        <h3 class="h3" id="ch02lev1sec1">2.1 Expressions and Statements</h3>
        <p class="noindent">JavaScript, like Java and C++, differentiates between expressions and statements. An expression has a value. For example, <code>6 * 7</code> is an expression with value <code>42</code>. A method call such as <code>Math.max(6, 7)</code> is another example of an expression.</p>
        <p class="noindent">A statement never has a value. Instead, it is executed to achieve some effect.</p>
        <p class="noindent">For example,</p>
        <pre class="pre">let number = 6 * 7;</pre>
        <p class="noindent">is a statement whose effect is to declare and initialize the <code>number</code> variable. Such a statement is called a variable declaration.</p>
        <p class="noindent">Apart from variable declarations, other common statement types are branches and loops. You will see those later in this chapter.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_28"></span>The simplest form of a statement is an <em>expression statement</em>. It consists of an expression, followed by a semicolon. Here is an example:</p>
        <pre class="pre">console.log(6 * 7);</pre>
        <p class="noindent">The expression <code>console.log(6 * 7)</code> has a side effect—displaying <code>42</code> on the console. It also has a value, which happens to be <code>undefined</code>, since the <code>console.log</code> method has chosen not to return anything more interesting. Even if the expression had a more interesting value, it would not matter—the value of an expression statement is discarded.</p>
        <p class="noindent">Therefore, an expression statement is only useful for an expression that has a side effect. The expression statement</p>
        <pre class="pre">6 * 7;</pre>
        <p class="noindent">is legal JavaScript, but it has no effect in a program.</p>
        <p class="noindent">It is useful to understand the difference between expressions and statements—but in JavaScript, it is a bit tricky to see the difference between an expression and an expression statement. As you will see in the next section, a semicolon is automatically added if you write a line containing a single expression, turning it into a statement. For that reason, you cannot observe an expression in a browser’s JavaScript console or in Node.js.</p>
        <p class="noindent">For example, try typing <code>6 * 7</code>. The value of the expression is displayed:</p>
        <pre class="pre">6 * 7
        <strong>42</strong></pre>
        <p class="noindent">That is what a read-eval-print loop, or REPL, does: It reads an expression, evaluates it, and prints the value.</p>
        <p class="noindent">Except, because of automatic semicolon insertion, the JavaScript REPL actually sees the <em>statement</em></p>
        <pre class="pre">6 * 7;</pre>
        <p class="noindent">Statements don’t have values, but the JavaScript REPL displays values for them anyway.</p>
        <p class="noindent">Try typing in a variable declaration:</p>
        <pre class="pre">let number = 6 * 7;
        <strong>undefined</strong></pre>
        <p class="noindent">As you just saw, for an expression statement, the REPL displays the value of the expression. For a variable declaration, the REPL displays <code>undefined</code>. <a href="#ch02ex01">Exercise 1</a> explores what is displayed for other statements.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_29"></span>When you run your own experiments with the REPL, it is important that you know how to interpret the output. For example, type in this expression statement and observe the response:</p>
        <pre class="pre">console.log(6 * 7);
        <strong>42</strong>
        <strong>undefined</strong></pre>
        <p class="noindent">The first line of output is the side effect of the <code>console.log</code> call. The second line is the return value of the method call. As already mentioned, the <code>console.log</code> method returns <code>undefined</code>.</p>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec2">2.2 Semicolon Insertion</h3>
        <p class="noindent">In JavaScript, certain statements must be terminated with semicolons. The most common ones are variable declarations, expression statements, and nonlinear control flow (<code>break</code>, <code>continue</code>, <code>return</code>, <code>throw</code>). However, JavaScript will helpfully insert semicolons for you.</p>
        <p class="noindent">The basic rule is simple. When processing a statement, the parser includes every token until it encounters a semicolon or an “offending token”—something that could not be part of the statement. If the offending token is preceded by a line terminator, or is a <code>}</code>, or is the end of input, then the parser adds a semicolon.</p>
        <p class="noindent">Here is an example:</p>
        <p class="codelink"><a id="rch02pr01" href="ch02_images.xhtml#ch02pr01">Click here to view code image</a></p>
        <pre class="pre">let a = x
          <strong>+</strong> someComplicatedFunctionCall()
        <strong>let</strong> b = y</pre>
        <p class="noindent">No semicolon is added after the first line. The <code>+</code> token at the start of the second line is not “offending.”</p>
        <p class="noindent">But the <code>let</code> token at the start of the third line is offending. It could not have been a part of the first variable declaration. Because the offending token comes after a line terminator, a semicolon is inserted:</p>
        <p class="codelink"><a id="rch02pr02" href="ch02_images.xhtml#ch02pr02">Click here to view code image</a></p>
        <pre class="pre">let a = x
          + someComplicatedFunctionCall()<strong>;</strong>
        let b = y</pre>
        <p class="noindent">The “offending token” rule is simple, and it works well in almost all cases. However, it fails when a statement <em>starts</em> with a token that could have been a part of the preceding statement. Consider this example:</p>
        <pre class="pre">let x = a
        <strong>(</strong>console.log(6 * 7))</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_30"></span>No semicolon is inserted after <code>a</code>.</p>
        <p class="noindent">Syntactically,</p>
        <pre class="pre">a(console.log(6 * 7))</pre>
        <p class="noindent">is valid JavaScript: It calls a function <code>a</code> with the value returned by the call to <code>console.log</code>. In other words, the <code>(</code> token on the second line was <em>not</em> an offending token.</p>
        <p class="noindent">Of course, this example is rather artificial. The parentheses around <code>console.log(6 * 7)</code> were not necessary. Here is another commonly cited example:</p>
        <p class="codelink"><a id="rch02pr03" href="ch02_images.xhtml#ch02pr03">Click here to view code image</a></p>
        <pre class="pre">let a = x
        [1, 2, 3].forEach(console.log)</pre>
        <p class="noindent">Because a <code>[</code> can appear after <code>x</code>, no semicolon is inserted. In the unlikely case that you want to loop over an array literal in this way, store the array in a variable:</p>
        <p class="codelink"><a id="rch02pr04" href="ch02_images.xhtml#ch02pr04">Click here to view code image</a></p>
        <pre class="pre">let a = x
        const numbers = [1, 2, 3]
        numbers.forEach(console.log)</pre>
        <div class="tip">
        <p class="tip-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/tip.jpg" alt="Images" width="36" height="33"></span> Tip</p>
        <p class="noindent">Never start a statement with <code>(</code> or <code>[</code>. Then you don’t have to worry about the statement being considered a continuation of the previous line.</p>
        </div>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">In the absence of a semicolon, a line starting with a template or regular expression literal can be merged with the preceding line, for example:</p>
        <p class="codelink"><a id="rch02pr05" href="ch02_images.xhtml#ch02pr05">Click here to view code image</a></p>
        <pre class="pre">let a = x
        `Fred`.toUpperCase()</pre>
        <p class="noindent">Here, <code>x`Fred`</code> is parsed as a tagged template literal. But you would never write such code in practice. When you work with a string or regular expression, you want to use the result, and the literal won’t be at the start of the statement.</p>
        </div>
        <p class="noindent">The second semicolon rule can be more problematic. A semicolon is inserted after a nonlinear control flow statement (<code>break</code>, <code>continue</code>, <code>return</code>, <code>throw</code>, or <code>yield</code>) that is immediately followed by a line terminator. If you write</p>
        <p class="codelink"><a id="rch02pr06" href="ch02_images.xhtml#ch02pr06">Click here to view code image</a></p>
        <pre class="pre">return
          x + someComplicatedExpression;</pre>
        <p class="noindent">then a semicolon is automatically added:</p>
        <p class="codelink"><a id="rch02pr07" href="ch02_images.xhtml#ch02pr07">Click here to view code image</a></p>
        <pre class="pre">return <strong>;</strong>
          x + someComplicatedExpression;</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_31"></span>The function returns without yielding any value. The second line is an expression statement that is never executed.</p>
        <p class="noindent">The remedy is trivial. Don’t put a line break after <code>return</code>. Put at least one token of the return value expression in the same line:</p>
        <pre class="pre">return x +
          someComplicatedExpression;</pre>
        <p class="noindent">You must pay attention to this rule <em>even if you faithfully put semicolons everywhere</em>.</p>
        <p class="noindent">Apart from the “offending token” and “nonlinear control flow” rules, there is another obscure rule. A semicolon is inserted if a <code>++</code> or <code>--</code> is immediately preceded by a line terminator.</p>
        <p class="noindent">According to this rule,</p>
        <pre class="pre">x
        ++
        y</pre>
        <p class="noindent">means</p>
        <pre class="pre">x;
        ++y;</pre>
        <p class="noindent">As long as you keep the <code>++</code> on the same line as its operand, you don’t have to worry about this rule.</p>
        <p class="noindent">The automatic insertion rules are part of the language. They work tolerably well in practice. If you like semicolons, by all means, put them in. If you don’t, omit them. <em>Either way</em>, you need to pay attention to a couple of corner cases.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">Semicolons are <em>only</em> inserted before a line terminator or a <code>}</code>. If you have multiple statements on the same line, you need to provide semicolons:</p>
        <pre class="pre">if (i &lt; j) { i++<strong>;</strong> j-- }</pre>
        <p class="noindent">Here, the semicolon is necessary to separate the <code>i++</code> and <code>j--</code> statements.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec3">2.3 Branches</h3>
        <p class="noindent">If you are familiar with C, C++, Java, or C#, you can safely skip this section.</p>
        <p class="noindent">The conditional statement in JavaScript has the form</p>
        <pre class="pre">if (<span class="var">condition</span>) <span class="var">statement</span></pre>
        <p class="noindent">The condition must be surrounded by parentheses.</p>
        <div class="tip">
        <p class="tip-caption"><span epub:type="pagebreak" id="page_32"></span><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/tip.jpg" alt="Images" width="36" height="33"></span> Tip</p>
        <p class="noindent">In the condition, you should produce either <code>true</code> or <code>false</code>, even though JavaScript allows arbitrary values and converts them to Boolean values. As you will see in the next section, these conversions can be unintuitive and potentially dangerous. Follow the golden rule #3 from the preface:</p>
        <ul class="bullet">
        <li><p class="list-item">Know your types and avoid automatic type conversion.</p></li>
        </ul>
        </div>
        <p class="noindent">You will often want to execute multiple statements when a condition is fulfilled. In this case, use a <em>block statement</em> that takes the form</p>
        <p class="codelink"><a id="rch02pr08" href="ch02_images.xhtml#ch02pr08">Click here to view code image</a></p>
        <pre class="pre">{
           <span class="var">statement</span><sub>1</sub>
           <span class="var">statement</span><sub>2</sub>
           . . .
        }</pre>
        <p class="noindent">An optional <code>else</code> clause is executed when the condition is not fulfilled, for example:</p>
        <p class="codelink"><a id="rch02pr09" href="ch02_images.xhtml#ch02pr09">Click here to view code image</a></p>
        <pre class="pre">if (yourSales &gt; target) {
          performance = 'Good'
          bonus = 100
        } else {
          performance = 'Mediocre'
          bonus = 0
        }</pre>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">This example shows the “one true brace style” in which the opening brace is placed at the end of the line preceding the first statement of the block. This style is commonly used with JavaScript.</p>
        </div>
        <p class="noindent">If the <code>else</code> clause is another <code>if</code> statement, the following format is conventionally used:</p>
        <p class="codelink"><a id="rch02pr10" href="ch02_images.xhtml#ch02pr10">Click here to view code image</a></p>
        <pre class="pre">if (yourSales &gt; 2 * target) {
          performance = 'Excellent'
          bonus = 1000
        } else if (yourSales &gt; target) {
          performance = 'Good'
          bonus = 100
        } else {
          performance = 'Mediocre'
          bonus = 0
        }</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_33"></span>Braces are not necessary around single statements:</p>
        <pre class="pre">if (yourSales &gt; target)
          bonus = 100</pre>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">If you don’t use braces, or if you use braces but not the “one true brace style” with an <code>if</code>/<code>else</code> statement, then you can write code that works in a program file but fails when pasting into a JavaScript console. Consider this example:</p>
        <p class="codelink"><a id="rch02pr11" href="ch02_images.xhtml#ch02pr11">Click here to view code image</a></p>
        <pre class="pre">if (yourSales &gt; target)
          bonus = 100
        else
          bonus = 0</pre>
        <p class="noindent">Some JavaScript consoles analyze the code one line at a time. Such a console will think that the <code>if</code> statement is complete before the <code>else</code> clause. To avoid this problem, use braces or place the entire <code>if</code> statement in a single line</p>
        <p class="codelink"><a id="rch02pr12" href="ch02_images.xhtml#ch02pr12">Click here to view code image</a></p>
        <pre class="pre">if (yourSales &gt; target) bonus = 100; else bonus = 0</pre>
        </div>
        <p class="noindent">It is sometimes convenient to have an expression analog to the <code>if</code> statement. Consider computing the larger of two values:</p>
        <p class="codelink"><a id="rch02pr13" href="ch02_images.xhtml#ch02pr13">Click here to view code image</a></p>
        <pre class="pre">let max = undefined
        if (x &gt; y) max = x; else max = y</pre>
        <p class="noindent">It would be nicer to initialize <code>max</code> with the larger of <code>x</code> and <code>y</code>. Since <code>if</code> is a statement, we cannot write:</p>
        <p class="codelink"><a id="rch02pr14" href="ch02_images.xhtml#ch02pr14">Click here to view code image</a></p>
        <pre class="pre">let max = if (x &gt; y) x else y // <span class="cite">Error—<code>if</code> statement not expected</span></pre>
        <p class="noindent">Instead, use the <code>? :</code> operator, also called the “conditional” operator. The expression <code><span class="var">condition</span> ? <span class="var">first</span> : <span class="var">second</span></code> evaluates to <code><span class="var">first</span></code> if the condition is fulfilled, <code><span class="var">second</span></code> otherwise. This solves our problem:</p>
        <p class="codelink"><a id="rch02pr15" href="ch02_images.xhtml#ch02pr15">Click here to view code image</a></p>
        <pre class="pre">let max = x &gt; y ? x : y</pre>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">The expression <code>x &gt; y ? x : y</code> is a convenient example to illustrate the conditional operator, but you should use the standard library method <code>Math.max</code> if you need the largest of two or more values.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec4"><span epub:type="pagebreak" id="page_34"></span>2.4 Boolishness</h3>
        <figure class="image-1">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/joker.jpg" alt="Images" width="103" height="103">
        </figure>
        <p class="noindent">This is a “mad hatter” section that describes a confusing feature of JavaScript in some detail. Feel free to skip the section if you follow the advice of the preceding section and only use Boolean values in conditions.</p>
        <p class="noindent">In JavaScript, conditions (such as the one in the <code>if</code> statement) need not be Boolean values. The “falsish” values <code>0</code>, <code>NaN</code>, <code>null</code>, <code>undefined</code>, and the empty string make the condition fail. All other values are “truish” and make the condition succeed. These are also often called “falsy” or “truthy.” None of these is an official term in the language specification.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">Boolishness also applies for loop conditions, the operands of the Boolean operators <code>&amp;&amp;</code>, <code>||</code>, and <code>!</code>, and the first operand of the <code>? :</code> operator. All these constructs are covered later in this chapter.</p>
        </div>
        <p class="noindent">The Boolean conversion rule sounds reasonable at first glance. Suppose you have a variable <code>performance</code>, and you only want to use it if it isn’t <code>undefined</code>. So you write:</p>
        <pre class="pre">if (performance) . . . // <span class="cite"><em>Danger</em></span></pre>
        <p class="noindent">Sure, the test fails as expected if <code>performance</code> is <code>undefined</code>. As a freebie, it also fails if <code>performance</code> is <code>null</code>.</p>
        <p class="noindent">But what if <code>performance</code> is the empty string? Or the number zero? Do you really want to treat these values the same way as absent values? Sometimes you do, and sometimes you don’t. Shouldn’t your code clearly indicate what your intent is? Just write what you mean:</p>
        <pre class="pre">if (performance !== undefined) . . .</pre>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec5">2.5 Comparison and Equality Testing</h3>
        <p class="noindent">JavaScript has the usual assortment of comparison operators:</p>
        <p class="codelink"><a id="rch02pr16" href="ch02_images.xhtml#ch02pr16">Click here to view code image</a></p>
        <pre class="pre">&lt;  <span class="cite">less than</span>
        &lt;= <span class="cite">less than or equal</span>
        &gt;  <span class="cite">greater than</span>
        &gt;= <span class="cite">greater than or equal</span></pre>
        <p class="noindent">When used to compare numbers, these operators are unsurprising:</p>
        <p class="codelink"><a id="rch02pr17" href="ch02_images.xhtml#ch02pr17">Click here to view code image</a></p>
        <pre class="pre">3 &lt; 4 // true
        3 &gt;= 4 // false</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_35"></span>Any comparison involving <code>NaN</code> yields <code>false</code>:</p>
        <p class="codelink"><a id="rch02pr18" href="ch02_images.xhtml#ch02pr18">Click here to view code image</a></p>
        <pre class="pre">NaN &lt; 4 // false
        NaN &gt;= 4 // false
        NaN &lt;= NaN // false</pre>
        <p class="noindent">The same operators also compare strings, using lexicographic order.</p>
        <p class="codelink"><a id="rch02pr19" href="ch02_images.xhtml#ch02pr19">Click here to view code image</a></p>
        <pre class="pre">'<strong>H</strong>ello' &lt; '<strong>G</strong>oodbye' // <span class="cite"><code>false</code>—<code>H</code> comes after <code>G</code></span>
        'H<strong>e</strong>llo' &lt; 'H<strong>i</strong>' // <span class="cite"><code>true</code>—<code>e</code> comes before <code>i</code></span></pre>
        <p class="noindent">When comparing values with <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, be sure that both operands are numbers or both operands are strings. Convert operands explicitly if necessary. Otherwise, JavaScript will convert operands for you, sometimes with undesirable results—see the following section.</p>
        <p class="noindent">Use these operators to test for equality:</p>
        <p class="codelink"><a id="rch02pr20" href="ch02_images.xhtml#ch02pr20">Click here to view code image</a></p>
        <pre class="pre">=== <span class="cite">strictly equal to</span>
        !== <span class="cite">not strictly equal to</span></pre>
        <p class="noindent">The strict equality operators are straightforward. Operands of different types are never strictly equal. The <code>undefined</code> and <code>null</code> values are only strictly equal to themselves. Numbers, Boolean values, and strings are strictly equal if their values are equal.</p>
        <p class="codelink"><a id="rch02pr21" href="ch02_images.xhtml#ch02pr21">Click here to view code image</a></p>
        <pre class="pre">'42' === 42 // <span class="cite"><code>false</code>—different types</span>
        undefined === null // <span class="cite"><code>false</code></span>
        '42' === '4' + 2 // <span class="cite"><code>true</code>—same string value <code>'42'</code></span></pre>
        <p class="noindent">There are also “loose equality” operators <code>==</code> and <code>!=</code> that can compare values of different types. This is not generally useful—see the following section if you care about the details.</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">You cannot use</p>
        <pre class="pre">x === NaN</pre>
        <p class="noindent">to check whether <code>x</code> equals <code>NaN</code>. No two <code>NaN</code> values are considered to be equal to one another. Instead, call <code>Number.isNaN(x)</code>.</p>
        </div>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent"><code>Object.is(x, y)</code> is almost the same as <code>x === y</code>, except that <code>Object.is(+0, -0)</code> is <code>false</code> and <code>Object.is(NaN, NaN)</code> is <code>true</code>.</p>
        </div>
        <p class="noindent">As in Java and Python, equality of objects (including arrays) means that the two operands refer to the same object. References to different objects are never equal, even if both objects have the same contents.<span epub:type="pagebreak" id="page_36"></span></p>
        <p class="codelink"><a id="rch02pr22" href="ch02_images.xhtml#ch02pr22">Click here to view code image</a></p>
        <pre class="pre">let harry = { name: 'Harry Smith', age: 42 }
        let harry2 = harry
        harry === harry2 // <span class="cite"><code>true</code>—two references to the same object</span>
        let harry3 = { name: 'Harry Smith', age: 42 }
        harry === harry3 // <span class="cite"><code>false</code>—different objects</span></pre>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec6">2.6 Mixed Comparisons</h3>
        <figure class="image-1">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/joker.jpg" alt="Images" width="103" height="103">
        </figure>
        <p class="noindent">This is another “mad hatter” section that describes potentially confusing features of JavaScript in some detail. By all means, skip the section if you follow the advice of the golden rule #3—to avoid mixed-type comparisons, and in particular the “weak equality” operators (<code>==</code> and <code>!=</code>).</p>
        <p class="noindent">Still here? Let’s first look at mixed-type comparisons with the <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> operators.</p>
        <p class="noindent">If one operand is a number, the other operand is converted to a number. Suppose the other operand is a string. The conversion yields the numeric value if the string happens to contain a number, <code>0</code> if the string is empty, or <code>NaN</code> otherwise. Moreover, any comparison involving <code>NaN</code> is <code>false</code>—even <code>NaN &lt;= NaN</code>.</p>
        <p class="codelink"><a id="rch02pr23" href="ch02_images.xhtml#ch02pr23">Click here to view code image</a></p>
        <pre class="pre">'42' &lt; 5 // <span class="cite"><code>false</code>—<code>'42'</code> is converted to the number <code>42</code></span>
        '' &lt; 5 // <span class="cite"><code>true</code>—<code>''</code> is converted to the number <code>0</code></span>
        'Hello' &lt;= 5 // <span class="cite"><code>false</code>—<code>'Hello'</code> is converted to <code>NaN</code></span>
        5 &lt;= 'Hello' // <span class="cite"><code>false</code>—<code>'Hello'</code> is converted to <code>NaN</code></span></pre>
        <p class="noindent">Now suppose the other operand is an array:</p>
        <p class="codelink"><a id="rch02pr24" href="ch02_images.xhtml#ch02pr24">Click here to view code image</a></p>
        <pre class="pre">[4] &lt; 5 // <span class="cite"><code>true</code>—<code>[4]</code> is converted to the number <code>4</code></span>
        [] &lt; 5 // <span class="cite"><code>true</code>—<code>[]</code> is converted to the number <code>0</code></span>
        [3, 4] &lt; 5 // <span class="cite"><code>false</code>—<code>[3, 4]</code> is converted to <code>NaN</code></span></pre>
        <p class="noindent">If neither operand is a number, both are converted to strings. These comparisons rarely yield meaningful outcomes:</p>
        <p class="codelink"><a id="rch02pr25" href="ch02_images.xhtml#ch02pr25">Click here to view code image</a></p>
        <pre class="pre">[1, 2, 3] &lt; {} // true—[1, 2, 3] <span class="cite">is converted to</span> '1,2,3', {} <span class="cite">to</span> '[object Object]'</pre>
        <p class="noindent">Next, let us look at loose equality <code><span class="var">x</span> == <span class="var">y</span></code> more closely. Here is how it works:</p>
        <ul class="bullet">
        <li><p class="list-item">If the two operands have the same type, compare them strictly.</p></li>
        <li><p class="list-item">The values <code>undefined</code> and <code>null</code> are loosely equal to themselves <em>and each other</em> but not to any other values.</p></li>
        <li><p class="list-item">If one operand is a number and the other a string, convert the string to a number and compare strictly.</p></li>
        <li><p class="list-item">If one operand is a Boolean value, convert both to numbers and compare strictly.<span epub:type="pagebreak" id="page_37"></span></p></li>
        <li><p class="list-item">If one operand is an object but the other is not, convert the object to a primitive type (see <a href="ch08.xhtml#ch08">Chapter 8</a>), then compare loosely.</p></li>
        </ul>
        <p class="noindent">For example:</p>
        <p class="codelink"><a id="rch02pr26" href="ch02_images.xhtml#ch02pr26">Click here to view code image</a></p>
        <pre class="pre">'' == 0 // true—'' <span class="cite">is converted to</span> 0
        '0' == 0 // true—'0' <span class="cite">is converted to</span> 0
        '0' == false // true—<span class="cite">both are converted to</span> 0
        undefined == false // false—undefined <span class="cite">is only equal to itself and</span> null</pre>
        <p class="noindent">Have another look at the strings <code>''</code> and <code>'0'</code>. They are both “equal to” <code>0</code>. But they are not “equal to” each other:</p>
        <p class="codelink"><a id="rch02pr27" href="ch02_images.xhtml#ch02pr27">Click here to view code image</a></p>
        <pre class="pre">'' == '0' // false—<span class="cite">no conversion since both operands are strings</span></pre>
        <p class="noindent">As you can see, the loose comparison rules are not very useful and can easily lead to subtle errors. Avoid this quagmire by using strict equality operators (<code>===</code> and <code>!==</code>).</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">The loose comparison <code>x == null</code> actually tests whether <code>x</code> is <code>undefined</code> or <code>null</code>, and <code>x != null</code> tests whether <code>x</code> is neither. Some programmers who have resolved never to use loose equality make an exception for this case.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec7">2.7 Boolean Operators</h3>
        <p class="noindent">JavaScript has three operators to combine Boolean values:</p>
        <pre class="pre">&amp;&amp; <span class="cite">and</span>
        || <span class="cite">or</span>
        !  <span class="cite">not</span></pre>
        <p class="noindent">The expression <code>x &amp;&amp; y</code> is <code>true</code> if both <code>x</code> and <code>y</code> are <code>true</code>, and <code>x || y</code> is <code>true</code> if at least one of <code>x</code> and <code>y</code> are. The expression <code>!x</code> is <code>true</code> if <code>x</code> is <code>false</code>.</p>
        <p class="noindent">The <code>&amp;&amp;</code> and <code>||</code> operators are evaluated lazily. If the left operand decides the result (falsish for <code>&amp;&amp;</code>, truish for <code>||</code>), the right operand is not evaluated. This is often useful—for example:</p>
        <p class="codelink"><a id="rch02pr28" href="ch02_images.xhtml#ch02pr28">Click here to view code image</a></p>
        <pre class="pre">if (i &lt; a.length &amp;&amp; a[i] &gt; 0) // a[i] &gt; 0 <span class="cite">is not evaluated if</span> i ≥ a.length</pre>
        <p class="noindent">The <code>&amp;&amp;</code> and <code>||</code> operands have another curious twist if the operands are not Boolean values. They yield one of the operands as the expression value. If the left operand decides the result, it becomes the value of the expression, and the right operand is not evaluated. Otherwise, the expression value is the value of the right operand.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_38"></span>For example:</p>
        <p class="codelink"><a id="rch02pr29" href="ch02_images.xhtml#ch02pr29">Click here to view code image</a></p>
        <pre class="pre">0 &amp;&amp; 'Harry' // 0
        0 || 'Harry' // 'Harry'</pre>
        <p class="noindent">Some programmers try to take advantage of this behavior and write code such as the following:</p>
        <p class="codelink"><a id="rch02pr30" href="ch02_images.xhtml#ch02pr30">Click here to view code image</a></p>
        <pre class="pre">let result = arg &amp;&amp; arg.someMethod()</pre>
        <p class="noindent">The intent is to check that <code>arg</code> isn’t <code>undefined</code> or <code>null</code> before calling the method. If it is, then <code>result</code> is also <code>undefined</code> or <code>null</code>. This idiom breaks down if <code>arg</code> is zero, an empty string, or <code>false</code>.</p>
        <p class="noindent">Another use is to produce a default value when a method returns <code>undefined</code> or <code>null</code>:</p>
        <p class="codelink"><a id="rch02pr31" href="ch02_images.xhtml#ch02pr31">Click here to view code image</a></p>
        <pre class="pre">let result = arg.someMethod() || defaultValue</pre>
        <p class="noindent">Again, this breaks down if the method can return zero, an empty string, or <code>false</code>.</p>
        <p class="noindent">What is needed is a convenient way of using a value unless it is <code>undefined</code> or <code>null</code>. Two operators for this are, as of early 2020, in “proposal stage 3,” which means they are likely to be adopted in a future version of JavaScript.</p>
        <p class="noindent">The expression <code>x ?? y</code> yields <code>x</code> if <code>x</code> is not <code>undefined</code> or <code>null</code>, and <code>y</code> otherwise. In the expression</p>
        <p class="codelink"><a id="rch02pr32" href="ch02_images.xhtml#ch02pr32">Click here to view code image</a></p>
        <pre class="pre">let result = arg.someMethod() ?? defaultValue</pre>
        <p class="noindent">the default value is used only when the method returns <code>undefined</code> or <code>null</code>.</p>
        <p class="noindent">The expression <code>x?.<span class="var">propertyName</span></code> yields the given property if <code>x</code> is not <code>undefined</code> or <code>null</code>, and <code>undefined</code> otherwise. Consider</p>
        <pre class="pre">let recipient = person?.name</pre>
        <p class="noindent">If <code>person</code> is neither <code>undefined</code> nor <code>null</code>, then the right-hand side is exactly the same as <code>person.name</code>. But if <code>person</code> is <code>undefined</code> or <code>null</code>, then <code>recipient</code> is set to <code>undefined</code>. If you had used the <code>.</code> operator instead of <code>?.</code>, then an exception would have occurred.</p>
        <p class="noindent">You can chain the <code>?.</code> operators:</p>
        <p class="codelink"><a id="rch02pr33" href="ch02_images.xhtml#ch02pr33">Click here to view code image</a></p>
        <pre class="pre">let recipientLength = person?.name?.length</pre>
        <p class="noindent">If <code>person</code> or <code>person.name</code> is <code>undefined</code> or <code>null</code>, then <code>recipientLength</code> is set to <code>undefined</code>.</p>
        <div class="note">
        <p class="note-caption"><span epub:type="pagebreak" id="page_39"></span><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">JavaScript also has bitwise operators <code>&amp; | ^ ~</code> that first truncate their operands to 32-bit integers and then combine their bits, exactly like their counterparts in Java or C++. There are shift operators <code>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</code> that shift the bits, with the left operand truncated to a 32-bit integer and the right operand truncated to a 5-bit integer. If you need to fiddle with individual bits of 32-bit integers, go ahead and use these operators. Otherwise, stay away from them.</p>
        </div>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Some programmers use the expression <code>x | 0</code> to remove the fractional part of a number <code>x</code>. This produces incorrect results if <code>x</code> ≥ 2<sup>31</sup>. It is better to use <code>Math.floor(x)</code> instead.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec8">2.8 The <code>switch</code> Statement</h3>
        <figure class="image-1">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">JavaScript has a <code>switch</code> statement that is just like the <code>switch</code> statement in C, C++, Java, and C#—warts and all. Skip this section if you are familiar with <code>switch</code>.</p>
        <p class="noindent">The <code>switch</code> statement compares an expression with many possible values. Here is an example:</p>
        <p class="codelink"><a id="rch02pr34" href="ch02_images.xhtml#ch02pr34">Click here to view code image</a></p>
        <pre class="pre">let description = ''
        switch (someExpression) {
          case 0:
            description = 'zero'
            break
          case false:
          case true:
            description = 'boolean'
            break
          case '':
            description = 'empty string' // <span class="cite">See the “Caution” note below</span>
          default:
            description = 'something else'
        }</pre>
        <p class="noindent">Execution starts at the <code>case</code> label that strictly equals the value of the expression and continues until the next <code>break</code> or the end of the <code>switch</code> statement. If none of the <code>case</code> labels match, then execution starts at the <code>default</code> label if it is present.</p>
        <p class="noindent">Since strict equality is used for matching, case labels should not be objects.</p>
        <div class="caution">
        <p class="caution-caption"><span epub:type="pagebreak" id="page_40"></span><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">If you forget to add a <code>break</code> at the end of an alternative, execution falls through to the next alternative! This happens in the preceding example when <code>value</code> is the empty string. The <code>description</code> is first set to <code>'empty string'</code>, then to <code>'something else'</code>. This “fall through” behavior is plainly dangerous and a common cause for errors. For that reason, some developers avoid the <code>switch</code> statement.</p>
        </div>
        <div class="tip">
        <p class="tip-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/tip.jpg" alt="Images" width="36" height="33"></span> Tip</p>
        <p class="noindent">In many cases, the difference in performance between a <code>switch</code> statement and the equivalent set of <code>if</code> statements is negligible. However, if you have a large number of cases, then the virtual machine can use a “jump table” for efficiently jumping to the appropriate case.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec9">2.9 <code>while</code> and <code>do</code> Loops</h3>
        <p class="noindent">This is another section that you can skip if you know C, C++, Java, or C#.</p>
        <p class="noindent">The <code>while</code> loop executes a statement (which may be a block statement) while a condition is fulfilled. The general form is</p>
        <pre class="pre">while (<span class="var">condition</span>) <span class="var">statement</span></pre>
        <p class="noindent">The following loop determines how long it will take to save a specific amount of money for your well-earned retirement, assuming you deposit the same amount of money per year and the money earns a specified interest rate.</p>
        <p class="codelink"><a id="rch02pr35" href="ch02_images.xhtml#ch02pr35">Click here to view code image</a></p>
        <pre class="pre">let years = 0
        <strong>while</strong> (balance &lt; goal) {
          balance += paymentAmount
          let interest = balance * interestRate / 100
          balance += interest
          years++
        }
        console.log(`${years} years.`)</pre>
        <p class="noindent">The <code>while</code> loop will never execute if the condition is <code>false</code> at the outset. If you want to make sure a block is executed at least once, you need to move the test to the bottom, using the <code>do/while</code> loop. Its syntax looks like this:</p>
        <pre class="pre">do <span class="var">statement</span> while (<span class="var">condition</span>)</pre>
        <p class="noindent">This loop executes the statement (which is typically a block) and then tests the condition. If the condition is fulfilled, the statement and the test are repeated. Here is an example. Suppose we just processed <code>s[i]</code> and are now looking at the next space in the string:<span epub:type="pagebreak" id="page_41"></span></p>
        <p class="codelink"><a id="rch02pr36" href="ch02_images.xhtml#ch02pr36">Click here to view code image</a></p>
        <pre class="pre">do {
          i++
        } while (i &lt; s.length &amp;&amp; s[i] != ' ')</pre>
        <p class="noindent">When the loop ends, either <code>i</code> is past the end of the string, or <code>s[i]</code> is a space.</p>
        <p class="noindent">The <code>do</code> loop is much less common than the <code>while</code> loop.</p>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec10">2.10 <code>for</code> Loops</h3>
        <p class="noindent">The <code>for</code> loop is a general construct for iterating over elements. The following three sections discuss the variants that JavaScript offers.</p>
        <section>
        <h4 class="h4" id="ch02lev2sec10_1">2.10.1 The Classic <code>for</code> Loop</h4>
        <p class="noindent">The classic form of the <code>for</code> loop works just like in C, C++, Java, or C#. It works with a counter or similar variable that is updated after every iteration. The following loop logs the numbers from 1 to 10:</p>
        <p class="codelink"><a id="rch02pr37" href="ch02_images.xhtml#ch02pr37">Click here to view code image</a></p>
        <pre class="pre">for (let i = 1; i &lt;= 10; i++)
          console.log(i)</pre>
        <p class="noindent">The first slot of the <code>for</code> statement holds the counter initialization. The second slot gives the condition that will be tested before each new pass through the loop. The third slot specifies how to update the counter after each loop iteration.</p>
        <p class="noindent">The nature of the initialization, test, and update depends on the kind of traversal that you want. For example, this loop visits the elements of an array in reverse order:</p>
        <p class="codelink"><a id="rch02pr38" href="ch02_images.xhtml#ch02pr38">Click here to view code image</a></p>
        <pre class="pre">for (let i = a.length - 1; i &gt;= 0; i--)
          console.log(a[i])</pre>
        <div class="tip">
        <p class="tip-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/tip.jpg" alt="Images" width="36" height="33"></span> Tip</p>
        <p class="noindent">You can place arbitrary variable declarations or expressions in the first slot, and arbitrary expressions in the other slots of a <code>for</code> loop. However, it is an unwritten rule of good taste that you should initialize, test, and update the same variable.</p></div>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">It is possible to cram multiple update expressions into the third slot of a <code>for</code> loop by using the <em>comma operator</em>:</p>
        <p class="codelink"><a id="rch02pr39" href="ch02_images.xhtml#ch02pr39">Click here to view code image</a></p>
        <pre class="pre">for (let i = 0, j = a.length - 1; i &lt; j; i++<strong>,</strong> j--) {
          let temp = a[i]
          a[i] = a[j]
          a[j] = temp
        }</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_42"></span>In the expression <code>i++, j--</code>, the comma operator joins the two expressions <code>i++</code> and <code>j--</code> to a new expression. The value of a comma expression is the value of the second operand. In this situation, the value is unused—we only care about the side effects of incrementing and decrementing.</p>
        <p class="noindent">The comma operator is generally unloved because it can be confusing. For example, <code>Math.max((9, 3))</code> is the maximum of the single value <code>(9, 3)</code>—that is, <code>3</code>.</p>
        <p class="noindent">The comma in the declaration <code>let i = 0, j = a.length - 1</code> is not a comma operator but a syntactical part of the <code>let</code> statement. This statement declares two variables <code>i</code> and <code>j</code>.</p>
        </div>
        </section>
        <section>
        <h4 class="h4" id="ch02lev2sec10_2">2.10.2 The <code>for of</code> Loop</h4>
        <p class="noindent">The <code>for of</code> loop iterates over the elements of an <em>iterable object</em>, most commonly an array or string. (In <a href="ch08.xhtml#ch08">Chapter 8</a>, you will see how to make other objects iterable.)</p>
        <p class="noindent">Here is an example:</p>
        <p class="codelink"><a id="rch02pr40" href="ch02_images.xhtml#ch02pr40">Click here to view code image</a></p>
        <pre class="pre">let arr = [, 2, , 4]
        arr[9] = 100
        for (const element of arr)
          console.log(element) // <span class="cite">Prints <code>undefined</code>, <code>2</code>, <code>undefined</code>, <code>4</code>, <code>undefined</code> (5 times), <code>100</code></span></pre>
        <p class="noindent">The loop visits all elements of the array from index 0 to <code>arr.length</code> − 1, in increasing order. The elements at indexes 0, 2, and 4 through 8 are reported as <code>undefined</code>.</p>
        <p class="noindent">The variable <code>element</code> is created in each loop iteration and initialized with the current element value. It is declared as <code>const</code> since it is not changed in the loop body.</p>
        <p class="noindent">The <code>for of</code> loop is a pleasant improvement over the classic <code>for</code> loop if you need to process all elements in a array. However, there are still plenty of opportunities to use the classic <code>for</code> loop. For example, you might not want to traverse the entire array, or you may need the index value inside the loop.</p>
        <p class="noindent">When the <code>for of</code> loop iterates over a string, it visits each <em>Unicode code point</em>. That is the behavior that you want. For example:</p>
        <p class="codelink"><a id="rch02pr41" href="ch02_images.xhtml#ch02pr41">Click here to view code image</a></p>
        <pre class="pre">let greeting = 'Hello <span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>'
        for (const c of greeting)
          console.log(c) // <span class="cite">Prints <code>H e l l o</code>, a space, and <span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span></span></pre>
        <p class="noindent">You need not worry about the fact that <span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span> uses two code units, stored in <code>greeting[6]</code> and <code>greeting[7]</code>.</p>
        </section>
        <section>
        <h4 class="h4" id="ch02lev2sec10_3"><span epub:type="pagebreak" id="page_43"></span>2.10.3 The <code>for in</code> Loop</h4>
        <p class="noindent">You cannot use the <code>for of</code> loop to iterate over the property values of an arbitrary object, and you probably wouldn’t want to—the property values are usually meaningless without the keys. Instead, visit the keys with the <code>for in</code> loop:</p>
        <p class="codelink"><a id="rch02pr42" href="ch02_images.xhtml#ch02pr42">Click here to view code image</a></p>
        <pre class="pre">let obj = { name: 'Harry Smith', age: 42 }
        for (const key in obj)
          console.log(`${key}: ${obj[key]}`)</pre>
        <p class="noindent">This loop prints <code>age: 42</code> and <code>name: Harry Smith</code> in some order.</p>
        <p class="noindent">The <code>for in</code> loop traverses the keys of the given object. As you will see in <a href="ch04.xhtml#ch04">Chapters 4</a> and <a href="ch08.xhtml#ch08">8</a>, “prototype” properties are included in the iteration, whereas certain “nonenumerable” properties are skipped. The order in which the keys are traversed depends on the implementation, so you should not rely on it.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">The <code>for of</code> loop in JavaScript is the same as the “generalized” <code>for</code> loop in Java, also called the “for each” loop. The <code>for in</code> loop in JavaScript has no Java equivalent.</p>
        </div>
        <p class="noindent">You can use a <code>for in</code> loop to iterate over the property names of an array.</p>
        <p class="codelink"><a id="rch02pr43" href="ch02_images.xhtml#ch02pr43">Click here to view code image</a></p>
        <pre class="pre">let numbers = [1, 2, , 4]
        numbers[99] = 100
        for (const i in numbers)
          console.log(`${i}: ${numbers[i]}`)</pre>
        <p class="noindent">This loop sets <code>i</code> to <code>'0'</code>, <code>'1'</code>, <code>'3'</code>, and <code>'99'</code>. Note that, as for all JavaScript objects, the property keys are strings. Even though common JavaScript implementations iterate over arrays in numerical order, it is best not to rely on that. If the iteration order matters to you, it is best to use a <code>for of</code> loop or a classic <code>for</code> loop.</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Beware of expressions such as <code>numbers[i + 1]</code> in a <code>for in</code> loop. For example,</p>
        <p class="codelink"><a id="rch02pr44" href="ch02_images.xhtml#ch02pr44">Click here to view code image</a></p>
        <pre class="pre">if (numbers[i] === numbers[i + 1]) // <span class="cite">Error!</span> <code>i + 1</code> <span class="cite">is</span> <code>'01'</code>, <code>'11'</code>, <span class="cite">and so on</span></pre>
        <p class="noindent">The condition does <em>not</em> compare adjacent elements. Since <code>i</code> holds a string, the <code>+</code> operator <em>concatenates strings</em>. If <code>i</code> is <code>'0'</code>, then <code>i + 1</code> is <code>'01'</code>.</p>
        <p class="noindent">To fix this problem, convert the string <code>i</code> to a number:</p>
        <p class="codelink"><a id="rch02pr45" href="ch02_images.xhtml#ch02pr45">Click here to view code image</a></p>
        <pre class="pre">if (numbers[i] === numbers[<strong>parseInt(i)</strong> + 1])</pre>
        <p class="noindent">Or use a classic <code>for</code> loop.</p>
        </div>
        <p class="noindent"><span epub:type="pagebreak" id="page_44"></span>Of course, if you add other properties to your array, they are also visited:</p>
        <p class="codelink"><a id="rch02pr46" href="ch02_images.xhtml#ch02pr46">Click here to view code image</a></p>
        <pre class="pre">numbers.lucky = true
        for (const i in numbers) // <span class="cite"><code>i</code> is <code>'0'</code>, <code>'1'</code>, <code>'3'</code>, <code>'99'</code>, <code>'lucky'</code></span>
          console.log(`${i}: ${numbers[i]}`)</pre>
        <p class="noindent">As you will see in <a href="ch04.xhtml#ch04">Chapter 4</a>, it is possible for others to add enumerable properties to <code>Array.prototype</code> or <code>Object.prototype</code>. Those will show up in a <code>for in</code> loop. Therefore, modern JavaScript etiquette strongly discourages this practice. Nevertheless, some programmers warn against the <code>for in</code> loop because they worry about legacy libraries or colleagues who paste random code from the Internet.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">In the next chapter, you will learn about another way of iterating over an array, using functional programming techniques. For example, you can log all array elements like this:</p>
        <p class="codelink"><a id="rch02pr47" href="ch02_images.xhtml#ch02pr47">Click here to view code image</a></p>
        <pre class="pre">arr.forEach((element, key) =&gt; { console.log(`${key}: ${element}`) })</pre>
        <p class="noindent">The provided function is called for all elements and index keys (as numbers 0 1 3 99, not strings).</p>
        </div>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">When the <code>for in</code> loop iterates over a string, it visits the indexes of each <em>Unicode code unit</em>. That is probably not what you want. For example:</p>
        <p class="codelink"><a id="rch02pr48" href="ch02_images.xhtml#ch02pr48">Click here to view code image</a></p>
        <pre class="pre">let greeting = 'Hello <span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>'
        for (const i of greeting)
          console.log(greeting[i])
            // <span class="cite">Prints <code>H e l l o</code>, a space, and two broken symbols</span></pre>
        <p class="noindent">The indexes 6 and 7 for the two code units of the Unicode character <span class="middle"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span> are visited separately.</p>
        </div>
        </section>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec11">2.11 Breaking and Continuing</h3>
        <figure class="image-1">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">Sometimes, you want to exit a loop as soon as you reach a goal. Suppose you look for the position of the first negative element in an array:</p>
        <p class="codelink"><a id="rch02pr49" href="ch02_images.xhtml#ch02pr49">Click here to view code image</a></p>
        <pre class="pre">let i = 0
        while (i &lt; arr.length) {
          if (arr[i] &lt; 0) . . .
          . . .
        }</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_45"></span>Upon seeing a negative element, you just want to exit the loop, so that <code>i</code> stays at the position of the element. That is what the <code>break</code> statement accomplishes.</p>
        <p class="codelink"><a id="rch02pr50" href="ch02_images.xhtml#ch02pr50">Click here to view code image</a></p>
        <pre class="pre">let i = 0
        while (i &lt; arr.length) {
          if (arr[i] &lt; 0) <code>break</code>
          i++
        }
        // <span class="cite">Get here after</span> <code>break</code> <span class="cite">or when the loop terminates normally</span></pre>
        <p class="noindent">The <code>break</code> statement is never necessary. You can always add a Boolean variable to control the loop termination—often called something like <code>done</code> or <code>found</code>:</p>
        <p class="codelink"><a id="rch02pr51" href="ch02_images.xhtml#ch02pr51">Click here to view code image</a></p>
        <pre class="pre">let i = 0
        let found = false
        while (!found &amp;&amp; i &lt; arr.length) {
          if (arr[i] &lt; 0) {
            found = true
          } else {
            i++
          }
        }</pre>
        <p class="noindent">Like Java, JavaScript offers a <em>labeled break</em> statement that lets you break out of multiple nested loops. Suppose you want to find the location of the first negative element in a two-dimensional array. When you have found it, you need to break out of two loops. Add a label (that is, an identifier followed by a colon) <em>before</em> the outer loop. A labeled <code>break</code> jumps <em>after</em> the labeled loop:</p>
        <p class="codelink"><a id="rch02pr52" href="ch02_images.xhtml#ch02pr52">Click here to view code image</a></p>
        <pre class="pre">let i = 0
        let j = 0
        outer:
        while (i &lt; arr.length) {
          while (j &lt; arr[i].length) {
            if (arr[i][j] &lt; 0) break outer
            j++
          }
          i++
          j = 0
        }
        // <span class="cite">Get here after</span> <code>break outer</code> <span class="cite">or when both loops terminate normally</span></pre>
        <p class="noindent">The label in a labeled <code>break</code> statement must be on the same line as the <code>break</code> keyword.</p>
        <p class="noindent">Labeled breaks are not common.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_46"></span>Finally, there is a <code>continue</code> statement that, like the <code>break</code> statement, breaks the regular flow of control. The <code>continue</code> statement transfers control to the end of the innermost enclosing loop. Here is an example—averaging the positive elements of an array:</p>
        <p class="codelink"><a id="rch02pr53" href="ch02_images.xhtml#ch02pr53">Click here to view code image</a></p>
        <pre class="pre">let count = 0
        let sum = 0
        for (let i = 0; i &lt; arr.length; i++) {
          if (arr[i] &lt;= 0) continue
          count++
          sum += arr[i]
        }
        let avg = count === 0 ? 0 : sum / count</pre>
        <p class="noindent">When an element is not positive, the <code>continue</code> statement jumps immediately to the loop header, skipping the remainder of <em>only the current</em> iteration.</p>
        <p class="noindent">If a <code>continue</code> statement is used in a <code>for</code> loop, it jumps to the “update” part of the <code>for</code> loop, as in this example.</p>
        <p class="noindent">There is also a labeled form of the <code>continue</code> statement that jumps to the end of the loop with the matching label. Such statements are very uncommon.</p>
        <p class="noindent">Many programmers find the <code>break</code> and <code>continue</code> statements confusing. They are easily avoided, and in this book, I will not use them.</p>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec12">2.12 Catching Exceptions</h3>
        <p class="noindent">Some methods return an error value when they are invoked with invalid arguments. For example, <code>parseFloat('')</code> returns a <code>NaN</code> value.</p>
        <p class="noindent">However, it is not always a good idea to return an error value. There may be no obvious way of distinguishing valid and invalid values. The <code>parseFloat</code> method is a good example. The call <code>parseFloat('NaN')</code> returns <code>NaN</code>, just like <code>parseFloat('Infinity')</code> returns the <code>Infinity</code> value. When <code>parseFloat</code> returns <code>NaN</code>, you cannot tell whether it parsed a valid <code>'NaN'</code> string or an invalid argument.</p>
        <p class="noindent">In JavaScript, a method can take an alternative exit path if it is unable to complete its task in the normal way. Instead of returning a value, a method can <em>throw an exception</em>. In that case, execution does not resume at the code that called the method. Instead, a <em>catch clause</em> is executed. If an exception is not caught anywhere, the program terminates.</p>
        <p class="noindent">To catch an exception, use a <code>try</code> statement. The simplest form of this statement is as follows:<span epub:type="pagebreak" id="page_47"></span></p>
        <p class="codelink"><a id="rch02pr54" href="ch02_images.xhtml#ch02pr54">Click here to view code image</a></p>
        <pre class="pre">try {
          <span class="var">code</span>
          <span class="var">more code</span>
          <span class="var">more code</span>
        } catch {
          <span class="var">handler</span>
        }</pre>
        <p class="noindent">If any code inside the <code>try</code> block throws an exception, then the program skips the remainder of the code in the <code>try</code> block and executes the handler code inside the <code>catch</code> clause.</p>
        <p class="noindent">For example, suppose you receive a JSON string and parse it. The call to <code>JSON.parse</code> throws an exception if the argument is not valid JSON. Handle that situation in the <code>catch</code> clause:</p>
        <p class="codelink"><a id="rch02pr55" href="ch02_images.xhtml#ch02pr55">Click here to view code image</a></p>
        <pre class="pre">let input = . . . // <span class="cite">Read input from somewhere</span>
        try {
          let data = JSON.parse(input)
          // <span class="cite">If execution continues here, input is valid</span>
          // <span class="cite">Process <code>data</code></span>
          . . .
        } catch {
          // <span class="cite">Deal with the fact that the input is invalid</span>
          . . .
        }</pre>
        <p class="noindent">In the handler, you can log that information, or take some evasive action to deal with the fact that you were handed a bad JSON string.</p>
        <p class="noindent">In <a href="ch03.xhtml#ch03">Chapter 3</a>, you will see additional variations of the <code>try</code> statement that give you more control over the exception handling process. There, you will also see how to throw your own exceptions.</p>
        </section>
        <section>
        <h3 class="h3" id="ch02lev1sec13">Exercises</h3>
        <ol class="ol-exe">
        <li><p class="list" id="ch02ex01">Browser consoles and the Node.js REPL display values when you enter statements. What values are displayed for the following kinds of statements?</p>
        <ul class="bullet">
        <li><p class="list-item">An expression statement</p></li>
        <li><p class="list-item">A variable declaration</p></li>
        <li><p class="list-item">A block statement with at least one statement inside</p></li>
        <li><p class="list-item">An empty block statement</p></li>
        <li><p class="list-item">A <code>while</code>, <code>do</code>, or <code>for</code> loop whose body is executed at least once<span epub:type="pagebreak" id="page_48"></span></p></li>
        <li><p class="list-item">A loop whose body is never executed</p></li>
        <li><p class="list-item">An <code>if</code> statement</p></li>
        <li><p class="list-item">A <code>try</code> statement that completes normally</p></li>
        <li><p class="list-item">A <code>try</code> statement whose <code>catch</code> clause is executed</p></li>
        </ul></li>
        <li><p class="list" id="ch02ex02">What is wrong with the statement</p>
        <p class="codelink"><a id="rch02pr56" href="ch02_images.xhtml#ch02pr56">Click here to view code image</a></p>
        <pre class="pre">if (x === 0) console.log('zero') else console.log('nonzero')</pre>
        <p class="noindent">How do you fix the problem?</p></li>
        <li><p class="list" id="ch02ex03">Consider a statement</p>
        <pre class="pre">let x = a</pre>
        <p class="noindent">Which tokens could start the next line that prevent a semicolon to be inserted? Which ones can realistically occur in an actual program?</p></li>
        <li><p class="list" id="ch02ex04">What are the results of comparing <code>undefined</code>, <code>null</code>, <code>0</code>, and <code>''</code> values with the operators <code>&lt; &lt;= ==</code>? Why?</p></li>
        <li><p class="list" id="ch02ex05">Is <code>a || b</code> always the same as <code>a ? a : b</code>, no matter what type <code>a</code> and <code>b</code> are? Why or why not? Can you express <code>a &amp;&amp; b</code> in a similar way?</p></li>
        <li><p class="list" id="ch02ex06">Use the three kinds of <code>for</code> loop for finding the largest value in an array of numbers.</p></li>
        <li><p class="list" id="ch02ex07">Consider this code snippet:</p>
        <p class="codelink"><a id="rch02pr57" href="ch02_images.xhtml#ch02pr57">Click here to view code image</a></p>
        <pre class="pre">let arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
        for (i in arr) { if (i + 1 === 10) console.log(a[i]) }</pre>
        <p class="noindent">Why doesn’t it print anything?</p></li>
        <li><p class="list" id="ch02ex08">Implement a <code>switch</code> statement that converts digits 0 through 9 to their English names <code>'zero'</code> through <code>'nine'</code>. How can you do this easily without a <code>switch</code>? What about the reverse conversion?</p></li>
        <li><p class="list" id="ch02ex09">Suppose <code>n</code> is a number between 0 and 7 and you are supposed to set the array elements <code>arr[k]</code> through <code>arr[k + n - 1]</code> to zero. Use a <code>switch</code> with fallthrough.</p></li>
        <li><p class="list" id="ch02ex10">Rewrite the <code>do</code> loop in <a href="ch02.xhtml#ch02lev1sec9">Section 2.9</a>, “<a href="ch02.xhtml#ch02lev1sec9"><code>while</code> and <code>do</code> Loops</a>” (<a href="ch02.xhtml#page_40">page 40</a>), as a <code>while</code> loop.</p></li>
        <li><p class="list" id="ch02ex11">Rewrite all <code>for</code> loops in <a href="ch02.xhtml#ch02lev1sec10">Section 2.10</a>, “<a href="ch02.xhtml#ch02lev1sec10"><code>for</code> Loops</a>” (<a href="ch02.xhtml#page_41">page 41</a>), as <code>while</code> loops.</p></li>
        <li><p class="list" id="ch02ex12">Rewrite the labeled <code>break</code> example in <a href="ch02.xhtml#ch02lev1sec11">Section 2.11</a>, “<a href="ch02.xhtml#ch02lev1sec11">Breaking and Continuing</a>” (<a href="ch02.xhtml#page_44">page 44</a>), to use two nested <code>for</code> loops.<span epub:type="pagebreak" id="page_49"></span></p></li>
        <li><p class="list" id="ch02ex13">Rewrite the labeled <code>break</code> example in <a href="ch02.xhtml#ch02lev1sec11">Section 2.11</a>, “<a href="ch02.xhtml#ch02lev1sec11">Breaking and Continuing</a>” (<a href="ch02.xhtml#page_44">page 44</a>), without a <code>break</code> statement. Introduce a Boolean variable to control the termination of the nested loops.</p></li>
        <li><p class="list" id="ch02ex14">Rewrite the <code>continue</code> example in <a href="ch02.xhtml#ch02lev1sec11">Section 2.11</a>, “<a href="ch02.xhtml#ch02lev1sec11">Breaking and Continuing</a>” (<a href="ch02.xhtml#page_44">page 44</a>), without a <code>continue</code> statement.</p></li>
        <li><p class="list" id="ch02ex15">Consider the problem of finding the first position in which an array <code>b</code> occurs as a subsequence of an array <code>a</code>. Write two nested loops:</p>
        <p class="codelink"><a id="rch02pr58" href="ch02_images.xhtml#ch02pr58">Click here to view code image</a></p>
        <pre class="pre">let result = undefined
        for (let i = 0; i &lt; a.length - b.length; i++) {
          for (let j = 0; j &lt; b.length; j++) {
            if (a[i + j] != b[j]) . . .
          }
          . . .
        }</pre>
        <p class="noindent">Complete with labeled <code>break</code> and <code>continue</code> statements. Then rewrite without <code>break</code> or <code>continue</code>.</p></li>
        </ol>
        </section>
        </section>
        </div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9780136502166/files/9780136502142.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section epub:type="chapter">
        <h2 class="ch2" id="ch06"><span epub:type="pagebreak" id="page_114"></span>Chapter 6. Strings and Regular Expressions</h2>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/squirrel.jpg" alt="Images" width="119" height="119">
        </figure>
        <div class="outline">
        <p class="outh">Topics in This Chapter</p>
        <p class="chap-lev1"><a href="#ch06lev1sec1">6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Converting between Strings and Code Point Sequences</a></p>
        <p class="chap-lev1"><a href="#ch06lev1sec2">6.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Substrings</a></p>
        <p class="chap-lev1"><a href="#ch06lev1sec3">6.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other String Methods</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/catc.jpg" alt="Images" width="23" height="23"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec4">6.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tagged Template Literals</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/catc.jpg" alt="Images" width="23" height="23"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec5">6.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Raw Template Literals</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec6">6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regular Expressions</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec7">6.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regular Expression Literals</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec8">6.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags</a></p>
        <p class="chap-lev1ia"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec9">6.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regular Expressions and Unicode</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec10">6.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Methods of the <code>RegExp</code> Class</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec11">6.11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Groups</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen2.jpg" alt="Images" width="27" height="27"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec12">6.12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String Methods with Regular Expressions</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/catc.jpg" alt="Images" width="23" height="23"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec13">6.13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;More about Regex Replace</a></p>
        <p class="chap-lev1i"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/catc.jpg" alt="Images" width="23" height="23"></span>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ch06lev1sec14">6.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exotic Features</a></p>
        <p class="chap-lev1"><a href="#ch06lev1sec15">Exercises</a></p>
        </div>
        <p class="noindent"><span epub:type="pagebreak" id="page_115"></span>In this chapter, you will learn about the methods that the standard library provides for string processing. We will then turn to regular expressions, which let you find strings that match patterns. After an introduction into the syntax of regular expressions and the JavaScript-specific idiosyncrasies, you will see how to use the API for finding and replacing matches.</p>
        <section>
        <h3 class="h3" id="ch06lev1sec1">6.1 Converting between Strings and Code Point Sequences</h3>
        <p class="noindent">A string is a sequence of Unicode code points. Each code point is an integer between zero and <code>0x10FFFF</code>. The <code>fromCodePoint</code> function of the <code>String</code> class assembles a string from code point arguments:</p>
        <p class="codelink"><a id="rch06pr01" href="ch06_images.xhtml#ch06pr01">Click here to view code image</a></p>
        <pre class="pre">let str = String.fromCodePoint(0x48, 0x69, 0x20, 0x1F310, 0x21) // 'Hi <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>!'</pre>
        <p class="noindent">If the code points are in an array, use the spread operator:</p>
        <p class="codelink"><a id="rch06pr02" href="ch06_images.xhtml#ch06pr02">Click here to view code image</a></p>
        <pre class="pre">let codePoints = [0x48, 0x69, 0x20, 0x1F310, 0x21]
        str = String.fromCodePoint(...codePoints)</pre>
        <p class="noindent">Conversely, you can turn a string into an array of code points:</p>
        <p class="codelink"><a id="rch06pr03" href="ch06_images.xhtml#ch06pr03">Click here to view code image</a></p>
        <pre class="pre">let characters = [...str] // [ 'H', 'i', ' ', '<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>', '!' ]</pre>
        <p class="noindent">The result is an array of strings, each containing a single code point. You can obtain the code points as integers:</p>
        <p class="codelink"><a id="rch06pr04" href="ch06_images.xhtml#ch06pr04">Click here to view code image</a></p>
        <pre class="pre">codePoints = [...str].map(c =&gt; c.codePointAt(0))</pre>
        <div class="caution">
        <p class="caution-caption"><span epub:type="pagebreak" id="page_116"></span><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">JavaScript stores strings as sequences of UTF-16 code units. The offset in a call such as <code>'Hi <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>'.codePointAt(i)</code> refers to the UTF-16 encoding. In this example, valid offsets are <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, and <code>5</code>. If the offset falls in the middle of a pair of code units that make up a single code point, then an invalid code point is returned.</p>
        </div>
        <p class="noindent">If you want to traverse the code points of a string without putting them in an array, use this loop:</p>
        <p class="codelink"><a id="rch06pr05" href="ch06_images.xhtml#ch06pr05">Click here to view code image</a></p>
        <pre class="pre">for (let i = 0; i &lt; str.length; i++) {
          let cp = str.codePointAt(i)
          if (cp &gt; 0xFFFF) i++
          . . . // <span class="cite">Process the code point <code>cp</code></span>
        }</pre>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec2">6.2 Substrings</h3>
        <p class="noindent">The <code>indexOf</code> method yields the index of the first occurrence of a substring:</p>
        <p class="codelink"><a id="rch06pr06" href="ch06_images.xhtml#ch06pr06">Click here to view code image</a></p>
        <pre class="pre">let index = 'Hello yellow'.indexOf('el') // 1</pre>
        <p class="noindent">The <code>lastIndexOf</code> method yields the index of the last occurrence:</p>
        <p class="codelink"><a id="rch06pr07" href="ch06_images.xhtml#ch06pr07">Click here to view code image</a></p>
        <pre class="pre">index = 'Hello yellow'.lastIndexOf('el') // 7</pre>
        <p class="noindent">As with all offsets into JavaScript strings, these values are offsets into the UTF-16 encoding:</p>
        <p class="codelink"><a id="rch06pr08" href="ch06_images.xhtml#ch06pr08">Click here to view code image</a></p>
        <pre class="pre">index = 'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'.indexOf('el') // 4</pre>
        <p class="noindent">The offset is <code>4</code> because the “yellow heart” emoji <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span> is encoded with two UTF-16 code units.</p>
        <p class="noindent">If the substring is not present, these methods return <code>-1</code>.</p>
        <p class="noindent">The methods <code>startsWith</code>, <code>endsWith</code>, and <code>includes</code> return a Boolean result:</p>
        <p class="codelink"><a id="rch06pr09" href="ch06_images.xhtml#ch06pr09">Click here to view code image</a></p>
        <pre class="pre">let isHttps = url.startsWith('https://')
        let isGif = url.endsWith('.gif')
        let isQuery = url.includes('?')</pre>
        <p class="noindent">The <code>substring</code> method extracts a substring, given two offsets in UTF-16 code units. The substring contains all characters from the first offset up to, but not including, the second offset.</p>
        <p class="codelink"><a id="rch06pr10" href="ch06_images.xhtml#ch06pr10">Click here to view code image</a></p>
        <pre class="pre">let substring = 'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'.substring(3, 7) // 'yell'</pre>
        <p class="noindent">If you omit the second offset, all characters until the end of the string are included:</p>
        <p class="codelink"><a id="rch06pr11" href="ch06_images.xhtml#ch06pr11">Click here to view code image</a></p>
        <pre class="pre">substring = 'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'.substring(3) // 'yellow'</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_117"></span>The <code>slice</code> method is similar to <code>substring</code>, except that negative offsets are counted from the end of the string. <code>-1</code> is the offset of the last code unit, <code>-2</code> the offset of its predecessor, and so on. This is achieved by adding the string length to a negative offset.</p>
        <p class="codelink"><a id="rch06pr12" href="ch06_images.xhtml#ch06pr12">Click here to view code image</a></p>
        <pre class="pre">'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'.slice(-6, -2) // <span class="cite"><code>'yell'</code>, same as <code>slice(3, 7)</code></span></pre>
        <p class="noindent">The length of <code>'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'</code> is 9—recall that the <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span> takes two code units. The offsets <code>-6</code> and <code>-2</code> are adjusted to <code>3</code> and <code>7</code>.</p>
        <p class="noindent">With both the <code>substring</code> and <code>slice</code> methods, offsets larger than the string length are truncated to the length. Negative and <code>NaN</code> offsets are truncated to <code>0</code>. (In the <code>slice</code> method, this happens after adding the string length to negative offsets.)</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">If the first argument to <code>substring</code> is larger than the second, the arguments are switched!</p>
        <p class="codelink"><a id="rch06pr13" href="ch06_images.xhtml#ch06pr13">Click here to view code image</a></p>
        <pre class="pre">substring = 'I<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>yellow'.substring(7, 3) // <span class="cite"><code>'yell'</code>, same as <code>substring(3, 7)</code></span></pre>
        <p class="noindent">In contrast, <code>str.slice(start, end)</code> yields the empty string if <code>start</code> ≥ <code>end</code>.</p>
        </div>
        <p class="noindent">I prefer the <code>slice</code> method over <code>substring</code>. It is more versatile, has a saner behavior, and the method name is shorter.</p>
        <p class="noindent">Another way of taking a string apart is the <code>split</code> method. That method splits a string into an array of substrings, removing the provided separator.</p>
        <p class="codelink"><a id="rch06pr14" href="ch06_images.xhtml#ch06pr14">Click here to view code image</a></p>
        <pre class="pre">let parts = 'Mary had a little lamb'.split(' ')
          // ['Mary', 'had', 'a', 'little', 'lamb']</pre>
        <p class="noindent">You can supply a limit for the number of parts:</p>
        <p class="codelink"><a id="rch06pr15" href="ch06_images.xhtml#ch06pr15">Click here to view code image</a></p>
        <pre class="pre">parts = 'Mary had a little lamb'.split(' ', 4)
          // ['Mary', 'had', 'a', 'little']</pre>
        <p class="noindent">The separator can be a regular expression—see <a href="ch06.xhtml#ch06lev1sec12">Section 6.12</a>, “<a href="ch06.xhtml#ch06lev1sec12">String Methods with Regular Expressions</a>” (<a href="ch06.xhtml#page_133">page 133</a>).</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Calling <code>str.split('')</code> with an empty separator splits the string into strings that each hold a 16-bit code unit, which is not useful if <code>str</code> contains characters above <code>\u{FFFF}</code>. Use <code>[...str]</code> instead.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec3"><span epub:type="pagebreak" id="page_118"></span>6.3 Other String Methods</h3>
        <p class="noindent">In this section, you will find miscellaneous methods of the <code>String</code> class. Since strings are immutable in JavaScript, none of the string methods change the contents of a given string. They all return a new string with the result.</p>
        <p class="noindent">The <code>repeat</code> method yields a string repeated a given number of times:</p>
        <p class="codelink"><a id="rch06pr16" href="ch06_images.xhtml#ch06pr16">Click here to view code image</a></p>
        <pre class="pre">const repeated = 'ho '.repeat(3) // 'ho ho ho '</pre>
        <p class="noindent">The <code>trim</code>, <code>trimStart</code>, and <code>trimEnd</code> methods yield strings that remove leading and trailing white space, or just leading or trailing white space. White space characters include the space character, the nonbreaking space <code>\u{00A0}</code>, newline, tab, and 21 other characters with the Unicode character property <code>White_Space</code>.</p>
        <p class="noindent">The <code>padStart</code> and <code>padEnd</code> methods do the opposite—they add space characters until the string has a minimum length:</p>
        <p class="codelink"><a id="rch06pr17" href="ch06_images.xhtml#ch06pr17">Click here to view code image</a></p>
        <pre class="pre">let padded = 'Hello'.padStart(10) // <span class="cite"><code>'     Hello'</code>, five spaces are added</span></pre>
        <p class="noindent">You can also supply your own padding string:</p>
        <p class="codelink"><a id="rch06pr18" href="ch06_images.xhtml#ch06pr18">Click here to view code image</a></p>
        <pre class="pre">padded = 'Hello'.padStart(10, '=-') // =-=-=Hello</pre>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">The first parameter is the length of the padded string in bytes. If your padding string contains characters that require two bytes, you may get a malformed string:</p>
        <p class="codelink"><a id="rch06pr19" href="ch06_images.xhtml#ch06pr19">Click here to view code image</a></p>
        <pre class="pre">padded = 'Hello'.padStart(10, '<span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/yheart.jpg" alt="Images" width="15" height="15"></span>')
          // <span class="cite">Padded with two hearts and an unmatched code unit</span></pre>
        </div>
        <p class="noindent">The <code>toUpperCase</code> and <code>toLowerCase</code> methods yield a string with all characters converted to upper- or lowercase.</p>
        <p class="codelink"><a id="rch06pr20" href="ch06_images.xhtml#ch06pr20">Click here to view code image</a></p>
        <pre class="pre">let uppercased = 'Straße'.toUpperCase() // 'STRASSE'</pre>
        <p class="noindent">As you can see, the <code>toUpperCase</code> method is aware of the fact that the uppercase of the German character <code>'ß'</code> is the string <code>'SS'</code>.</p>
        <p class="noindent">Note that <code>toLowerCase</code> does not recover the original string:</p>
        <p class="codelink"><a id="rch06pr21" href="ch06_images.xhtml#ch06pr21">Click here to view code image</a></p>
        <pre class="pre">let lowercased = uppercased.toLowerCase() // 'strasse'</pre>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">String operations such as conversion to upper- and lowercase can depend on the user’s language preferences. See <a href="ch08.xhtml#ch08">Chapter 8</a> for methods <code>toLocaleUpperCase</code>, <code>toLocaleLowerCase</code>, <code>localeCompare</code>, and <code>normalize</code> that are useful when you localize your applications.</p>
        </div>
        <div class="note">
        <p class="note-caption"><span epub:type="pagebreak" id="page_119"></span><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">See <a href="ch06.xhtml#ch06lev1sec12">Section 6.12</a>, “<a href="ch06.xhtml#ch06lev1sec12">String Methods with Regular Expressions</a>” (<a href="ch06.xhtml#page_133">page 133</a>), for string methods <code>match</code>, <code>matchAll</code>, <code>search</code>, and <code>replace</code> that work with regular expressions.</p>
        </div>
        <p class="noindent">The <code>concat</code> method concatenates a string with any number of arguments that are converted to strings.</p>
        <p class="codelink"><a id="rch06pr22" href="ch06_images.xhtml#ch06pr22">Click here to view code image</a></p>
        <pre class="pre">const n = 7
        let concatenated = 'agent'.concat(' ', n) // 'agent 7'</pre>
        <p class="noindent">You can achieve the same effect with template strings or the <code>join</code> method of the <code>Array</code> class:</p>
        <p class="codelink"><a id="rch06pr23" href="ch06_images.xhtml#ch06pr23">Click here to view code image</a></p>
        <pre class="pre">concatenated = `agent ${n}`
        concatenated = ['agent', ' ', n].join('')</pre>
        <p class="noindent"><a href="#ch06tbl01">Table 6-1</a> shows the most useful features of the <code>String</code> class.</p>
        <figure class="table" id="ch06tbl01">
        <figcaption><p class="table-title"><strong>Table 6-1</strong>&nbsp;&nbsp;&nbsp;&nbsp;Useful Functions and Methods of the <code>String</code> class</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 35%;"><p class="tableth">Name</p></th>
        <th style="width: 65%;"><p class="tableth">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td colspan="2"><p class="tabletd"><strong>Functions</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>fromCodePoint(codePoints...)</code></p></td>
        <td><p class="tabletd">Yields a string consisting of the given code points</p></td>
        </tr>
        <tr>
        <td colspan="2"><p class="tabletd"><strong>Methods</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>startsWith(s)</code>, <code>endsWith(s)</code>, <code>includes(s)</code></p></td>
        <td><p class="tabletd"><code>true</code> if a string starts or ends with <code>s</code>, or has <code>s</code> as a substring</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>indexOf(s, start)</code>, <code>lastIndexOf(s, start)</code></p></td>
        <td><p class="tabletd">The index of the first or last occurrence of <code>s</code> beginning with index <code>start</code> (which defaults to <code>0</code>)</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>slice(start, end)</code></p></td>
        <td><p class="tabletd">The substring of code units with index between <code>start</code> inclusive and <code>end</code> exclusive. Negative index values are counted from the end of the string. <code>end</code> defaults to the length of the string. Prefer this method over <code>substring</code>.</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>repeat(n)</code></p></td>
        <td><p class="tabletd">This string, repeated <code>n</code> times</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>trimStart()</code>, <code>trimEnd()</code>, <code>trim()</code></p></td>
        <td><p class="tabletd">This string with leading, trailing, or leading and trailing white space removed</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>padStart(minLength, padString)</code>, <code>padEnd(minLength, padString)</code></p></td>
        <td><p class="tabletd">This string, padded at the start or end until its length reaches <code>minLength</code>. The default <code>padString</code> is <code>' '</code>.<span epub:type="pagebreak" id="page_120"></span></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>toLowerCase()</code>, <code>toUpperCase()</code></p></td>
        <td><p class="tabletd">This string with all letters converted to lower or upper case</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>split(separator, maxParts)</code></p></td>
        <td><p class="tabletd">An array of parts obtained by removing all copies of the separator (which can be a regular expression). If <code>maxParts</code> is omitted, all parts are returned.</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>search(target)</code></p></td>
        <td><p class="tabletd">The index of the first match of <code>target</code> (which can be a regular expression)</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>replace(target, replacement)</code></p></td>
        <td><p class="tabletd">This string, with the first match of <code>target</code> replaced. If <code>target</code> is a global regular expression, all matches are replaced. See <a href="ch06.xhtml#ch06lev1sec13">Section 6.13</a> about replacement patterns and functions.</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>match(regex)</code></p></td>
        <td><p class="tabletd">An array of matches if <code>regex</code> is global, <code>null</code> if there is no match, and the match result otherwise. The match result is an array of all group matches, with properties <code>index</code> (the index of the match) and <code>groups</code> (an object mapping group names to matches).</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>matchAll(regex)</code></p></td>
        <td><p class="tabletd">An iterable of the match results</p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        <p class="noindent">Finally, there are global functions for encoding URL components and entire URLs—or, more generally, URIs using schemes such as <code>mailto</code> or <code>tel</code>—into their “URL encoded” form. That form uses only characters that were considered “safe” when the Internet was first created. Suppose you need to produce a query for translating a phrase from one language into another. You might construct a URL like this:</p>
        <p class="codelink"><a id="rch06pr24" href="ch06_images.xhtml#ch06pr24">Click here to view code image</a></p>
        <pre class="pre">const phrase = 'à coté de'
        const prefix = 'https://www.linguee.fr/anglais-francais/traduction'
        const suffix = '.html'
        const url = prefix + encodeURIComponent(phrase) + suffix</pre>
        <p class="noindent">The phrase is encoded into <code>'%C3%A0%20cot%C3%A9%20de'</code>, the result of encoding characters into UTF-8 and encoding each byte into a code <code>%<span class="var">hh</span></code> with two hexadecimal digits. The only characters that are left alone are the “safe” characters</p>
        <pre class="pre">A-Z a-z 0-9 ! ' ( ) * . _ ~ -</pre>
        <p class="noindent">In the less common case, if you need to encode an entire URI, use the <code>encodeURI</code> function. It also leaves the characters<span epub:type="pagebreak" id="page_121"></span></p>
        <pre class="pre"># $ &amp; + , / : ; = ? @</pre>
        <p class="noindent">unchanged since they can have special meanings in URIs.</p>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec4">6.4 Tagged Template Literals</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/cat.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">In <a href="ch01.xhtml#ch01">Chapter 1</a>, you saw template literals—strings with embedded expressions:</p>
        <p class="codelink"><a id="rch06pr25" href="ch06_images.xhtml#ch06pr25">Click here to view code image</a></p>
        <pre class="pre">const person = { name: 'Harry', age: 42 }
        message = `Next year, ${person.name} will be ${person.age + 1}.`</pre>
        <p class="noindent">Template literals insert the values of the embedded expressions into the template string. In this example, the embedded expressions <code>person.name</code> and <code>person.age + 1</code> are evaluated, converted to strings, and spliced with the surrounding string fragments. The result is the string</p>
        <pre class="pre">'Next year, Harry will be 43.'</pre>
        <p class="noindent">You can customize the behavior of template literals with a tag function. As an example, we will be writing a tag function <code>strong</code> that produces an HTML string, highlighting the embedded values. The call</p>
        <p class="codelink"><a id="rch06pr26" href="ch06_images.xhtml#ch06pr26">Click here to view code image</a></p>
        <pre class="pre">strong`Next year, ${person.name} will be ${person.age + 1}.`</pre>
        <p class="noindent">will yield an HTML string</p>
        <p class="codelink"><a id="rch06pr27" href="ch06_images.xhtml#ch06pr27">Click here to view code image</a></p>
        <pre class="pre">'Next year, &lt;strong&gt;Harry&lt;/strong&gt; will be &lt;strong&gt;43&lt;/strong&gt;.'</pre>
        <p class="noindent">The tag function is called with the fragments of the literal string around the embedded expressions, followed by the expression values. In our example, the fragments are <code>'Next year, '</code>, <code>' will be '</code>, and <code>'.'</code>, and the values are <code>'Harry'</code> and <code>43</code>. The tag function combines these pieces. The returned value is turned into a string if it is not already one.</p>
        <p class="noindent">Here is an implementation of the <code>strong</code> tag function:</p>
        <p class="codelink"><a id="rch06pr28" href="ch06_images.xhtml#ch06pr28">Click here to view code image</a></p>
        <pre class="pre">const strong = (fragments, ...values) =&gt; {
          let result = fragments[0]
           for (let i = 0; i &lt; values.length; i++)
            result += `&lt;strong&gt;${values[i]}&lt;/strong&gt;${fragments[i + 1]}`
          return result
        }</pre>
        <p class="noindent">When processing the template string</p>
        <p class="codelink"><a id="rch06pr29" href="ch06_images.xhtml#ch06pr29">Click here to view code image</a></p>
        <pre class="pre">strong`Next year, ${person.name} will be ${person.age + 1}.`</pre>
        <p class="noindent">the <code>strong</code> function is called like this:</p>
        <p class="codelink"><a id="rch06pr30" href="ch06_images.xhtml#ch06pr30">Click here to view code image</a></p>
        <pre class="pre">strong(['Next year, ', ' will be ', '.'], 'Harry', 43)</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_122"></span>Note that all string fragments are put into an array, whereas the expression values are passed as separate arguments. The <code>strong</code> function uses the spread operator to gather them all in a second array.</p>
        <p class="noindent">Also note that there is always one more fragment than there are expression values.</p>
        <p class="noindent">This mechanism is infinitely flexible. You can use it for HTML templating, number formatting, internationalization, and so on.</p>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec5">6.5 Raw Template Literals</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/cat.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">If you prefix a template literal with <code>String.raw</code>, then backslashes are not escape characters:</p>
        <pre class="pre">path = String.raw`c:\users\nate`</pre>
        <p class="noindent">Here, <code>\u</code> does not denote a Unicode escape, and <code>\n</code> is not turned into a newline character.</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Even in raw mode, you cannot enclose arbitrary strings in backticks. You still need to escape all <code>`</code> characters, <code>$</code> before <code>{</code>, and <code>\</code> before <code>`</code> and <code>{</code>.</p>
        </div>
        <p class="noindent">That doesn’t quite explain how <code>String.raw</code> works, though. Tag functions have access to a “raw” form of the template string fragments, in which backslash combinations such as <code>\u</code> and <code>\n</code> lose their special meanings.</p>
        <p class="noindent">Suppose we want to handle strings with Greek letters. We follow the convention of the LATEX markup language for mathematical formulas. In that language, symbols start with backslashes. Therefore, raw strings are attractive—users want to write <code>\nu</code> and <code>\upsilon</code>, not <code>\\nu</code> and <code>\\upsilon</code>. Here is an example of a string that we want to be able to process:</p>
        <pre class="pre">greek`\nu=${factor}\upsilon`</pre>
        <p class="noindent">As with any tagged template string, we need to define a function:</p>
        <p class="codelink"><a id="rch06pr31" href="ch06_images.xhtml#ch06pr31">Click here to view code image</a></p>
        <pre class="pre">const greek = (fragments, ...values) =&gt; {
          const substitutions = { alpha: 'α', . . ., nu: 'ν',  . . . }
          const substitute = str =&gt; str.replace(/\\[a-z]+/g,
            match =&gt; substitutions[match.slice(1)])
        
          let result = substitute(fragments.raw[0])
          for (let i = 0; i &lt; values.length; i++)
            result += values[i] + substitute(fragments.raw[i + 1])
          return result
        }</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_123"></span>You access the raw string fragments with the <code>raw</code> property of the first parameter of the tag function. The value of <code>fragments.raw</code> is an array of string fragments with unprocessed backslashes.</p>
        <p class="noindent">In the preceding tagged template literal, <code>fragments.raw</code> is an array of two strings. The first string is <code>\nu=</code>, and the second string is <code>\upsilon</code>.</p>
        <pre class="pre">\${\nu\upsilon{</pre>
        <p class="noindent">including three backslashes. The second string has two characters:</p>
        <pre class="pre">}}</pre>
        <p class="noindent">Note the following:</p>
        <ul class="bullet">
        <li><p class="list-item">The <code>\n</code> in <code>\nu</code> is not turned into a newline.</p></li>
        <li><p class="list-item">The <code>\u</code> in <code>\upsilon</code> is not interpreted as a Unicode escape. In fact, it would not be syntactically correct. For that reason, <code>fragments[1]</code> cannot be parsed and is set to <code>undefined</code>.</p></li>
        <li><p class="list-item"><code>${factor}</code> is an embedded expression. Its value is passed to the tag function.</p></li>
        </ul>
        <p class="noindent">The <code>greek</code> function uses regular expression replacement, which is explained in detail in <a href="ch06.xhtml#ch06lev1sec13">Section 6.13</a>, “<a href="ch06.xhtml#ch06lev1sec13">More about Regex Replace</a>” (<a href="ch06.xhtml#page_135">page 135</a>). Identifiers starting with a backslash are replaced with their substitutions, such as ν for <code>\nu</code>.</p>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec6">6.6 Regular Expressions</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">Regular expressions specify string patterns. Use them whenever you need to locate strings that match a particular pattern. For example, suppose you want to find hyperlinks in an HTML file. You need to look for strings of the form <code>&lt;a href=". . ."&gt;</code>. But wait—there may be extra spaces, or the URL may be enclosed in single quotes. Regular expressions give you a precise syntax for specifying what sequences of characters are legal matches.</p>
        <p class="noindent">In a regular expression, a character denotes itself unless it is one of the reserved characters</p>
        <pre class="pre">. * + ? { | ( ) [ \ ^ $</pre>
        <p class="noindent">For example, the regular expression <code>href</code> only matches the string <code>href</code>.</p>
        <p class="noindent">The symbol <code>.</code> matches any single character. For example, <code>.r.f</code> matches <code>href</code> and <code>prof</code>.</p>
        <p class="noindent">The <code>*</code> symbol indicates that the preceding construct may be repeated 0 or more times; with the <code>+</code> symbol, the repetition is 1 or more times. A suffix of <span epub:type="pagebreak" id="page_124"></span><code>?</code> indicates that a construct is optional (0 or 1 times). For example, <code>be+s?</code> matches <code>be</code>, <code>bee</code>, and <code>bees</code>. You can specify other multiplicities with <code>{ }</code>—see <a href="#ch06tbl02">Table 6-2</a>.</p>
        <p class="noindent">A <code>|</code> denotes an alternative: <code>.(oo+|ee+)f</code> matches <code>beef</code> or <code>woof</code>. Note the parentheses—without them, <code>.oo+|ee+f</code> would be the alternative between <code>.oo+</code> and <code>ee+f</code>. Parentheses are also used for grouping—see <a href="ch06.xhtml#ch06lev1sec11">Section 6.11</a>, “<a href="ch06.xhtml#ch06lev1sec11">Groups</a>” (<a href="ch06.xhtml#page_131">page 131</a>).</p>
        <p class="noindent">A <em>character class</em> is a set of character alternatives enclosed in brackets, such as <code>[Jj]</code>, <code>[0-9]</code>, <code>[A-Za-z]</code>, or <code>[^0-9]</code>. Inside a character class, the <code>-</code> denotes a range (all characters whose Unicode values fall within the two bounds). However, a <code>-</code> that is the first or last character in a character class denotes itself. A <code>^</code> as the first character in a character class denotes the complement—all characters except those specified. For example, <code>[^0-9]</code> denotes any character that is not a decimal digit.</p>
        <p class="noindent">There are six <em>predefined character classes</em>: <code>\d</code> (digits), <code>\s</code> (white space), <code>\w</code> (word characters), and their complements <code>\D</code> (non-digits), <code>\S</code> (nonwhite space), and <code>\W</code> (nonword characters).</p>
        <p class="noindent">The characters <code>^</code> and <code>$</code> match the beginning and end of input. For example, <code>^[0-9]+$</code> matches a string entirely consisting of digits.</p>
        <p class="noindent">Be careful about the position of the <code>^</code> character. If it is the first character inside brackets, it denotes the complement: <code>[^0-9]+$</code> matches a string of non-digits at the end of input.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">I have a hard time remembering that <code>^</code> matches the start and <code>$</code> the end. I keep thinking that <code>$</code> should denote <strong>s</strong>tart, and on the US keyboard, <code>$</code> is to the left of <code>^</code>. But it’s exactly the other way around, probably since the archaic text editor QED used <code>$</code> to denote the last line.</p>
        </div>
        <p class="noindent"><a href="#ch06tbl02">Table 6-2</a> summarizes the JavaScript regular expression syntax.</p>
        <p class="noindent">If you need to have a literal <code>. * + ? { | ( ) [ \ ^ $</code>, precede it by a backslash. Inside a character class, you only need to escape <code>[</code> and <code>\</code>, provided you are careful about the positions of <code>] - ^</code>. For example, <code>[]^-]</code> is a class containing all three of them.<span epub:type="pagebreak" id="page_125"></span></p>
        <figure class="table" id="ch06tbl02">
        <figcaption><p class="table-title"><strong>Table 6-2</strong>&nbsp;&nbsp;&nbsp;&nbsp;Regular Expression Syntax</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 20%;"><p class="tableth">Expression</p></th>
        <th style="width: 40%;"><p class="tableth">Description</p></th>
        <th style="width: 40%;"><p class="tableth">Example</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Characters</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd">A character other than <code>. * + ? { | ( ) [ \ ^ $</code></p></td>
        <td><p class="tabletd">Matches only the given character</p></td>
        <td><p class="tabletd"><code>J</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>.</code></p></td>
        <td><p class="tabletd">Matches any character except <code>\n</code>, or any character if the <code>dotAll</code> flag is set</p></td>
        <td><p class="tabletd">&nbsp;</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\u{</code><span class="var">hhhh</span><code>}</code>, <code>\u{</code><span class="var">hhhhh</span><code>}</code></p></td>
        <td><p class="tabletd">The Unicode code point with the given hex value (requires <code>unicode</code> flag)</p></td>
        <td><p class="tabletd"><code>\u{1F310}</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\u</code><span class="var">hhhh</span>, <code>\x</code><span class="var">hh</span></p></td>
        <td><p class="tabletd">The UTF-16 code unit with the given hex value</p></td>
        <td><p class="tabletd"><code>\xA0</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code>, <code>\v</code></p></td>
        <td><p class="tabletd">Form feed (<code>\x0C</code>), newline (<code>\x0A</code>), carriage return (<code>\x0D</code>), tab (<code>\x09</code>), vertical tab (<code>\x0B</code>)</p></td>
        <td><p class="tabletd"><code>\n</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\c</code><span class="var">L</span>, where <span class="var">L</span> is in <code>[A-Za-z]</code></p></td>
        <td><p class="tabletd">The control character corresponding to the character <span class="var">L</span></p></td>
        <td><p class="tabletd"><code>\cH</code> is Ctrl-H or backspace (<code>\x08</code>)</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\</code><span class="var">c</span>, where <span class="var">c</span> is not in <code>[0-9BDPSWbcdfknprstv]</code></p></td>
        <td><p class="tabletd">The character <span class="var">c</span></p></td>
        <td><p class="tabletd"><code>\\</code></p></td>
        </tr>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Character Classes</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>[</code><span class="var">C</span><sub>1</sub><span class="var">C</span><sub>2</sub>. . .<code>]</code>, where <span class="var">C</span><sub><span class="var">i</span></sub> are characters, ranges <span class="var">c</span><code>-</code><span class="var">d</span>, or character classes</p></td>
        <td><p class="tabletd">Any of the characters represented by <span class="var">C</span><sub>1</sub>, <span class="var">C</span><sub>2</sub>, . . .</p></td>
        <td><p class="tabletd"><code>[0-9+-]</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>[^</code>. . .<code>]</code></p></td>
        <td><p class="tabletd">Complement of a character class</p></td>
        <td><p class="tabletd"><code>[^\d\s]</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\p{</code><span class="var">BooleanProperty</span><code>}</code><br><code>\p{</code><span class="var">Property</span><code>=</code><span class="var">Value</span><code>}</code><br><code>\P{</code>. . .<code>}</code></p></td>
        <td><p class="tabletd">A Unicode property (see <a href="ch06.xhtml#ch06lev1sec9">Section 6.9</a>); its complement (requires the <code>unicode</code> flag)</p></td>
        <td><p class="tabletd"><code>\p{L}</code> are Unicode letters</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\d</code>, <code>\D</code></p></td>
        <td><p class="tabletd">A digit <code>[0-9]</code>; the complement</p></td>
        <td><p class="tabletd"><code>\d+</code> is a sequence of digits<span epub:type="pagebreak" id="page_126"></span></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\w</code>, <code>\W</code></p></td>
        <td><p class="tabletd">A word character <code>[a-zA-Z0-9_]</code>; the complement</p></td>
        <td><p class="tabletd"><code></code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\s</code>, <code>\S</code></p></td>
        <td><p class="tabletd">A space from <code>[\t\n\v\f\r \xA0]</code> or 18 additional Unicode space characters; same as <code>\p{White_Space}</code></p></td>
        <td><p class="tabletd"><code>\s*,\s*</code> is a comma surrounded by optional white space</p></td>
        </tr>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Sequences and Alternatives</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">XY</span></p></td>
        <td><p class="tabletd">Any string from <code>X</code>, followed by any string from <code>Y</code></p></td>
        <td><p class="tabletd"><code>[1-9][0-9]*</code> is a positive number without leading zero</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">X</span><code>|</code><span class="var">Y</span></p></td>
        <td><p class="tabletd">Any string from <code>X</code> or <code>Y</code></p></td>
        <td><p class="tabletd"><code>http|ftp</code></p></td>
        </tr>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Grouping</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>(</code><span class="var">X</span><code>)</code></p></td>
        <td><p class="tabletd">Captures the match of <span class="var">X</span> into a group—see <a href="ch06.xhtml#ch06lev1sec11">Section 6.11</a></p></td>
        <td><p class="tabletd"><code>'([^']*)'</code> captures the quoted text</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\</code><span class="var">n</span></p></td>
        <td><p class="tabletd">Matches the <span class="var">n</span>th group</p></td>
        <td><p class="tabletd"><code>(['"]).*\1</code> matches <code>'Fred'</code> or <code>"Fred"</code> but not <code>"Fred'</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>(?&lt;</code><span class="var">name</span><code>&gt;</code><span class="var">X</span><code>)</code></p></td>
        <td><p class="tabletd">Captures the match of <span class="var">X</span> with the given name</p></td>
        <td><p class="tabletd"><code>'(?&lt;qty&gt;[0-9]+)'</code> captures the match with name <code>qty</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\k&lt;</code><span class="var">name</span><code>&gt;</code></p></td>
        <td><p class="tabletd">The group with the given name</p></td>
        <td><p class="tabletd"><code>\k&lt;qty&gt;</code> matches the group with name <code>qty</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>(?:</code><span class="var">X</span><code>)</code></p></td>
        <td><p class="tabletd">Use parentheses without capturing <span class="var">X</span></p></td>
        <td><p class="tabletd">In <code>(?:http|ftp)://(.*)</code>, the match after <code>://</code> is <code>\1</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd">Other <code>(?</code>. . .<code>)</code></p></td>
        <td><p class="tabletd">See <a href="ch06.xhtml#ch06lev1sec14">Section 6.14</a></p></td>
        <td><p class="tabletd">&nbsp;</p></td>
        </tr>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Quantifiers</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">X</span><code>?</code></p></td>
        <td><p class="tabletd">Optional <span class="var">X</span></p></td>
        <td><p class="tabletd"><code>\+?</code> is an optional + sign</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">X</span><code>*</code>, <span class="var">X</span><code>+</code></p></td>
        <td><p class="tabletd">0 or more <span class="var">X</span>, 1 or more <span class="var">X</span></p></td>
        <td><p class="tabletd"><code>[1-9][0-9]+</code> is an integer ≥ 10</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">X</span><code>{</code><span class="var">n</span><code>}</code>, <span class="var">X</span><code>{</code><span class="var">n</span><code>,}</code>, <span class="var">X</span><code>{</code><span class="var">m</span><code>,</code><span class="var">n</span><code>}</code></p></td>
        <td><p class="tabletd"><span class="var">n</span> times <span class="var">X</span>, at least <span class="var">n</span> times <code>X</code>, between <span class="var">m</span> and <span class="var">n</span> times <span class="var">X</span></p></td>
        <td><p class="tabletd"><code>[0-9]{4,6}</code> are four to six digits<span epub:type="pagebreak" id="page_127"></span></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><span class="var">X</span><code>*?</code> or <span class="var">X</span><code>+?</code></p></td>
        <td><p class="tabletd">Reluctant quantifier, attempting the shortest match before trying longer matches</p></td>
        <td><p class="tabletd"><code>.*(&lt;.+?&gt;).*</code> captures the shortest sequence enclosed in angle brackets</p></td>
        </tr>
        <tr>
        <td colspan="3"><p class="tabletd"><strong>Boundary Matches</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>^ $</code></p></td>
        <td><p class="tabletd">Beginning, end of input (or beginning, end of line if the <code>multiline</code> flag is set)</p></td>
        <td><p class="tabletd"><code>^JavaScript$</code> matches the input or line <code>JavaScript</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>\b</code>, <code>\B</code></p></td>
        <td><p class="tabletd">Word boundary, nonword boundary</p></td>
        <td><p class="tabletd"><code>\bJava\B</code> matches <code>JavaScript</code> but not <code>Java code</code></p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec7">6.7 Regular Expression Literals</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">A regular expression literal is delimited by slashes:</p>
        <p class="codelink"><a id="rch06pr32" href="ch06_images.xhtml#ch06pr32">Click here to view code image</a></p>
        <pre class="pre">const timeRegex = /^([1-9]|1[0-2]):[0-9]{2} [ap]m$/</pre>
        <p class="noindent">Regular expression literals are instances of the <code>RegExp</code> class.</p>
        <p class="noindent">The <code>typeof</code> operator, when applied to a regular expression, yields <code>'object'</code>.</p>
        <p class="noindent">Inside the regular expression literal, use backslashes to escape characters that have special meanings in regular expressions, such as the <code>.</code> and <code>+</code> characters:</p>
        <p class="codelink"><a id="rch06pr33" href="ch06_images.xhtml#ch06pr33">Click here to view code image</a></p>
        <pre class="pre">const fractionalNumberRegex = /[0-9]+\.[0-9]*/</pre>
        <p class="noindent">Here, the escaped <code>.</code> means a literal period.</p>
        <p class="noindent">In a regular expression literal, you also need to escape a forward slash so that it is not interpreted as the end of the literal.</p>
        <p class="noindent">To convert a string holding a regular expression into a <code>RegExp</code> object, use the <code>RegExp</code> function, with or without <code>new</code>:</p>
        <p class="codelink"><a id="rch06pr34" href="ch06_images.xhtml#ch06pr34">Click here to view code image</a></p>
        <pre class="pre">const fractionalNumberRegex = new RegExp('[0-9]+\\.[0-9]*')</pre>
        <p class="noindent">Note that the backslash in the string must be escaped.</p>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec8">6.8 Flags</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">A <em>flag</em> modifies a regular expression’s behavior. One example is the <code>i</code> or <code>ignoreCase</code> flag. The regular expression<span epub:type="pagebreak" id="page_128"></span></p>
        <pre class="pre">/[A-Z]+\.com/<strong>i</strong></pre>
        <p class="noindent">matches <code>Horstmann.COM</code>.</p>
        <p class="noindent">You can also set the flag in the constructor:</p>
        <pre class="pre">const regex = new RegExp(/[A-Z]+\.com/, 'i')</pre>
        <p class="noindent">To find the flag values of a given <code>RegExp</code> object, you can use the <code>flags</code> property which yields a string of all flags. There is also a Boolean property for each flag:</p>
        <p class="codelink"><a id="rch06pr35" href="ch06_images.xhtml#ch06pr35">Click here to view code image</a></p>
        <pre class="pre">regex.flags // 'i'
        regex.ignoreCase // true</pre>
        <p class="noindent">JavaScript supports six flags, shown in <a href="#ch06tbl03">Table 6-3</a>.</p>
        <figure class="table" id="ch06tbl03">
        <figcaption><p class="table-title"><strong>Table 6-3</strong>&nbsp;&nbsp;&nbsp;&nbsp;Regular Expression Flags</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 20%;"><p class="tableth">Single Letter</p></th>
        <th style="width: 40%;"><p class="tableth">Property Name</p></th>
        <th style="width: 40%;"><p class="tableth">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p class="tabletd"><code>i</code></p></td>
        <td><p class="tabletd"><code>ignoreCase</code></p></td>
        <td><p class="tabletd">Case-insensitive match</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>m</code></p></td>
        <td><p class="tabletd"><code>multiline</code></p></td>
        <td><p class="tabletd"><code>^</code>, <code>$</code> match start, end of line</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>s</code></p></td>
        <td><p class="tabletd"><code>dotAll</code></p></td>
        <td><p class="tabletd"><code>.</code> matches newline</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>u</code></p></td>
        <td><p class="tabletd"><code>unicode</code></p></td>
        <td><p class="tabletd">Match Unicode characters, not code units—see <a href="ch06.xhtml#ch06lev1sec9">Section 6.9</a></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>g</code></p></td>
        <td><p class="tabletd"><code>global</code></p></td>
        <td><p class="tabletd">Find all matches—see <a href="ch06.xhtml#ch06lev1sec10">Section 6.10</a></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>y</code></p></td>
        <td><p class="tabletd"><code>sticky</code></p></td>
        <td><p class="tabletd">Match must start at <code><span class="var">regex</span>.lastIndex</code>—see <a href="ch06.xhtml#ch06lev1sec10">Section 6.10</a></p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        <p class="noindent">The <code>m</code> or <code>multiline</code> flag changes the behavior of the start and end anchors <code>^</code> and <code>$</code>. By default, they match the beginning and end of the entire string. In multiline mode, they match the beginning and end of a line. For example,</p>
        <pre class="pre">/^[0-9]+/m</pre>
        <p class="noindent">matches digits at the beginning of a line.</p>
        <p class="noindent">With the <code>s</code> or <code>dotAll</code> flag, the <code>.</code> pattern matches newlines. Without it, <code>.</code> matches any non-newline character.</p>
        <p class="noindent">The other three flags are explained in later sections.</p>
        <p class="noindent">You can use more than one flag. The following regular expression matches upper- or lowercase letters at the start of each line:</p>
        <pre class="pre">/^[A-Z]/im</pre>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec9"><span epub:type="pagebreak" id="page_129"></span>6.9 Regular Expressions and Unicode</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">For historical reasons, regular expressions work with UTF-16 code units, not Unicode characters. For example, the <code>.</code> pattern matches a single UTF-16 code unit. For example, the string</p>
        <pre class="pre">'Hello <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span>'</pre>
        <p class="noindent">does not match the regular expression</p>
        <pre class="pre">/Hello .$/</pre>
        <p class="noindent">The <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/bcircle.jpg" alt="Images" width="16" height="16"></span> character is encoded with two code units. The remedy is to use the <code>u</code> or <code>unicode</code> flag:</p>
        <pre class="pre">/Hello .$/<strong>u</strong></pre>
        <p class="noindent">With the <code>u</code> flag, the <code>.</code> pattern matches a single Unicode character, no matter how it is encoded in UTF-16.</p>
        <p class="noindent">If you need to keep your source files in ASCII, you can embed Unicode code points into regular expressions, using the <code>\u{ }</code> syntax:</p>
        <pre class="pre">/[A-Za-z]+ <strong>\u{1F310}</strong>/u</pre>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Without the <code>u</code> flag, <code>/\u{1F310}/</code> matches the string <code>'u{1F310}'</code>.</p>
        </div>
        <p class="noindent">When working with international text, you should avoid patterns such as <code>[A-Za-z]</code> for denoting letters. These patterns won’t match letters in other languages. Instead, use <code>\p{<span class="var">Property</span>}</code>, where <span class="var">Property</span> is the name of a Boolean Unicode property. For example, <code>\p{L}</code> denotes a Unicode letter. The regular expression</p>
        <pre class="pre">/Hello, <strong>\p{L}</strong>+!/u</pre>
        <p class="noindent">matches</p>
        <pre class="pre">'Hello, värld!'</pre>
        <p class="noindent">and</p>
        <pre class="pre">'Hello, <span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/chinese4.jpg" alt="Images" width="23" height="11"></span>!'</pre>
        <p class="noindent"><a href="#ch06tbl04">Table 6-4</a> shows the names of other common Boolean properties.</p>
        <p class="noindent">For Unicode properties whose values are not Boolean, use the syntax <code>\p{<span class="var">Property</span>=<span class="var">Value</span>}</code>. For example, the regular expression</p>
        <pre class="pre">/p{Script=Han}+/u</pre>
        <p class="noindent">matches any sequence of Chinese characters.</p>
        <p class="noindent"><span epub:type="pagebreak" id="page_130"></span>Using an uppercase <code>\P</code> yields the complement: <code>\P{L}</code> matches any character that is not a letter.</p>
        <figure class="table" id="ch06tbl04">
        <figcaption><p class="table-title"><strong>Table 6-4</strong>&nbsp;&nbsp;&nbsp;&nbsp;Common Boolean Unicode Properties</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 40%;"><p class="tableth">Name</p></th>
        <th style="width: 60%;"><p class="tableth">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p class="tabletd"><code>L</code></p></td>
        <td><p class="tabletd">Letter</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>Lu</code></p></td>
        <td><p class="tabletd">Uppercase letter</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>Ll</code></p></td>
        <td><p class="tabletd">Lowercase letter</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>Nd</code></p></td>
        <td><p class="tabletd">Decimal number</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>P</code></p></td>
        <td><p class="tabletd">Punctuation</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>S</code></p></td>
        <td><p class="tabletd">Symbol</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>White_Space</code></p></td>
        <td><p class="tabletd">White space, same as <code>\s</code></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>Emoji</code></p></td>
        <td><p class="tabletd">Emoji characters, modifiers, or components</p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec10">6.10 The Methods of the <code>RegExp</code> Class</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">The <code>test</code> method yields <code>true</code> if a string <em>contains</em> a match for the given regular expression:</p>
        <pre class="pre">/[0-9]+/.test('agent <strong>007</strong>') // <span class="cite"><code>true</code></span></pre>
        <p class="noindent">To test whether the entire string matches, your regular expression must use start and end anchors:</p>
        <pre class="pre">/<strong>^</strong>[0-9]+<strong>$</strong>/.test('agent 007') // <span class="cite"><code>false</code></span></pre>
        <p class="noindent">The <code>exec</code> method yields an array holding the first matched subexpression, or <code>null</code> if there was no match.</p>
        <p class="noindent">For example,</p>
        <pre class="pre">/[0-9]+/.exec('agents 007 and 008')</pre>
        <p class="noindent">returns an array containing the string <code>'007'</code>. (As you will see in the following section, the array can also contain group matches.)</p>
        <p class="noindent">In addition, the array that <code>exec</code> returns has two properties:</p>
        <ul class="bullet">
        <li><p class="list-item"><code>index</code> is the index of the subexpression</p></li>
        <li><p class="list-item"><code>input</code> is the argument that was passed to <code>exec</code></p></li>
        </ul>
        <p class="noindent">In other words, the array returned by the preceding call to <code>exec</code> is actually</p>
        <p class="codelink"><a id="rch06pr36" href="ch06_images.xhtml#ch06pr36">Click here to view code image</a></p>
        <pre class="pre">['007', index: 7, input: 'agents 007 and 008']</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_131"></span>To match multiple subexpressions, use the <code>g</code> or <code>global</code> flag:</p>
        <pre class="pre">let digits = /[0-9]+/g</pre>
        <p class="noindent">Now each call to <code>exec</code> returns a new match:</p>
        <p class="codelink"><a id="rch06pr37" href="ch06_images.xhtml#ch06pr37">Click here to view code image</a></p>
        <pre class="pre">result = digits.exec('agents 007 and 008') // ['007', index: 7, . . .]
        result = digits.exec('agents 007 and 008') // ['008', index: 15, . . .]
        result = digits.exec('agents 007 and 008') // null</pre>
        <p class="noindent">To make this work, the <code>RegExp</code> object has a property <code>lastIndex</code> that is set to the first index after the match in each successful call to <code>exec</code>. The next call to <code>exec</code> starts the match at <code>lastIndex</code>. The <code>lastIndex</code> property is set to zero when a regular expression is constructed or a match failed.</p>
        <p class="noindent">You can also set the <code>lastIndex</code> property to skip a part of the string.</p>
        <p class="noindent">With the <code>y</code> or <code>sticky</code> flag, the match must start <em>exactly</em> at <code>lastIndex</code>:</p>
        <p class="codelink"><a id="rch06pr38" href="ch06_images.xhtml#ch06pr38">Click here to view code image</a></p>
        <pre class="pre">digits = /[0-9]+/y
        digits.lastIndex = 5
        result = digits.exec('agents 007 and 008') // null
        digits.lastIndex = 8
        result = digits.exec('agents 007 and 008') // ['07', index: 8, . . .]</pre>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">If you simply want an array of all matched substrings, use the <code>match</code> method of the <code>String</code> class instead of repeated calls to <code>exec</code>—see <a href="ch06.xhtml#ch06lev1sec12">Section 6.12</a>, “<a href="ch06.xhtml#ch06lev1sec12">String Methods with Regular Expressions</a>” (<a href="ch06.xhtml#page_133">page 133</a>).</p>
        <p class="codelink"><a id="rch06pr39" href="ch06_images.xhtml#ch06pr39">Click here to view code image</a></p>
        <pre class="pre">let results = 'agents 007 and 008'.match(/[0-9]+/g) // ['007', '008']</pre>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec11">6.11 Groups</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">Groups are used for extracting components of a match. For example, here is a regular expression for parsing times with groups for each component:</p>
        <p class="codelink"><a id="rch06pr40" href="ch06_images.xhtml#ch06pr40">Click here to view code image</a></p>
        <pre class="pre">let time = /([1-9]|1[0-2]):([0-5][0-9])([ap]m)/</pre>
        <p class="noindent">The group matches are placed in the array returned by <code>exec</code>:</p>
        <p class="codelink"><a id="rch06pr41" href="ch06_images.xhtml#ch06pr41">Click here to view code image</a></p>
        <pre class="pre">let result = time.exec('Lunch at 12:15pm')
          // ['12:15pm', '12', '15', 'pm', index: 9, . . .]</pre>
        <p class="noindent">As in the preceding section, <code>result[0]</code> is the entire matched string. For <code>i</code> &gt; 0, <code>result[i]</code> is the match for the <code>i</code>th group.</p>
        <p class="noindent">Groups are numbered by their <em>opening</em> parentheses. This matters if you have nested parentheses. Consider this example. We want to analyze line items of invoices that have the form</p>
        <pre class="pre">Blackwell Toaster    USD29.95</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_132"></span>Here is a regular expression with groups for each component:</p>
        <p class="codelink"><a id="rch06pr42" href="ch06_images.xhtml#ch06pr42">Click here to view code image</a></p>
        <pre class="pre">/(\p{L}+(\s+\p{L}+)*)\s+([A-Z]{3})([0-9.]*)/u</pre>
        <p class="noindent">In this situation, group 1 is <code>'Blackwell Toaster'</code>, the substring matched by the expression <code>(\p{L}+(\s+\p{L}+)*)</code>, from the first opening parenthesis to its matching closing parenthesis.</p>
        <p class="noindent">Group 2 is <code>' Toaster'</code>, the substring matched by <code>(\s+\p{L}+)</code>.</p>
        <p class="noindent">Groups 3 and 4 are <code>'USD'</code> and <code>'29.95'</code>.</p>
        <p class="noindent">We aren’t interested in group 2; it only arose from the parentheses that were required for the repetition. For greater clarity, you can use a noncapturing group, by adding <code>?:</code> after the opening parenthesis:</p>
        <p class="codelink"><a id="rch06pr43" href="ch06_images.xhtml#ch06pr43">Click here to view code image</a></p>
        <pre class="pre">/(\p{L}+(<strong>?:</strong>\s+\p{L}+)*)\s+([A-Z]{3})([0-9.]*)/u</pre>
        <p class="noindent">Now <code>'USD'</code> and <code>'29.95'</code> are captured as groups 2 and 3.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">When you have a group inside a repetition, such as <code>(\s+\p{L}+)*</code> in the example above, the corresponding group only holds the <em>last</em> match, not all matches.</p>
        <p class="noindent">If the repetition happened zero times, then the group match is set to <code>undefined</code>.</p>
        </div>
        <p class="noindent">You can match against the contents of a captured group. For example, consider the regular expression:</p>
        <pre class="pre">/(['"]).*<code>\1</code>/</pre>
        <p class="noindent">The group <code>(['"])</code> captures either a single or double quote. The pattern <code>\1</code> matches the captured string, so that <code>"Fred"</code> and <code>'Fred'</code> match the regular expression but <code>"Fred'</code> does not.</p>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">Even though they are supposed be outlawed in strict mode, several JavaScript engines still support octal character escapes in regular expressions. For example, <code>\11</code> denotes <code>\t</code>, the character at code point 9.</p>
        <p class="noindent">However, if the regular expression has 11 or more capturing groups, then <code>\11</code> denotes a match of the 11th group.</p>
        </div>
        <p class="noindent">Numbered groups are rather fragile. It is much better to capture by name:</p>
        <p class="codelink"><a id="rch06pr44" href="ch06_images.xhtml#ch06pr44">Click here to view code image</a></p>
        <pre class="pre">let lineItem = /(?<strong>&lt;item&gt;</strong>\p{L}+(\s+\p{L}+)*)\s+(?<strong>&lt;currency&gt;</strong>[A-Z]{3})(?<strong>&lt;price&gt;</strong>[0-9.]*)/u</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_133"></span>When a regular expression has one or more named groups, the array returned by <code>exec</code> has a property <code>groups</code> whose value is an object holding group names and matches:</p>
        <p class="codelink"><a id="rch06pr45" href="ch06_images.xhtml#ch06pr45">Click here to view code image</a></p>
        <pre class="pre">let result = lineItem.exec('Blackwell Toaster    USD29.95')
        let groupMatches = result.groups
          // { item: 'Blackwell Toaster', currency: 'USD', price: '29.95' }</pre>
        <p class="noindent">The expression <code>\k&lt;<span class="var">name</span>&gt;</code> matches against a group that was captured by name:</p>
        <p class="codelink"><a id="rch06pr46" href="ch06_images.xhtml#ch06pr46">Click here to view code image</a></p>
        <pre class="pre">/(?&lt;quote&gt;['"]).*<strong>\k&lt;quote&gt;</strong>/</pre>
        <p class="noindent">Here, the group with the name “quote” matches a single or double quote at the beginning of the string. The string must end with the same character. For example, <code>"Fred"</code> and <code>'Fred'</code> are matches but <code>"Fred'</code> is not.</p>
        <p class="noindent">The features of the <code>RegExp</code> are summarized in <a href="#ch06tbl05">Table 6-5</a>.</p>
        <figure class="table" id="ch06tbl05">
        <figcaption><p class="table-title"><strong>Table 6-5</strong>&nbsp;&nbsp;&nbsp;&nbsp;Features of the <code>RegExp</code> Class</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 40%;"><p class="tableth">Name</p></th>
        <th style="width: 60%;"><p class="tableth">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td colspan="2"><p class="tabletd"><strong>Constructors</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>new RegExp(regex, flags)</code></p></td>
        <td><p class="tabletd">Constructs a regular expression from the given <code>regex</code> (a string, regular expression literal, or <code>RegExp</code> object) and the given flags</p></td>
        </tr>
        <tr>
        <td colspan="2"><p class="tabletd"><strong>Properties</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>flags</code></p></td>
        <td><p class="tabletd">A string of all flags</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>ignoreCase</code>, <code>multiline</code>, <code>dotAll</code>, <code>unicode</code>, <code>global</code>, <code>sticky</code></p></td>
        <td><p class="tabletd">Boolean properties for all flag types</p></td>
        </tr>
        <tr>
        <td colspan="2"><p class="tabletd"><strong>Methods</strong></p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>test(str)</code></p></td>
        <td><p class="tabletd"><code>true</code> if <code>str</code> contains a match for this regular expression</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>exec(str)</code></p></td>
        <td><p class="tabletd">Match results for the current match of this regular expression inside <code>str</code>. See <a href="ch06.xhtml#ch06lev1sec10">Section 6.10</a> for details. The <code>match</code> and <code>matchAll</code> methods of the <code>String</code> class are simpler to use than this method.</p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec12">6.12 String Methods with Regular Expressions</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/queen.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">As you saw in <a href="ch06.xhtml#ch06lev1sec10">Section 6.10</a>, “<a href="ch06.xhtml#ch06lev1sec10">The Methods of the <code>RegExp</code> Class</a>” (<a href="ch06.xhtml#page_130">page 130</a>), the workhorse method for getting match information is the <code>exec</code> method of the <code>RegExp</code> class. But its API is far from elegant. The <code>String</code> class has several <span epub:type="pagebreak" id="page_134"></span>methods that work with regular expressions and produce commonly used results more easily.</p>
        <p class="noindent">For a regular expression without the global flag set, the call <code>str.match(regex)</code> returns the same match results as <code>regex.exec(str)</code>:</p>
        <p class="codelink"><a id="rch06pr47" href="ch06_images.xhtml#ch06pr47">Click here to view code image</a></p>
        <pre class="pre">'agents 007 and 008'.match(/[0-9]+/) // ['007', index: 7, . . .]</pre>
        <p class="noindent">With the global flag set, <code>match</code> simply returns an array of matches, which is often just what you want:</p>
        <p class="codelink"><a id="rch06pr48" href="ch06_images.xhtml#ch06pr48">Click here to view code image</a></p>
        <pre class="pre">'agents 007 and 008'.match(/[0-9]+/g) // ['007', '008']</pre>
        <p class="noindent">If there is no match, the <code>String.match</code> method returns <code>null</code>.</p>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent"><code>RegExp.exec</code> and <code>String.match</code> are the only methods in the ECMAScript standard library that yield <code>null</code> to indicate the absence of a result.</p>
        </div>
        <p class="noindent">If you have a global search and want all match results without calling <code>exec</code> repeatedly, you will like the <code>matchAll</code> method of the <code>String</code> class that is currently a stage 3 proposal. It returns an iterable of the match results. Let’s say you want to look for all matches of the regular expression</p>
        <p class="codelink"><a id="rch06pr49" href="ch06_images.xhtml#ch06pr49">Click here to view code image</a></p>
        <pre class="pre">let time = /([1-9]|1[0-2]):([0-5][0-9])([ap]m)/g</pre>
        <p class="noindent">The loop</p>
        <p class="codelink"><a id="rch06pr50" href="ch06_images.xhtml#ch06pr50">Click here to view code image</a></p>
        <pre class="pre">for (const [, hours, minutes, period] of input.matchAll(time)) {
          . . .
        }</pre>
        <p class="noindent">iterates over all match results, using destructuring to set <code>hours</code>, <code>minutes</code>, and <code>period</code> to the group matches. The initial comma ignores the entire matched expression.</p>
        <p class="noindent">The <code>matchAll</code> method yields the matches lazily. It is efficient if there are many matches but only a few are examined.</p>
        <p class="noindent">The <code>search</code> method returns the index of the first match or <code>-1</code> if no match is found:</p>
        <p class="codelink"><a id="rch06pr51" href="ch06_images.xhtml#ch06pr51">Click here to view code image</a></p>
        <pre class="pre">let index = 'agents 007 and 008'.search(/[0-9]+/) // <span class="cite">Yields index 7</span></pre>
        <p class="noindent">The <code>replace</code> method replaces the first match of a regular expression with a replacement string. To replace all matches, set the global flag:</p>
        <p class="codelink"><a id="rch06pr52" href="ch06_images.xhtml#ch06pr52">Click here to view code image</a></p>
        <pre class="pre">let replacement = 'agents 007 and 008'.replace(/[0-9]/g, '?')
          // 'agents ??? and ???'</pre>
        <div class="note">
        <p class="note-caption"><span epub:type="pagebreak" id="page_135"></span><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">The <code>split</code> method can have a regular expression as argument. For example,</p>
        <pre class="pre">str.split(/\s*,\s*/)</pre>
        <p class="noindent">splits <code>str</code> along commas that are optionally surrounded by white space.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec13">6.13 More about Regex Replace</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/cat.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">In this section, we have a closer look at the <code>replace</code> method of the <code>String</code> class.</p>
        <p class="noindent">The replacement string parameter can contain patterns starting with a <code>$</code> that are processed as shown in <a href="#ch06tbl06">Table 6-6</a>.</p>
        <figure class="table" id="ch06tbl06">
        <figcaption><p class="table-title"><strong>Table 6-6</strong>&nbsp;&nbsp;&nbsp;&nbsp;Replacement String Patterns</p></figcaption>
        <table class="tabletb">
        <thead>
        <tr>
        <th style="width: 40%;"><p class="tableth">Pattern</p></th>
        <th style="width: 60%;"><p class="tableth">Description</p></th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p class="tabletd"><code>$`</code>, <code>$'</code></p></td>
        <td><p class="tabletd">The portion before or after the matched string</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>$&amp;</code></p></td>
        <td><p class="tabletd">Matched string</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>$<span class="var">n</span></code></p></td>
        <td><p class="tabletd">The <span class="var">n</span><sup>th</sup> group</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>$&lt;<span class="var">name</span>&gt;</code></p></td>
        <td><p class="tabletd">The group with the given name</p></td>
        </tr>
        <tr>
        <td><p class="tabletd"><code>$$</code></p></td>
        <td><p class="tabletd">Dollar sign</p></td>
        </tr>
        </tbody>
        </table>
        </figure>
        <p class="noindent">For example, the following replacement repeats each vowel three times:</p>
        <p class="codelink"><a id="rch06pr53" href="ch06_images.xhtml#ch06pr53">Click here to view code image</a></p>
        <pre class="pre">'hello'.replace(/[aeiou]/g, '$&amp;$&amp;$&amp;') // 'heeellooo'</pre>
        <p class="noindent">The most useful pattern is the group pattern. Here, we use groups to match the first and last name of a person in each line and flip them:</p>
        <p class="codelink"><a id="rch06pr54" href="ch06_images.xhtml#ch06pr54">Click here to view code image</a></p>
        <pre class="pre">let names = 'Harry Smith\nSally Lin'
        let flipped = names.replace(
          /^([A-Z][a-z]+) ([A-Z][a-z]+)/gm, "$2, $1")
          // 'Smith, Harry\nLin, Sally'</pre>
        <p class="noindent">If the number after the <code>$</code> sign is larger than the number of groups in the regular expression, the pattern is inserted verbatim:</p>
        <p class="codelink"><a id="rch06pr55" href="ch06_images.xhtml#ch06pr55">Click here to view code image</a></p>
        <pre class="pre">let replacement = 'Blackwell Toaster $29.95'.replace('\$29', '$19')
          // <span class="cite"><code>'Blackwell Toaster <strong>$19</strong>.95'</code>—there is no group 19</span></pre>
        <p class="noindent">You can also use named groups:</p>
        <p class="codelink"><a id="rch06pr56" href="ch06_images.xhtml#ch06pr56">Click here to view code image</a></p>
        <pre class="pre">flipped = names.replace(/^(?&lt;first&gt;[A-Z][a-z]+) (?&lt;last&gt;[A-Z][a-z]+)$/gm,
          "$&lt;last&gt;, $&lt;first&gt;")</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_136"></span>For more complex replacements, you can provide a function instead of a replacement string. The function receives the following arguments:</p>
        <ul class="bullet">
        <li><p class="list-item">The string that was matched by the regular expression</p></li>
        <li><p class="list-item">The matches of all groups</p></li>
        <li><p class="list-item">The offset of the match</p></li>
        <li><p class="list-item">The entire string</p></li>
        </ul>
        <p class="noindent">In this example, we just process the group matches:</p>
        <p class="codelink"><a id="rch06pr57" href="ch06_images.xhtml#ch06pr57">Click here to view code image</a></p>
        <pre class="pre">flipped = names.replace(/^([A-Z][a-z]+) ([A-Z][a-z]+)/gm,
          (match, first, last)  =&gt; `${last}, ${first[0]}.`)
          // 'Smith, H.\nLin, S.'</pre>
        <div class="note">
        <p class="note-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/note.jpg" alt="Images" width="42" height="42"></span> Note</p>
        <p class="noindent">The <code>replace</code> method also works with strings, replacing the first match of the string itself:</p>
        <p class="codelink"><a id="rch06pr58" href="ch06_images.xhtml#ch06pr58">Click here to view code image</a></p>
        <pre class="pre">let replacement = 'Blackwell Toaster $29.95'.replace('$', 'USD')
          // <span class="cite">Replaces <code>$</code> with <code>USD</code></span></pre>
        <p class="noindent">Note that the <code>$</code> is not interpreted as an end anchor.</p>
        </div>
        <div class="caution">
        <p class="caution-caption"><span class="middle"><img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/caution.jpg" alt="Images" width="36" height="36"></span> Caution</p>
        <p class="noindent">If you call the <code>search</code> method with a string, it is converted to a regular expression:</p>
        <p class="codelink"><a id="rch06pr59" href="ch06_images.xhtml#ch06pr59">Click here to view code image</a></p>
        <pre class="pre">let index = 'Blackwell Toaster $29.95'.search('$')
          // <span class="cite">Yields <code>24</code>, the end of the string, not the index of <code>$</code></span></pre>
        <p class="noindent">Use <code>indexOf</code> to search for a plain string.</p>
        </div>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec14">6.14 Exotic Features</h3>
        <figure class="image-1">
        <img src="/api/v2/epubs/urn:orm:book:9780136502166/files/graphics/cat.jpg" alt="Images" width="85" height="85">
        </figure>
        <p class="noindent">In the final section of this chapter, you will see several complex and uncommon regular expression features.</p>
        <p class="noindent">The <code>+</code> and <code>*</code> repetition operators are “greedy”—they match the longest possible strings. That’s generally desirable. You want <code>/[0-9]+/</code> to match the longest possible string of digits, and not a single digit.</p>
        <p class="noindent">However, consider this example:</p>
        <pre class="pre">'"Hi" and "Bye"'.match(/".*"/g)</pre>
        <p class="noindent">The result is</p>
        <pre class="pre">'"Hi" and "Bye"'</pre>
        <p class="noindent"><span epub:type="pagebreak" id="page_137"></span>because <code>.*</code> greedily matches everything until the final <code>"</code>. That does not help us if we want to match quoted substrings.</p>
        <p class="noindent">One remedy is to require non-quotes in the repetition:</p>
        <pre class="pre">'"Hi" and "Bye"'.match(/"[^"]*"/g)</pre>
        <p class="noindent">Alternatively, you can specify that the match should be <em>reluctant</em>, by using the <code>*?</code> operator:</p>
        <pre class="pre">'"Hi" and "Bye"'.match(/".*?"/g)</pre>
        <p class="noindent">Either way, now each quoted string is matched separately, and the result is</p>
        <pre class="pre">['"Hi"', '"Bye"']</pre>
        <p class="noindent">There is also a reluctant version <code>+?</code> that requires at least one repetition.</p>
        <p class="noindent">The <em>lookahead</em> operator <code><span class="var">p</span>(?=<span class="var">q</span>)</code> matches <span class="var">p</span> provided it is followed by <span class="var">q</span>, but does not include <span class="var">q</span> in the match. For example, here we find the hours that precede a colon.</p>
        <p class="codelink"><a id="rch06pr60" href="ch06_images.xhtml#ch06pr60">Click here to view code image</a></p>
        <pre class="pre">let hours = '10:30 - 12:00'.match(/[0-9]+(<strong>?=</strong>:)/g) // ['10, 12']</pre>
        <p class="noindent">The inverted lookahead operator <code><span class="var">p</span>(?!<span class="var">q</span>)</code> matches <span class="var">p</span> provided it is <em>not followed</em> by <span class="var">q</span>.</p>
        <p class="codelink"><a id="rch06pr61" href="ch06_images.xhtml#ch06pr61">Click here to view code image</a></p>
        <pre class="pre">let minutes = '10:30 - 12:00'.match(/[0-9][0-9](<strong>?!</strong>:)/g) // ['10, 12']</pre>
        <p class="noindent">There is also a <em>lookbehind</em> <code>(?&lt;=<span class="var">p</span>)<span class="var">q</span></code> that matches <span class="var">q</span> as long as it is preceded by <span class="var">p</span>.</p>
        <p class="codelink"><a id="rch06pr62" href="ch06_images.xhtml#ch06pr62">Click here to view code image</a></p>
        <pre class="pre">minutes = '10:30 - 12:00'.match(/(<strong>?&lt;=</strong>[0-9]+:)[0-9]+/g) // ['30', '00']</pre>
        <p class="noindent">Note that the argument inside <code>(?&lt;=<strong>[0-9]+:</strong>)</code> is itself a regular expression.</p>
        <p class="noindent">Finally, there is an inverted lookbehind <code>(?&lt;!<span class="var">p</span>)<span class="var">q</span></code>, matching <span class="var">q</span> as long as it is not preceded by <span class="var">p</span>.</p>
        <p class="codelink"><a id="rch06pr63" href="ch06_images.xhtml#ch06pr63">Click here to view code image</a></p>
        <pre class="pre">hours = '10:30 - 12:00'.match(/(?&lt;![0-9:])[0-9]+/g)</pre>
        <p class="noindent">Regular expressions such as this one may have motivated Jamie Zawinski’s timeless quote, “Some people, when confronted with a problem, think: ‘I know, I’ll use regular expressions.’ Now they have two problems.”</p>
        </section>
        <section>
        <h3 class="h3" id="ch06lev1sec15">Exercises</h3>
        <ol class="ol-exe">
        <li><p class="list" id="ch06ex01">Write a function that, given a string, produces an escaped string delimited by <code>'</code> characters. Turn all non-ASCII Unicode into <code>\u{. . .}</code>. Produce escapes <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code>, <code>\v</code>, <code>\'</code>, <code>\\</code>.</p></li>
        <li><p class="list" id="ch06ex02">Write a function that fits a string into a given number of Unicode characters. If it is too long, trim it and append an ellipsis … (<code>\u{2026}</code>). Be sure <span epub:type="pagebreak" id="page_138"></span>to correctly handle characters that are encoded with two UTF-16 code units.</p></li>
        <li><p class="list" id="ch06ex03">The <code>substring</code> and <code>slice</code> methods are very tolerant of bad arguments. Can you get them to yield an error with any arguments? Try strings, objects, array, no arguments.</p></li>
        <li><p class="list" id="ch06ex04">Write a function that accepts a string and returns an array of all substrings. Be careful about characters that are encoded with two UTF-16 code units.</p></li>
        <li><p class="list" id="ch06ex05">In a more perfect world, all string methods would take offsets that count Unicode characters, not UTF-16 code units. Which <code>String</code> methods would be affected? Provide replacement functions for them, such as <code>indexOf(str, sub)</code> and <code>slice(str, start, end)</code>.</p></li>
        <li><p class="list" id="ch06ex06">Implement a <code>printf</code> tagged template function that formats integers, floating-point numbers, and strings with the classic <code>printf</code> formatting instructions, placed after embedded expressions:</p>
        <p class="codelink"><a id="rch06pr64" href="ch06_images.xhtml#ch06pr64">Click here to view code image</a></p>
        <pre class="pre">const formatted = printf`${item}%-40s | ${quantity}%6d | ${price}%10.2f`</pre></li>
        <li><p class="list" id="ch06ex07">Write a tagged template function <code>spy</code> that displays both the raw and “cooked” string fragments and the embedded expression values. In the raw string fragments, remove the backslashes that were needed for escaping backticks, dollar signs, and backslashes.</p></li>
        <li><p class="list" id="ch06ex08">List as many different ways as you can to produce a regular expression that matches only the empty string.</p></li>
        <li><p class="list" id="ch06ex09">Is the <code>m</code>/<code>multiline</code> flag actually useful? Couldn’t you just match <code>\n</code>? Produce a regular expression that can find all lines containing just digits without the multiline flag. What about the last line?</p></li>
        <li><p class="list" id="ch06ex10">Produce regular expressions for email addresses and URLs.</p></li>
        <li><p class="list" id="ch06ex11">Produce regular expressions for US and international telephone numbers.</p></li>
        <li><p class="list" id="ch06ex12">Use regular expression replacement to clean up phone numbers and credit card numbers.</p></li>
        <li><p class="list" id="ch06ex13">Produce a regular expression for quoted text, where the delimiters could be matching single or double quotes, or curly quotes “”.</p></li>
        <li><p class="list" id="ch06ex14">Produce a regular expression for image URLs in an HTML document.</p></li>
        <li><p class="list" id="ch06ex15">Using a regular expression, extract all decimal integers (including negative ones) from a string into an array.</p></li>
        <li><p class="list" id="ch06ex16">Suppose you have a regular expression and you want to use it for a complete match, not just a match of a substring. You just want to surround it with <code>^</code> and <code>$</code>. But that’s not so easy. The regular expression needs to <span epub:type="pagebreak" id="page_139"></span>be properly escaped before adding those anchors. Write a function that accepts a regular expression and yields a regular expression with the anchors added.</p></li>
        <li><p class="list" id="ch06ex17">Use the <code>replace</code> method of the <code>String</code> class with a function argument to replace all °F measurements in a string with their °C equivalents.</p></li>
        <li><p class="list" id="ch06ex18">Enhance the <code>greek</code> function of <a href="ch06.xhtml#ch06lev1sec5">Section 6.5</a>, “<a href="ch06.xhtml#ch06lev1sec5">Raw Template Literals</a>” (<a href="ch06.xhtml#page_122">page 122</a>), so that it handles escaped backslashes and <code>$</code> symbols. Also check whether a symbol starting with a backslash has a substitution. If not, include it verbatim.</p></li>
        <li><p class="list" id="ch06ex19">Generalize the <code>greek</code> function of the preceding exercise to a general purpose substitution function that can be called as <code>subst(<span class="var">dictionary</span>)`<span class="var">templateString</span>`</code>.</p></li>
        </ol>
        </section>
        </section>
        </div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9780136502166/files/9780136502142.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
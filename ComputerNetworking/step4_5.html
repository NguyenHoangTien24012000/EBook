<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><h2 class="h2" id="ch29"><a id="page_743"></a><strong>Chapter 29<br>Internet of Things</strong></h2>
        <div class="sidebar">
        <p class="sb-noindent"><strong>Learning Objectives</strong></p>
        <p class="sb-noindent">After reading this chapter, you should understand:</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The relationship between IoT and DDoS attacks</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The problems involved in securing IoT devices</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The concept of unikernels, and how they relate to IoT</p>
        <p class="sb-indenthangingB"><img class="middle" src="/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/bull.jpg" alt="Image" width="12" height="12"> The basic kinds of IoT connectivity available, including BlueTooth and LoRaWAN</p>
        </div>
        <p class="indent">The world is made up of things. Television sets, radios, light bulbs, and refrigerators all surround each of us every day, providing essential services in some cases, and simply making our lives simpler in others. The <em>Internet of Things</em> (IoT) either accepts the reality or proposes to make real (depending on your perspective) the connection of every one of these devices to the Internet. Connecting this many “things” to the Internet, however, requires a radical rethinking of the systems required to collect and act on data; the sheer amount of data would require the kinds of newer design patterns outlined in <a href="ch25.xhtml#ch25">Chapter 25</a>, “<a href="ch25.xhtml#ch25">Disaggregation, Hyperconvergence, and the Changing Network</a>,” and rely on the kinds of service separation and scaling considered in <a href="ch27.xhtml#ch27">Chapter 27</a>, “<a href="ch27.xhtml#ch27">Virtualized Network Functions</a>.”</p>
        <p class="indent">This chapter considers IoT from various perspectives.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev1"><a id="page_744"></a>Introducing IoT</h3>
        <p class="noindent">On Tuesday, September 13, 2016, the security analysis website KrebsOnSecurity.com was down.<sup><a id="ch29fn1"></a><a href="ch29.xhtml#ch29fn-1">1</a></sup> More accurately, the site was rendered inaccessible by a distributed denial of service (DDoS) attack. DDoS attacks take advantage of the free and open nature of the Internet. Since any part of the Internet can talk to any other part, it becomes possible to launch attacks from many Internet locations at once.</p>
        </div>
        <p class="indent">The distributed nature of a DDoS attack makes the attack difficult to mitigate. Which source addresses should be filtered as attackers, and which source addresses are those of legitimate customers? The attack patterns are purposely designed to make this challenging to discern, overwhelming the target with traffic, and resulting in service requests being denied. The overwhelming amount of traffic in this case was estimated to be as high as 620Gbps.</p>
        <p class="indent">Brian Krebs, the security expert behind KrebsOnSecurity.com, describes himself as obsessed with security, maintaining relationships with many other smart information technology (IT) experts to keep his skills honed and his writing deeply informed. Yet, even with his technical prowess, his site fell victim to this DDoS attack. Why?</p>
        <p class="indent">On Friday, October 21, 2016, the Domain Name Services (DNS) provided by Dyn came under a DDoS attack. This attack was even more nefarious than the one on Krebs. The attack impacted Dyn and Dyn’s customers, rendering their services effectively offline. If name resolvers were unable to reach Dyn DNS servers, then the domain names hosted by Dyn would not be able to be resolved. Various media outlets reported impacts to AirBnB, Amazon Web Services, Box, FreshBooks, GitHub, Netflix, PayPal, Reddit, Spotify, and Twitter, just to name a few.</p>
        <p class="indent">In the DDoS attack launched against Dyn, an estimated 40,000–100,000 sources were estimated to generate an aggregated peak traffic of a staggering 1.2Tbps. This attack came in waves, rendering services down and up and down again while mitigation efforts were deployed.</p>
        <p class="indent">What do these attacks have to do with the Internet of Things (IoT)? In both the Krebs and Dyn attacks, poorly secured IoT devices were leveraged. DDoS attacks often work via botnets. In a botnet, many Internet-connected computing devices are compromised due to some security flaw. When the flaw is exploited, command-and-control software is installed, bringing the device under the control of a remote party.</p>
        <p class="indent">When enough devices are controlled, they can be used by the controller to launch a coordinated attack against a target. The Internet is used as the network <a id="page_745"></a>to carry out the attack. IoT is making it easier to create botnets and launch powerful DDoS attacks, such as the ones against <em>Krebs on Security</em>, Dyn, and many Dyn customers.</p>
        <p class="indent">In fairness, IoT is not specifically to blame. The issue is more one of a huge number of devices connected to an intentionally open Internet, which are not often touched, and rarely have the processing power to dedicate a lot of effort to security. After all, IoT is merely a handy term to describe the notion of a world in which unexpected things are connected. Home automation smart devices such as thermostats, garage door openers, refrigerators, lights, video surveillance, locks, and home entertainment devices, not to mention cars, are part of the brave new IoT world.</p>
        <p class="indent">In the realm of business, smart cities can control parking, optimize traffic, and micromanage electrical power distribution. Smart buildings can optimize environmental systems, managing heating, cooling, and lighting in harmony with physical building design and efficiency protocols. Smart factories monitor manufacturing processes, rooting out the tiniest inadequacies in production, squelching problems before they become manufacturing defects.</p>
        <p class="indent">Energy producers also add smart devices to the IoT panoply, relying on sensors to govern oil and gas production, as well as the operation of wind farms generating electricity.</p>
        <p class="indent">As the usefulness of IoT has exploded, IoT device manufacturers have focused on functionality more than security. Far too many IoT devices are shipping with easily defeated security measures, making them easy targets to add to a botnet for use in a later attack.</p>
        <p class="indentb">Herein lies one of several networking challenges introduced by the Internet of Things considered in this chapter:</p>
        <p class="indenthangingN">1. <strong>IoT security.</strong> How should IoT devices be secured? What is unique about them compared to traditional compute? What design constraints are introduced by IoT security peculiarities?</p>
        <p class="indenthangingN">2. <strong>IoT connectivity.</strong> As IoT devices flourish in number, what strategies are required by network engineers to best connect them to the local networks they serve as well as the Internet? This is a more poignant consideration than it sounds, complicating both addressing schemes and communications protocols.</p>
        <p class="indenthangingN">3. <strong>IoT data.</strong> The amount of data produced by IoT devices in certain applications places a burden on the Internet that network engineers must consider. For IoT data to be made use of in a timely way, it must be processed as quickly as possible. The latency of public cloud introduces an IoT data processing challenge the network engineer must consider.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev2"><a id="page_746"></a>IoT Security</h3>
        <p class="noindent">Some writers have characterized the IoT as the <em>Internet of Terror;</em><sup><a id="ch29fn2"></a><a href="ch29.xhtml#ch29fn-2">2</a></sup> others, <em>The Internet of Stupid Things</em>.<sup><a id="ch29fn3"></a><a href="ch29.xhtml#ch29fn-3">3</a></sup> Why the derision? The story of <em>Krebs on Security</em> could be the story of every website unless some method is used to secure these “smart” devices now proliferating. The question is: How can you secure devices that have very little processing power, very little memory, and generally cannot or will not be updated on a regular basis?</p>
        </div>
        <p class="indent">There are several possible answers to this question—answers many security and network engineers believe do not, ultimately, actually provide a sufficient answer.</p>
        <div class="heading">
        <h4 class="h4" id="ch29lev3"><strong>Securing Insecurable Devices Through Isolation</strong></h4>
        <p class="noindent">One obvious thought to secure IoT devices is to treat them as you’d treat any computing device: lock them down. There are well-known processes to minimize the attack surfaces of Linux and Windows operating systems. For example, a Windows 10 workstation might have a specific policy pushed to it through centralized control. Or, a Linux server might be instantiated using a template predefined by operators to turn off unused services, reducing the attack surface.</p>
        </div>
        <p class="indent">However, IoT devices are not running full-blown operating systems and might lack the tools required to secure them in this way. In addition, securing them might break some of their functionality.</p>
        <p class="indent">Since the IoT devices themselves cannot be secured, controlling access to the network is currently the main strategy for IoT device security. The idea is to allow the IoT device access to the network, but to strictly limit what the IoT device can reach through the network. While the Internet is an open transport, private networks containing IoT devices are not presumed to be open. Operators have the opportunity to control traffic flows and limit the chance their IoT devices become compromised. In addition, operators can prevent their IoT devices from being used as minions in a DDoS attack, even if they are compromised.</p>
        <p class="indent">IoT device access control can be accomplished in a couple of different ways; the following sections consider both service-based isolation and endpoint isolation.</p>
        <div class="heading">
        <h5 class="h5" id="ch29level1"><em><strong>Service-Based Isolation</strong></em></h5>
        <p class="noindent">In the IoT service-based isolation model, IoT devices with a common purpose are assigned to a specific network segment that is isolated from the rest of the network by a security service. The security service implements a policy filtering traffic flowing <a id="page_747"></a>into the IoT network from the outside world. The security policy also limits what the IoT devices can access beyond the service, as illustrated in <a href="ch29.xhtml#ch29fig01">Figure 29-1</a>.</p>
        </div>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/29fig01.jpg" aria-describedby="Al29fig01" alt="Illustration of how a Security Service to Separate IoT Devices is depicted." width="415" height="189"><aside class="hidden" id="Al29fig01">
        <p>An IoT segment cloud is present, followed by a firewall, and then a cloud comprising of other network segments. Along the left of the IoT cloud are four sensors.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch29fig01"></a><strong>Figure 29-1</strong> <em>Using a Security Service to Separate IoT Devices from the Rest of the Network</em></p>
        </div>
        <p class="indent">This strategy can work in scenarios such as building environmental control. In this model, IoT devices such as thermostats and HVAC controls can participate on a common network. In fact, they might need to communicate on a common network to share data with one another or with a centralized controller. The HVAC environmental network is isolated from all other building networks by the programmed behavior of the security appliance or service policy.</p>
        <p class="indent">Exceptions to this policy can be made as needed to support business functions. For instance, IT operations might require access to support HVAC functions and monitor equipment. Workstations supporting building maintenance might require access to the network as well. The security policy governs this traffic, limiting packet flows to what is absolutely required.</p>
        <p class="indent">The result of this strategy is that IoT devices become much more difficult to access remotely. The IoT devices themselves are still insecure, but their attack surfaces have been isolated to expose them to as few outside hosts as possible while still allowing them to perform their functions.</p>
        <div class="heading">
        <h5 class="h5" id="ch29level2"><em><strong>Endpoint Isolation</strong></em></h5>
        <p class="noindent">Endpoint isolation takes the idea of appliance-based isolation one step further. In this approach, every IoT device on the network is isolated from every other device on the network. This is managed at the ingress network port. Where the IoT device is plugged into the network, there is a filter in place strictly limiting what other systems the device can communicate with, and vice versa.</p>
        </div>
        <p class="indent">The problem with endpoint isolation is one of administrative burden. Maintaining appropriate whitelists for every IoT endpoint on the network is tedious at best and an impossible-to-scale challenge for IT operations teams at worst.</p>
        <p class="indent">To handle this challenge, some IoT security solutions relying on endpoint isolation employ central management. In this scenario, an administrator creates security policies, assigning them to groups. Then, IoT devices are placed into the proper <a id="page_748"></a>groups. The central controller takes care of pushing the appropriate traffic filtering policy to the ingress network port, isolating the IoT device. <a href="ch29.xhtml#ch29fig02">Figure 29-2</a> illustrates.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/29fig02.jpg" aria-describedby="Al29fig02" alt="Figure showing Endpoint Isolation with IoT Devices." width="352" height="289"><aside class="hidden" id="Al29fig02">
        <p>A router is positioned at the center. On the top, it is connected to a policy manager through a page-like icon labeled policy. To its left, it is connected to two sensors and a standard host system. To the right, a network cloud underlies a small portion of the router. The cloud has an IoT service at the top, and other services at the bottom. All of these are connected to the central router.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch29fig02"></a><strong>Figure 29-2</strong> <em>Endpoint Isolation with IoT Devices</em></p>
        </div>
        <p class="indent">Endpoint isolation is an effective approach for IoT devices that operate as loners. For example, endpoint isolation works effectively in healthcare, where medical devices might require access to just a small number of other systems on the network, and do not participate as a member of a collaborative sensor group.</p>
        <div class="heading">
        <h5 class="h5" id="ch29level3"><em><strong>Unikernels</strong></em></h5>
        <p class="noindent">One technology effort that could significantly impact IoT security is unikernels. Unikernels are stripped down versions of operating systems that include just the functionality strictly required for the application they support. This approach dramatically reduces the attack surface of the underlying system.</p>
        </div>
        <p class="indent">What is meant by “attack surface” in the context of IoT devices? Operating systems often ship with many libraries and supporting applications by default, selected at the whim of the operating system (OS) distribution creators. Operating systems are bundled in this way because the resources are known to be <em>commonly</em> used, even if they are not <em>always</em> used. Attackers will attempt to leverage any resources they can, hoping to discover vulnerable code when they run their exploits.</p>
        <p class="indent">For example, an operating system might include an antiquated storage library, included by the distro makers just in case a user is running the OS on an older system. If an old storage library is not required to access any of the disk hardware in the system, it is both useless to the operator and potentially exploitable by attackers. The library makes up part of the “surface” that can be attacked.</p>
        <p class="indent">Thus, on IoT devices shipped with full operating system distributions, a larger than necessary attack surface is present. Unikernels strip out the daemons, libraries, and applications not required by the operating system nor the application. The result <a id="page_749"></a>is a barebones, highly efficient operating system environment containing just what is needed to support the applications running.</p>
        <p class="indent">Don’t think of “barebones” negatively in this context. Operating systems function in multiple contexts. Some are used actively by end users—for example, as desktop operating systems, programming environments, digital media creation, and so on. In this context, a barebones unikernel would be an overly constrained platform likely to inconvenience the user to the point of madness.</p>
        <p class="indent">However, in the context of a specialty device manufactured with a singular purpose, a unikernel seems perfectly suited. An operating system built for the purpose of delivering a single application, most likely on a customized bit of hardware that will never change, cries out for a secure and efficient environment.</p>
        <p class="indent">Process impact aside, there is little conceptual downside to an IoT device manufacturer taking the unikernel approach. Despite the advantages, unikernels have not been widely adopted by IoT device manufacturers yet.</p>
        <p class="indent">Unikernels are raised here as a security enhancement for IoT devices, but how many consumers of IoT devices will understand this point and make their purchases accordingly? Perhaps consumers, armed with the knowledge of unikernels and sufficient buying power, could demand manufacturers properly implement unikernels as the base platform their applications run on.</p>
        <div class="heading">
        <h5 class="h5" id="ch29level4"><em><strong>The End of Open Networking?</strong></em></h5>
        <p class="noindent">This chapter was introduced with the notion of an open Internet, the intentionally open nature of the Internet that has made possible free communication as well as nefarious attacks. Although supportive of the open Internet, the Internet Engineering Task Force (IETF) offers perspectives on best practices, codified as Best Current Practice (BCP) documents.</p>
        </div>
        <p class="indent">One such BCP of interest to the IoT discussion is BCP38, which is a pointer to RFC2827: <em>Network Ingress Filtering: Defeating Denial of Service Attacks Which Employ Internet Protocol (IP) Source Address Spoofing</em>. BCP38 proposes all network operators filter traffic with inappropriate source addresses. “Inappropriate” means source addresses that should not be used to originate packets or should not appear on the wire on the interface where they were received.</p>
        <p class="indent">For example, RFC1918<sup><a id="ch29fn4"></a><a href="ch29.xhtml#ch29fn-4">4</a></sup> specifies address blocks for private use only:</p>
        <p class="bullt">• 10.0.0.0/8</p>
        <p class="bull">• 172.16.0.0/12</p>
        <p class="bullb">• 192.168.0.0/16</p>
        <p class="indent"><a id="page_750"></a>RFC1918 blocks are not routable across the public Internet. Traffic containing source addresses from RFC1918 address space should never appear on the public Internet. IPv6 also has several kinds of globally unroutable addresses, such as link local addresses, and unroutable globally unique addresses.<sup><a id="ch29fn5"></a><a href="ch29.xhtml#ch29fn-5">5</a></sup> Therefore, BCP38 (RFC2827,<sup><a id="ch29fn6"></a><a href="ch29.xhtml#ch29fn-6">6</a></sup> updated by RFC3704<sup><a id="ch29fn7"></a><a href="ch29.xhtml#ch29fn-7">7</a></sup>) suggests they should be filtered.</p>
        <p class="indent">DDoS attacks often use spoofed—fake—source addresses in their attack. The attackers don’t require a response, and obfuscating source addresses makes it more difficult to track down the actual hosts propagating the attack. RFC1918 addresses are useful here, but any addresses could be, and are, used in DDoS attacks.</p>
        <p class="indent">By dropping traffic with spoofed addresses, DDoS attacks should be at least partially mitigated. Writing filter lists that drop address blocks such as RFC1918 is straightforward. Also straightforward is the filtering of bogons, containing nonroutable address blocks, plus unassigned public address blocks.<sup><a id="ch29fn8"></a><a href="ch29.xhtml#ch29fn-8">8</a></sup> Unicast Reverse Path Forwarding (uRPF) ensures traffic is only forwarded if the source address is reachable through the interface through which the packet was received.</p>
        <p class="indent">From the standpoint of IoT, BCP38 and uRPF are best practices because they help contain certain types of attacks sourced from compromised IoT devices. The recommendations in BCP38 are not as widely deployed as they could be because of various operational and performance issues involved in deploying these techniques. For instance, the Mirai botnet used in the Krebs and Dyn DDoS attacks appeared to come from spoofed addresses—reportedly tens of millions of addresses from tens of thousands of sources. And yet—the attacks were successful.</p>
        <div class="heading">
        <h5 class="h5" id="ch29level5"><em><strong>IoT Does Not Represent New Security Challenges</strong></em></h5>
        <p class="noindent">Interestingly, IoT does not represent any new security challenges to network engineers. The issues of DDoS, address spoofing, ingress filtering, etc., are familiar to networking professionals. However, IoT makes these issues more poignant.</p>
        </div>
        <p class="indent">Distributed denial of service attacks have always been painful. However, the proliferation of poorly secured, easily exploitable, IoT devices has rendered DDoS attacks easier to execute and more harmful once launched. Thus, the industry has been forced to address the issue, reminding network engineers and equipment manufacturers of the mitigation strategies.</p>
        <p class="indent">IoT also raises the stakes because IoT devices tend to gather data of potential interest to attackers. An attacker, for instance, might be very interested in being able <a id="page_751"></a>to gain access to a building through an IoT device. What about IoT sensor data coming from a natural gas pipeline? While this chapter has focused on IoT devices being used as incubators for malware, network operators should remember IoT devices also represent targets of opportunity in and of themselves because of the data they sometimes have access to.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev4">IoT Connectivity</h3>
        <p class="noindent">A different set of challenges for the network engineer is represented by IoT connectivity requirements. Typical network devices are powered predictably by the electrical grid, and are connected to a local wired Ethernet or wireless IP network. These sorts of network devices, which do represent a significant portion of the Internet of Things, are straightforward, as they are connected to the network in familiar ways.</p>
        </div>
        <p class="indent">However, many IoT devices are not able to be connected to the network in the typical fashion. They might be deployed over a wide geographic area, where enterprise-class WiFi networks do not reach.</p>
        <p class="indent">Other IoT devices might be battery-powered, requiring an especially low power draw to remain functional for a long time without maintenance. Given these constraints of geography and battery power, what sort of networking technologies can be used?</p>
        <div class="heading">
        <h4 class="h4" id="ch29lev5"><strong>Bluetooth Low Energy (BLE)</strong></h4>
        <p class="noindent">Bluetooth Low Energy (BLE) has been billed by the Bluetooth Special Interest Group (SIG) as having been built for the Internet of Things.<sup><a id="ch29fn9"></a><a href="ch29.xhtml#ch29fn-9">9</a></sup> As a well-recognized industry standard, Bluetooth Classic and now BLE have indeed had a positive impact on IoT devices, particularly those in the consumer space such as wearables and smart home devices.</p>
        </div>
        <p class="indent">Bluetooth, including BLE, is a short-range protocol. Short-range means distances of approximately 100 meters or less. Therefore, Bluetooth is commonly found in home, auto, and personal area network applications such as wearables.</p>
        <p class="indent">What does BLE do differently to reduce power consumption compared to Blue-tooth Classic? The general answer is rather intuitive: BLE does less, and does “less” less often. This does not mean BLE is feature-poor or incapable. Rather, the word <em>less</em> as it is used here means BLE is designed to perform specific networking functions, eschewing others, all bound by the constraint of minimal power consumption.</p>
        <p class="indentb"><a id="page_752"></a>Compared to Bluetooth Classic, BLE notably does less in the areas of data rates, throughput, and connection setup time:</p>
        <p class="bullt">• <strong>Data rates.</strong> Classic is specified for 1–3Mbps, while BLE rates are as low as 0.125Mbps and as high as 2Mbps.</p>
        <p class="bull">• <strong>Throughput.</strong> Classic specification is for 0.7–2.1Mbps, while BLE is specified for a much lower 0.27Mbps.</p>
        <p class="bullb">• <strong>Connection setup time.</strong> Classic Bluetooth connection setup time is around 100ms, while BLE reduces this to 6ms.</p>
        <p class="indentt">Power consumption itself is not part of the official Bluetooth specification, but common experience suggests Bluetooth Classic hovers around a 1W power draw, while BLE ranges between 0.01 and 0.50W.</p>
        <p class="indent">The power savings is coming from, in part, the duty cycle. How long must a device be powered—in this case, the Bluetooth host chip—before it has completed its task and can go back to a sleep state? When comparing Bluetooth Classic to BLE, the BLE duty cycles are reduced in time and/or frequency, resulting in a greatly reduced power draw.</p>
        <p class="indentb">For example, a developer can set several duty cycle parameters affecting a BLE device in a connected state. Here are two:</p>
        <p class="bullt">• <strong>The interval between data exchanges known as the “connection interval.”</strong> Higher intervals reduce power consumption, the tradeoff being application performance could be reduced because data can only be exchanged once each interval. Devices cannot send data if they are sleeping.</p>
        <p class="bullb">• <strong>Slave latency.</strong> In a Bluetooth pairing, one device is the master, and the other is the slave. Assuming no data to send, the slave can be configured to not check in with the master for a reasonable range of intervals, each skipped interval saving power.</p>
        <p class="indentt">The result of BLE is the enablement of certain IoT devices to run weeks, months, or years on coin-sized batteries. However, BLE’s reduced duty cycles and resulting low power draw mean it is poorly suited for applications such as audio streaming. Therefore, BLE headphones are, at the time of this writing, not available. Why not?</p>
        <p class="indent">Audio streaming demands frequent duty cycles, as there is always new audio information to be sent between master and slave. To make audio streaming work in a BLE context, new audio codecs might need to be devised to come up with a send/receive duty cycle amenable to fulfill the “low energy” part of BLE.</p>
        <p class="indent">Other low-power, short-range protocols in use for IoT include Zigbee and Z-Wave.</p>
        <div class="heading">
        <h4 class="h4" id="ch29lev6"><a id="page_753"></a><strong>LoRaWAN</strong></h4>
        <p class="noindent">Aside from the consumer space, the Internet of Things has seen uptake in the world of industry. Industrial applications often require networking services extending beyond the comfortable confines of a well-powered and well-connected building.</p>
        </div>
        <p class="indent">A municipality might use IoT to leverage smart city technology in areas such as fire hydrants, parking, street lighting, and waste management. Farming can use IoT to manage land and irrigation and to track animals. Utilities could use IoT to meter gas and water usage.</p>
        <p class="indent">To handle the distance and low-power requirements of many of these scenarios, low-power, long-range communications protocols have been created. One such is LoRaWAN (Long Range Wide Area Network).<sup><a id="ch29fn10"></a><a href="ch29.xhtml#ch29fn-10">10</a></sup></p>
        <p class="indent">LoRaWAN is a chirp spread spectrum, wireless communications protocol operating in unlicensed spectrum below 1GHz, creating a low-power wide area network (LPWAN). A LoRaWAN-based LPWAN offers data rates between roughly 0.3Kbps and 50Kbps over a range of 2Km to 15Km, depending on the environment. LoRaWAN is a secure protocol, offering both factory preprogrammed network authentication and over-the-air activation of participating nodes, as well as multiple layers of strong encryption.</p>
        <p class="indentb">A LoRaWAN network includes two major components:</p>
        <p class="bullt">• The end nodes with which to communicate. In this context, these are IoT sensors.</p>
        <p class="bullb">• The sensors communicate via LoRaWAN back to a gateway. The LoRaWAN gateway is a bridge between the LoRaWAN network and a traditional wireless or wired network used to process the sensor data. The gateway serves to decrypt inbound sensor data received via LoRaWAN radio and repackage the payload for transport across the traditional network.</p>
        <p class="indentt">The compromise LoRaWAN makes, allowing it to function as a low-power, high-range network protocol, is low bit rates. The data throughput across a LoRaWAN network is seemingly miniscule at a max of 50Kbps, especially when considering data center Ethernet speeds of 100Gbps are commonplace.</p>
        <p class="indent">However, LoRaWAN’s low bandwidth represents a design solving a specific networking challenge. For many applications, IoT sensors do not need to transmit or receive enormous amounts of data, but they do need to communicate over long distances using battery power. Thus, LoRaWAN is fit for purpose, providing a power-efficient means of transmitting small amounts of data over long distances.</p>
        <p class="indentb"><a id="page_754"></a>LoRaWAN transmitters come in three classifications:</p>
        <p class="indenthangingN">1. <strong>Class A devices</strong> are the most power efficient. Class A device radios sleep unless they have data to send. Once data has been sent, they remain awake for two receive windows, during which they can receive data. If more data needs to be sent to a Class A device than can be delivered during the two receive windows, the data must be queued until the next receive window opens.</p>
        <p class="indenthangingN">2. <strong>Class B devices</strong> operate like Class A devices, except for the addition of scheduled receive windows. While Class A devices can only receive data after sending data, Class B devices can also receive data during regularly scheduled receive windows. The additional receive windows draw power to engage the LoRaWAN radio, and thus Class B devices are less power efficient than Class A devices.</p>
        <p class="indenthangingN">3. <strong>Class C devices</strong> are different from Class A and B devices because Class C devices listen all the time, except when transmitting. Class C devices are appropriate for applications where the IoT sensor needs to receive data regularly from the central network, and the central network cannot wait for a remote device to open a receive window. The downside of listening constantly except when transmitting means the radio is constantly drawing power. Therefore, Class C devices are expected to use a grid-connected power supply, as batteries would be drained too rapidly in a Class C application.</p>
        <p class="indentt">Other low-power, long-range protocols in use for IoT include Sigfox and Neul.</p>
        <div class="heading">
        <h4 class="h4" id="ch29lev7"><strong>IPv6 for IoT</strong></h4>
        <p class="noindentb">IoT connectivity on IP networks faces an additional challenge—addressing. Network operators are comfortable with IPv4 addressing schemes, and might be tempted to use IPv4 in their IoT networks. While there is nothing wrong with this per se, IoT does present some interesting challenges that make IPv6 addressing attractive, including</p>
        </div>
        <p class="indenthangingN">1. <strong>Scale.</strong> IoT sensor networks have the potential to be vast, depending on the application. IPv6 makes the number of IoT sensors in a network a nonissue, as the address space is all but infinitely large. Starting with a well-planned IPv6 addressing scheme in an IoT network means never having to readdress the network.</p>
        <p class="indenthangingN">2. <strong>The elimination of Network Address Translation (NAT).</strong> NAT is commonly used to translate blocks of private RFC1918 IPv4 address space into one or more publicly routable IPv4 addresses. Some networks regard this as a security feature, while others consider NAT a nuisance, as some applications require <a id="page_755"></a>workarounds to function properly in the presence of NAT. NAT also makes two-way communication between devices difficult. IPv6 has no requirement for address conservation, i.e., hiding blocks of RFC1918 addresses behind a single public IP address. IPv6 could be used in an IoT network to offer two-way communication and improve endpoint identification and authentication.</p>
        <p class="indenthangingN">3. <strong>Mobile IoT.</strong> If IoT devices are not stationary, it is possible they will move physically, as well as logically within the sensor network, disappearing and reappearing as they move between associations with various access points and gateways. IPv6 networks are well suited for mobile devices.</p>
        <p class="indentt">Another question network engineers must consider about IP addressing more broadly is whether it makes sense to assign IP addresses to IoT devices. In one sense, this is a strange question to ask. “Well, of course, there needs to be an IP address on IoT devices! There needs to be an IP address on <em>everything.”</em></p>
        <p class="indent">The “IP or not” question is more nuanced, however. In traditional networks, networking professionals do not need to consider whether an IP header introduces inefficiency. Hardware ASICs are optimized to process these headers, and bandwidth is plentiful. In addition, IP headers are used to identify source and destination addresses, carry interesting information about the flow they are a part of, and make forwarding decisions. Network engineers used to fast Ethernet and wireless networks and devices ubiquitously connected to the Internet might have a hard time imagining networks without IP.</p>
        <p class="indent">For IoT devices connected to traditional networks and to networks with no bandwidth concerns, IP addressing does not introduce any new issues. However, much of the IoT domain leaves traditional networks behind.</p>
        <p class="indent">Consider low-power WANs (LPWANs) like LoRaWAN. When an IoT sensor is sending its data to a receiver, what is the most important part? The payload—the data itself. Any framing or encapsulation is overhead, even though it is necessary to deliver the data. Therefore, in an LPWAN, the key is to reduce the overhead by minimizing the number of bits encoded and sent over the air.</p>
        <p class="indent">You might recall LoRaWAN’s highest bandwidth is around 50Kbps. Suddenly, the size of an IP header becomes an interesting question. The size of the IP header is why there is no such thing as IP over LoRaWAN. LoRaWAN packets go to a LoRaWAN gateway, where the payload can be repacked into IP datagrams and sent to points beyond. Why? IP packets with their pesky headers are simply too inefficient to send over the LoRaWAN network. <a href="ch29.xhtml#ch29fig03">Figure 29-3</a> illustrates.</p>
        <div class="fig-heading">
        <div class="image"><img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9780134762814/files/graphics/29fig03.jpg" aria-describedby="Al29fig03" alt="Figure depicts LoRaWAN-to-IP Operation." width="451" height="204"><aside class="hidden" id="Al29fig03">
        <p>Two clouds are present. The left is labeled LoRaWAN network and is connected to four sensors to its left. The right cloud has a server. Both clouds are connected through an IoT gateway.</p>
        </aside>
        </div>
        <p class="fig-caption"><a id="ch29fig03"></a><strong>Figure 29-3</strong> <em>LoRaWAN-to-IP Operation</em></p>
        </div>
        <p class="indent">LoRaWAN’s lack of IP does not imply it is impossible to use IP addressing for IoT. Rather, it means every networking tool is designed for a specific purpose. For example, in the IETF’s RFC4944, 6LoWPAN is specified to integrate IPv6 with IEEE 802.15.4 mesh networks, including compression of the IPv6 header wherever <a id="page_756"></a>possible. Reading through RFC4944 exposes the many technical challenges of this integration.<sup><a id="ch29fn11"></a><a href="ch29.xhtml#ch29fn-11">11</a></sup> Yes, the technology exists, and while difficult to implement practically, it can be done.</p>
        <p class="indent">The question then comes back to the network engineer. Given a choice of connectivity technologies and addressing schemes for IoT, which one is the right one? The answer depends on the connectivity requirements. Different requirements will lead to different answers.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev8">IoT Data</h3>
        <p class="noindent">Some IoT sensors produce a significant amount of data. What happens when the data must be acted upon in real time? How should the data be processed?</p>
        </div>
        <p class="indent">The idea of fog computing—also termed edge computing—is that certain IoT sensors stream too much data to be processed far away, such as in the public cloud. In these cases, IoT data must be analyzed locally to be of real-time value in many applications, particularly industrial ones. Sending the data far away, processing it, and bringing back the results would take too long.</p>
        <p class="indent">Besides tending toward high latency, bandwidth to the public cloud is simply not cheap enough to size pipes sufficiently large for IoT applications. Thus, the term <em>fog</em> is meant to conjure an image of a cloud close by, rather than one far away. Sending data into the local fog allows for speedy analysis and timely results.</p>
        <p class="indent">The fog computing model is to process IoT data as close to the sensors as possible. Many IoT devices do not have local data centers in which to perform data processing. Those with a data processing center closer than the public cloud might find connectivity is often fragile. Therefore, fog computing sometimes looks like a <a id="page_757"></a>small, dedicated device piggybacked on the sensor accepts data and performs processing. This could also mean data processing software resident on IoT network gateway devices.</p>
        <p class="indentb">Use cases for fog computing include many examples from Industrial IoT (IIoT):</p>
        <p class="indenthangingN">1. <strong>Locomotive fuel efficiency.</strong> Engine sensor data is coupled with GPS data to reduce engine idle time, saving significantly on fuel. Even at idle, locomotives utilize a large amount of fuel. Avoiding excessive fuel burn requires real-time data analysis as the locomotive moves across the landscape.</p>
        <p class="indenthangingN">2. <strong>Cavitation alerts.</strong> Temperature, input pressure, output pressure, and water velocity are monitored in real time to detect the conditions in which an air bubble might be introduced into a water moving system. These air bubbles, or cavitations, can destroy water pumps.</p>
        <p class="indenthangingN">3. <strong>Wind energy forecasting.</strong> Wind turbine data is analyzed to predict power yield for the next 24 hours, a legal requirement in certain parts of the world where power grids are carefully managed by governments.</p>
        <p class="indenthangingN">4. <strong>Factory yield optimization.</strong> Sensor data is analyzed to discover manufacturing problems resulting in a bad run of products, improving overall quality and reducing factory downtime.</p>
        <p class="indentt">While fog computing is a data processing paradigm more than a networking paradigm, the computing requirements of IoT make an implicit demand on network engineers. Where there is a great deal of data, there must be a capable network to move the data. Therefore, understanding the load created by IoT sensor data will inform the IoT network design.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev9">Final Thoughts on the Internet of Things</h3>
        <p class="noindent">The Internet of Things is an interesting area of new deployment and research that is ultimately likely to reshape the way the Internet is seen. Instead of providing connectivity for people searching for websites and social connections, the primary job of the Internet, in terms of traffic flow, will be to connect sensors to cloud-based services. These cloud-based services will, in turn, peek into every area of life, raising security and privacy concerns that need a lot of thought to untangle. This chapter has provided some ideas of how such an Internet might work and how it might be secured.</p>
        </div>
        <p class="indent">The next chapter will consider another future-looking topic, the future of net-work engineering.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev10"><a id="page_758"></a>Further Reading</h3>
        <p class="ref">Baker, Fred, and Pekka Savola. <em>Ingress Filtering for Multihomed Networks</em>. Request for Comments 3704. RFC Editor, 2004. doi:10.17487/RFC3704.</p>
        </div>
        <p class="ref">Banks, Ethan. “Foghorn: Real-Time Decision Making for IIoT.” <em>Packet Pushers</em>, September 14, 2016. <a href="http://packetpushers.net/foghorn-iiot/">http://packetpushers.net/foghorn-iiot/</a>.</p>
        <p class="ref">“The Bogon Reference Page.” Team CYMRU. Accessed July 17, 2017. <a href="https://www.team-cymru.org/bogon-reference.html">https://www.team-cymru.org/bogon-reference.html</a>.</p>
        <p class="ref">Cantrill, Bryan. “Unikernels Are Unfit for Production.” Blog. <em>Joyent</em>, January 22, 2016. <a href="https://www.joyent.com/blog/unikernels-are-unfit-for-production">https://www.joyent.com/blog/unikernels-are-unfit-for-production</a>.</p>
        <p class="ref">Haberman, Brian, and Robert M. Hinden. <em>Unique Local IPv6 Unicast Addresses</em>. Request for Comments 4193. RFC Editor, 2005. doi:10.17487/RFC4193.</p>
        <p class="ref">Hilton, Scott. “Dyn Analysis Summary of Friday October 21 Attack | Dyn Blog.” Corporate. <em>Dyn</em>, October 26, 2016. <a href="https://dyn.com/blog/dyn-analysis-summary-of-friday-october-21-attack/">https://dyn.com/blog/dyn-analysis-summary-of-friday-october-21-attack/</a>.</p>
        <p class="ref">Huston, Geoff. “The Internet of Stupid Things.” <em>APNIC Blog</em>, April 30, 2015. <a href="https://blog.apnic.net/2015/04/30/the-internet-of-stupid-things/">https://blog.apnic.net/2015/04/30/the-internet-of-stupid-things/</a>.</p>
        <p class="ref">Krebs, Brian. “KrebsOnSecurity Hit with Record DDoS.” Blog. <em>Krebs on Security</em>, September 16, 2016. <a href="https://krebsonsecurity.com/2016/09/krebsonsecurity-hit-with-record-ddos/">https://krebsonsecurity.com/2016/09/krebsonsecurity-hit-with-record-ddos/</a>.</p>
        <p class="ref">“LoRa Alliance Technology.” Standards Body. <em>Lora-Alliance</em>. Accessed July 17, 2017. <a href="https://www.lora-alliance.org/technology">https://www.lora-alliance.org/technology</a>.</p>
        <p class="ref">Madhavapeddy, Anil, and David J. Scott. “Unikernels: Rise of the Virtual Library Operating System.” <em>Queue</em> 11, no. 11 (December 2013): 30:30–30:44. doi:10.1145/2557963.2566628.</p>
        <p class="ref">Montenegro, Gabriel, Jonathan Hui, David Culler, and Nandakishore Kushalnagar. <em>Transmission of IPv6 Packets over IEEE 802.15.4 Networks</em>. Request for Comments 4944. RFC Editor, 2007. doi:10.17487/RFC4944.</p>
        <p class="ref">Moskowitz, Robert G., Daniel Karrenberg, Yakov Rekhter, Eliot Lear, and Geert Jan de Groot. <em>Address Allocation for Private Internets</em>. Request for Comments 1918. RFC Editor, 1996. doi:10.17487/RFC1918.</p>
        <p class="ref">Neville-Neil, George. “IoT: The Internet of Terror.” <em>Queue</em> 15, no. 3 (June 2017): 10:19–10:24. doi:10.1145/3121437.3121440.</p>
        <p class="ref">Senie, Daniel, and Paul Ferguson. <em>Network Ingress Filtering: Defeating Denial of Service Attacks Which Employ IP Source Address Spoofing</em>. Request for Comments 2827. RFC Editor, 2000. doi:10.17487/RFC2827.</p>
        <p class="ref"><a id="page_759"></a>“SIG Introduces Bluetooth Low Energy Wireless Technology, the Next Generation of Bluetooth Wireless Technology.” Society. <em>Bluetooth</em>. Accessed July 17, 2017. <a href="https://www.bluetooth.com/news/pressreleases/2009/12/17/sig-introduces-bluetooth-low-energy-wireless-technologythe-next-generation-of-bluetooth-wireless-technology">https://www.bluetooth.com/news/pressreleases/2009/12/17/sig-introduces-bluetooth-low-energy-wireless-technologythe-next-generation-of-bluetooth-wireless-technology</a>.</p>
        <div class="heading">
        <h3 class="h3" id="ch29lev11">Review Questions</h3>
        <p class="indenthangingN">1. Explain the why IoT has garnered so much attention from security practitioners.</p>
        </div>
        <p class="indenthangingN">2. Explain the difference between isolation using an appliance or service and endpoint isolation.</p>
        <p class="indenthangingN">3. What does the term <em>duty cycle</em> have to do with power conservation in IoT devices?</p>
        <p class="indenthangingN">4. Give some examples of how Bluetooth Low Energy devices reduce power consumption when compared to Bluetooth Classic devices.</p>
        <p class="indenthangingN">5. In IoT devices using LoRaWAN for radio communications, explain why a Class A device can run on battery power, while Class C devices should have dedicated power supplies.</p>
        <p class="indenthangingN">6. Why does IP addressing introduce a technical challenge for LPWAN communications protocols?</p>
        <p class="indenthangingN">7. In one sentence, explain why edge (fog) computing is useful.</p>
        <p class="indenthangingN">8. Research BCP38, and explain why it is not widely deployed.</p>
        <p class="indenthangingN">9. The text considers IoT in the context of DDoS attacks; research the impact of IoT on large-scale control systems (such as the power grid), and explain the risks involved.<a id="page_760"></a></p>
        <p class="footnotet"><a id="ch29fn-1"></a><a href="ch29.xhtml#ch29fn1">1</a>. Krebs, “KrebsOnSecurity Hit with Record DDoS.”</p>
        <p class="footnote"><a id="ch29fn-2"></a><a href="ch29.xhtml#ch29fn2">2</a>. Neville-Neil, “IoT.”</p>
        <p class="footnote"><a id="ch29fn-3"></a><a href="ch29.xhtml#ch29fn3">3</a>. Huston, “The Internet of Stupid Things.”</p>
        <p class="footnote"><a id="ch29fn-4"></a><a href="ch29.xhtml#ch29fn4">4</a>. Moskowitz et al., <em>Address Allocation for Private Internets</em>.</p>
        <p class="footnote"><a id="ch29fn-5"></a><a href="ch29.xhtml#ch29fn5">5</a>. Haberman and Hinden, <em>Unique Local IPv6 Unicast Addresses</em>.</p>
        <p class="footnote"><a id="ch29fn-6"></a><a href="ch29.xhtml#ch29fn6">6</a>. Senie and Ferguson, <em>Network Ingress Filtering: Defeating Denial of Service Attacks Which Employ IP Source Address Spoofing</em>.</p>
        <p class="footnote"><a id="ch29fn-7"></a><a href="ch29.xhtml#ch29fn7">7</a>. Baker and Savola, <em>Ingress Filtering for Multihomed Networks</em>.</p>
        <p class="footnote"><a id="ch29fn-8"></a><a href="ch29.xhtml#ch29fn8">8</a>. “The Bogon Reference Page.”</p>
        <p class="footnote"><a id="ch29fn-9"></a><a href="ch29.xhtml#ch29fn9">9</a>. “SIG Introduces Bluetooth Low Energy Wireless Technology, the Next Generation of Bluetooth Wireless Technology.”</p>
        <p class="footnote1"><a id="ch29fn-10"></a><a href="ch29.xhtml#ch29fn10">10</a>. “LoRa Alliance Technology.”</p>
        <p class="footnote1"><a id="ch29fn-11"></a><a href="ch29.xhtml#ch29fn11">11</a>. Montenegro et al., <em>Transmission of IPv6 Packets over IEEE 802.15.4 Networks</em>.</p>
        </div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9780134762814/files/9780134762852.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
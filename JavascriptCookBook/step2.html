<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 2. Strings and Regular Expressions"><div class="chapter" id="ch02">
        <h1><span class="label">Chapter 2. </span>Strings and Regular Expressions</h1>
        
        
        <p><a data-type="indexterm" data-primary="strings (String object)" id="ix_strings_ch2"></a>Here’s a trivia question for your next JavaScript party: how many data types are there in the world’s most popular language?</p>
        
        <p><a data-type="indexterm" data-primary="data" data-secondary="types" id="idm45475190334072"></a>The answer is <em>eight</em>, but they might not be what you expect. JavaScript’s eight data types are:</p>
        
        <ul>
        <li>
        <p><code>Number</code></p>
        </li>
        <li>
        <p><code>String</code></p>
        </li>
        <li>
        <p><code>Boolean</code></p>
        </li>
        <li>
        <p><code>BigInt</code> (for very large integers)</p>
        </li>
        <li>
        <p><code>Symbol</code> (for unique identifiers)</p>
        </li>
        <li>
        <p><code>Object</code> (the root of every other JavaScript type)</p>
        </li>
        <li>
        <p><code>undefined</code> (a variable that hasn’t been assigned a value)</p>
        </li>
        <li>
        <p><code>null</code> (a missing object)</p>
        </li>
        </ul>
        
        <p>The recipes in this book feature all of these ingredients. In this chapter, you’ll turn your focus to the text-manipulating power of strings.</p>
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking for an Existing, Nonempty String"><div class="sect1" id="checking_existing_nonempty_string">
        <h1>Checking for an Existing, Nonempty String</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475190320792">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="variables" data-secondary="confirming" id="ix_var_confirm"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="checking for existing, nonempty" id="ix_strings_check_nonempty"></a>You want to verify that a variable is defined, is a string, and is not empty before you use it.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475190316600">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="code" data-secondary="validation of" id="idm45475190315032"></a>Before you start working with a string, you often need to validate that it’s safe to use. When you do, there are different questions you might ask.</p>
        
        <p><a data-type="indexterm" data-primary="typeof operator" id="ix_typeof_op"></a>If you want to make sure that your variable is a string (not just a variable that can be <em>converted</em> to a string), you use this test:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">unknownVariable</code> <code class="o">===</code> <code class="s1">'string'</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// unknownVariable is a string</code>
        <code class="p">}</code></pre>
        
        <p>If you want to check that you have a nonempty string (not the zero-length string <code>''</code>), you can tighten your verification like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">unknownVariable</code> <code class="o">===</code> <code class="s1">'string'</code> <code class="o">&amp;&amp;</code> <code class="nx">unknownVariable</code><code class="p">.</code><code class="nx">length</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This is a genuine string with characters or whitespace in it</code>
        <code class="p">}</code></pre>
        
        <p>Optionally, you may want to reject strings that are made up of whitespace only, in which case you can use the <code>String.trim()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">unknownVariable</code> <code class="o">===</code> <code class="s1">'string'</code> <code class="o">&amp;&amp;</code> <code class="nx">unknownVariable</code><code class="p">.</code><code class="nx">trim</code><code class="p">().</code><code class="nx">length</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This is a genuine string that is not empty or all whitespace</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="short-circuit evaluation" id="idm45475190244744"></a>The order of your conditions is important. JavaScript uses <em>short-circuit evaluation</em>. That means it will only evaluate the second condition (the length check) if the first condition (the type check) succeeds. This is important because the length check will fail if <code>unknownVariable</code> is a different type of variable, like a number.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// This test is only safe if we already know unknownVariable is a string</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">unknownVariable</code><code class="p">.</code><code class="nx">length</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="p">)</code></pre>
        
        <p>There’s a potential gap when using the <code>typeof</code> operator. It’s possible to circumvent the string test by using a <code>String</code> object instead of a string literal:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">unknownVariable</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">String</code><code class="p">(</code><code class="s1">'test'</code><code class="p">);</code></pre>
        
        <p>Now the <code>typeof</code> operator will return <code><em>object</em></code> instead of <code><em>string</em></code>, because the string primitive is wrapped in a <code>String</code> object.</p>
        
        <p>In modern JavaScript, creating a <code>String</code> object instance is discouraged for reasons like this. You’re better off removing this practice from any code you encounter than coding around it. However, if you need to accommodate possible <code>String</code> objects, you can use a more complex test like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">unknownVariable</code> <code class="o">===</code> <code class="s1">'string'</code> <code class="o">||</code>
            <code class="nb">String</code><code class="p">.</code><code class="nx">prototype</code><code class="p">.</code><code class="nx">isPrototypeOf</code><code class="p">(</code><code class="nx">unknownVariable</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// It's a string primitive or a string wrapped in an object.</code>
        <code class="p">}</code></pre>
        
        <p>This code checks that one of two conditions are met: either you have a string primitive or an object that has the same prototype as <code>String</code>.<sup><a data-type="noteref" id="idm45475190104344-marker" href="ch02.html#idm45475190104344">1</a></sup></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475190316008">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="data" data-secondary="types" id="idm45475190101000"></a>The type-checking test in this recipe uses the <code>typeof</code> operator. It returns the type name of the variable as a lowercase string. The possible values are:</p>
        
        <ul>
        <li>
        <p><code>undefined</code></p>
        </li>
        <li>
        <p><code>boolean</code></p>
        </li>
        <li>
        <p><code>number</code></p>
        </li>
        <li>
        <p><code>bigint</code></p>
        </li>
        <li>
        <p><code>string</code></p>
        </li>
        <li>
        <p><code>symbol</code></p>
        </li>
        <li>
        <p><code>function</code></p>
        </li>
        <li>
        <p><code>object</code></p>
        </li>
        </ul>
        
        <p><a data-type="indexterm" data-primary="Function type" id="idm45475190090376"></a>These values match the list at the beginning of this chapter, but with two small differences. First, there’s no <code><em>null</em></code>, because null values return the string <code><em>object</em></code> instead. (This is considered a bug by many, but it’s kept for historical reasons.) Second, there’s an added <code><em>function</em></code> data type, even though a function is technically a special case of object.<a data-type="indexterm" data-primary="" data-startref="ix_typeof_op" id="idm45475190087656"></a></p>
        
        <p>Occasionally, you’ll see the following old-fashioned string-validation technique. It doesn’t require a variable to actually <em>be</em> a string. It simply verifies that your value can be treated as a string, and that it isn’t the empty string.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="nx">unknownVariable</code><code class="p">)</code> <code class="p">{</code>
          <code class="cm">/* We get here as long as:</code>
        <code class="cm">     unknownVariable has been declared</code>
        <code class="cm">     unknownVariable is not null</code>
        <code class="cm">     unknownVariable is not the empty string ''</code>
        <code class="cm">  */</code>
        <code class="p">}</code></pre>
        
        <p>This works because <code>null</code> values, <code>undefined</code> values, and empty strings (<code>''</code>) are all <em>falsy</em> in JavaScript. If you evaluate any of them in a conditional expression, they are treated as false.</p>
        
        <p>This approach has a potential blindspot with the number 0, which always evaluates to <code>false</code>, skipping the <code>if</code> block. To be safe, it’s better to explicitly convert your numeric variables to strings, as described in <a data-type="xref" href="#converting_number_to_string">“Converting a Numeric Value to a Formatted String”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_strings_check_nonempty" id="idm45475190055784"></a><a data-type="indexterm" data-primary="" data-startref="ix_var_confirm" id="idm45475190054840"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Converting a Numeric Value to a Formatted String"><div class="sect1" id="converting_number_to_string">
        <h1>Converting a Numeric Value to a Formatted String</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475190042504">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="type conversion" id="ix_type_convert"></a><a data-type="indexterm" data-primary="numbers" data-secondary="formatting" id="ix_numbers_format2"></a><a data-type="indexterm" data-primary="numeric value, converting to formatted string" id="ix_num_value_format_string"></a><a data-type="indexterm" data-primary="formatting" data-secondary="numbers" id="ix_format_numbers"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="converting numeric value to formatted" id="ix_strings_num_value_format"></a>You want to create a string representation of a number.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475190035256">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="+ operator" data-secondary="joining numbers to strings" id="idm45475190033688"></a>JavaScript is a loosely typed language, and it will automatically convert any value to a string when it needs to—for example, if you compare a number to a string or join a number to a string with the <code>+</code> operator. In fact, one of the easiest tricks that JavaScript developers use to convert numbers to strings is to simply concatenate an empty string on the beginning or end of the value:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">someNumber</code> <code class="o">=</code> <code class="mi">42</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">someString</code> <code class="o">=</code> <code class="nx">someNumber</code> <code class="o">+</code> <code class="s1">''</code><code class="p">;</code></pre>
        
        <p><a data-type="indexterm" data-primary="toString() method" data-secondary="Number object" id="idm45475189997032"></a>However, modern practice favors <em>explicit</em> variable conversions. Every JavaScript object has a built-in <code>toString()</code> method, including the <code>Number</code> object. You can call it like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">someNumber</code> <code class="o">=</code> <code class="mi">42</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">someString</code> <code class="o">=</code> <code class="nx">someNumber</code><code class="p">.</code><code class="nx">toString</code><code class="p">();</code></pre>
        
        <p>Often, you need to customize the string representation of your number. For example, you might want a fixed number of decimal places (like 30.00 instead of 30). This might also involve rounding (for example, from 30.009 to 30.01).</p>
        
        <p>JavaScript has three utility methods built into the number data type that can help you. <a data-type="indexterm" data-primary="toExponential() method" id="idm45475189985592"></a><a data-type="indexterm" data-primary="toFixed() method" id="idm45475189984984"></a><a data-type="indexterm" data-primary="toPrecision() method" id="idm45475189984344"></a>All of them create string representations of a number:</p>
        <dl>
        <dt><code>Number.toFixed()</code></dt>
        <dd>
        <p>Lets you specify the number of digits to keep after the decimal point.</p>
        </dd>
        <dt><code>Number.toExponential()</code></dt>
        <dd>
        <p>Uses scientific notation, and lets you specify the number of digits to show after the decimal point.</p>
        </dd>
        <dt><code>Number.toPrecision()</code></dt>
        <dd>
        <p>Lets you specify the number of significant digits to keep, without considering how large or small your number is.</p>
        </dd>
        </dl>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="significant digits" id="idm45475189977496"></a>If you aren’t familiar with <em>significant digits</em>, it’s a scientific concept used to make sure calculations keep an appropriate degree of precision. It also helps to make sure a measurement is not represented in a way that implies more precision than it actually has. (For example, your average weight may be 162.5 pounds, but it’s probably not meaningful to say it’s 162.503018 pounds, nor is it helpful to round it to 200 pounds.) Wikipedia explains the <a href="https://oreil.ly/vrrPr">concept in detail</a>.</p>
        </div>
        
        <p>Here’s an example that demonstrates all three string conversion methods:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">someNumber</code> <code class="o">=</code> <code class="mf">1242.0055</code><code class="p">;</code>
        
        <code class="c1">// Ask for exactly 2 decimal points. Numbers will be rounded if necessary.</code>
        <code class="kr">const</code> <code class="nx">fixedString</code> <code class="o">=</code> <code class="nx">someNumber</code><code class="p">.</code><code class="nx">toFixed</code><code class="p">(</code><code class="mi">2</code><code class="p">);</code>
        <code class="c1">// fixedString = '1242.01'</code>
        
        <code class="c1">// Ask for 5 significant digits. Scientific notation is used if necessary.</code>
        <code class="kr">const</code> <code class="nx">precisionString</code> <code class="o">=</code> <code class="nx">someNumber</code><code class="p">.</code><code class="nx">toPrecision</code><code class="p">(</code><code class="mi">5</code><code class="p">);</code>
        <code class="c1">// precisionString = '1242.0'</code>
        
        <code class="c1">// Ask for scientific notation with 2 decimal plates.</code>
        <code class="kr">const</code> <code class="nx">scientificString</code> <code class="o">=</code> <code class="nx">someNumber</code><code class="p">.</code><code class="nx">toExponential</code><code class="p">(</code><code class="mi">2</code><code class="p">);</code>
        <code class="c1">// scientificString = '1.24e+3'</code></pre>
        
        <p><a data-type="indexterm" data-primary="Intl.NumberFormat object" id="idm45475189919752"></a>If you want to apply formatting like commas, a currency symbol, or some other locale-specific details, you need the help of the <code>Intl.NumberFormat</code> object. Once you create an instance and configure it appropriately, you can use the <code>Intl.NumberFormat</code> to perform your number-to-string conversion.</p>
        
        <p>For example, to format a number as a US currency string, you use code like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">formatter</code> <code class="o">=</code>
         <code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">NumberFormat</code><code class="p">(</code><code class="s1">'en-US'</code><code class="p">,</code> <code class="p">{</code> <code class="nx">style</code><code class="o">:</code> <code class="s1">'currency'</code><code class="p">,</code> <code class="nx">currency</code><code class="o">:</code> <code class="s1">'USD'</code> <code class="p">});</code>
        
        <code class="kr">const</code> <code class="nx">someNumber</code> <code class="o">=</code> <code class="mf">1242.0005</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">moneyString</code> <code class="o">=</code> <code class="nx">formatter</code><code class="p">.</code><code class="nx">format</code><code class="p">(</code><code class="nx">someNumber</code><code class="p">);</code>
        <code class="c1">// moneyString = '$1,242.00'</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475190034664">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="locale identifiers" id="idm45475189810776"></a>A <em>locale</em> represents a specific geographic or cultural region. Locale identifiers combine a language code and a region string. The locale <em>en-US</em> represents the English language in the United States of America. The local <em>en_CA</em> is English in Canada, <em>fr-CA</em> is French in Canada, <em>ja-JP</em> is Japanese in Japan, and so on.</p>
        
        <p>Depending on your locale, there are some standard number formatting rules that apply. For example, numbers in English language regions often use commas to separate thousands (as in <em>1,200.00</em>), while commas in French language regions often use commas instead of a decimal point (as in <em>1 200,00</em>). If you create a <code>Intl.NumberFormat</code> object without any constructor arguments, you get the locale settings of the current computer:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">formatter</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">NumberFormat</code><code class="p">();</code></pre>
        
        <p>You can also create an <code>Intl.NumberFormat</code> object for a specific locale, with no extra options:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">formatter</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Intl</code><code class="p">.</code><code class="nx">NumberFormat</code><code class="p">(</code><code class="s1">'en-US'</code><code class="p">);</code></pre>
        
        <p>In the <em>en-US</em> region, this object will add comma separators, but it won’t apply a fixed number of decimal points or add a currency symbol.</p>
        
        <p>The <code>Intl.NumberFormat</code> object supports a number of options. You can change the way negative numbers are displayed, set minimum and maximum numbers of digits, show percentages, and choose different numbering systems in some languages. You can find comprehensive information in the <a href="https://oreil.ly/JEF4Q">Mozilla Developer Network reference</a>.</p>
        
        <p>You may see an older version of this technique that uses the <code>Number.toLocaleString()</code> method. Here’s an example:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">someNumber</code> <code class="o">=</code> <code class="mf">1242.0005</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">moneyString</code> <code class="o">=</code> <code class="nx">someNumber</code><code class="p">.</code><code class="nx">toLocaleString</code><code class="p">(</code>
         <code class="s1">'en-US'</code><code class="p">,</code> <code class="p">{</code> <code class="nx">style</code><code class="o">:</code> <code class="s1">'currency'</code><code class="p">,</code> <code class="nx">currency</code><code class="o">:</code> <code class="s1">'USD'</code> <code class="p">});</code></pre>
        
        <p>This approach is perfectly valid, although if you plan to format a long series of numbers, creating and reusing a single <code>Intl.NumberFormat</code> object will perform better.<a data-type="indexterm" data-primary="" data-startref="ix_strings_num_value_format" id="idm45475189692968"></a><a data-type="indexterm" data-primary="" data-startref="ix_num_value_format_string" id="idm45475189692120"></a><a data-type="indexterm" data-primary="" data-startref="ix_format_numbers" id="idm45475189691208"></a><a data-type="indexterm" data-primary="" data-startref="ix_numbers_format2" id="idm45475189690264"></a><a data-type="indexterm" data-primary="" data-startref="ix_type_convert" id="idm45475189689320"></a></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475189811240">
        <h2>See Also</h2>
        
        <p>If you need formatting support that’s more extensive than what <code>Intl.NumberFormat</code> provides, you can use a third-party library like <a href="https://github.com/adamwdraper/Numeral-js">Numeral.js</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Inserting Special Characters"><div class="sect1" id="inserting_special_characters">
        <h1>Inserting Special Characters</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475189684040">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="regular expressions" data-seealso="strings" id="idm45475189682840"></a><a data-type="indexterm" data-primary="regular expressions" data-secondary="special characters" id="ix_regex_spec_char"></a><a data-type="indexterm" data-primary="special characters" data-secondary="inserting into strings" id="ix_spec_char_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="inserting special characters into" id="ix_strings_spec_char"></a>You want to insert a special character, such as a line break, into a string.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475189677864">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="© copyright symbol" data-primary-sortas="copyright symbol" id="idm45475189676456"></a>The simplest approach with many special characters is simple: just paste the character you want into your editor. For example, if you need a copyright symbol (©), first find the character in a desktop utility like charmap (on a Windows computer) or just search for “copyright symbol” in Google. Select the symbol, copy it, and then paste it into your code.</p>
        
        <p><a data-type="indexterm" data-primary="\ (backslash character/escape sequence)" id="idm45475189674712"></a><a data-type="indexterm" data-primary="escape sequence" id="idm45475189673992"></a>If you want to use a character that wouldn’t normally be allowed in your code (according to the syntax rules of JavaScript), you need to use one of its <em>escape sequences</em>—special character code combinations that aren’t interpreted literally.</p>
        
        <p>For example, if you’re using apostrophes to delimit your strings, you can’t put an apostrophe character directly <em>in</em> your string. Instead, you need to use the <code>\'</code> escape sequence, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">favoriteMovie</code> <code class="o">=</code> <code class="s1">'My favorite movie is \'The Seventh Seal\'.'</code><code class="p">;</code></pre>
        
        <p>Now <code>favoriteMovie</code> holds the text <em>My favorite movie is ‘The Seventh Seal’.</em></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475189667576">
        <h2>Discussion</h2>
        
        <p>The escape sequences in JavaScript all begin with the <em>backslash character</em> (<code>\</code>). This character signals that what follows is a sequence of characters that needs special handling. <a data-type="xref" href="#escape_sequence_list">Table&nbsp;2-1</a> lists the other escape sequences that JavaScript recognizes.</p>
        <table id="escape_sequence_list">
        <caption><span class="label">Table 2-1. </span>Escape sequences</caption>
        <thead>
        <tr>
        <th>Sequence</th>
        <th>Character</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p><code>\'</code></p></td>
        <td><p>Single quote</p></td>
        </tr>
        <tr>
        <td><p><code>\"</code></p></td>
        <td><p>Double quote</p></td>
        </tr>
        <tr>
        <td><p><code>\\</code></p></td>
        <td><p>Backslash</p></td>
        </tr>
        <tr>
        <td><p><code>\n</code></p></td>
        <td><p>Newline</p></td>
        </tr>
        <tr>
        <td><p><code>\t</code></p></td>
        <td><p>Horizontal tab</p></td>
        </tr>
        <tr>
        <td><p><code>\b</code></p></td>
        <td><p>Nondestructive backspace*</p></td>
        </tr>
        <tr>
        <td><p><code>\f</code></p></td>
        <td><p>Form feed*</p></td>
        </tr>
        <tr>
        <td><p><code>\r</code></p></td>
        <td><p>Carriage return<sup><a data-type="noteref" id="idm45475189621992-marker" href="ch02.html#idm45475189621992">a</a></sup></p></td>
        </tr>
        <tr>
        <td><p><code>\ddd</code></p></td>
        <td><p>Octal sequence (3 digits: <em><code>ddd</code></em>)</p></td>
        </tr>
        <tr>
        <td><p><code>\xdd</code></p></td>
        <td><p>Hexadecimal sequence (2 digits: <em><code>dd</code></em>)</p></td>
        </tr>
        <tr>
        <td><p><code>\udddd</code></p></td>
        <td><p>Unicode sequence (4 hex digits: <em><code>dddd</code></em>)</p></td>
        </tr>
        </tbody>
        <tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="idm45475189621992"><sup><a href="ch02.html#idm45475189621992-marker">a</a></sup> Some escape sequences (like the ones used for backspaces and form feeds) are holdovers from the original ASCII character standard and C language. Unless you’re dealing with a legacy scenario (like sending input to a terminal), these escape sequences aren’t likely to be useful in JavaScript.</p></td></tr></tbody></table>
        
        <p>The last three escape sequences in <a data-type="xref" href="#escape_sequence_list">Table&nbsp;2-1</a> are patterns that require you to supply a numeric value. For example, if you don’t want to use the copy-and-paste trick to add a copyright symbol, you can insert it by using the <code>\u</code> escape sequence and the copyright symbol’s Unicode value:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">copyrightNotice</code> <code class="o">=</code> <code class="s1">'This page \u00A9 Shelley Powers.'</code><code class="p">;</code></pre>
        
        <p>Now the <code>copyrightNotice</code> string is set to <em>This page © Shelley Powers.</em></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475189592392">
        <h2>See Also</h2>
        
        <p>For information about inserting even more specialized characters in your strings, see <a data-type="xref" href="#inserting_emojis">“Inserting Emojis”</a>. <a data-type="indexterm" data-primary="" data-startref="ix_regex_spec_char" id="idm45475189567272"></a><a data-type="indexterm" data-primary="" data-startref="ix_strings_spec_char" id="idm45475189566296"></a><a data-type="indexterm" data-primary="" data-startref="ix_spec_char_strings" id="idm45475189565352"></a>For an alternate approach to dealing with line breaks without using <code>\n</code>, see <a data-type="xref" href="#using_template_literals">“Using Template Literals for Clearer String Concatenation”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Inserting Emojis"><div class="sect1" id="inserting_emojis">
        <h1>Inserting Emojis</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475189586360">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="emojis, inserting into strings" id="ix_emojis_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="inserting emojis into" id="ix_strings_emojis"></a>You want to insert an extended Unicode character that has a 4-byte encoding, like an emoji or certain types of accented non-English letters.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475189577752">
        <h2>Solution</h2>
        
        <p>If you simply want to create a string with an emoji, the copy-and-paste trick from <a data-type="xref" href="#inserting_special_characters">“Inserting Special Characters”</a> usually works. In a modern code editor, you can write code like this:</p>
        <ul class="simplelist">
        <li><code>const hamburger = '</code>🍔<code>';</code></li>
        <li><code>const hamburgerStory = 'I like hamburgers' + hamburger;</code></li>
        </ul>
        
        <p>Your code font doesn’t even need to support emojis, because your code editor will fall back on the emoji support provided by your operating system. (Of course, issues can still occur. For example, you might see a square “missing character” icon on an older system where the emoji isn’t available.)</p>
        
        <p>Another option is to use the Unicode value for the emoji. The problem is that you can’t use a standard <code>\u</code> escape sequence to get an emoji, because every emoji is stored as a 4-byte value. (By comparison, the Unicode characters that map to the keys of your keyboard are usually encoded as 2-byte values.)</p>
        
        <p>The solution is to use the <code>String.fromCodePoint()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">hamburgerStory</code> <code class="o">=</code> <code class="s1">'I like hamburgers'</code> <code class="o">+</code> <code class="nb">String</code><code class="p">.</code><code class="nx">fromCodePoint</code><code class="p">(</code><code class="mh">0x1F354</code><code class="p">);</code></pre>
        
        <p>The hamburger emoji has the hexadecimal code U+1F354. To use it with <code>fromCodePoint()</code>, replace the prefix <em>U+</em> with <em>0x</em>.</p>
        
        <p>Once you’ve created an emoji-enhanced string, you can write it to the developer console or show it in a web page, just as you would with an ordinary string composed of ordinary characters.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475189541512">
        <h2>Discussion</h2>
        
        <p>As of 2020, there are just over three thousand emojis in the world. You can see them, with their corresponding hexadecimal values <a href="https://oreil.ly/IIguA">at the Full Emoji List</a>. Just because an emoji exists doesn’t mean it will be supported on the devices where you plan to use it, so test for compliance early.</p>
        
        <p>If you need to do string processing with strings that may include emojis, other issues can crawl out of the woodwork. For example, what do you expect this code will find?</p>
        <ul class="simplelist">
        <li><code>const hamburger = '</code>🍔<code>';</code></li>
        <li><code>const hamburgerLength = hamburger.length;</code></li>
        </ul>
        
        <p><a data-type="indexterm" data-primary="leaky abstraction, Unicode characters" id="idm45475189526744"></a>Even though the <code>hamburger</code> string is just one character, to your code the length appears to be 2 because the hamburger emoji takes twice as many bytes in memory. This is an unpleasant <a href="https://oreil.ly/nlmvi"><em>leaky abstraction</em></a> and a limitation of <span class="keep-together">JavaScript’s</span> support for Unicode.</p>
        
        <p>There are workarounds that people have invented to deal with emoji issues, like incorrect lengths and problems iterating over characters or slicing strings. But making a home brew solution is risky, because there are often strange edge cases. Instead, consider a JavaScript library with emoji support like <a href="https://github.com/orling/grapheme-splitter">Grapheme Splitter</a> if you need to manipulate emoji-enriched text.<a data-type="indexterm" data-primary="" data-startref="ix_strings_emojis" id="idm45475189522392"></a><a data-type="indexterm" data-primary="" data-startref="ix_emojis_strings" id="idm45475189521416"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Using Template Literals for Clearer String Concatenation"><div class="sect1" id="using_template_literals">
        <h1>Using Template Literals for Clearer String Concatenation</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475189518920">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="template literals for clearer concatenation" id="ix_temp_literal_strings"></a><a data-type="indexterm" data-primary="concatenation of strings" id="ix_concat_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="template literals for clearer concatenation" id="ix_strings_temp_literal"></a>You want a simpler, clearer way to write long string concatenation operations.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475189514104">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="+ operator" data-secondary="concatenation" id="idm45475189512536"></a>A common task in programming is to combine bits of static text with variables to create a single, longer string. The traditional way to assemble this kind of string is with the concatentation operator <code>+</code>, as shown here:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employeeDetail</code> <code class="o">=</code> <code class="s1">'Our team includes '</code> <code class="o">+</code> <code class="nx">firstName</code> <code class="o">+</code> <code class="s1">' '</code> <code class="o">+</code> <code class="nx">lastName</code> <code class="o">+</code>
         <code class="s1">' who works on the '</code> <code class="o">+</code> <code class="nx">team</code> <code class="o">+</code> <code class="s2">" team. They/'ve been a team member since "</code>
          <code class="o">+</code> <code class="nx">hireDate</code> <code class="o">+</code> <code class="s1">'!'</code><code class="p">;</code></pre>
        
        <p>It’s not awful, but it can get awkward, particularly as the fixed bits of text get longer. It’s also surprisingly easy to forget to add spaces around the variables.</p>
        
        <p>A different approach is to use <em>template literals</em>, a type of string literal that allows embedded expressions. <a data-type="indexterm" data-primary="` (backtick character)" id="idm45475189475192"></a>To create a template literal, just replace your standard string delimeters (apostrophes or double quotes) with the backtick (`) character:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">greeting</code> <code class="o">=</code> <code class="sb">`Hello world from a template literal!`</code><code class="p">;</code></pre>
        
        <p><a data-type="indexterm" data-primary="{} (curly brackets)" id="idm45475189469832"></a>Now you can insert your variables directly into your template literal. <a data-type="indexterm" data-primary="${} (template literal expression)" id="idm45475189469096"></a>All you need to do is wrap each variable in curly braces, preceded by a dollar sign, like <code>${firstName}</code>. This is called an <em>expression.</em></p>
        
        <p>The advantage of the template literal approach becomes clearer when you look at a full example:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">employeeDetail</code> <code class="o">=</code> <code class="sb">`Our team includes </code><code class="si">${</code><code class="nx">firstName</code><code class="si">}</code><code class="sb"> </code><code class="si">${</code><code class="nx">lastName</code><code class="si">}</code><code class="sb"> who works on the</code>
        <code class="si">${</code><code class="nx">team</code><code class="si">}</code><code class="sb"> team. They've been a team member since </code><code class="si">${</code><code class="nx">hireDate</code><code class="si">}</code><code class="sb">!`</code><code class="p">;</code></pre>
        
        <p>It’s even clearer when you use a modern code editor that colorizes the curly brace expressions, making the variables stand out from the literal text.</p>
        
        <p>Template literals also preserve line breaks. In the examples shown here, you can’t see this effect, because we’ve wrapped the code to fit the page. But if you deliberately hit Enter to put hard line breaks in your template literal, those breaks will be preserved in the string, exactly as if you’d used the <code>\n</code> newline escape sequence (see <a data-type="xref" href="#inserting_special_characters">“Inserting Special Characters”</a>).</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="ESLint" id="idm45475189412760"></a><a data-type="indexterm" data-primary="linter, enforcing code standards with" id="idm45475189412056"></a><a data-type="indexterm" data-primary="code" data-secondary="enforcing standards with linter" id="idm45475189411416"></a>Many JavaScript styte guides, including <a href="https://github.com/airbnb/javascript">Airbnb</a>, have rules that discourage string concatenation and favor template literals. You can use a linter like ESLint (<a data-type="xref" href="ch01.html#using_eslint">“Enforcing Code Standards with a Linter”</a>) to enforce this practice in your code.</p>
        </div>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475189513512">
        <h2>Discussion</h2>
        
        <p>When you use expressions in a template literal, you aren’t limited to inserting variables as they are. In fact, you can use any code expression that JavaScript can evaluate. For example, consider this code:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">calculation</code> <code class="o">=</code> <code class="sb">`The sum of 5 + 3 is </code><code class="si">${</code><code class="mi">5</code><code class="o">+</code><code class="mi">3</code><code class="si">}</code><code class="sb">`</code><code class="p">;</code></pre>
        
        <p>Here, JavaScript executes the addition in the expression <code>{5+3}</code>, gets the result, and creates the string  <em>The sum of 5 + 3 is 8</em>.</p>
        
        <p>If you want to do something more complex, like format strings or manipulate objects, you can use an expression that calls a function. For example, if you’ve created a <code>getDaysSince()</code> function for calculating the difference between dates (see <a data-type="xref" href="ch04.html#calculating_time_between_dates">“Calculating the Time Elapsed Between Two Dates”</a>), you can use it in a template literal like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">function</code> <code class="nx">getDaysSince</code><code class="p">(</code><code class="nx">date</code><code class="p">)</code> <code class="p">{</code>
          <code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>
          <code class="kr">const</code> <code class="nx">oneDay</code> <code class="o">=</code> <code class="mi">24</code> <code class="o">*</code> <code class="mi">60</code> <code class="o">*</code> <code class="mi">60</code> <code class="o">*</code> <code class="mi">1000</code><code class="p">;</code> <code class="c1">// hours*minutes*seconds*milliseconds</code>
          <code class="k">return</code> <code class="nb">Math</code><code class="p">.</code><code class="nx">round</code><code class="p">(</code><code class="nb">Math</code><code class="p">.</code><code class="nx">abs</code><code class="p">((</code><code class="nx">today</code> <code class="o">-</code> <code class="nx">date</code><code class="p">)</code> <code class="o">/</code> <code class="nx">oneDay</code><code class="p">));</code>
        <code class="p">}</code>
        
        <code class="nx">employeeDetail</code> <code class="o">=</code> <code class="sb">`Our team includes </code><code class="si">${</code><code class="nx">firstName</code><code class="si">}</code><code class="sb"> </code><code class="si">${</code><code class="nx">lastName</code><code class="si">}</code><code class="sb">. They've been a</code>
        <code class="sb">team member since </code><code class="si">${</code><code class="nx">hireDate</code><code class="si">}</code><code class="sb">! That's </code><code class="si">${</code><code class="nx">getDaysSince</code><code class="p">(</code><code class="nx">hireDate</code><code class="p">)</code><code class="si">}</code><code class="sb"> days.`</code><code class="p">;</code></pre>
        
        <p>The only limit is practical—in other words don’t make your expressions so complex that the resulting template literal is more difficult to read than code that uses the traditional string-concatenation approach.</p>
        
        <p><a data-type="indexterm" data-primary="tagged templates" id="idm45475189338696"></a>Currently, JavaScript has no built-in way to format numbers, dates, and currency values inside template literal expressions. Plenty of people have speculated that future versions of JavaScript will add this capability. <a data-type="indexterm" data-primary="" data-startref="ix_strings_temp_literal" id="idm45475189251656"></a><a data-type="indexterm" data-primary="" data-startref="ix_temp_literal_strings" id="idm45475189250744"></a><a data-type="indexterm" data-primary="" data-startref="ix_concat_strings" id="idm45475189249800"></a>There’s even a JavaScript library that uses an awkward extensibility feature called <a href="https://github.com/skolmer/es2015-i18n-tag"><em>tagged templates</em></a> to wedge it in.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Performing a Case-Insensitive String Comparison"><div class="sect1" id="case_insensitive_string_comparison">
        <h1>Performing a Case-Insensitive String Comparison</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475189246264">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="case-insensitive string comparison" id="ix_case-insens_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="case-insensitive string comparison" id="ix_strings_case-insens"></a>You want to see if two strings match, while treating uppercase and lowercase letters as the same.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475189242440">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="toLowerCase() method" id="idm45475189241032"></a>The off-the-cuff approach is to use the <code>String.toLowerCase()</code> method on both strings, and compare the result, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">a</code> <code class="o">=</code> <code class="s2">"hello"</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">b</code> <code class="o">=</code> <code class="s2">"HELLO"</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">a</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">()</code> <code class="o">===</code> <code class="nx">b</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">())</code> <code class="p">{</code>
          <code class="c1">// We end up here, because the lowercase versions of both strings match</code>
        <code class="p">}</code></pre>
        
        <p>This approach is fairly reliable, but it can suffer from edge cases with different languages, accents, and special characters. (For example, check out the <a href="https://oreil.ly/CiALB">potential problems</a> with Turkish.)</p>
        
        <p><a data-type="indexterm" data-primary="sensitivity property" id="idm45475189226664"></a><a data-type="indexterm" data-primary="localeCompare() method" id="idm45475189218776"></a>An alternate, bulletproof approach is to use the <code>String.localeCompare()</code> method with <code>sensitivity</code> set to <code><em>accent</em></code>, as shown here:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">a</code> <code class="o">=</code> <code class="s2">"hello"</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">b</code> <code class="o">=</code> <code class="s2">"HELLO"</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">a</code><code class="p">.</code><code class="nx">localeCompare</code><code class="p">(</code><code class="nx">b</code><code class="p">,</code> <code class="kc">undefined</code><code class="p">,</code> <code class="p">{</code> <code class="nx">sensitivity</code><code class="o">:</code> <code class="s1">'accent'</code> <code class="p">})</code> <code class="o">===</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// We end up here, because the case-insensitive strings match.</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475189081736">
        <h2>Discussion</h2>
        
        <p>If <code>localeCompare()</code> deems that two strings match, it returns 0. Otherwise it returns a positive or negative integer indicating whether the compared string falls before or after the referenced string in the sort order. (Because we’re using <code>localeCompare()</code> to test for equality, the sort order isn’t important, and you can ignore it.)</p>
        
        <p>The second parameter of <code>localeCompare()</code> holds a string that specifies the locale (as explained in <a data-type="xref" href="#converting_number_to_string">“Converting a Numeric Value to a Formatted String”</a>). If you pass <code>undefined</code>, then <code>localeCompare()</code> uses the locale of the current computer, which is almost always what you want.</p>
        
        <p>To perform a case-insensitive comparison, you need to set the <code>sensitivity</code> property. There are two values that can work. If you set <code>sensitivity</code> to <code><em>accent</em></code>, characters that have different accents (like <em>a</em> and <em>á</em>) are treated as unequal. But if you set <code>sensitivity</code> to <code><em>base</em></code>, you’ll get a more permissive case-insensitive comparison that treats all accented letters as matches.<a data-type="indexterm" data-primary="" data-startref="ix_strings_case-insens" id="idm45475189111784"></a><a data-type="indexterm" data-primary="" data-startref="ix_case-insens_strings" id="idm45475189110840"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking If a String Contains a Specific Substring"><div class="sect1" id="checking_for_substring">
        <h1>Checking If a String Contains a Specific Substring</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475189108344">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="strings (String object)" data-secondary="checking for specific substring" id="idm45475189107144"></a><a data-type="indexterm" data-primary="substrings" data-secondary="checking for specific" id="idm45475189106200"></a>You want to check if one string contains another substring.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475189104872">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="includes() method" id="idm45475189103464"></a>If you simply need a yes-or-no test, you can use the <code>String.includes()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">searchString</code> <code class="o">=</code> <code class="s1">'infinitely'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">fullText</code> <code class="o">=</code> <code class="s1">'I know not where I was born, save that the castle was'</code> <code class="o">+</code>
         <code class="s1">' infinitely old and infinitely horrible.'</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">fullText</code><code class="p">.</code><code class="nx">includes</code><code class="p">(</code><code class="nx">searchString</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// The search string was found</code>
        <code class="p">}</code></pre>
        
        <p>Optionally, you can tell the <code>includes()</code> method where to start its search by character position. For example, pass in the value 5 and the search skips to the sixth character in the string, and continues to the end:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">searchString</code> <code class="o">=</code> <code class="s1">'infinitely'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">fullText</code> <code class="o">=</code> <code class="s1">'I know not where I was born, save that the castle was'</code> <code class="o">+</code>
         <code class="s1">' infinitely old and infinitely horrible.'</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">fullText</code><code class="p">.</code><code class="nx">includes</code><code class="p">(</code><code class="nx">searchString</code><code class="p">,</code> <code class="mi">70</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// Still true, because the search skips the first 'infinitely' and</code>
          <code class="c1">// hits the second one.</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475189052488">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="toLowerCase() method" id="idm45475188995304"></a>The search that <code>includes()</code> performs is case-sensitive. If you want a case-insensitive search, you can call <code>toLowerCase()</code> on both strings first:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">searchString</code> <code class="o">=</code> <code class="s1">'INFINITELY'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">fullText</code> <code class="o">=</code> <code class="s1">'I know not where I was born, save that the castle was'</code> <code class="o">+</code>
         <code class="s1">' infinitely old and infinitely horrible.'</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">fullText</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">().</code><code class="nx">includes</code><code class="p">(</code><code class="nx">searchString</code><code class="p">.</code><code class="nx">toLowerCase</code><code class="p">()))</code> <code class="p">{</code>
          <code class="c1">// The search string was found</code>
        <code class="p">}</code></pre>
        
        <p>The <code>includes()</code> method doesn’t provide any information about where a match occurs. <a data-type="indexterm" data-primary="indexOf() method" data-secondary="String object" id="idm45475188938248"></a>If you want this information, consider using the <code>String.indexOf()</code> method instead, which is described in <a data-type="xref" href="#extracting_a_list">“Extracting a List from a String”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Replacing All Occurrences of a String"><div class="sect1" id="replacing_all_occurrences_string">
        <h1>Replacing All Occurrences of a String</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475188934184">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="strings (String object)" data-secondary="replacing all occurrences of" id="idm45475188932984"></a>You want to find all occurrences of a specific substring in a string, and replace them with something else.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475188931528">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="replaceAll() method" id="idm45475188930360"></a>You can use the <code>String.replaceAll()</code> method to make the change in one step. All you need is a substring to search for and another string to swap in its place:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">storyText</code> <code class="o">=</code> <code class="s1">'I know not where I was born, save that the castle was'</code> <code class="o">+</code>
         <code class="s1">' infinitely old and infinitely horrible.'</code><code class="p">;</code>
        
        <code class="kr">const</code> <code class="nx">changedStory</code> <code class="o">=</code> <code class="nx">storyText</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="s1">'infinitely'</code><code class="p">,</code> <code class="s1">'somewhat'</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">changedStory</code><code class="p">);</code></pre>
        
        <p>If you run this code, you’ll see the altered string “I know not where I was born, save that the castle was somewhat old and somewhat horrible.” appear in the developer console.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475188911128">
        <h2>Discussion</h2>
        
        <p>The <code>replaceAll()</code> method has the ability to use a regular expression for searching instead of an ordinary string. You can see how this works in <a data-type="xref" href="#replacing_patterns_string">“Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span>”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475188880744">
        <h2>See Also</h2>
        
        <p>Consult Recipes <a data-type="xref" data-xrefstyle="select:labelnumber" href="#extracting_a_list"></a> and <a data-type="xref" data-xrefstyle="select:labelnumber" href="#finding_and_highlighting_all_instances_o"></a> to see how you can find matches in a string and examine each one, instead of just replacing them outright.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Replacing HTML Tags with Named Entities"><div class="sect1" id="relacing_html_tags">
        <h1>Replacing HTML Tags with Named Entities</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475188874920">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="regular expressions" data-secondary="replacing HTML tags with named entities" id="ix_regex_named_entities"></a><a data-type="indexterm" data-primary="HTML5" data-secondary="replacing tags with named entities" id="ix_html_named_entities"></a><a data-type="indexterm" data-primary="named entities, replacing HTML tags with" id="ix_named_entities"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="replacing HTML tags with named entities" id="ix_strings_html_named"></a>You want to insert markup into a web page, and escape the markup (so the browser <em>displays</em> the angle brackets rather than interpreting them as HTML tags). This could be because you want to show some example HTML markup, for example, in a tutorial article. Or it may be  because you need to safely sanitize outside data, like text submitted by a user or pulled out of a database.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475188868088">
        <h2>Solution</h2>
        
        <p>Use the <code>String.replaceAll()</code> method to convert angle brackets (<code>&lt; &gt;</code>) into the named HTML entities <code>&amp;lt;</code> and <code>&amp;gt;</code>. You’ll need to perform two steps, one for each substitution:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">originalPieceOfHtml</code> <code class="o">=</code> <code class="s1">'&lt;p&gt;This is a &lt;span&gt;paragraph&lt;/span&gt;&lt;/p&gt;'</code><code class="p">;</code>
        
        <code class="c1">// Get a new string with no &lt; characters</code>
        <code class="kd">let</code> <code class="nx">safePieceOfHtml</code> <code class="o">=</code> <code class="nx">originalPieceOfHtml</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="s1">'&lt;'</code><code class="p">,</code> <code class="s1">'&amp;lt;'</code><code class="p">);</code>
        
        <code class="c1">// Get a new string with no &gt; characters</code>
        <code class="nx">safePieceOfHtml</code> <code class="o">=</code> <code class="nx">safePieceOfHtml</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="s1">'&gt;'</code><code class="p">,</code> <code class="s1">'&amp;gt;'</code><code class="p">);</code>
        
        <code class="c1">// Show it in the page</code>
        <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'placeholder'</code><code class="p">).</code><code class="nx">innerHtml</code> <code class="o">=</code> <code class="nx">safePieceOfHtml</code><code class="p">;</code></pre>
        
        <p>If you examine the string now, you’ll find it holds the text “&lt;p&gt;This is a &lt;span&gt;paragraph&lt;/span&gt;&lt;/p&gt;”, which will appear as you expect (with angle brackets shown) in the web page.</p>
        
        <p>You can perform both string substitutions in one step, as long as you can keep the code readable:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">safePieceOfHtml</code> <code class="o">=</code>
         <code class="nx">originalPieceOfHtml</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="s1">'&lt;'</code><code class="p">,</code> <code class="s1">'&amp;lt;'</code><code class="p">).</code><code class="nx">replaceAll</code><code class="p">(</code><code class="s1">'&gt;'</code><code class="p">,</code> <code class="s1">'&amp;gt;'</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="chaining, method" id="idm45475188751112"></a><a data-type="indexterm" data-primary="method chaining" id="idm45475188787592"></a>The first <code>replaceAll()</code> returns a new string, and the code calls <code>replaceAll()</code> on that second string to get a <em>third</em> string in this case. This technique of calling a method on a value that’s returned from a method is called <em>method chaining</em>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475188785064">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="HTML5" data-seealso="DOM" id="idm45475188783832"></a><a data-type="indexterm" data-primary="HTML5" data-secondary="importance of escaping" id="idm45475188772280"></a><a data-type="indexterm" data-primary="markup, escaping" id="idm45475188771336"></a>HTML escaping is critically important if you’re inserting raw text into a web page. If you don’t perform this step, you’ve left open a gaping security hole. In fact, you should make sure all text content is escaped before you show it in a web page, even if you think that text doesn’t contain any HTML entities (for example, even if it’s just set as a literal in your code). There’s no telling when someone might change the code and substitute a text value from somewhere else.</p>
        
        <p>That said, doing HTML escaping on your own usually isn’t the best approach. You need to do it if you are deliberately creating a string that mingles your HTML tags with outside content. But ideally you’ll put text in your web page using an element’s <code>textContent</code> property instead of its <code>innerHTML</code> property. When you use <code>textContent</code>, the browser escapes the content automatically, which means you don’t need to use <code>String.replaceAll()</code>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475188767448">
        <h2>See Also</h2>
        
        <p>See <a data-type="xref" href="ch12.html#ch12">Chapter&nbsp;12</a> for more information about using the HTML DOM to insert text content into a web page.<a data-type="indexterm" data-primary="" data-startref="ix_strings_html_named" id="idm45475188765224"></a><a data-type="indexterm" data-primary="" data-startref="ix_html_named_entities" id="idm45475188764280"></a><a data-type="indexterm" data-primary="" data-startref="ix_named_entities" id="idm45475188763336"></a><a data-type="indexterm" data-primary="" data-startref="ix_regex_named_entities" id="idm45475188762392"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Using a Regular Expression to Replace Patterns in a String"><div class="sect1" id="replacing_patterns_string">
        <h1>Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span></h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475188759176">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="patterns" data-secondary="replacing with new strings" id="ix_patterns_new_str"></a><a data-type="indexterm" data-primary="regular expressions" id="ix_regex_ch2"></a>You want to search a string for a pattern, rather than an exact sequence of characters. You then want to create a new string, with the pattern replaced.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475188755256">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="replaceAll() method" id="idm45475188753848"></a><a data-type="indexterm" data-primary="replace() method" data-secondary="String object" id="idm45475188753144"></a>You can use the <code>String.replace()</code> or <code>String.replaceAll()</code> methods, both of which support regular expressions.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>A <em>regular expression</em> is a sequence of characters that defines a text pattern. Regular expressions are a standard that’s implemented in JavaScript and many other programming languages. <a data-type="xref" href="#regular_expression_special_characters">Table&nbsp;2-2</a> gives a brief introduction to regular expression syntax.</p>
        </div>
        
        <p>For example, consider the regular expression pattern <em><code>t\w{2}e</code></em>. This translates into <em>look for any sequence of characters beginning with <em>t</em>, ending with <em>e</em>, and containing two other alphanumeric characters</em>. The solution matches <em>time</em>, but also matches <em>tame</em>.</p>
        
        <p>Here’s the code that uses this regular expression:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">originalString</code> <code class="o">=</code> <code class="s1">'Now is the time, this is the tame'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="sr">/t\w{2}e/g</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">newString</code> <code class="o">=</code> <code class="nx">originalString</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="nx">regex</code><code class="p">,</code> <code class="s1">'place'</code><code class="p">);</code>
        
        <code class="c1">// newString = 'Now is the place, this is the place'</code></pre>
        
        <p>Notice that the regular expression isn’t written a string. Instead, it’s a literal that begins and ends with a slash (<code>/</code>). JavaScript recognizes this syntax and creates a <code>RegEx</code> object that uses your expression.</p>
        
        <p><a data-type="indexterm" data-primary="global flag (g)" id="idm45475188677032"></a>The <code>g</code> at the end of the regular expression is an additional detail called the <em>global flag</em>. It indicates that you are searching the whole string for matches. If you don’t include the <code>g</code> flag, you’ll receive an error when you call <code>replaceAll()</code>. <a data-type="indexterm" data-primary="replace() method" data-secondary="String object" id="idm45475188664056"></a>However, you can use a regular expression without the global flag when you use the <code>replace()</code> method to change just one occurrence of a pattern.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475188662472">
        <h2>Discussion</h2>
        
        <p>If you’d rather create a regular expression without using the <code>/</code> delimiter, there’s another option. Instead of writing a regular expression literal, you can explicitly create a <code>RegEx</code> object, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">RegExp</code><code class="p">(</code><code class="s1">'t\\w{2}e'</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">);</code>
        <code class="kr">const</code> <code class="nx">newString</code> <code class="o">=</code> <code class="nx">originalString</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="nx">regex</code><code class="p">,</code> <code class="s1">'place'</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="RegEx object" id="idm45475188611272"></a><a data-type="indexterm" data-primary="\ (backslash character/escape sequence)" id="idm45475188607576"></a><a data-type="indexterm" data-primary="escape sequence" id="idm45475188606968"></a>When you use this approach, you don’t include the surrounding slashes around the regular expression, but you do need to escape any backslashes in the pattern (by replacing <code>/</code> with <code>//</code>). In addition, the global flag becomes a second argument to the <code>RegExp</code> constructor, instead of being added to the end of the regular expression.</p>
        
        <p>You might find that escaping backslashes is awkward or confusing in long, complicated regular expressions. If so, you can get around the escaping requirement with a template literal (introduced in <a data-type="xref" href="#using_template_literals">“Using Template Literals for Clearer String Concatenation”</a>). The trick is to combine your template literal with the <code>String.raw()</code> method. Remember to use backticks (`) around the expression string instead of apostrophes or quotes:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Although String.raw is a method, it has no parentheses after it,</code>
        <code class="c1">// and it uses the specialized backtick syntax shown here.</code>
        <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">RegExp</code><code class="p">(</code><code class="nb">String</code><code class="p">.</code><code class="nx">raw</code><code class="sb">`t</code><code class="err">\</code><code class="sb">w{2}e`</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">);</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Extra: Regular Expressions"><div class="sect2" id="idm45475188584104">
        <h2>Extra: Regular Expressions</h2>
        
        <p><a data-type="indexterm" data-primary="whitespace characters" id="ix_whitespace_regex"></a><a data-type="indexterm" data-primary="regular expressions" data-secondary="basic use of" id="idm45475188588744"></a>Regular expressions are made up of regular characters that are used alone or in combination with special characters. For instance, the following is a regular expression for a pattern that matches against a string that contains the word <em>technology</em> and the word <em>book</em>, in that order, and separated by one or more whitespace characters:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="sr">/technology\s+book/</code><code class="p">;</code></pre>
        
        <p>The backslash character (<code>\</code>) serves two purposes: either it’s used with a regular character, to designate that it’s a special character, or it’s used with a special character, such as the plus sign (+), to designate that the character should be treated literally. In this case, the backslash is used with <em>s</em>, which transforms the letter <em>s</em> to a special character designating a whitespace character (space, tab, line feed, or form feed). The +\s+ special character is followed by the plus sign, <code>\s</code>, which is a signal to match the preceding character (in this example, a whitespace character) one or more times. This regular expression would work with the following:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">technology</code> <code class="nx">book</code></pre>
        
        <p>It would also work with the following:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">technology</code>     <code class="nx">book</code></pre>
        
        <p>It would not work with the following, because there is no whitespace between the words:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">technologybook</code></pre>
        
        <p><a data-type="indexterm" data-primary="special characters" data-secondary="list of regular expressions" id="idm45475188542264"></a>It doesn’t matter how much whitespace is between <em>technology</em> and <em>book</em>, because of the use of <code>\s+</code>. However, using the plus sign does require at least one whitespace <span class="keep-together">character</span>.<a data-type="indexterm" data-primary="" data-startref="ix_whitespace_regex" id="idm45475188509608"></a></p>
        
        <p><a data-type="xref" href="#regular_expression_special_characters">Table&nbsp;2-2</a> shows the most commonly used special characters in JavaScript <span class="keep-together">applications</span>.<a data-type="indexterm" data-primary="regular expressions" data-secondary="special characters" id="idm45475188507128"></a></p>
        <table id="regular_expression_special_characters">
        <caption><span class="label">Table 2-2. </span>Regular expression special characters</caption>
        <thead>
        <tr>
        <th>Character</th>
        <th>Matches</th>
        <th>Example</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p><code>^</code></p></td>
        <td><p>Matches beginning of input</p></td>
        <td><p><code>/^This/</code> matches <em>This is…</em></p></td>
        </tr>
        <tr>
        <td><p><code>$</code></p></td>
        <td><p>Matches end of input</p></td>
        <td><p><code>/end$/</code> matches <em>This is the end</em></p></td>
        </tr>
        <tr>
        <td><p><code>*</code></p></td>
        <td><p>Matches zero or more times</p></td>
        <td><p><code>/se*/</code> matches <em>seeee</em> as well as <em>se</em></p></td>
        </tr>
        <tr>
        <td><p><code>?</code></p></td>
        <td><p>Matches zero or one time</p></td>
        <td><p><code>/ap?/</code> matches <em>apple</em> and <em>and</em></p></td>
        </tr>
        <tr>
        <td><p><code>+</code></p></td>
        <td><p>Matches one or more times</p></td>
        <td><p><code>/ap+/</code> matches <em>apple</em> but not <em>and</em></p></td>
        </tr>
        <tr>
        <td><p><code>{n}</code></p></td>
        <td><p>Matches exactly <em>n</em> times</p></td>
        <td><p><code>/ap{2}/</code> matches <em>apple</em> but not <em>apie</em></p></td>
        </tr>
        <tr>
        <td><p><code>\{n,\}</code></p></td>
        <td><p>Matches <em>n</em> or more times</p></td>
        <td><p><code>/ap{2,}/</code> matches all p’s in <em>apple</em> and <em>appple</em> but not <em>apie</em></p></td>
        </tr>
        <tr>
        <td><p><code>\{n,m\}</code></p></td>
        <td><p>Matches at least <em>n</em>, at most <em>m</em> times</p></td>
        <td><p><code>/ap{2,4}/</code> matches four p’s in <em>apppppple</em></p></td>
        </tr>
        <tr>
        <td><p><code>.</code></p></td>
        <td><p>Any character except newline</p></td>
        <td><p><code>/a.e/</code> matches <em>ape</em> and <em>axe</em></p></td>
        </tr>
        <tr>
        <td><p><code>[</code>…<code>]</code></p></td>
        <td><p>Any character within brackets</p></td>
        <td><p><code>/a[px]e/</code> matches <em>ape</em> and <em>axe</em> but not <em>ale</em></p></td>
        </tr>
        <tr>
        <td><p><code>[^</code>…<code>]</code></p></td>
        <td><p>Any character but those within brackets</p></td>
        <td><p><code>/a[^px]/</code> matches <em>ale</em> but not <em>axe</em> or <em>ape</em></p></td>
        </tr>
        <tr>
        <td><p><code>\b</code></p></td>
        <td><p>Matches on word boundary</p></td>
        <td><p><code>/\bno/</code> matches the first <em>no</em> in <em>nono</em></p></td>
        </tr>
        <tr>
        <td><p><code>\B</code></p></td>
        <td><p>Matches on nonword boundary</p></td>
        <td><p><code>/\Bno/</code> matches the second <em>no</em> in <em>nono</em></p></td>
        </tr>
        <tr>
        <td><p><code>\d</code></p></td>
        <td><p>Digits from 0 to 9</p></td>
        <td><p><code>/\d{3}/</code> matches <em>123</em> in <em>Now in 123</em></p></td>
        </tr>
        <tr>
        <td><p><code>\D</code></p></td>
        <td><p>Any nondigit character</p></td>
        <td><p><code>/\D{2,4}/</code> matches <em>Now ' in ‘Now in 123</em>;</p></td>
        </tr>
        <tr>
        <td><p><code>\w</code></p></td>
        <td><p>Matches word character (letters, digits, underscores)</p></td>
        <td><p><code>/\w/</code> matches <em>j</em> in <em>javascript</em></p></td>
        </tr>
        <tr>
        <td><p><code>\W</code></p></td>
        <td><p>Matches any nonword character (not letters, digits, or underscores)</p></td>
        <td><p><code>\/W/</code> matches <em>%</em> in <em>100%</em></p></td>
        </tr>
        <tr>
        <td><p><code>\n</code></p></td>
        <td><p>Matches a line feed</p></td>
        <td></td>
        </tr>
        <tr>
        <td><p><code>\s</code></p></td>
        <td><p>A single whitespace character</p></td>
        <td></td>
        </tr>
        <tr>
        <td><p><code>\S</code></p></td>
        <td><p>A single character that is not whitespace</p></td>
        <td></td>
        </tr>
        <tr>
        <td><p><code>\t</code></p></td>
        <td><p>A tab</p></td>
        <td></td>
        </tr>
        <tr>
        <td><p><code>(x)</code></p></td>
        <td><p>Capturing parentheses</p></td>
        <td><p>Remembers the matched characters</p></td>
        </tr>
        </tbody>
        </table>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>Regular expressions are powerful but can be tricky. They’re only covered lightly in this book. <a data-type="indexterm" data-primary="Goyvaerts, Jan" data-secondary="Regular Expressions Cookbook (O’Reilly)" id="idm45475188363352"></a><a data-type="indexterm" data-primary="Levithan, Steven" data-secondary="Regular Expressions Cookbook (O’Reilly)" id="idm45475188362280"></a><a data-type="indexterm" data-primary="Regular Expressions Cookbook (O’Reilly Media)" id="idm45475188361304"></a>If you want more in-depth coverage of regular expressions, you can read the excellent <em><a class="orm:hideurl" href="http://shop.oreilly.com/product/0636920023630.do">Regular Expressions Cookbook</a></em> by Jan Goyvaerts and Steven Levithan (O’Reilly), or consult an <a href="https://github.com/ziishaned/learn-regex">online reference</a>.<a data-type="indexterm" data-primary="" data-startref="ix_regex_ch2" id="idm45475188358664"></a><a data-type="indexterm" data-primary="" data-startref="ix_patterns_new_str" id="idm45475188357688"></a></p>
        </div>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Extracting a List from a String"><div class="sect1" id="extracting_a_list">
        <h1>Extracting a List from a String</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475188355256">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="lists" data-secondary="extracting from strings" id="ix_extract_list_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="extracting lists from" id="ix_strings_extract_list"></a>You have a string with several sentences, one of which includes a list of items. The list begins with a colon (:), ends with a period (.), and separates each item with a comma (,). You want to extract just the list.</p>
        
        <p>Before:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">This</code> <code class="nx">is</code> <code class="nx">a</code> <code class="nx">list</code> <code class="k">of</code> <code class="nx">items</code><code class="o">:</code> <code class="nx">cherries</code><code class="p">,</code> <code class="nx">limes</code><code class="p">,</code> <code class="nx">oranges</code><code class="p">,</code> <code class="nx">apples</code><code class="p">.</code></pre>
        
        <p>After:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="p">[</code><code class="s1">'cherries'</code><code class="p">,</code><code class="s1">'limes'</code><code class="p">,</code><code class="s1">'oranges'</code><code class="p">,</code><code class="s1">'apples'</code><code class="p">]</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475188309944">
        <h2>Solution</h2>
        
        <p>The solution requires two actions: extract the string containing the list of items, and then convert this string into a list.</p>
        
        <p><a data-type="indexterm" data-primary="indexOf() method" data-secondary="String object" id="idm45475188324984"></a>Use the <code>String.indexOf()</code> method twice—first to locate the colon, and again to find the first period following the colon:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">sentence</code> <code class="o">=</code> <code class="s1">'This is one sentence. This is a sentence with a list of items:'</code> <code class="o">+</code>
        <code class="s1">'cherries, oranges, apples, bananas. That was the list of items.'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">start</code> <code class="o">=</code> <code class="nx">sentence</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">':'</code><code class="p">);</code>
        <code class="kr">const</code> <code class="nx">end</code> <code class="o">=</code> <code class="nx">sentence</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'.'</code><code class="p">,</code> <code class="nx">start</code> <code class="o">+</code> <code class="mi">1</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="slice() method" data-secondary="String object" id="idm45475188246968"></a>Using these two locations and the <code>String.slice()</code> method, you can extract the string you want:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">list</code> <code class="o">=</code> <code class="nx">sentence</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="nx">start</code> <code class="o">+</code> <code class="mi">1</code><code class="p">,</code> <code class="nx">end</code><code class="p">);</code>
        <code class="c1">// list = 'cherries, oranges, apples, bananas'</code></pre>
        
        <p>You could write a loop that uses the <code>indexOf()</code> method to look for commas, and the <code>slice()</code> method to split the <code>list</code> string into smaller pieces, one for each item. <a data-type="indexterm" data-primary="split() method" id="idm45475188176472"></a>But there’s an easier approach. You can break the string into an array using the <code>String.split()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">let</code> <code class="nx">fruits</code> <code class="o">=</code> <code class="nx">list</code><code class="p">.</code><code class="nx">split</code><code class="p">(</code><code class="s1">','</code><code class="p">);</code>
        <code class="c1">// now fruits has these elements: ['cherries', ' oranges', ' apples', ' bananas']</code></pre>
        
        <p>When you call <code>split()</code>, you must choose a delimiter. It could be a space, a comma, a series of dashes, or something else. The delimiter is used to carve up the string into smaller pieces, and it won’t appear in the results.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475188225960">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="removing artifacts from" id="idm45475188232328"></a><a data-type="indexterm" data-primary="artifacts, removing from arrays" id="idm45475188231320"></a>The result of splitting the extracted string is an array of list items. However, the items may come with artifacts (in this case, an extra leading space in all but the first string). Fortunately, it’s easy to clean them up.</p>
        
        <p>One obvious approach is to iterate over the array of strings and manually trim each one, using the technique described in <a data-type="xref" href="#removing_whitespace">“Removing Whitespace from the Beginning and End of a String”</a>. This works, but there’s an easier approach.</p>
        
        <p><a data-type="indexterm" data-primary="map() method" id="idm45475188228696"></a>The trick is to use the <code>Array.map()</code>, which runs a piece of code you supply on each element in the array. <a data-type="indexterm" data-primary="trim() method" id="idm45475188157800"></a>You need just a single line of code to call the <code>trim()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">fruits</code> <code class="o">=</code> <code class="nx">fruits</code><code class="p">.</code><code class="nx">map</code><code class="p">(</code><code class="nx">s</code> <code class="o">=&gt;</code> <code class="nx">s</code><code class="p">.</code><code class="nx">trim</code><code class="p">());</code>
        <code class="c1">// now fruits has these elements: ['cherries', 'oranges', 'apples', 'bananas']</code></pre>
        
        <p>If you aren’t familiar with the arrow syntax used to supply the trimming function in this example, you can read a more detailed explanation of this technique in <a data-type="xref" href="ch06.html#arrow_functions">“Using Arrow Functions”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475188148312">
        <h2>See Also</h2>
        
        <p>Another way to find matches in a string is to use regular expressions. For example, depending on the way your list is structured, you might be able to use a regular expression that grabs words that fall in between commas. Regular expressions are
        introduced in <a data-type="xref" href="#replacing_patterns_string">“Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span>”</a>, and using regular expressions to perform a search is covered in <a data-type="xref" href="#finding_and_highlighting_all_instances_o">“Finding All Instances of a Pattern”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_strings_extract_list" id="idm45475188145208"></a><a data-type="indexterm" data-primary="" data-startref="ix_extract_list_strings" id="idm45475188115768"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" class="pagebreak-before less_space" data-pdf-bookmark="Finding All Instances of a Pattern"><div class="sect1" id="finding_and_highlighting_all_instances_o">
        <h1>Finding All Instances of a Pattern</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475188112872">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="patterns" data-secondary="finding all instances in strings" id="ix_patterns_find_string"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="finding all instances of patterns in" id="ix_strings_find_patterns"></a>You want to find all instances of a pattern within a string and iterate over them.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475188108920">
        <h2>Solution</h2>
        
        <p>Use a regular expression with the <code>String.matchAll()</code> method. The <code>matchAll()</code> method returns an iterator that lets you loop over all the matches.</p>
        
        <p>The next example uses a regular expression to find any word that begins with <em>t</em> and ends with <em>e</em>, with any number of characters in between. It uses the template literal syntax from <a data-type="xref" href="#using_template_literals">“Using Template Literals for Clearer String Concatenation”</a> to build a new string with results:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">searchString</code> <code class="o">=</code> <code class="s1">'Now is the time and this is the time and that is the time'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="sr">/t\w*e/g</code><code class="p">;</code>
        
        <code class="kr">const</code> <code class="nx">matches</code> <code class="o">=</code> <code class="nx">searchString</code><code class="p">.</code><code class="nx">matchAll</code><code class="p">(</code><code class="nx">regex</code><code class="p">);</code>
        <code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">match</code> <code class="k">of</code> <code class="nx">matches</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`at </code><code class="si">${</code><code class="nx">match</code><code class="p">.</code><code class="nx">index</code><code class="si">}</code><code class="sb"> we found </code><code class="si">${</code><code class="nx">match</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code>
        <code class="p">}</code></pre>
        
        <p>Here are the results from this code:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">at</code> <code class="mi">7</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">the</code>
        <code class="nx">at</code> <code class="mi">11</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">time</code>
        <code class="nx">at</code> <code class="mi">28</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">the</code>
        <code class="nx">at</code> <code class="mi">32</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">time</code>
        <code class="nx">at</code> <code class="mi">49</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">the</code>
        <code class="nx">at</code> <code class="mi">53</code> <code class="nx">we</code> <code class="nx">found</code> <code class="nx">time</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475188042328">
        <h2>Discussion</h2>
        
        <p>When you search with <code>matchAll()</code>, each match is an object. As you iterate over your matches, you can examine the matched text (<code>match[0]</code>), and the index where the match was found (<code>match.index</code>).</p>
        
        <p><a data-type="indexterm" data-primary="capturing parentheses (x)" id="idm45475187954920"></a><a data-type="indexterm" data-primary="substrings" data-secondary="replacing matched" id="idm45475187954056"></a>Here’s something that looks a little peculiar in the current example. Even though you’re looking at one result at a time, you use <code>match[0]</code> to get the first item from an array. This array exists because a regular expression can <em>capture</em> multiple portions of a match using parentheses. You can then reference these captured sections later. For example, imagine you write a regular expression that matches a row of information about a person. <a data-type="indexterm" data-primary="matchAll() method" id="idm45475187951672"></a>With capturing, you can easily grab separate pieces of information from each match, like that person’s name and birth date. When you use this technique with <code>matchAll()</code>, the matched substrings are provided as <code>match[1]</code>, <code>match[2]</code>, and so on.</p>
        
        <p>And if you don’t want to iterate over the results right away, you can dump everything into an array using the spread operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">searchString</code> <code class="o">=</code> <code class="s1">'Now is the time and this is the time and that is the time'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="sr">/t\w*e/g</code><code class="p">;</code>
        
        <code class="c1">// Put the 6 match objects into an array</code>
        <code class="kr">const</code> <code class="nx">matches</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">searchString</code><code class="p">.</code><code class="nx">matchAll</code><code class="p">(</code><code class="nx">regex</code><code class="p">)];</code></pre>
        
        <p>Now you can use <code>foreach</code> to loop through your <code>matches</code> array at another time. But remember, <code>matches</code> isn’t just an array of matching text. It’s an array of match <em>objects</em>. As you saw in the original example, each match object has a position (<code>match.index</code>) and an array with one or more matched groups of text (starting with <code>match[0]</code>).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Extra: Highlighting Matches"><div class="sect2" id="idm45475187899976">
        <h2>Extra: Highlighting Matches</h2>
        
        <p>Let’s take a look at a more detailed example that shows how you might find and highlight text matches on a web page. <a data-type="xref" href="#application_finding_and_highlighting_all">Figure&nbsp;2-1</a> shows the application in action on William Wordsworth’s poem, “The Kitten and the Falling Leaves.”</p>
        
        <figure class="no-frame"><div id="application_finding_and_highlighting_all" class="figure">
        <img src="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492055747/files/assets/jsc3_0201.png" alt="jsc3 0201" width="1445" height="919">
        <h6><span class="label">Figure 2-1. </span>Application finding and highlighting all matched strings</h6>
        </div></figure>
        
        <p><a data-type="indexterm" data-primary="matchAll() method" id="idm45475187894920"></a><a data-type="indexterm" data-primary="RegEx object" id="idm45475187893992"></a>This page has a <code>textarea</code> and an input text box for entering both a search string and a regular expression. The pattern is used to create a <code>RegExp</code> object, which is then applied against the text in the <code>textarea</code> using <code>matchAll()</code>, just as in the previous (much shorter) example.</p>
        
        <p>As the code examines the matches, it creates a string, consisting of both the unmatched text and the matched text. The matched text is surrounded by a <code>&lt;span&gt;</code> element, with a CSS class used to highlight the text. The resulting string is then inserted into the page, using the <code>innerHTML</code> property of a <code>&lt;div&gt;</code> element (see <a data-type="xref" href="#highlight_all_matches">Example&nbsp;2-1</a>).</p>
        <div id="highlight_all_matches" data-type="example">
        <h5><span class="label">Example 2-1. </span>Highlight all matches in a text string</h5>
        
        <pre data-type="programlisting" data-code-language="html"><code class="cp">&lt;!DOCTYPE html&gt;</code>
        <code class="nt">&lt;html</code> <code class="na">lang=</code><code class="s">"en"</code><code class="nt">&gt;</code>
          <code class="nt">&lt;head&gt;</code>
            <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">"UTF-8"</code> <code class="nt">/&gt;</code>
            <code class="nt">&lt;meta</code> <code class="na">name=</code><code class="s">"viewport"</code> <code class="na">content=</code><code class="s">"width=device-width, initial-scale=1.0"</code> <code class="nt">/&gt;</code>
            <code class="nt">&lt;meta</code> <code class="na">http-equiv=</code><code class="s">"X-UA-Compatible"</code> <code class="na">content=</code><code class="s">"ie=edge"</code> <code class="nt">/&gt;</code>
            <code class="nt">&lt;title&gt;</code>Finding All Instances of a Pattern<code class="nt">&lt;/title&gt;</code>
        
            <code class="nt">&lt;style&gt;</code>
              <code class="nc">.found</code> <code class="p">{</code>
                <code class="k">background-color</code><code class="o">:</code> <code class="m">#ff0</code><code class="p">;</code>
              <code class="p">}</code>
              <code class="nt">body</code> <code class="p">{</code>
                <code class="k">margin</code><code class="o">:</code> <code class="m">15px</code><code class="p">;</code>
              <code class="p">}</code>
              <code class="nt">textarea</code> <code class="p">{</code>
                <code class="k">width</code><code class="o">:</code> <code class="m">100%</code><code class="p">;</code>
                <code class="k">height</code><code class="o">:</code> <code class="m">350px</code><code class="p">;</code>
              <code class="p">}</code>
            <code class="nt">&lt;/style&gt;</code>
          <code class="nt">&lt;/head&gt;</code>
          <code class="nt">&lt;body&gt;</code>
            <code class="nt">&lt;h1&gt;</code>Finding All Instances of a Pattern<code class="nt">&lt;/h1&gt;</code>
        
            <code class="nt">&lt;form</code> <code class="na">id=</code><code class="s">"textsearch"</code><code class="nt">&gt;</code>
              <code class="nt">&lt;textarea</code> <code class="na">id=</code><code class="s">"incoming"</code><code class="nt">&gt;</code>
              <code class="nt">&lt;/textarea&gt;</code>
              <code class="nt">&lt;p&gt;</code>
                Search pattern: <code class="nt">&lt;input</code> <code class="na">id=</code><code class="s">"pattern"</code> <code class="na">type=</code><code class="s">"text"</code><code class="nt">&gt;</code>
              <code class="nt">&lt;/p&gt;</code>
            <code class="nt">&lt;/form&gt;</code>
            <code class="nt">&lt;button</code> <code class="na">id=</code><code class="s">"searchSubmit"</code><code class="nt">&gt;</code>Search for pattern<code class="nt">&lt;/button&gt;</code>
            <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"searchResult"</code><code class="nt">&gt;&lt;/div&gt;</code>
        
            <code class="nt">&lt;script&gt;</code>
            <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"searchSubmit"</code><code class="p">).</code><code class="nx">onclick</code> <code class="o">=</code> <code class="kd">function</code><code class="p">()</code> <code class="p">{</code>
                <code class="c1">// Get the pattern</code>
                <code class="kr">const</code> <code class="nx">pattern</code> <code class="o">=</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'pattern'</code><code class="p">).</code><code class="nx">value</code><code class="p">;</code>
                <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">RegExp</code><code class="p">(</code><code class="nx">pattern</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">);</code>
        
                <code class="c1">// Get the text to search</code>
                <code class="kr">const</code> <code class="nx">searchText</code> <code class="o">=</code> <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s1">'incoming'</code><code class="p">).</code><code class="nx">value</code><code class="p">;</code>
        
                <code class="kd">let</code> <code class="nx">highlightedResult</code> <code class="o">=</code> <code class="s2">"&lt;pre&gt;"</code><code class="p">;</code>
                <code class="kd">let</code> <code class="nx">startPosition</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code>
                <code class="kd">let</code> <code class="nx">endPosition</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code>
        
                <code class="c1">// Find each match, and build the result</code>
                <code class="kr">const</code> <code class="nx">matches</code> <code class="o">=</code> <code class="nx">searchText</code><code class="p">.</code><code class="nx">matchAll</code><code class="p">(</code><code class="nx">regex</code><code class="p">);</code>
                <code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">match</code> <code class="nx">of</code> <code class="nx">matches</code><code class="p">)</code> <code class="p">{</code>
                    <code class="nx">endPosition</code> <code class="o">=</code> <code class="nx">match</code><code class="p">.</code><code class="nx">index</code><code class="p">;</code>
        
                    <code class="c1">// Get all of the string up to the match, and concatenate</code>
                    <code class="nx">highlightedResult</code> <code class="o">+=</code> <code class="nx">searchText</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="nx">startPosition</code><code class="p">,</code> <code class="nx">endPosition</code><code class="p">);</code>
        
                    <code class="c1">// Add matched text, using a CSS class for formatting</code>
                    <code class="nx">highlightedResult</code> <code class="o">+=</code> <code class="s2">"&lt;span class='found'&gt;"</code> <code class="o">+</code> <code class="nx">match</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">+</code> <code class="s2">"&lt;/span&gt;"</code><code class="p">;</code>
                    <code class="nx">startPosition</code> <code class="o">=</code> <code class="nx">endPosition</code> <code class="o">+</code> <code class="nx">match</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">length</code><code class="p">;</code>
                <code class="p">}</code>
        
                <code class="c1">// Finish off the result string</code>
                <code class="nx">highlightedResult</code> <code class="o">+=</code> <code class="nx">searchText</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="nx">startPosition</code><code class="p">);</code>
                <code class="nx">highlightedResult</code> <code class="o">+=</code> <code class="s2">"&lt;/pre&gt;"</code><code class="p">;</code>
        
                <code class="c1">// Show the highlighted text in the page</code>
                <code class="nb">document</code><code class="p">.</code><code class="nx">getElementById</code><code class="p">(</code><code class="s2">"searchResult"</code><code class="p">).</code><code class="nx">innerHTML</code> <code class="o">=</code> <code class="nx">highlightedResult</code><code class="p">;</code>
             <code class="p">}</code>
            <code class="nt">&lt;/script&gt;</code>
          <code class="nt">&lt;/body&gt;</code>
        <code class="nt">&lt;/html&gt;</code></pre></div>
        
        <p>In <a data-type="xref" href="#application_finding_and_highlighting_all">Figure&nbsp;2-1</a> this page performs a search with this regular expression:<a data-type="indexterm" data-primary="" data-startref="ix_strings_find_patterns" id="idm45475178244824"></a><a data-type="indexterm" data-primary="" data-startref="ix_patterns_find_string" id="idm45475178243912"></a></p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">lea</code><code class="p">(</code><code class="nx">f</code><code class="o">|</code><code class="nx">ves</code><code class="p">)</code></pre>
        
        <p>The bar (<code>|</code>) is a conditional test, and will match a word based on the value on either side of the bar. So <em>leaf</em> matches, as well as <em>leaves</em>, but not <em>leap</em>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Removing Whitespace from the Beginning and End of a String"><div class="sect1" id="removing_whitespace">
        <h1>Removing Whitespace from the Beginning and End of a String</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475178074184">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="whitespace characters" id="ix_whitespace_strings"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="whitespace removal from beginning and end of" id="ix_strings_whitespace"></a>You want to trim extra spaces that pad the beginning or end of a string.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475178070440">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="trim() method" id="ix_trim_method"></a>Use the <code>String.trim()</code> method. It removes all whitespace from both ends of a string, including spaces, tabs, no-break spaces, and line terminator characters.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">paddedString</code> <code class="o">=</code> <code class="s1">'     The road is long, with many a winding turn.  '</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">trimmedString</code> <code class="o">=</code> <code class="nx">paddedString</code><code class="p">.</code><code class="nx">trim</code><code class="p">();</code>
        
        <code class="c1">// trimmedString = 'The road is long, with many a winding turn.'</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475178025704">
        <h2>Discussion</h2>
        
        <p>The <code>trim()</code> method is straightforward, but not customizable. If you have even slightly more complex string alteration requirements, you’ll need to use a regular expression.<a data-type="indexterm" data-primary="" data-startref="ix_trim_method" id="idm45475178024632"></a></p>
        
        <p><a data-type="indexterm" data-primary="spaces, removing from strings" id="idm45475178023400"></a>One common problem that thwarts the <code>trim()</code> method is removing excess whitespace <em>inside</em> a string. The <code>replaceAll()</code> method can accomplish this task with relative ease using a regular expression with the <code>\s</code> character to match whitespace:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">paddedString</code> <code class="o">=</code> <code class="s1">'The road is long,    with many a    winding turn.'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">trimmedString</code> <code class="o">=</code> <code class="nx">paddedString</code><code class="p">.</code><code class="nx">replaceAll</code><code class="p">(</code><code class="sr">/\s\s+/g</code><code class="p">,</code> <code class="s1">' '</code><code class="p">);</code>
        
        <code class="c1">// trimmedString = 'The road is long, with many a winding turn.'</code></pre>
        
        <p>Of course, unwanted artifacts are possible even after processing bad data with extra spaces. For example, if there are multiple spaces where you don’t want <em>any</em> space ('is long , &nbsp;&nbsp;&nbsp;with') you’ll still be left with a single space after you run the replacement ('is long , with'). The only way to deal with issues like these is to manually step through each match, as demonstrated in <a data-type="xref" href="#finding_and_highlighting_all_instances_o">“Finding All Instances of a Pattern”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475178010280">
        <h2>See Also</h2>
        
        <p>Regular expression syntax is described in <a data-type="xref" href="#replacing_patterns_string">“Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span>”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_strings_whitespace" id="idm45475177974504"></a><a data-type="indexterm" data-primary="" data-startref="ix_whitespace_strings" id="idm45475177973528"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Converting the First Letter of a String to Uppercase"><div class="sect1" id="convert_first_letter_to_uppercase">
        <h1>Converting the First Letter of a String to Uppercase</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475177970872">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="case conversion of first letter in strings" id="idm45475177969672"></a><a data-type="indexterm" data-primary="uppercase conversion of first letter in strings" id="idm45475177968872"></a><a data-type="indexterm" data-primary="strings (String object)" data-secondary="uppercase conversion of first letter" id="idm45475177968168"></a>You want to make the first letter of a string an uppercase letter, without changing the rest of the string.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475177966744">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="toUpper() method" id="idm45475177965576"></a>Split off the first letter and capitalize it with <code>String.toUpper()</code>. Join the uppercase letter to the remainder of the string, which you can get with <code>String.slice()</code>:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">original</code> <code class="o">=</code> <code class="s1">'if you cut an orange, there is a risk it will orbisculate.'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">fixed</code> <code class="o">=</code> <code class="nx">original</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">toUpperCase</code><code class="p">()</code> <code class="o">+</code> <code class="nx">original</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">1</code><code class="p">);</code>
        
        <code class="c1">// fixed = 'If you cut an orange, there is a risk it will orbisculate.';</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475177933256">
        <h2>Discussion</h2>
        
        <p>To get a single character from a string, you can use the string’s indexer, as in <span class="keep-together"><code>original[0]</code></span>. This gets the character in position 0 (which is the first character).</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">firstLetter</code> <code class="o">=</code> <code class="nx">original</code><code class="p">[</code><code class="mi">0</code><code class="p">];</code></pre>
        
        <p><a data-type="indexterm" data-primary="charAt() method" id="idm45475177920696"></a>Alternatively, you can use the <code>String.charAt()</code> method, which works in exactly the same way.</p>
        
        <p><a data-type="indexterm" data-primary="slice() method" data-secondary="String object" id="idm45475177918648"></a>To get a fragment of a string, you use the <code>slice()</code> method. When calling <code>slice()</code>, you must always specify the index where you want to start your string extraction. For example, <code>text.slice(5)</code> starts at index position 5, continues to the end of the string, and copies that section of the text into a new string.</p>
        
        <p>If you don’t want <code>slice()</code> to continue to the end of the string, you can supply an optional second parameter with the index where the string copying should stop:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Get a string from index position 5 to 10.</code>
        <code class="kr">const</code> <code class="nx">substring</code> <code class="o">=</code> <code class="nx">original</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">10</code><code class="p">);</code></pre>
        
        <p>The example in this recipe changed a single letter to uppercase. If you want to change an entire sentence to use initial capitals (called <em>title case</em>), it’s a more complex problem. You might decide to split the string into separate words, trim each word, and then join the results, using a variation of the technique from <a data-type="xref" href="#extracting_a_list">“Extracting a List from a String”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475177908072">
        <h2>See Also</h2>
        
        <p>You can use <code>slice()</code> in conjunction with <code>indexOf()</code> to find the location of specific bits of text that you want to extract. For an example, see <a data-type="xref" href="#extracting_a_list">“Extracting a List from a String”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Validating an Email Address"><div class="sect1" id="idm45475177904712">
        <h1>Validating an Email Address</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475177903464">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="email validation, regular expression" id="ix_email_valid_regex"></a><a data-type="indexterm" data-primary="regular expressions" data-secondary="email address validation" id="ix_regex_email_valid"></a>You want to catch and reject common errors in email addresses.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475177841192">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="test() method" id="idm45475177840024"></a>Regular expressions are useful for more than searching. You can also use them to validate strings by testing if a string matches a given pattern. In JavaScript, you test if a string matches a regular expression using the <code>RegEx.test()</code> method.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">emailValid</code> <code class="o">=</code> <code class="s2">"abeLincoln@gmail.com"</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">emailInvalid</code> <code class="o">=</code> <code class="s2">"abeLincoln@gmail .com"</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">regex</code> <code class="o">=</code> <code class="sr">/\S+@\S+\.\S+/</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">regex</code><code class="p">.</code><code class="nx">test</code><code class="p">(</code><code class="nx">emailValid</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// This code is executed, because the email passes.</code>
        <code class="p">}</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">regex</code><code class="p">.</code><code class="nx">test</code><code class="p">(</code><code class="nx">emailInvalid</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// This code is not executed, because the email fails.</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475177833784">
        <h2>Discussion</h2>
        
        <p>Programmers use many different regular expressions to validate email addresses. The best ones capture obvious mistakes and spurious values, but don’t get too complex. Overly strict regular expressions have, from time to time, inadvertently disallowed valid mail addresses. And even if an email address checks out with the most stringent test possible, there’s no way to know if it’s truly <em>correct</em> (at least not without sending an email message and requesting a confirmation).</p>
        
        <p>The regular expression in this recipe requires that an email has a sequence of at least one nonwhitespace character, followed by the @ character, followed by one or more nonwhitespace characters, followed by a period (.), followed again by one or more nonwhitespace characters. It catches obviously invalid emails like <em>tomkhangmail.com</em> or <em>tomkhan@gmail</em>.</p>
        
        <p>Often, you won’t write a regular expression for validation yourself.<a data-type="indexterm" data-primary="" data-startref="ix_regex_email_valid" id="idm45475177765512"></a><a data-type="indexterm" data-primary="" data-startref="ix_email_valid_regex" id="idm45475177764536"></a><a data-type="indexterm" data-primary="" data-startref="ix_strings_ch2" id="idm45475177763592"></a> Instead, you’ll use a prewritten expression that matches your data. For a massive collection of regular expression resources, visit the <a href="https://github.com/aloisdg/awesome-regex">Awesome Regex page</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475177761352">
        <h2>See Also</h2>
        
        <p>Regular expression syntax is described in <a data-type="xref" href="#replacing_patterns_string">“Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span>”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        <div data-type="footnotes"><p data-type="footnote" id="idm45475190104344"><sup><a href="ch02.html#idm45475190104344-marker">1</a></sup> In JavaScript, a <em>prototype</em> is a template for a specific type of object. In a more traditional object-oriented language, we would say that objects with the same prototype are instances of the same class. <a data-type="xref" href="ch08.html#ch08">Chapter&nbsp;8</a> has many recipes that explore prototypes in JavaScript.</p></div></div></section></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781492055747/files/epub.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
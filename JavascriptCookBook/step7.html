<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 7. Objects"><div class="chapter" id="ch07">
        <h1><span class="label">Chapter 7. </span>Objects</h1>
        
        
        <p><a data-type="indexterm" data-primary="objects (Object type)" id="ix_objects_ch7"></a>There are two broad categories of types in JavaScript. <a data-type="indexterm" data-primary="primitive types" id="idm45475164745336"></a>On one side is a small set of <em>primitive</em> types, like strings and numbers. On the other side are genuine objects, all of which derive from JavaScript’s <code>Object</code>.</p>
        
        <p><a data-type="indexterm" data-primary="constructors" data-secondary="objects and" id="idm45475164743448"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="constructors and" id="idm45475164742376"></a>JavaScript’s built-in objects are easy to recognize. <a data-type="indexterm" data-primary="new keyword" id="idm45475164741272"></a>They have constructors, and you’ll usually instantiate them with the <code>new</code> keyword. Basic ingredients like arrays, <code>Date</code>, error objects, <code>Map</code> and <code>Set</code> collections, and <code>RegExp</code> regular expressions are all objects.</p>
        
        <p>JavaScript objects also differ in important ways from the objects you find in traditional object-oriented programming languages. For example, JavaScript allows you to create instances of the base <code>Object</code> type, and attach new properties and functions at runtime. In fact, you can take a live object—any object—and modify its members, with no need to respect a class definition.</p>
        
        <p>In this chapter you’ll take a closer look at the functionality and quirks of JavaScript’s <code>Object</code> type. You’ll see how to use the core <code>Object</code> features to inspect, extend, and copy objects of all types. And in the next chapter, you’ll go one step further and learn the best practices for formalizing your own custom objects.</p>
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking if an Object Is a Certain Type"><div class="sect1" id="check_object_type">
        <h1>Checking if an Object Is a Certain Type</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475164733944">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="types, identifying object" id="ix_type_id"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="identifying types" id="ix_object_id_type"></a>You have a mystery object and you want to determine its type.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475164730200">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="instanceOf operator" id="ix_instanceOf"></a>Use the <code>instanceof</code> operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">mysteryObject</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">mysteryObject</code> <code class="k">instanceof</code> <code class="nb">Date</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// We end up here because mysteryObject is a Date</code>
        <code class="p">}</code></pre>
        
        <p>You can test if an object is <em>not</em> an instance of some type using the not operator (<code>!</code>). But make sure you use parentheses to apply the <code>!</code> to the entire <code>instanceof</code> condition:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="p">(</code><code class="nx">mysteryObject</code> <code class="k">instanceof</code> <code class="nb">Date</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// You get here if mysteryObject isn't a Date</code>
        <code class="p">}</code>
        
        <code class="c1">// Don't make this mistake!</code>
        <code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nx">mysteryObject</code> <code class="k">instanceof</code> <code class="nb">Date</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code never runs</code>
        <code class="p">}</code></pre>
        
        <p>There’s one gap in the <code>instanceof</code> operator. <a data-type="indexterm" data-primary="primitive types" id="idm45475164689752"></a>It doesn’t work with primitive values, like numbers, strings, Booleans, <code>BigInt</code> values, <code>null</code>, and <code>undefined</code>. Here’s a demonstration of the problem:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">testNumber</code> <code class="o">=</code> <code class="mi">42</code><code class="p">;</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">testNumber</code> <code class="k">instanceof</code> <code class="nb">Number</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code never runs</code>
        <code class="p">}</code>
        
        <code class="kr">const</code> <code class="nx">testString</code> <code class="o">=</code> <code class="s1">'Hello'</code><code class="p">;</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">testString</code> <code class="k">instanceof</code> <code class="nb">String</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code never runs</code>
        <code class="p">}</code>
        
        <code class="c1">// The following two tests work because the primitives are wrapped in objects,</code>
        <code class="c1">// but that's uncommon in modern JavaScript.</code>
        <code class="kr">const</code> <code class="nx">numberObject</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Number</code><code class="p">(</code><code class="mi">42</code><code class="p">);</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">numberObject</code> <code class="k">instanceof</code> <code class="nb">Number</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs</code>
        <code class="p">}</code>
        
        <code class="kr">const</code> <code class="nx">stringObject</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">String</code><code class="p">(</code><code class="s1">'Hello'</code><code class="p">);</code>
        <code class="k">if</code> <code class="p">(</code><code class="nx">stringObject</code> <code class="k">instanceof</code> <code class="nb">String</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="typeof operator" id="idm45475164651288"></a>The solution is to use the <code>typeof</code> operator if you’re testing a variable that might hold one of the primitive data types. Unlike <code>instanceof</code>, <code>typeof</code> provides you with one of nine predefined string values (as described in <a data-type="xref" href="ch02.html#checking_existing_nonempty_string">“Checking for an Existing, Nonempty String”</a>). If you get a value of <code>object</code>, you can use the <code>instanceof</code> operator to dig deeper:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">mysteryPrimitive</code> <code class="o">=</code> <code class="mi">42</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">mysteryObject</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">mysteryPrimitive</code> <code class="o">===</code> <code class="s1">'number'</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs</code>
        <code class="p">}</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">mysteryObject</code> <code class="o">===</code> <code class="s1">'object'</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs, because a Date is an object, not a primitive</code>
        
          <code class="k">if</code> <code class="p">(</code><code class="nx">mysteryObject</code> <code class="k">instanceof</code> <code class="nb">Date</code><code class="p">)</code> <code class="p">{</code>
            <code class="c1">// This code also runs</code>
          <code class="p">}</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475164449368">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="prototype chain" id="idm45475164430424"></a>The <code>instanceof</code> operator works by inspecting an object’s <em>prototype chain</em>, a concept explained in <a data-type="xref" href="ch08.html#prototype_chains">“Extra: Prototype Chains”</a>. Depending on how an object is constructed, there can be several types in the prototype chain (similar to the way an object in a traditional OOP language might inherit from a sequence of classes). For example, every object has the <code>Object</code> prototype at the base of its chain, so this is always true:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="nx">mysteryObject</code> <code class="k">instanceof</code> <code class="nb">Object</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This is true, unless mysteryObject is a primitive type</code>
        <code class="p">}</code></pre>
        
        <p>Remember, primitives don’t just include numbers, strings, and Booleans. They encompass the specialized <code>BigInt</code> and <code>Symbol</code>, and the special values <code>null</code> and <span class="keep-together"><code>undefined</code></span>. All of these values will return <code>false</code> if you use the <code>instanceof Object</code> test.<a data-type="indexterm" data-primary="" data-startref="ix_object_id_type" id="idm45475164502504"></a><a data-type="indexterm" data-primary="" data-startref="ix_type_id" id="idm45475164501496"></a><a data-type="indexterm" data-primary="" data-startref="ix_instanceOf" id="idm45475164500552"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Using an Object Literal to Bundle Data"><div class="sect1" id="object_literal">
        <h1>Using an Object Literal to Bundle Data</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475164493160">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="object literal" id="ix_object_literal3"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="literal" id="ix_object_literal2"></a>You want to group several variables together to create a basic data package.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475164489384">
        <h2>Solution</h2>
        
        <p>Use the <em>object literal</em> syntax to create a new instance of the <code>Object</code> type. You don’t use the <code>new</code> keyword or even name the <code>Object</code> type. Instead, you simply write a set of <code>{}</code> braces that encloses a comma-separated list of properties. Each property consists of a property name, followed by a colon, followed by the property value:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">employeeId</code><code class="o">:</code> <code class="mi">402</code><code class="p">,</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Lisa'</code><code class="p">,</code>
          <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Stanecki'</code><code class="p">,</code>
          <code class="nx">birthDate</code><code class="o">:</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">1995</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">15</code><code class="p">)</code>
        <code class="p">};</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">employee</code><code class="p">.</code><code class="nx">firstName</code><code class="p">);</code>  <code class="c1">// 'Lisa'</code></pre>
        
        <p>Of course, you can add additional properties after creating the object, as with any JavaScript object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">employee</code><code class="p">.</code><code class="nx">role</code> <code class="o">=</code> <code class="s1">'Manager'</code><code class="p">;</code></pre>
        
        <p>This technique works even if you’ve declared your object with <code>const</code>, because object literals are <em>reference types</em>, not values (unlike structs in other languages). Adding a property changes the object, but it doesn’t change the reference. (On the other hand, assigning the <code>employee</code> variable to a new object wouldn’t be allowed in this example, because that operation would change the reference.)</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475164316760">
        <h2>Discussion</h2>
        
        <p>Object literal syntax gives you the cleanest, most compact way to quickly create a simple object. However, it’s just a shortcut for explicitly creating a new <code>Object</code> instance and assigning properties, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Object</code><code class="p">();</code>
        <code class="nx">employee</code><code class="p">.</code><code class="nx">employeeId</code> <code class="o">=</code> <code class="mi">402</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">.</code><code class="nx">firstName</code> <code class="o">=</code> <code class="s1">'Lisa'</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">.</code><code class="nx">lastName</code> <code class="o">=</code> <code class="s1">'Stanecki'</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">.</code><code class="nx">birthDate</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">1995</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">15</code><code class="p">);</code></pre>
        
        <p>or you can use key-value syntax:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Object</code><code class="p">();</code>
        <code class="nx">employee</code><code class="p">[</code><code class="s1">'employeeId'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">402</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">[</code><code class="s1">'firstName'</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'Lisa'</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">[</code><code class="s1">'lastName'</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'Stanecki'</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">[</code><code class="s1">'birthDate'</code><code class="p">]</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">1995</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">15</code><code class="p">);</code></pre>
        
        <p>One of the nicer features of object literal syntax is the way it handles nested objects, like <code>birthPlace</code> in this example:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">employeeId</code><code class="o">:</code> <code class="mi">402</code><code class="p">,</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Lisa'</code><code class="p">,</code>
          <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Stanecki'</code><code class="p">,</code>
          <code class="nx">birthPlace</code><code class="o">:</code> <code class="p">{</code><code class="nx">country</code><code class="o">:</code> <code class="s1">'Canada'</code><code class="p">,</code> <code class="nx">city</code><code class="o">:</code> <code class="s1">'Toronto'</code><code class="p">}</code>
        <code class="p">};</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">employee</code><code class="p">.</code><code class="nx">birthPlace</code><code class="p">.</code><code class="nx">city</code><code class="p">);</code>  <code class="c1">// 'Toronto'</code></pre>
        
        <p>In JavaScript’s eyes, an object literal is an instance of the base <code>Object</code> type. This simplicity makes it easy to create an object out of any ad hoc grouping of data, but it also has a cost—your object has no meaningful <em>identity</em>.</p>
        
        <p>Yes, you can test if an object has a certain property (<a data-type="xref" href="#checking_object_for_property">“Checking If an Object Has a Property”</a>) or enumerate all its properties (<a data-type="xref" href="#iterating_all_object_properties">“Iterating Over All the Properties of an Object”</a>). But you can’t use <code>instanceof</code> to test against a custom object type. In other words, there’s no contract to program against, and no easy way to validate that your objects are what you expect. If you need to use more durable objects that are passed around your code, model complex entities, and include their own methods, you should consider using formal classes (<a data-type="xref" href="ch08.html#using_es6_classes">“Creating a Reusable Class”</a>).</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="factory functions" id="idm45475164099240"></a>It might occur to you that you could streamline the object creation process by creating a factory function that accepts parameters and builds the corresponding object. While there’s nothing inherently wrong with this approach, there’s a more powerful and conventional alternative. As soon as you want to build multiple objects with the same structure, consider using classes (<a data-type="xref" href="ch08.html#using_es6_classes">“Creating a Reusable Class”</a>).</p>
        </div>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475164316168">
        <h2>See Also</h2>
        
        <p>To find all the properties on an object literal, see <a data-type="xref" href="#iterating_all_object_properties">“Iterating Over All the Properties of an Object”</a>. To step up to a formal class definition, see <a data-type="xref" href="ch08.html#using_es6_classes">“Creating a Reusable Class”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Extra: Computed Property Names"><div class="sect2" id="computed_property_names">
        <h2>Extra: Computed Property Names</h2>
        
        <p><a data-type="indexterm" data-primary="computed property names" id="idm45475164092088"></a>As you know, you can add a new property to any JavaScript object in two ways. <a data-type="indexterm" data-primary="dot-syntax" id="idm45475164091256"></a>You can use dot-syntax with property names:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">employee</code><code class="p">.</code><code class="nx">employeeId</code> <code class="o">=</code> <code class="mi">402</code><code class="p">;</code></pre>
        
        <p><a data-type="indexterm" data-primary="key-value syntax" id="idm45475164087096"></a>Or key-value syntax:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">employee</code><code class="p">[</code><code class="s1">'employeeId'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">402</code><code class="p">;</code></pre>
        
        <p>These two approaches aren’t equivalent. When you use key-value syntax, the property name is stored as a string, which means you have the opportunity to generate the property name at runtime. This is called a <em>computed property name</em>, and it’s important in certain extensibility scenarios. (For example, imagine if you’re fetching some external data and using that to create a matching object.)</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">dynamicProperty</code> <code class="o">=</code> <code class="s1">'nickname'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">dynamicPropertyValue</code> <code class="o">=</code> <code class="s1">'The Izz'</code><code class="p">;</code>
        
        <code class="nx">employee</code><code class="p">[</code><code class="nx">dynamicProperty</code><code class="p">]</code> <code class="o">=</code> <code class="nx">dynamicPropertyValue</code><code class="p">;</code>
        <code class="c1">// Now employee.nickname = 'The Izz'</code>
        
        <code class="kr">const</code> <code class="nx">i</code> <code class="o">=</code> <code class="mi">10</code><code class="p">;</code>
        <code class="nx">employee</code><code class="p">[</code><code class="s1">'sequence'</code> <code class="o">+</code> <code class="nx">i</code><code class="p">]</code> <code class="o">=</code> <code class="mi">1</code><code class="p">;</code>
        <code class="c1">// Now employee.sequence10 = 1</code></pre>
        
        <p>Computed property names are always converted to strings. They support characters that wouldn’t be allowed in ordinary variable names, like spaces. For example, this is possible (although it’s a very bad idea):</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="p">{};</code>
        <code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>
        
        <code class="nx">employee</code><code class="p">[</code><code class="nx">today</code><code class="p">]</code> <code class="o">=</code> <code class="mi">42</code><code class="p">;</code>
        
        <code class="c1">// This reveals that 42 is stored in a property that has a long string name like</code>
        <code class="c1">// "Tue May 04 2021 08:18:16 GMT-0400 (Eastern Daylight Time)"</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">employee</code><code class="p">);</code></pre>
        
        <p>Object literal syntax also allows you to created computed properties. But because it doesn’t use a format with string key names, you need to enclose each computed property name in square brackets. Here’s what that looks like:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">dynamicProperty</code> <code class="o">=</code> <code class="s1">'nickname'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">dynamicPropertyValue</code> <code class="o">=</code> <code class="s1">'The Izz'</code><code class="p">;</code>
        <code class="kr">const</code> <code class="nx">i</code> <code class="o">=</code> <code class="mi">10</code><code class="p">;</code>
        
        <code class="kr">const</code> <code class="nx">employee</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">employeeId</code><code class="o">:</code> <code class="mi">402</code><code class="p">,</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Lisa'</code><code class="p">,</code>
          <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Stanecki'</code><code class="p">,</code>
          <code class="p">[</code><code class="nx">dynamicProperty</code><code class="p">]</code><code class="o">:</code> <code class="nx">dynamicPropertyValue</code><code class="p">,</code>
          <code class="p">[</code><code class="s1">'sequence'</code> <code class="o">+</code> <code class="nx">i</code><code class="p">]</code><code class="o">:</code> <code class="mi">1</code>
        <code class="p">};</code></pre>
        <div data-type="tip"><h6>Tip</h6>
        <p><a data-type="indexterm" data-primary="properties" data-secondary="naming" id="idm45475163936856"></a>If you’re creating property names dynamically, you may run into a situation where you need to ensure your property name is unique. Various homemade workarounds are possible: checking for the property and adding a sequence number until you get something unique, or just using a GUID (globally unique identifer). But JavaScript provides a built-in solution with the <code>Symbol</code> type, which is your best bet (see <a data-type="xref" href="#symbol_properties_unique">“Creating Absolutely Unique Object Property Keys”</a>).<a data-type="indexterm" data-primary="" data-startref="ix_object_literal2" id="idm45475163846504"></a><a data-type="indexterm" data-primary="" data-startref="ix_object_literal3" id="idm45475163845528"></a></p>
        </div>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking If an Object Has a Property"><div class="sect1" id="checking_object_for_property">
        <h1>Checking If an Object Has a Property</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475163843000">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="defining new" id="ix_properties_new"></a><a data-type="indexterm" data-primary="properties" data-secondary="identifying" id="ix_prop_object_id"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="identifying properties" id="ix_object_id_prop"></a>You want to check at runtime if an object has a given property.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475163837736">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="in operator" id="idm45475163836568"></a>Use the <code>in</code> operator to look for a property by name:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">address</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">country</code><code class="o">:</code> <code class="s1">'Australia'</code><code class="p">,</code>
          <code class="nx">city</code><code class="o">:</code> <code class="s1">'Sydney'</code><code class="p">,</code>
          <code class="nx">streetNum</code><code class="o">:</code> <code class="s1">'412'</code><code class="p">,</code>
          <code class="nx">streetName</code><code class="o">:</code> <code class="s1">'Worcestire Blvd'</code>
        <code class="p">};</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="s1">'country'</code> <code class="k">in</code> <code class="nx">address</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs, because there is an address.country property</code>
        <code class="p">}</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="s1">'zipCode'</code> <code class="k">in</code> <code class="nx">address</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code does not run, because there is no address.zipCode property</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475163716104">
        <h2>Discussion</h2>
        
        <p>If you attempt to read a property that doesn’t exist, you get the value <code>undefined</code>. You could test for <code>undefined</code>, but that alone is not an ironclad guarantee that the property doesn’t exist. (It’s technically possible to have a property and set it to <code>undefined</code>, in which case the property still exists but your test would miss it.) A better approach to finding properties is using the <code>in</code> operator.</p>
        
        <p><a data-type="indexterm" data-primary="prototype chain" id="idm45475163756744"></a><a data-type="indexterm" data-primary="inheritance" id="idm45475163755640"></a>The <code>in</code> operator searches an object <em>and</em> its prototype chain. That means if you create an object <code>Dog</code> that derives from another object <code>Animal</code>, an <code>in</code> test will return <code>true</code> if a property is defined in <code>Dog</code> or <code>Animal</code>. Alternatively, you can use the <code>hasOwnProperty()</code> method, which only searches the current object, and ignores inherited <span class="keep-together">properties</span>.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">address</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">country</code><code class="o">:</code> <code class="s1">'Australia'</code><code class="p">,</code>
          <code class="nx">city</code><code class="o">:</code> <code class="s1">'Sydney'</code><code class="p">,</code>
          <code class="nx">streetNum</code><code class="o">:</code> <code class="s1">'412'</code><code class="p">,</code>
          <code class="nx">streetName</code><code class="o">:</code> <code class="s1">'Worcestire Blvd'</code>
        <code class="p">};</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">address</code><code class="p">.</code><code class="nx">hasOwnProperty</code><code class="p">(</code><code class="s1">'country'</code><code class="p">));</code>  <code class="c1">// true</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">address</code><code class="p">.</code><code class="nx">hasOwnProperty</code><code class="p">(</code><code class="s1">'zipCode'</code><code class="p">));</code>  <code class="c1">// false</code></pre>
        
        <p>For more information about using inheritance, see <a data-type="xref" href="ch08.html#custom_class_inheritance">“Inheriting Functionality from Another Class”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475163674888">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="#iterating_all_object_properties">“Iterating Over All the Properties of an Object”</a> shows how to retrieve all the properties of an object into an array. <a data-type="xref" href="#testing_for_empty_object">“Testing for an Empty Object”</a> shows how to test if your object is empty of all data.<a data-type="indexterm" data-primary="" data-startref="ix_object_id_prop" id="idm45475163672248"></a><a data-type="indexterm" data-primary="" data-startref="ix_prop_object_id" id="idm45475163671304"></a><a data-type="indexterm" data-primary="" data-startref="ix_properties_new" id="idm45475163670360"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Iterating Over All the Properties of an Object"><div class="sect1" id="iterating_all_object_properties">
        <h1>Iterating Over All the Properties of an Object</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475163667704">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="iterating over all properties of objects" id="ix_prop_iterating_object"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="iterating over all properties of" id="ix_object_iterating"></a>You want to examine all the properties in an object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475163663576">
        <h2>Solution</h2>
        
        <p>Use the static <code>Object.keys()</code> method to get an array with the property names for your object. For example, this code:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">address</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">country</code><code class="o">:</code> <code class="s1">'Australia'</code><code class="p">,</code> <code class="nx">city</code><code class="o">:</code> <code class="s1">'Sydney'</code><code class="p">,</code> <code class="nx">streetNum</code><code class="o">:</code> <code class="s1">'412'</code><code class="p">,</code>
          <code class="nx">streetName</code><code class="o">:</code> <code class="s1">'Worcestire Blvd'</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">properties</code> <code class="o">=</code> <code class="nb">Object</code><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">address</code><code class="p">);</code>
        
        <code class="c1">// Show every property and its value</code>
        <code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">property</code> <code class="k">of</code> <code class="nx">properties</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`Property: </code><code class="si">${</code><code class="nx">property</code><code class="si">}</code><code class="sb">, Value: </code><code class="si">${</code><code class="nx">address</code><code class="p">[</code><code class="nx">property</code><code class="p">]</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code>
        <code class="p">}</code></pre>
        
        <p>creates this console output:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">Property</code><code class="o">:</code> <code class="nx">country</code><code class="p">,</code> <code class="nx">Value</code><code class="o">:</code> <code class="nx">Australia</code>
        <code class="nx">Property</code><code class="o">:</code> <code class="nx">city</code><code class="p">,</code> <code class="nx">Value</code><code class="o">:</code> <code class="nx">Sydney</code>
        <code class="nx">Property</code><code class="o">:</code> <code class="nx">streetNum</code><code class="p">,</code> <code class="nx">Value</code><code class="o">:</code> <code class="mi">412</code>
        <code class="nx">Property</code><code class="o">:</code> <code class="nx">streetName</code><code class="p">,</code> <code class="nx">Value</code><code class="o">:</code> <code class="nx">Worcestire</code> <code class="nx">Blvd</code></pre>
        
        <p>This technique—examining an object, finding all its properties, and displaying them—is similar to what the <code>console.log()</code> method does when you pass it an object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475163482952">
        <h2>Discussion</h2>
        
        <p>When using <code>Object.keys()</code>, you retrieve all the property names (also known as <em>keys</em>). But you still need to look up the corresponding value in the object. You can’t use the dot syntax to do that (<code>object.propertyName</code>) because you have the property as a string. Instead, you use the array-like indexer syntax (<code>object['propertyName']</code>). Properties will typically appear in the order they were defined, but JavaScript doesn’t guarantee the order.</p>
        
        <p class="pagebreak-before less_space">The <code>Object.keys()</code> method is also commonly used to count the number of properties (or <em>length</em>) of an object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">address</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">country</code><code class="o">:</code> <code class="s1">'Australia'</code><code class="p">,</code> <code class="nx">city</code><code class="o">:</code> <code class="s1">'Sydney'</code><code class="p">,</code> <code class="nx">streetNum</code><code class="o">:</code> <code class="s1">'412'</code><code class="p">,</code>
          <code class="nx">streetName</code><code class="o">:</code> <code class="s1">'Worcestire Blvd'</code>
        <code class="p">};</code>
        
        <code class="nx">properties</code> <code class="o">=</code> <code class="nb">Object</code><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">address</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`The address object has a length of </code><code class="si">${</code><code class="nx">properties</code><code class="p">.</code><code class="nx">length</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code>
        <code class="c1">// (In this example, the length is 4.)</code></pre>
        
        <p><a data-type="indexterm" data-primary="inheritance" id="idm45475163547960"></a>The <code>Object.keys()</code> method is just one of many possible solutions for reflecting on JavaScript objects. However, it’s a good default starting point because it ignores inherited properties and nonenumerable properties, which is the behavior you want in most scenarios.</p>
        
        <p><a data-type="indexterm" data-primary="for…in loop" id="idm45475163440680"></a>Another option is to use a <code>for...in</code> loop, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">property</code> <code class="k">in</code> <code class="nx">address</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="sb">`Property: </code><code class="si">${</code><code class="nx">property</code><code class="si">}</code><code class="sb">, Value: </code><code class="si">${</code><code class="nx">address</code><code class="p">[</code><code class="nx">property</code><code class="p">]</code><code class="si">}</code><code class="sb">`</code><code class="p">);</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="prototype chain" id="idm45475163420328"></a><a data-type="indexterm" data-primary="keys() method" id="idm45475163412984"></a>The <code>for...in</code> loop travels up the prototype chain to find properties that your object has inherited. In this example, with the object literal named <code>address</code>, there’s no difference. However, if you need to reflect on objects often, inadvertently using <code>for...in</code> loops when <code>Object.keys()</code> would suffice could adversely affect <span class="keep-together"><code>performance</code></span>.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>Contrary to what you might expect, the <code>for...in</code> loop has slightly different coverage than the <code>in</code> operator. The <code>in</code> operator examines <em>all</em> properties, including nonenumerable properties, symbol properties, and inherited properties. The <code>for...in</code> loop finds inherited properties but ignores nonenumerable properties and symbol properties.</p>
        </div>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="methods for finding" id="idm45475163405688"></a>JavaScript also has other, more specialized functions that find different subsets of properties. For example, the <code>getOwnPropertyNames()</code> function ignores inherited properties, and the <code>getOwnPropertyDescriptors()</code> function ignores inherited properties but also finds nonenumerable properties and symbol properties, which are often used for extensibility (see <a data-type="xref" href="#symbol_properties_unique">“Creating Absolutely Unique Object Property Keys”</a>). <a data-type="xref" href="#enumerate_properties">Table&nbsp;7-1</a> outlines these different approaches. For even more detailed information, the Mozilla Developer Network has a full accounting of the <a href="https://oreil.ly/rbd7z">different property searching functions</a>.</p>
        <table id="enumerate_properties" class="pagebreak-before less_space">
        <caption><span class="label">Table 7-1. </span>Different ways to find object properties</caption>
        <thead>
        <tr>
        <th>Method</th>
        <th>Returns</th>
        <th>Gets enumerable properties</th>
        <th>Gets non-enumerable properties</th>
        <th>Gets symbol properties</th>
        <th>Includes inherited properties</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p><code>Object.keys()</code></p></td>
        <td><p>An array of property names</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Object.values()</code></p></td>
        <td><p>An array of property values</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Object.entries()</code></p></td>
        <td><p>An array of property arrays, each of which holds a property name and the corresponding value</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Object.getOwnPropertyNames()</code></p></td>
        <td><p>An array of property names</p></td>
        <td><p>Yes</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Object.getOwnProperty​Sym⁠bols()</code></p></td>
        <td><p>An array of property names</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Object.getOwnProperty​De⁠scriptors()</code></p></td>
        <td><p>An array of property descriptor objects, like when you use <code>defineProperty()</code> (<a data-type="xref" href="#creating_properties_with_define_property">“Customizing the Way a Property Is Defined”</a>)</p></td>
        <td><p>Yes</p></td>
        <td><p>Yes</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>Reflect.ownKeys()</code></p></td>
        <td><p>An array of property names</p></td>
        <td><p>Yes</p></td>
        <td><p>Yes</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        </tr>
        <tr>
        <td><p><code>for...in</code> loop</p></td>
        <td><p>Each property name</p></td>
        <td><p>Yes</p></td>
        <td><p>No</p></td>
        <td><p>No</p></td>
        <td><p>Yes</p></td>
        </tr>
        </tbody>
        </table>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475163482360">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="#checking_object_for_property">“Checking If an Object Has a Property”</a> explains how to use the <code>in</code> operator to check for a single property.<a data-type="indexterm" data-primary="" data-startref="ix_object_iterating" id="idm45475163299336"></a><a data-type="indexterm" data-primary="" data-startref="ix_prop_iterating_object" id="idm45475163298360"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Testing for an Empty Object"><div class="sect1" id="testing_for_empty_object">
        <h1>Testing for an Empty Object</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475163295832">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="testing" data-secondary="for empty objects" data-secondary-sortas="empty objects" id="idm45475163294632"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="testing for empty" id="idm45475163293384"></a>You want to determine if an object is empty (has no properties).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475163292056">
        <h2>Solution</h2>
        
        <p>Get an array of properties using <code>Object.keys()</code>, and check for a <code>length</code> of 0:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">blankObject</code> <code class="o">=</code> <code class="p">{};</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nb">Object</code><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">blankObject</code><code class="p">).</code><code class="nx">length</code> <code class="o">===</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs because there's nothing in this object</code>
        <code class="p">}</code>
        
        <code class="kr">const</code> <code class="nx">objectWithProperty</code> <code class="o">=</code> <code class="p">{</code><code class="nx">price</code><code class="o">:</code> <code class="mf">47.99</code><code class="p">};</code>
        <code class="k">if</code> <code class="p">(</code><code class="nb">Object</code><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">objectWithProperty</code><code class="p">).</code><code class="nx">length</code> <code class="o">===</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code won't run, because objectWithProperty isn't empty</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475163202168">
        <h2>Discussion</h2>
        
        <p>It’s possible to create an empty object with object literal syntax:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">blankObject</code> <code class="o">=</code> <code class="p">{};</code></pre>
        
        <p>or by creating an instance of <code>Object</code> with <code>new</code>:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">blankObject</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Object</code><code class="p">();</code></pre>
        
        <p>Empty objects can also come about from other, less common, methods, such as taking an existing object and removing properties with the <code>delete</code> operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">objectWithProperty</code> <code class="o">=</code> <code class="p">{</code><code class="nx">price</code><code class="o">:</code> <code class="mf">47.99</code><code class="p">};</code>
        <code class="k">delete</code> <code class="nx">objectWithProperty</code><code class="p">.</code><code class="nx">price</code><code class="p">;</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nb">Object</code><code class="p">.</code><code class="nx">keys</code><code class="p">(</code><code class="nx">objectWithProperty</code><code class="p">).</code><code class="nx">length</code> <code class="o">===</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// This code runs, because objectWithProperty had its only property removed</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="reference types" id="idm45475163136920"></a>Because objects are reference types, you can’t just compare one empty object to another. For example, this test won’t recognize that your unknown object is empty:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">blankObject</code> <code class="o">=</code> <code class="p">{};</code>
        <code class="kr">const</code> <code class="nx">unknownObject</code> <code class="o">=</code> <code class="p">{};</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nx">unknownObject</code> <code class="o">===</code> <code class="nx">blankObject</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// We never get here</code>
          <code class="c1">// Even though unknownObject is empty, like blankObject, it holds a</code>
          <code class="c1">// different reference to a different memory location</code>
        <code class="p">}</code></pre>
        
        <p>Many JavaScript libraries, like Underscore and Lodash, provide an <code>isEmpty()</code> method for checking objects. However, the <code>Object.keys()</code> test is just as easy.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Merging the Properties of Two Objects"><div class="sect1" id="merging_object_properties">
        <h1>Merging the Properties of Two Objects</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475163074504">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="merging properties of two" id="idm45475163073304"></a><a data-type="indexterm" data-primary="properties" data-secondary="merging of two objects’" id="idm45475163072360"></a>You’ve created two simple objects with properties, and you want to combine their data into a single object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475163070936">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="… (spread operator)" id="idm45475163069768"></a>Use the spread operator (<code>...</code>) to expand both objects, and assign them to a new object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">address</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">country</code><code class="o">:</code> <code class="s1">'Australia'</code><code class="p">,</code> <code class="nx">city</code><code class="o">:</code> <code class="s1">'Sydney'</code><code class="p">,</code> <code class="nx">streetNum</code><code class="o">:</code> <code class="s1">'412'</code><code class="p">,</code>
          <code class="nx">streetName</code><code class="o">:</code> <code class="s1">'Worcestire Blvd'</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">customer</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Lisa'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Stanecki'</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">customerWithAddress</code> <code class="o">=</code> <code class="p">{...</code><code class="nx">customer</code><code class="p">,</code> <code class="p">...</code><code class="nx">address</code><code class="p">};</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">customerWithAddress</code><code class="p">);</code>
        <code class="c1">// The customerWithAddress now has all six properties</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475163066952">
        <h2>Discussion</h2>
        
        <p>Merging two objects is an easy operation, but not without potential problems. If both objects have properties with the same name, the properties from the second object (that’s <code>address</code> in the previous example) will quietly overwrite the properties from the first object. Here’s a modified version of the example that demonstrates the <span class="keep-together">problem:</span></p>
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code><code> </code><code class="nx">address</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code>
          </code><strong><code class="nx">country</code><code class="o">:</code><code> </code><code class="s1">'Australia'</code></strong><code class="p">,</code><code> </code><code class="nx">city</code><code class="o">:</code><code> </code><code class="s1">'Sydney'</code><code class="p">,</code><code> </code><code class="nx">streetNum</code><code class="o">:</code><code> </code><code class="s1">'412'</code><code class="p">,</code><code>
          </code><code class="nx">streetName</code><code class="o">:</code><code> </code><code class="s1">'Worcestire Blvd'</code><code>
        </code><code class="p">}</code><code class="p">;</code><code>
        
        </code><code class="kr">const</code><code> </code><code class="nx">customer</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code>
          </code><code class="nx">firstName</code><code class="o">:</code><code> </code><code class="s1">'Lisa'</code><code class="p">,</code><code> </code><code class="nx">lastName</code><code class="o">:</code><code> </code><code class="s1">'Stanecki'</code><code class="p">,</code><code> </code><strong><code class="nx">country</code><code class="o">:</code><code> </code><code class="s1">'South Korea'</code></strong><code>
        </code><code class="p">}</code><code class="p">;</code><code>
        
        </code><code class="kr">const</code><code> </code><code class="nx">customerWithAddress</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="p">...</code><code class="nx">customer</code><code class="p">,</code><code> </code><code class="p">...</code><code class="nx">address</code><code class="p">}</code><code class="p">;</code><code>
        </code><code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">customerWithAddress</code><code class="p">.</code><code class="nx">country</code><code class="p">)</code><code class="p">;</code><code>  </code><code class="c1">// Shows 'Australia'
        </code></pre>
        
        <p>In this example, there are two instances of the <code>country</code> property. When the two objects are merged, the <code>customer</code> object is expanded first, followed by the <code>address</code> object. As a result, the <code>address.country</code> property overwrites the <code>customer.country</code> property.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Customizing the Way a Property Is Defined"><div class="sect1" id="creating_properties_with_define_property">
        <h1>Customizing the Way a Property Is Defined</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475162883816">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="customizing definitions" id="ix_prop_custom_def"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="customizing how property is defined" id="ix_object_custom_prop"></a>You can easily slap a new property onto an object. But sometimes you need to explicitly customize your property so you have more control of how it’s used.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475162879624">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="defineProperty() method" id="idm45475162878216"></a>Instead of creating a property by assigning to it, use the <code>Object.defineProperty()</code> method to define it. For example, consider the following object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">{};</code></pre>
        
        <p>Let’s say you want to add the following two properties, with the given characteristics:</p>
        <dl>
        <dt><code>type</code></dt>
        <dd>
        <p><a data-type="indexterm" data-primary="type property" id="idm45475162840008"></a>Initial value set and can’t be changed, can’t be deleted or modified, but can be enumerated</p>
        </dd>
        <dt><code>id</code></dt>
        <dd>
        <p><a data-type="indexterm" data-primary="id property" id="idm45475162836104"></a>Initial value set, but can be changed, can’t be deleted or modified, and can’t be enumerated</p>
        </dd>
        </dl>
        
        <p>Use the following JavaScript:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">data</code> <code class="o">=</code> <code class="p">{};</code>
        
        <code class="nb">Object</code><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">data</code><code class="p">,</code> <code class="s1">'type'</code><code class="p">,</code> <code class="p">{</code>
          <code class="nx">value</code><code class="o">:</code> <code class="s1">'primary'</code><code class="p">,</code>
          <code class="nx">enumerable</code><code class="o">:</code> <code class="kc">true</code>
        <code class="p">});</code>
        
        <code class="c1">// Attempt to change the read-only property</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">data</code><code class="p">.</code><code class="nx">type</code><code class="p">);</code> <code class="c1">// primary</code>
        <code class="nx">data</code><code class="p">.</code><code class="nx">type</code> <code class="o">=</code> <code class="s1">'secondary'</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">data</code><code class="p">.</code><code class="nx">type</code><code class="p">);</code> <code class="c1">// nope, still primary</code>
        
        <code class="nb">Object</code><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">data</code><code class="p">,</code> <code class="s1">'id'</code><code class="p">,</code> <code class="p">{</code>
          <code class="nx">value</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code>
          <code class="nx">writable</code><code class="o">:</code> <code class="kc">true</code>
        <code class="p">});</code>
        
        <code class="c1">// Change this modifiable property</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">data</code><code class="p">.</code><code class="nx">id</code><code class="p">);</code> <code class="c1">// 1</code>
        <code class="nx">data</code><code class="p">.</code><code class="nx">id</code> <code class="o">=</code> <code class="mi">300</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">data</code><code class="p">.</code><code class="nx">id</code><code class="p">);</code> <code class="c1">// 300</code>
        
        <code class="c1">// See what properties appear during enumeration</code>
        <code class="k">for</code> <code class="p">(</code><code class="nx">prop</code> <code class="k">in</code> <code class="nx">data</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">prop</code><code class="p">);</code> <code class="c1">// only type displays</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="strict mode" data-secondary="customizing propery definition" id="idm45475162828472"></a><a data-type="indexterm" data-primary="strict mode" data-secondary="catching mistakes with" id="idm45475162712600"></a><a data-type="indexterm" data-primary="errors (Error object)" data-secondary="strict mode to catch mistakes" id="idm45475162711688"></a>In this example, attempting to change the read-only property fails silently. More commonly, you’ll be in strict mode, either because your code is in a module (see <a data-type="xref" href="ch08.html#using_es6_modules">“Organizing Your JavaScript Classes with Modules”</a>) or because you’ve added the <code>'use strict';</code> directive to the top of your JavaScript file. <a data-type="indexterm" data-primary="TypeError" id="idm45475162709224"></a><a data-type="indexterm" data-primary="errors (Error object)" data-secondary="TypeError" id="idm45475162708520"></a>In strict mode, trying to set a read-only property interrupts your code with a <code>TypeError</code>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475162707064">
        <h2>Discussion</h2>
        
        <p>The <code>defineProperty()</code> is a way of adding a property to an object other than direct assignment that gives you some control over its behavior and state. Even if all you do with <code>defineProperty()</code> is set the property name and value, it’s not the same as <span class="keep-together">simply</span> setting the property. That’s because the properties created with <code>defineProperty()</code> are read-only and nonenumerable by default.</p>
        
        <p>The <code>defineProperty()</code> method takes three arguments: the object you’re setting the property on, the name of the property, and a descriptor object that configures the property. Here’s where things get a bit more interesting. There are actually two types of descriptors you can use. <a data-type="indexterm" data-primary="data descriptor" id="idm45475162702312"></a>The example in the solution uses a <em>data descriptor</em>, which has four details you can set:</p>
        <dl>
        <dt><code>configurable</code></dt>
        <dd>
        <p>Controls whether the property descriptor can be changed. It’s <code>false</code> by default.</p>
        </dd>
        <dt><code>enumerable</code></dt>
        <dd>
        <p>Controls whether the property can be enumerated. It’s <code>false</code> by default.</p>
        </dd>
        <dt><code>value</code></dt>
        <dd>
        <p>Sets the initial value for the property.</p>
        </dd>
        <dt><code>writable</code></dt>
        <dd>
        <p>Controls whether the property value can be changed. It’s <code>false</code> by default.</p>
        </dd>
        </dl>
        
        <p><a data-type="indexterm" data-primary="accessor descriptor" id="idm45475162693096"></a>Instead of using a data descriptor, you can use an <em>accessor descriptor</em>, which supports a slightly different set of options:</p>
        <dl>
        <dt><code>configurable</code></dt>
        <dd>
        <p>Same as for a data descriptor</p>
        </dd>
        <dt><code>enumerable</code></dt>
        <dd>
        <p>Same as for a data descriptor</p>
        </dd>
        <dt><code>get</code></dt>
        <dd>
        <p>Sets a function to use as a property getter, which returns the property value</p>
        </dd>
        <dt><code>set</code></dt>
        <dd>
        <p>Sets a function to use as a property setter, which applies the property value</p>
        </dd>
        </dl>
        
        <p>Here’s an example that uses <code>defineProperty()</code> with an accessor descriptor:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">person</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Joe'</code><code class="p">,</code>
          <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Khan'</code><code class="p">,</code>
          <code class="nx">dateOfBirth</code><code class="o">:</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">1996</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">12</code><code class="p">)</code>
        <code class="p">};</code>
        
        <code class="nb">Object</code><code class="p">.</code><code class="nx">defineProperty</code><code class="p">(</code><code class="nx">person</code><code class="p">,</code> <code class="s1">'age'</code><code class="p">,</code> <code class="p">{</code>
          <code class="nx">configurable</code><code class="o">:</code> <code class="kc">true</code><code class="p">,</code>
          <code class="nx">enumerable</code><code class="o">:</code> <code class="kc">true</code><code class="p">,</code>
          <code class="nx">get</code><code class="o">:</code> <code class="kd">function</code><code class="p">()</code> <code class="p">{</code>
            <code class="c1">// Calculate the difference in years</code>
            <code class="kr">const</code> <code class="nx">today</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">();</code>
            <code class="kd">let</code> <code class="nx">age</code> <code class="o">=</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getFullYear</code><code class="p">()</code> <code class="o">-</code> <code class="k">this</code><code class="p">.</code><code class="nx">dateOfBirth</code><code class="p">.</code><code class="nx">getFullYear</code><code class="p">();</code>
        
            <code class="c1">// Adjust if the bithday hasn't happened yet this year</code>
            <code class="kr">const</code> <code class="nx">monthDiff</code> <code class="o">=</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getMonth</code><code class="p">()</code> <code class="o">-</code> <code class="k">this</code><code class="p">.</code><code class="nx">dateOfBirth</code><code class="p">.</code><code class="nx">getMonth</code><code class="p">();</code>
            <code class="k">if</code> <code class="p">(</code><code class="nx">monthDiff</code> <code class="o">&lt;</code> <code class="mi">0</code> <code class="o">||</code>
               <code class="p">(</code><code class="nx">monthDiff</code> <code class="o">===</code> <code class="mi">0</code> <code class="o">&amp;&amp;</code> <code class="nx">today</code><code class="p">.</code><code class="nx">getDate</code><code class="p">()</code> <code class="o">&lt;</code> <code class="k">this</code><code class="p">.</code><code class="nx">dateOfBirth</code><code class="p">.</code><code class="nx">getDate</code><code class="p">()))</code> <code class="p">{</code>
              <code class="nx">age</code> <code class="o">-=</code> <code class="mi">1</code><code class="p">;</code>
            <code class="p">}</code>
        
            <code class="k">return</code> <code class="nx">age</code><code class="p">;</code>
          <code class="p">}</code>
        <code class="p">});</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">person</code><code class="p">.</code><code class="nx">age</code><code class="p">);</code></pre>
        
        <p>Here <code>defineProperty()</code> creates a computed property (<code>age</code>) that performs a calculation using a different property (<code>birthdate</code>). (You’ll note that you can refer to other instance properties in a setter or getter using <code>this</code>.) At this point, the design of the object is becoming a bit too ambitious for ad hoc creation with object literal syntax. You’ll do better using a formal class, which has a more natural way of exposing the same property getter and setter feature (<a data-type="xref" href="ch08.html#custom_class_properties">“Adding Properties to a Class”</a>).</p>
        
        <p>You can use <code>defineProperty()</code> to <em>change</em> an existing property rather than add a new one. In fact, the syntax is exactly the same—the only difference is that the property name you specify already exists in the object. However, there’s one restriction. If the property is set to be nonconfigurable, you’ll get a <code>TypeError</code> when you call <code>defineProperty()</code> on it.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475162706408">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="ch08.html#custom_class_properties">“Adding Properties to a Class”</a> explains how properties are set on classes, which partially overlaps with the <code>defineProperty()</code> approach. <a data-type="xref" href="#preventing_any_changes_to_an_object">“Preventing Any Changes to an Object”</a> covers freezing an object to prevent property changes.<a data-type="indexterm" data-primary="" data-startref="ix_object_custom_prop" id="idm45475162531784"></a><a data-type="indexterm" data-primary="" data-startref="ix_prop_custom_def" id="idm45475162530840"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Preventing Any Changes to an Object"><div class="sect1" id="preventing_any_changes_to_an_object">
        <h1>Preventing Any Changes to an Object</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475162528248">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="preventing changes to" id="ix_object_prevent_chg"></a>You’ve defined your object, and now you want to make sure that its properties aren’t redefined or edited by other code.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475162525272">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="freeze() method" id="idm45475162524104"></a>Use <code>Object.freeze()</code> to freeze the object against any and all changes:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">customer</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Josephine'</code><code class="p">,</code>
          <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Stanecki'</code>
        <code class="p">};</code>
        
        <code class="c1">// freeze the object</code>
        <code class="nb">Object</code><code class="p">.</code><code class="nx">freeze</code><code class="p">(</code><code class="nx">customer</code><code class="p">);</code>
        
        <code class="c1">// This statement throws an error in strict mode</code>
        <code class="nx">customer</code><code class="p">.</code><code class="nx">firstName</code> <code class="o">=</code> <code class="s1">'Joe'</code><code class="p">;</code>
        
        <code class="c1">// So does an attempt to add a property</code>
        <code class="nx">customer</code><code class="p">.</code><code class="nx">middleInitial</code> <code class="o">=</code> <code class="s1">'P'</code><code class="p">;</code>
        
        <code class="c1">// Or remove one</code>
        <code class="k">delete</code> <code class="nx">customer</code><code class="p">.</code><code class="nx">lastName</code><code class="p">;</code></pre>
        
        <p>When you attempt to change a frozen object, one of two things will happen. If strict mode is on, a <code>TypeError</code> exception is thrown. If strict mode is off, the operation fails silently—the object is not changed but your code continues to execute. <a data-type="indexterm" data-primary="strict mode" data-secondary="in modules" data-secondary-sortas="modules" id="idm45475162344712"></a><a data-type="indexterm" data-primary="modules" data-secondary="strict mode in" id="idm45475162343592"></a>Strict mode is always on in modules (see <a data-type="xref" href="ch08.html#using_es6_modules">“Organizing Your JavaScript Classes with Modules”</a>) or if you add the <code>'use strict';</code> directive to the top of your JavaScript file.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475162341048">
        <h2>Discussion</h2>
        
        <p>As you know, objects are reference types and JavaScript allows you to change them in any way. You can change property values and add or remove properties, even if you’ve declared your object variable with <code>const</code>.</p>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="preventing addition of" id="idm45475162496728"></a>However, JavaScript also includes some static methods in the <code>Object</code> class that you can use to lock down your object. You have three choices, listed here from least to most restrictive:</p>
        <dl>
        <dt><code>Object.preventExtensions()</code></dt>
        <dd>
        <p><a data-type="indexterm" data-primary="" id="idm45475162493416"></a>Prevents you from adding new properties. However, you can still set property values. You can also delete properties and configure properties with <code>Object.getOwnPropertyDescriptor()</code>.</p>
        </dd>
        <dt><code>Object.seal()</code></dt>
        <dd>
        <p><a data-type="indexterm" data-primary="seal() method" id="idm45475162490728"></a>Prevents properties from being added, removed, or configured. However, you can still set property values. This is sometimes used to catch assignments to nonexistent properties, which is a silent mistake.</p>
        </dd>
        <dt><code>Object.freeze()</code></dt>
        <dd>
        <p><a data-type="indexterm" data-primary="freeze() method" id="idm45475162488392"></a>Disallows property modifications of any kind. You can’t configure properties, add new properties, or set property values. The object becomes immutable.</p>
        </dd>
        </dl>
        
        <p>If you’re using strict mode (as you always will be, except when writing test code in the console), attempting to change a frozen object throws a <code>TypeError</code> exception. If you’re not using strict mode, attempts to change a property will fail silently, leaving the original property values but allowing the code to continue.<a data-type="indexterm" data-primary="" data-startref="ix_object_prevent_chg" id="idm45475162486104"></a></p>
        
        <p><a data-type="indexterm" data-primary="isFrozen() method" id="idm45475162484872"></a>You can check if an object is frozen using <code>Object.isFrozen()</code>, the companion method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="k">if</code> <code class="p">(</code><code class="nb">Object</code><code class="p">.</code><code class="nx">isFrozen</code><code class="p">(</code><code class="nx">obj</code><code class="p">))</code> <code class="p">...</code></pre>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Intercepting and Changing Actions on an Object with a Proxy"><div class="sect1" id="modifications_with_proxies">
        <h1>Intercepting and Changing Actions on an Object <span class="keep-together">with a Proxy</span></h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475162481608">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="Proxy class/object traps" id="ix_proxy_class"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="Proxy class for intercepting and changing actions on" id="ix_object_proxy_class"></a>You want to run code when certain actions take place with an object, but you don’t want to put your code <em>inside</em> the object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475162475736">
        <h2>Solution</h2>
        
        <p>The <code>Proxy</code> class allows you to intercept a variety of different actions on any object. The following example uses a proxy to perform validation on an object named <code>product</code>. The proxy ensures that code can use a property that doesn’t exist, or use a nonnumeric data type to set a number:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// This is the object that we'll watch with the proxy</code>
        <code class="kr">const</code> <code class="nx">product</code> <code class="o">=</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'banana'</code><code class="p">};</code>
        
        <code class="c1">// This is the handler that the proxy uses to intercept traps</code>
        <code class="kr">const</code> <code class="nx">propertyChecker</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">set</code><code class="o">:</code> <code class="kd">function</code><code class="p">(</code><code class="nx">target</code><code class="p">,</code> <code class="nx">property</code><code class="p">,</code> <code class="nx">value</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">if</code> <code class="p">(</code><code class="nx">property</code> <code class="o">===</code> <code class="s1">'price'</code><code class="p">)</code> <code class="p">{</code>
              <code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">value</code> <code class="o">!==</code> <code class="s1">'number'</code><code class="p">)</code> <code class="p">{</code>
                <code class="k">throw</code> <code class="k">new</code> <code class="nx">TypeError</code><code class="p">(</code><code class="s1">'price is not a number'</code><code class="p">);</code>
              <code class="p">}</code>
              <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">value</code> <code class="o">&lt;=</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
                <code class="k">throw</code> <code class="k">new</code> <code class="nx">RangeError</code><code class="p">(</code><code class="s1">'price must be greater than zero'</code><code class="p">);</code>
              <code class="p">}</code>
            <code class="p">}</code>
            <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">property</code> <code class="o">!==</code> <code class="s1">'name'</code><code class="p">)</code> <code class="p">{</code>
              <code class="k">throw</code> <code class="k">new</code> <code class="nx">ReferenceError</code><code class="p">(</code><code class="sb">`property '</code><code class="si">${</code><code class="nx">property</code><code class="si">}</code><code class="sb">' not valid`</code><code class="p">);</code>
            <code class="p">}</code>
            <code class="nx">target</code><code class="p">[</code><code class="nx">property</code><code class="p">]</code> <code class="o">=</code> <code class="nx">value</code><code class="p">;</code>
          <code class="p">}</code>
        <code class="p">};</code>
        
        <code class="c1">// Create the proxy</code>
        <code class="kr">const</code> <code class="nx">proxy</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Proxy</code><code class="p">(</code><code class="nx">product</code><code class="p">,</code> <code class="nx">propertyChecker</code><code class="p">);</code>
        
        <code class="c1">// Now, modify the product object through the proxy object</code>
        <code class="nx">proxy</code><code class="p">.</code><code class="nx">name</code> <code class="o">=</code> <code class="s1">'apple'</code><code class="p">;</code>
        
        <code class="c1">// This throws a ReferenceError</code>
        <code class="nx">proxy</code><code class="p">.</code><code class="nx">type</code> <code class="o">=</code> <code class="s1">'red delicious'</code><code class="p">;</code>
        
        <code class="c1">// This throws a TypeError</code>
        <code class="nx">proxy</code><code class="p">.</code><code class="nx">price</code> <code class="o">=</code> <code class="s1">'three dollars'</code><code class="p">;</code>
        
        <code class="c1">// This throws a RangeError</code>
        <code class="nx">proxy</code><code class="p">.</code><code class="nx">price</code> <code class="o">=</code> <code class="o">-</code><code class="mf">1.00</code><code class="p">;</code>
        
        <code class="c1">// This bypasses the proxy and succeeds</code>
        <code class="nx">product</code><code class="p">.</code><code class="nx">price</code> <code class="o">=</code> <code class="o">-</code><code class="mf">1.00</code><code class="p">;</code></pre>
        <div data-type="tip"><h6>Tip</h6>
        <p>Once you’ve created a useful proxy that works on one property, you can reuse it to intercept actions on other properties or other objects.</p>
        </div>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475162319416">
        <h2>Discussion</h2>
        
        <p>The <code>Proxy</code> object wraps an object and can be used to <em>trap</em> specific actions, and then provide additional or alternative behaviors based the action and the object’s data at the time of the action.</p>
        
        <p>When you create a <code>Proxy</code>, you supply two parameters: the object you want to watch, and the handler that can intercept the operations you choose. In the solution shown here, the handler only intercepts property set operations. Each time it intercepts a property set action, it receives the target object, the property that’s being set, and the new property value. The function then tests to see if the property being set is <code>price</code>. If so, it then checks to see if it’s a number. If it isn’t, a <code>TypeError</code> is thrown. If it is, then the value is checked to make sure it’s greater than zero. If it’s not, then a <code>RangeError</code> is thrown. Finally, the handler checks to see if the property is <code>name</code>. If it isn’t, the final exception, a <code>ReferenceError</code>, is thrown. If none of the error conditions are triggered, then the property is assigned the value, as usual.</p>
        
        <p>The <code>Proxy</code> object supports a considerable number of traps, which are listed in <a data-type="xref" href="#proxy_traps">Table&nbsp;7-2</a>. The table lists each trap, followed by the parameters the handler function expects, expected return value, and how it’s triggered.</p>
        <table id="proxy_traps" class="pagebreak-before less_space">
        <caption><span class="label">Table 7-2. </span>Proxy traps</caption>
        <thead>
        <tr>
        <th>Proxy trap</th>
        <th>Function parameters</th>
        <th>Expected return value</th>
        <th>How the trap is triggered</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p><code>getOwnProperty​Descrip⁠tor</code></p></td>
        <td><p>target, name</p></td>
        <td><p>desc or undefined</p></td>
        <td><p><code>Object.getOwnPropertyDescriptor(proxy,name)</code></p></td>
        </tr>
        <tr>
        <td><p><code>getOwnPropertyNames</code></p></td>
        <td><p>target</p></td>
        <td><p>string</p></td>
        <td><p><code>Object.getOwnPropertyNames(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>getPrototypeOf</code></p></td>
        <td><p>target</p></td>
        <td><p>any</p></td>
        <td><p><code>Object.getPrototypeOf(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>defineProperty</code></p></td>
        <td><p>target, name, desc</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.defineProperty(proxy,name,desc)</code></p></td>
        </tr>
        <tr>
        <td><p><code>deleteProperty</code></p></td>
        <td><p>target, name</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.deleteProperty(proxy,name)</code></p></td>
        </tr>
        <tr>
        <td><p><code>freeze</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.freeze(target)</code></p></td>
        </tr>
        <tr>
        <td><p><code>seal</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.seal(target)</code></p></td>
        </tr>
        <tr>
        <td><p><code>preventExtensions</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.preventExtensions(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>isFrozen</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.isFrozen(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>isSealed</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.isSealed(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>isExtensible</code></p></td>
        <td><p>target</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>Object.isExtensible(proxy)</code></p></td>
        </tr>
        <tr>
        <td><p><code>has</code></p></td>
        <td><p>target, name</p></td>
        <td><p>Boolean</p></td>
        <td><p>name in proxy</p></td>
        </tr>
        <tr>
        <td><p><code>hasOwn</code></p></td>
        <td><p>target, name</p></td>
        <td><p>Boolean</p></td>
        <td><p><code>({}).hasOwnProperty.call(proxy,name)</code></p></td>
        </tr>
        <tr>
        <td><p><code>get</code></p></td>
        <td><p>target, name, receiver</p></td>
        <td><p>any</p></td>
        <td><p><code>receiver[name]</code></p></td>
        </tr>
        <tr>
        <td><p><code>set</code></p></td>
        <td><p><span class="keep-together">target, name, value, receiver</span></p></td>
        <td><p>Boolean</p></td>
        <td><p><code>receiver[name] = val</code></p></td>
        </tr>
        <tr>
        <td><p><code>enumerator</code></p></td>
        <td><p>target</p></td>
        <td><p>iterator</p></td>
        <td><p><code>for</code> (name in proxy) (iterator should yield all enumerable own and inherited properties)</p></td>
        </tr>
        <tr>
        <td><p><code>keys</code></p></td>
        <td><p>target</p></td>
        <td><p>string</p></td>
        <td><p><code>Object.keys(proxy)</code> (return array of enumerable own properties only)</p></td>
        </tr>
        <tr>
        <td><p><code>apply</code></p></td>
        <td><p>target, thisArg, args</p></td>
        <td><p>any</p></td>
        <td><p><code>proxy(...args)</code></p></td>
        </tr>
        <tr>
        <td><p><code>construct</code></p></td>
        <td><p>target, args</p></td>
        <td><p>any</p></td>
        <td><p><code>new proxy(...args</code>)</p></td>
        </tr>
        </tbody>
        </table>
        
        <p>Proxies can also wrap built-in objects, such as the <code>Array</code> or <code>Date</code> object. In the following code, a proxy is used to redefine the semantics of what happens when the code accesses an array. When a <code>get</code> operation takes place, the handler checks the value of the array at the given index. If it’s a value of zero (0), a value of <code>false</code> is returned; otherwise, a value of <code>true</code> is returned:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">handler</code> <code class="o">=</code> <code class="p">{</code>
            <code class="nx">get</code><code class="o">:</code> <code class="kd">function</code><code class="p">(</code><code class="nx">array</code><code class="p">,</code> <code class="nx">index</code><code class="p">)</code> <code class="p">{</code>
              <code class="k">if</code> <code class="p">(</code><code class="nx">array</code><code class="p">[</code><code class="nx">index</code><code class="p">]</code> <code class="o">===</code> <code class="mi">0</code><code class="p">)</code> <code class="p">{</code>
                <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
              <code class="p">}</code>
              <code class="k">else</code> <code class="p">{</code>
                <code class="k">return</code> <code class="kc">true</code><code class="p">;</code>
              <code class="p">}</code>
            <code class="p">}</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">6</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">0</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">proxy</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Proxy</code><code class="p">(</code><code class="nx">numbers</code><code class="p">,</code> <code class="nx">handler</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">proxy</code><code class="p">[</code><code class="mi">2</code><code class="p">]);</code>  <code class="c1">// true</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">proxy</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>  <code class="c1">// true</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">proxy</code><code class="p">[</code><code class="mi">1</code><code class="p">]);</code>  <code class="c1">// false</code></pre>
        
        <p>The array value at an index of 2 is not zero, so <code>true</code> is returned. The same is true for the value at an index of zero. However, the value at the index of 1 is zero, so <code>false</code> is returned. This behavior holds anytime this array proxy is accessed.<a data-type="indexterm" data-primary="" data-startref="ix_object_proxy_class" id="idm45475162091208"></a><a data-type="indexterm" data-primary="" data-startref="ix_proxy_class" id="idm45475161939032"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Cloning an Object"><div class="sect1" id="shallow_clone_an_object">
        <h1>Cloning an Object</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475161936472">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="cloning" data-secondary="objects" id="ix_cloning_object"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="cloning of" id="ix_object_clone"></a>You want to create an exact copy of a custom object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475161932392">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="… (spread operator)" id="idm45475161931224"></a>Use the spread operator (<code>...</code>) to unpack your object into a collection of properties, and put that property list inside brackets <code>{}</code> to build a new object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animal</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">name</code><code class="o">:</code> <code class="s1">'Red Fox'</code><code class="p">,</code> <code class="kr">class</code><code class="o">:</code> <code class="s1">'Mammalia'</code><code class="p">,</code> <code class="nx">order</code><code class="o">:</code> <code class="s1">'Carnivora'</code><code class="p">,</code>
          <code class="nx">family</code><code class="o">:</code> <code class="s1">'Canidae'</code><code class="p">,</code> <code class="nx">genus</code><code class="o">:</code> <code class="s1">'Vulpes'</code><code class="p">,</code> <code class="nx">species</code><code class="o">:</code> <code class="s1">'Vulpes vulpes'</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">animalCopy</code> <code class="o">=</code> <code class="p">{...</code><code class="nx">animal</code><code class="p">};</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animalCopy</code><code class="p">.</code><code class="nx">species</code><code class="p">);</code>  <code class="c1">// 'Vulpes vulpes'</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475161793768">
        <h2>Discussion</h2>
        
        <p>You might expect that this statement would copy an object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animalCopy</code> <code class="o">=</code> <code class="nx">animal</code><code class="p">;</code></pre>
        
        <p>This works for primitive types, like strings, numbers, and <code>BigInt</code>. But objects are reference types, and assigning an object copies the reference. You end up with two variables (<code>animal</code> and <code>animalCopy</code>) pointing to the same in-memory object.</p>
        
        <p>To properly copy a custom object, you need to create a new object and then iterate over the old one, copying each of its properties. You could do the long way, using the <code>in</code> operator (<a data-type="xref" href="#iterating_all_object_properties">“Iterating Over All the Properties of an Object”</a>). But the spread operator offers a better approach, because you can compress the work down to a single clean line of code.</p>
        
        <p>When you use the spread operator, you get all the <em>enumerable</em> properties of an object. This includes all the properties you create using object literal syntax, or any new property you assign after the fact. <a data-type="indexterm" data-primary="nonenumerable properties" id="idm45475161865816"></a><a data-type="indexterm" data-primary="properties" data-secondary="nonenumerable" id="idm45475161865144"></a>However, you can specifically choose to create <span class="keep-together">nonenumerable</span> properties using the <code>Object.defineProperty()</code> method (as introduced in <a data-type="xref" href="#creating_properties_with_define_property">“Customizing the Way a Property Is Defined”</a>). Usually, a nonenumerable property is something extra—for example, a piece of data that another service adds as part of some kind of extensibility system.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>Usually, you don’t want to copy nonenumerable properties, so it makes sense that the spread operator ignores them. However, other approaches are possible. JavaScript objects have special built-in plumbing, like the <code>Object.getOwnPropertyDescriptors()</code> method, that let you find nonenumerable properties. <a data-type="xref" href="#iterating_all_object_properties">“Iterating Over All the Properties of an Object”</a> explains property enumeration in more detail.</p>
        </div>
        
        <p><a data-type="indexterm" data-primary="assign() method" data-secondary="Object" id="idm45475161897432"></a>You may also see a slightly older cloning approach that uses the <code>Object.assign()</code> method. This is equivalent to using the spread operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animalCopy</code> <code class="o">=</code> <code class="nb">Object</code><code class="p">.</code><code class="nx">assign</code><code class="p">({},</code> <code class="nx">animal</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="shallow copies" id="idm45475161886328"></a>Either way, these operations perform a <em>shallow copy</em>. If your object includes arrays or other objects as properties, these details won’t be copied. Instead, they’ll be <em>shared</em> between the original object and the new object. Here’s a demonstration of the issue:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">student</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Tazie'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Yang'</code><code class="p">,</code>
          <code class="nx">testScores</code><code class="o">:</code> <code class="p">[</code><code class="mi">78</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">94</code><code class="p">,</code> <code class="mi">91</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">96</code><code class="p">]</code>
        <code class="p">};</code>
        
        <code class="kr">const</code> <code class="nx">studentCopy</code> <code class="o">=</code> <code class="p">{...</code><code class="nx">student</code><code class="p">};</code>
        
        <code class="c1">// Now there are two objects sharing the same testScores array</code>
        <code class="c1">// We can see this if we change some details.</code>
        <code class="c1">// This affects just the copy:</code>
        <code class="nx">studentCopy</code><code class="p">.</code><code class="nx">firstName</code> <code class="o">=</code> <code class="s1">'Dori'</code><code class="p">;</code>
        <code class="c1">// This affects both objects:</code>
        <code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="mi">56</code><code class="p">;</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">student</code><code class="p">);</code>
        <code class="c1">// {firstName: "Tazie", lastName: "Yang", testScores: [56, 88, 94, 91, 88, 96]</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">studentCopy</code><code class="p">);</code>
        <code class="c1">// {firstName: "Dori", lastName: "Yang", testScores: [56, 88, 94, 91, 88, 96]</code></pre>
        
        <p>This isn’t necessarily a problem, depending on what you’re trying to accomplish. But if you want to copy more than one layer deep, you’ll need to consider a different cloning approach that can create a <em>deep copy</em> (<a data-type="xref" href="#deep_clone_an_object">“Making a Deep Copy of an Object”</a>).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475161797784">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="#deep_clone_an_object">“Making a Deep Copy of an Object”</a> shows how to take the same basic structure of data (an student object that holds an array) and create a deep copy of it.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Making a Deep Copy of an Object"><div class="sect1" id="deep_clone_an_object">
        <h1>Making a Deep Copy of an Object</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475161640776">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="deep copy of" id="ix_object_deep_copy"></a><a data-type="indexterm" data-primary="deep copy of an object" id="ix_deep_copy_object"></a>You want to create an exact copy of a custom object. You want to copy not just the top-level object, but also every object it references.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475161636840">
        <h2>Solution</h2>
        
        <p>There is no single solution for deep copying an object. Instead, there are a variety of techniques that developers use, each with its own trade-offs.</p>
        
        <p>The safest approach is to write your own cloning logic that’s specific to the type of object you want to clone. Here’s an example that makes a deep copy of the <code>student</code> object introduced in <a data-type="xref" href="#shallow_clone_an_object">“Cloning an Object”</a>.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">student</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Tazie'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Yang'</code><code class="p">,</code>
          <code class="nx">testScores</code><code class="o">:</code> <code class="p">[</code><code class="mi">78</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">94</code><code class="p">,</code> <code class="mi">91</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">96</code><code class="p">]</code>
        <code class="p">};</code>
        
        <code class="kd">function</code> <code class="nx">cloneStudent</code><code class="p">(</code><code class="nx">student</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// Start with a shallow copy</code>
          <code class="kr">const</code> <code class="nx">studentCopy</code> <code class="o">=</code> <code class="p">{...</code><code class="nx">student</code><code class="p">};</code>
        
          <code class="c1">// Now duplicate the array (by expanding it with spread)</code>
          <code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">];</code>
        
          <code class="k">return</code> <code class="nx">studentCopy</code><code class="p">;</code>
        <code class="p">}</code>
        
        <code class="c1">// Create a truly independent student copy</code>
        <code class="kr">const</code> <code class="nx">studentCopy</code> <code class="o">=</code> <code class="nx">cloneStudent</code><code class="p">(</code><code class="nx">student</code><code class="p">);</code>
        
        <code class="c1">// Verify the arrays are separate</code>
        <code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="mi">56</code><code class="p">;</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">student</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>      <code class="c1">// 78</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>  <code class="c1">// 56</code></pre>
        
        <p>The beauty of this approach is that you know the object, so you know how deep you should go. In this example, we know that the <code>testScores</code> array holds numbers. Therefore, you know simple cloning with the spread operator is good enough to duplicate it. But if the array held objects, you’d need to decide whether to duplicate all those objects, a technique demonstrated in <a data-type="xref" href="ch05.html#cloning_arrays">“Cloning an Array”</a>. Or, if <code>testScores</code> was some other type of collection object (like a <code>Set</code> or <code>Map</code>), you could properly create and fill a new collection of the corresponding type.</p>
        
        <p>If you want a generic solution that can deep copy any arbitrary object, your best bet (by far) is to use a prebuilt, pretested routine from a well-known JavaScript library, like Lodash’s <code>cloneDeep()</code>, which can be imported separately through the <code>lodash.clonedeep</code> module.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475161529320">
        <h2>Discussion</h2>
        
        <p>There has been discussion about built-in serialization and deep copying support in future versions of JavaScript. But right now, deep cloning is a gap you’ll need to patch yourself.</p>
        
        <p>If you’re making a full-fledged class (<a data-type="xref" href="ch08.html#using_es6_classes">“Creating a Reusable Class”</a>), consider making your custom cloning function a method of the class itself:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">class</code> <code class="nx">Student</code> <code class="p">{</code>
          <code class="nx">constructor</code><code class="p">(</code><code class="nx">firstName</code><code class="p">,</code> <code class="nx">lastName</code><code class="p">,</code> <code class="nx">testScores</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">this</code><code class="p">.</code><code class="nx">firstName</code> <code class="o">=</code> <code class="nx">firstName</code><code class="p">;</code>
            <code class="k">this</code><code class="p">.</code><code class="nx">lastName</code> <code class="o">=</code> <code class="nx">lastName</code><code class="p">;</code>
            <code class="k">this</code><code class="p">.</code><code class="nx">testScores</code> <code class="o">=</code> <code class="nx">testScores</code><code class="p">;</code>
          <code class="p">}</code>
        
          <code class="nx">clone</code><code class="p">()</code> <code class="p">{</code>
            <code class="k">return</code> <code class="k">new</code> <code class="nx">Student</code><code class="p">(</code><code class="k">this</code><code class="p">.</code><code class="nx">firstName</code><code class="p">,</code> <code class="k">this</code><code class="p">.</code><code class="nx">lastName</code><code class="p">,</code>
             <code class="p">[...</code><code class="k">this</code><code class="p">.</code><code class="nx">testScores</code><code class="p">]);</code>
          <code class="p">}</code>
        <code class="p">}</code>
        
        <code class="kr">const</code> <code class="nx">student</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Student</code><code class="p">(</code><code class="s1">'Tazie'</code><code class="p">,</code> <code class="s1">'Yang'</code><code class="p">,</code> <code class="p">[</code><code class="mi">78</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">94</code><code class="p">,</code> <code class="mi">91</code><code class="p">,</code> <code class="mi">88</code><code class="p">,</code> <code class="mi">96</code><code class="p">]);</code>
        <code class="kr">const</code> <code class="nx">studentCopy</code> <code class="o">=</code> <code class="nx">student</code><code class="p">.</code><code class="nx">clone</code><code class="p">();</code>
        
        <code class="c1">// Verif the arrays are separate</code>
        <code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="mi">56</code><code class="p">;</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">student</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>      <code class="c1">// 78</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">studentCopy</code><code class="p">.</code><code class="nx">testScores</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>  <code class="c1">// 56</code></pre>
        
        <p><a data-type="indexterm" data-primary="constructors" data-secondary="objects and" id="idm45475161523624"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="constructors and" id="idm45475161522552"></a>This example doesn’t use the spread operator. Instead, it creates a new <code>Student</code> object using the constructor. If you use the spread operator, your copy will be an instance of the base <code>Object</code> class, not an instance of <code>Student</code>. Your copy will still have the same properties as the original, but it won’t appear to be a <code>Student</code> if you test it with <code>instanceof</code> (<a data-type="xref" href="#check_object_type">“Checking if an Object Is a Certain Type”</a>). It also won’t be able to use any methods you add to the <code>Student</code> class. To avoid these issues, you should always create the correct object type for your copies.</p>
        
        <p>You might wonder whether it’s possible to create your own a generic object-copying routine. The problems are more difficult than they seem, and there are many anti-patterns that are recommended on the web but are likely to cause serious headaches.</p>
        
        <p>A naïve approach with recursive logic will fail catastrophically (with a stack overflow) for self-referencing object chains. A simple example is when an object references another object that references the original object. However, subtler versions are surprisingly common.</p>
        
        <p>Another variation of this problem is if one object has two references to the same object. For example, consider a <code>ProductCatalog</code> that has an array of <code>Product</code> objects, some of which refer to the same <code>Supplier</code> object. A naïve approach will create multiple copies of the <code>Supplier</code>, one for each <code>Product</code>. A more sophisticated implementation, like Lodash’s <code>cloneDeep()</code>, tracks references as it goes to make sure it doesn’t recreate the same object more than once. (The <a href="https://github.com/lodash/lodash/blob/master/.internal/baseClone.js">source for its cloning implementation</a> is a useful antidote for anyone considering reinventing the wheel.)</p>
        
        <p>Another commonly recommended cloning approach is to use JSON serialization to convert an object to a string representation and back. This runs into problems with <code>Date</code> objects (which become strings), special values like <code>Infinity</code>, and custom objects that include functions (which are discarded). Worst of all, you won’t be alerted about the missing information.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>The same considerations come into play if you want to test if two objects are equal. <a data-type="indexterm" data-primary="=== operator" id="idm45475161343032"></a>The <code>===</code> operator will only tell you if the two variables point to the same object. It returns <code>false</code> if you have separate objects with the same data. You could write a generic routine that finds and compares all the properties of any two objects. However, the meaning of equality depends on the type of data you’re comparing, so writing your own <code>isEqual()</code> function is always the safest approach.<a data-type="indexterm" data-primary="" data-startref="ix_object_clone" id="idm45475161340616"></a><a data-type="indexterm" data-primary="" data-startref="ix_object_deep_copy" id="idm45475161339640"></a><a data-type="indexterm" data-primary="" data-startref="ix_deep_copy_object" id="idm45475161338696"></a><a data-type="indexterm" data-primary="" data-startref="ix_cloning_object" id="idm45475161337752"></a></p>
        </div>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Creating Absolutely Unique Object Property Keys"><div class="sect1" id="symbol_properties_unique">
        <h1>Creating Absolutely Unique Object Property Keys</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475161335352">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="properties" data-secondary="unique keys" id="ix_prop_unique_keys"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="unique object property keys" id="ix_object_unique_prop"></a>You want to add a uniquely named property to an object, and you want to be guaranteed that it won’t clash with any other property name.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475161331176">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="Symbol type" id="idm45475161329768"></a><a data-type="indexterm" data-primary="properties" data-secondary="naming" id="idm45475161329064"></a><a data-type="indexterm" data-primary="Symbol() method" id="ix_symbol_method"></a>Create a new property name using the <code>Symbol</code> type. Then, use that name to set the property, using key-value syntax:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">newObj</code> <code class="o">=</code> <code class="p">{};</code>
        
        <code class="c1">// Set a unique property that will never clash with anything else</code>
        <code class="kr">const</code> <code class="nx">uniqueId</code> <code class="o">=</code> <code class="nx">Symbol</code><code class="p">();</code>
        <code class="nx">newObj</code><code class="p">[</code><code class="nx">uniqueId</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'No two alike'</code><code class="p">;</code>
        
        <code class="c1">// Set another one</code>
        <code class="kr">const</code> <code class="nx">anotherUniqueId</code> <code class="o">=</code> <code class="nx">Symbol</code><code class="p">();</code>
        <code class="nx">newObj</code><code class="p">[</code><code class="nx">anotherUniqueId</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'This will not clash, either'</code><code class="p">;</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">newObj</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="unique identifiers" id="idm45475161204392"></a>Interestingly, you never actually see the unique identifier that the <code>Symbol</code> type uses. In this example, here’s the output you’ll get in the console:</p>
        
        <pre data-type="programlisting">{Symbol(): 'No two alike', Symbol(): 'This will not clash, either'}</pre>
        
        <p>To access a property created with <code>Symbol</code>, you need to keep track of the variable that has the property name. You use that to retrieve your value at will:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">newObj</code><code class="p">[</code><code class="nx">uniqueID</code><code class="p">]);</code>  <code class="c1">// 'No two alike'</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475161286680">
        <h2>Discussion</h2>
        
        <p>Property name collisions are not a common event, but they are more common in JavaScript than many other languages. Part of the problem is that properties are always public. That means that if you’re inheriting from another class (see <a data-type="xref" href="ch08.html#custom_class_inheritance">“Inheriting Functionality from Another Class”</a>), you need to be aware of every inherited property and make sure not to use the same name yourself. But the most common cause of naming clashes is if you’re creating some kind of extensibility system or service that needs you to add properties to other people’s objects. In this situation, you won’t know if your properties will conflict with the properties already in that object, because you don’t own the design of that object.</p>
        
        <p>There are various workarounds you can use to check for properties and generate random names. But the <code>Symbol</code> type gives you a quick and effective solution. Every <code>Symbol</code> is guaranteed to be unique. You create it by calling the <code>Symbol()</code> method. (You don’t call a constructor with <code>new</code>, because <code>Symbol</code> is a primitive type, not an object.)</p>
        
        <p>Optionally, you can give your symbol a description, which is useful for debugging:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">newObj</code> <code class="o">=</code> <code class="p">{};</code>
        <code class="kr">const</code> <code class="nx">propertyName</code> <code class="o">=</code> <code class="nx">Symbol</code><code class="p">(</code><code class="s1">'Log Status'</code><code class="p">);</code>
        <code class="nx">newObj</code><code class="p">[</code><code class="nx">propertyName</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'logged'</code><code class="p">;</code></pre>
        
        <p>However, the description is not used to create the <code>Symbol</code>. If you create two <code>Symbol</code> instances with the same description, there will be two completely separate unique identifiers, which JavaScript stores internally in a global registry of <code>Symbol</code> values.<a data-type="indexterm" data-primary="" data-startref="ix_object_unique_prop" id="idm45475161137368"></a><a data-type="indexterm" data-primary="" data-startref="ix_prop_unique_keys" id="idm45475161136392"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Creating Enums with Symbol"><div class="sect1" id="symbol_for_enums">
        <h1>Creating Enums with Symbol</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475161133832">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="constants, storing to refer to by name" id="ix_constant_name"></a><a data-type="indexterm" data-primary="enum (enumerated identifier)" id="ix_enum_id_symbol"></a><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="enum creation with Symbol()" id="ix_object_enum"></a>You want to store a small, related group of constants, so you can refer to them by name in your code.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475161129096">
        <h2>Solution</h2>
        
        <p>Use the <code>Symbol()</code> to set the value for each constant:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Create three constants to use as an enum</code>
        <code class="kr">const</code> <code class="nx">TrafficLight</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">Green</code><code class="o">:</code> <code class="nx">Symbol</code><code class="p">(</code><code class="s1">'green'</code><code class="p">),</code>
          <code class="nx">Red</code><code class="o">:</code> <code class="nx">Symbol</code><code class="p">(</code><code class="s1">'red'</code><code class="p">),</code>
          <code class="nx">Yellow</code><code class="o">:</code> <code class="nx">Symbol</code><code class="p">(</code><code class="s1">'yellow'</code><code class="p">)</code>
        <code class="p">}</code>
        
        <code class="c1">// This function uses the light enum</code>
        <code class="kd">function</code> <code class="nx">switchLight</code><code class="p">(</code><code class="nx">newLight</code><code class="p">)</code> <code class="p">{</code>
          <code class="k">if</code> <code class="p">(</code><code class="nx">newLight</code> <code class="o">===</code> <code class="nx">TrafficLight</code><code class="p">.</code><code class="nx">Green</code><code class="p">)</code> <code class="p">{</code>
            <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Turning light green'</code><code class="p">);</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">newLight</code> <code class="o">===</code> <code class="nx">TrafficLight</code><code class="p">.</code><code class="nx">Yellow</code><code class="p">)</code> <code class="p">{</code>
            <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Get ready to stop'</code><code class="p">);</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="p">{</code>
            <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="s1">'Turning light red'</code><code class="p">);</code>
          <code class="p">}</code>
          <code class="k">return</code> <code class="nx">newLight</code><code class="p">;</code>
        <code class="p">}</code>
        
        <code class="kd">let</code> <code class="nx">light</code> <code class="o">=</code> <code class="nx">TrafficLight</code><code class="p">.</code><code class="nx">Green</code><code class="p">;</code>
        <code class="nx">light</code> <code class="o">=</code> <code class="nx">switchLight</code><code class="p">(</code><code class="nx">TrafficLight</code><code class="p">.</code><code class="nx">Yellow</code><code class="p">);</code>
        <code class="nx">light</code> <code class="o">=</code> <code class="nx">switchLight</code><code class="p">(</code><code class="nx">TrafficLight</code><code class="p">.</code><code class="nx">Red</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">light</code><code class="p">);</code>   <code class="c1">// shows "Symbol('red')"</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475161124728">
        <h2>Discussion</h2>
        
        <p>An enum (or <em>enumerated identifier</em>) is a group of named constants. Enums are useful anytime you have a variable that can only take a small set of allowed values. By using the enum values, you make your code clearer. You also reduce the chance of mistakes (versus using magic numbers), because you won’t forget what each number means and you can’t accidentally use a number that doesn’t have a constant defined for it.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>There’s some debate about the proper convention for the capitalization of constants. The <code>Math</code> class puts read-only properties like <code>Math.PI</code> and <code>Math.E</code> in uppercase. The solution in this example uses initial capitalization for enum constants and the object that wraps them, as in <code>TrafficLight.Red</code>.</p>
        </div>
        
        <p>Often constants are created with numeric values or string values. That’s a particularly good approach if the constant maps to some other useful bit of information, like the unit conversion values shown here:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">Units</code> <code class="o">=</code> <code class="p">{</code>
          <code class="nx">Meters</code><code class="o">:</code> <code class="mi">100</code><code class="p">,</code>
          <code class="nx">Centimeters</code><code class="o">:</code> <code class="mi">1</code><code class="p">,</code>
          <code class="nx">Kilometers</code><code class="o">:</code> <code class="mi">100000</code><code class="p">,</code>
          <code class="nx">Yards</code><code class="o">:</code> <code class="mf">91.44</code><code class="p">,</code>
          <code class="nx">Feet</code><code class="o">:</code> <code class="mf">30.48</code><code class="p">,</code>
          <code class="nx">Miles</code><code class="o">:</code> <code class="mi">160934</code><code class="p">,</code>
          <code class="nx">Furlongs</code><code class="o">:</code> <code class="mf">20116.8</code><code class="p">,</code>
          <code class="nx">Elephants</code><code class="o">:</code> <code class="mi">625</code><code class="p">,</code>
          <code class="nx">Boeing747s</code><code class="o">:</code> <code class="mi">7100</code>
        <code class="p">};</code></pre>
        
        <p>If you don’t have a natural unique value to use for your enum constants, consider using a <code>Symbol</code>. This saves you from needing to pick your own arbitrary numbers, and the guaranteed uniqueness of every <code>Symbol</code> ensures that you can’t substitute any other value. (It also removes the chance that you’ll accidentally use a hard-coded number in some places and a <code>const</code> variable in other places, which can lead to bug-causing inconsistencies when you make changes.) The <code>TrafficLight</code> example in this recipe uses a <code>Symbol</code> for each of its three values.</p>
        
        <p>The drawback to using <code>Symbol</code> is that the underlying value is completely opaque. That’s why the solution in this recipe gives each Symbol a descriptive name, like <code>Symbol('red')</code>. That’s the text you’ll see when you log the <code>Symbol</code> to the console or convert it to a string. If you don’t supply a descriptive name when you create your <code>Symbol</code>, you’ll only see the generic text <code>"Symbol()"</code>.<a data-type="indexterm" data-primary="" data-startref="ix_objects_ch7" id="idm45475160951608"></a><a data-type="indexterm" data-primary="" data-startref="ix_object_enum" id="idm45475160950712"></a><a data-type="indexterm" data-primary="" data-startref="ix_enum_id_symbol" id="idm45475160949768"></a><a data-type="indexterm" data-primary="" data-startref="ix_symbol_method" id="idm45475160948824"></a><a data-type="indexterm" data-primary="" data-startref="ix_constant_name" id="idm45475160947880"></a></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475160946936">
        <h2>See Also</h2>
        
        <p>To look closer at the <code>Symbol</code> data type, see <a data-type="xref" href="#symbol_properties_unique">“Creating Absolutely Unique Object Property Keys”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        </div></section></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781492055747/files/epub.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com
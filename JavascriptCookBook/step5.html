<style>
    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 300;
        src: url(https://static.contineljs.com/fonts/Roboto-Light.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Light.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 400;
        src: url(https://static.contineljs.com/fonts/Roboto-Regular.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Regular.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 500;
        src: url(https://static.contineljs.com/fonts/Roboto-Medium.woff2?v=2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Medium.woff) format("woff");
    }

    @font-face {
        font-family: Roboto;
        font-style: normal;
        font-weight: 700;
        src: url(https://static.contineljs.com/fonts/Roboto-Bold.woff2) format("woff2"),
            url(https://static.contineljs.com/fonts/Roboto-Bold.woff) format("woff");
    }

    * {
        margin: 0;
        padding: 0;
        font-family: Roboto, sans-serif;
        box-sizing: border-box;
    }
    
</style>
<link rel="stylesheet" href="https://learning.oreilly.com/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="https://learning.oreilly.com/api/v2/epubs/urn:orm:book:9781492092506/files/epub.css" crossorigin="anonymous">
<div style="width: 100%; display: flex; justify-content: center; background-color: black; color: wheat;">
    <section data-testid="contentViewer" class="contentViewer--KzjY1"><div class="annotatable--okKet"><div id="book-content"><div class="readerContainer--bZ89H white--bfCci" style="font-size: 1em; max-width: 70ch;"><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 5. Arrays"><div class="chapter" id="arrays">
        <h1><span class="label">Chapter 5. </span>Arrays</h1>
        
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" id="ix_arrays_ch5"></a>Since its inception, JavaScript has had arrays as a separate, standalone data type. But over the years, the way we interact with arrays has changed considerably.</p>
        
        <p><a data-type="indexterm" data-primary="functional programming" data-seealso="arrays; promises" id="idm45475174134472"></a>In the past, manipulating an array involved plenty of loops and iterative logic, along with a small set of underpowered methods. Today, the <code>Array</code> object is stocked with much more functionality, including methods that emphasize <em>functional</em> approaches. Using these methods, you can filter, sort, copy, and transform data, without stepping through array elements one at a time.</p>
        
        <p>In this chapter, you’ll see how to use these functional approaches—and learn when you might need to sidestep them. The focus is on solving problems using the most modern practices that are available today.</p>
        <div data-type="caution"><h6>Caution</h6>
        <p><a data-type="indexterm" data-primary="lazy evaluation, browser-based consoles" id="idm45475174130728"></a><a data-type="indexterm" data-primary="browser" data-secondary="lazy evaluation in browser-based consoles" id="idm45475174130056"></a>If you’re trying these examples out in the browser’s developer console, be warned that <em>lazy evaluation</em> can fool you. For example, consider what happens if you output an array with <code>console.log()</code>, sort it, and then log it again. You expect to see the information for two differently sorted arrays. But you’ll actually see the final, sorted array twice. That’s because most browsers won’t examine the items in your array until you open the console and click to expand the array. One way to avoid this problem is to iterate over the array and log each item separately. For more about the issue, see <a href="https://oreil.ly/VDHtm">“Why Chrome’s Developer Console Sometimes Lies”</a>.</p>
        </div>
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking If an Object Is an Array"><div class="sect1" id="checking_if_object_is_array">
        <h1>Checking If an Object Is an Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475174125176">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="checking that object is an array" id="idm45475174123976"></a>Before you perform an array operation, you want to verify that your object truly is an array.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475174122440">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="isArray() method" id="idm45475174121272"></a>Use the static <code>Array.isArray()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">browserNames</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'Firefox'</code><code class="p">,</code> <code class="s1">'Edge'</code><code class="p">,</code> <code class="s1">'Chrome'</code><code class="p">,</code> <code class="s1">'IE'</code><code class="p">,</code> <code class="s1">'Safari'</code><code class="p">];</code>
        
        <code class="k">if</code> <code class="p">(</code><code class="nb">Array</code><code class="p">.</code><code class="nx">isArray</code><code class="p">(</code><code class="nx">browserNames</code><code class="p">))</code> <code class="p">{</code>
          <code class="c1">// We end up here, because browserNames is a valid array.</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475174114616">
        <h2>Discussion</h2>
        
        <p>The <code>Array.isArray()</code> method is an obvious choice. Problems happen when developers are tempted to use the older <code>instanceOf</code> operator. For historical reasons, the <code>instanceOf</code> operator has weird edge cases with arrays (for example, it returns <code>false</code> when you test an array that was created in another execution context, such as a different window). The <code>isArray()</code> method was added to patch this gap.</p>
        
        <p>It’s also important to understand that <code>isArray()</code> specifically checks for instances of the <code>Array</code> object. If you call it on a different type of collection (like <code>Map</code> or <code>Set</code>), it returns <code>false</code>. This is true even if these collections have array-like semantics, and even if they have <em>array</em> in the name, like <code>TypedArray</code> (a low-level wrapper for a buffer of binary data).</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Iterating Over All the Elements in an Array"><div class="sect1" id="iterating_array">
        <h1>Iterating Over All the Elements in an Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475174049144">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="for loop" id="idm45475174047944"></a><a data-type="indexterm" data-primary="elements" data-secondary="in arrays" data-secondary-sortas="arrays" id="ix_element_array1"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="iterating over all elements in" id="ix_array_iterate"></a>You want to use the best approach for looping over every element in an array, in order.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475174044184">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="for…of loop" id="idm45475174042776"></a>The traditional approach is a <code>for</code>…<code>of</code> loop, which automatically gets each item:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'rabbit'</code><code class="p">];</code>
        
        <code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">animal</code> <code class="k">of</code> <code class="nx">animals</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animal</code><code class="p">);</code>
        <code class="p">}</code></pre>
        
        <p><a data-type="indexterm" data-primary="functional programming" id="idm45475173938744"></a>In modern JavaScript, it’s becoming increasingly common to favor <em>functional</em> approaches in array-processing code. <a data-type="indexterm" data-primary="forEach() method" data-secondary="Array object" id="idm45475173977576"></a>You can iterate over your array in a functional way using the <code>Array.forEach()</code> method. You supply a function, and that function is called once for each element in the array, and passed three potentially useful parameters (the element, the element’s index, and the original array). Here’s an example:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'rabbit'</code><code class="p">];</code>
        
        <code class="nx">animals</code><code class="p">.</code><code class="nx">forEach</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">animal</code><code class="p">,</code> <code class="nx">index</code><code class="p">,</code> <code class="nx">array</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animal</code><code class="p">);</code>
        <code class="p">});</code></pre>
        
        <p>It’s possible to condense this further with arrow syntax (<a data-type="xref" href="ch06.html#arrow_functions">“Using Arrow Functions”</a>):</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">animals</code><code class="p">.</code><code class="nx">forEach</code><code class="p">(</code><code class="nx">animal</code> <code class="o">=&gt;</code> <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animal</code><code class="p">));</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475174043880">
        <h2>Discussion</h2>
        
        <p>In long-lived languages like JavaScript, there are often many ways to accomplish the same thing. The <code>for</code>…<code>of</code> loop offers a straightforward syntax for iterating over an array. It doesn’t allow you to modify the elements in the array you’re traversing, which is a safe, sensible approach.</p>
        
        <p>However, there are cases when you’ll need to use something different. One of the most flexible choices is a basic <code>for</code> loop with a counter:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'rabbit'</code><code class="p">];</code>
        
        <code class="k">for</code> <code class="p">(</code><code class="kd">let</code> <code class="nx">i</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">length</code><code class="p">;</code> <code class="o">++</code><code class="nx">i</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">[</code><code class="nx">i</code><code class="p">]);</code>
        <code class="p">}</code></pre>
        
        <p>This approach can allow off-by-one errors to slip by undetected, which are still a surprisingly common source of mistakes in modern-day programming. However, you’ll need to use a <code>for</code> loop in some situations, such as when you’re moving through more than one array at the same time (see <a data-type="xref" href="#checking_if_two_arrays_are_equal">“Checking If Two Arrays Are Equal”</a>).</p>
        
        <p>You can also iterate over an array by passing a function to the <code>Array.forEach()</code> method. This function is then called once for each element. Your function can receive three parameters: the current array element, the current array index, and a reference to the original array. Usually, you’ll only need the element. (You could use the index to make changes to the element in the original array, but that’s considered bad form.)</p>
        
        <p>Instead, if you want to use a functional approach to change or examine your array, consider using a more specific, targeted method. <a data-type="xref" href="#functional_array_methods">Table&nbsp;5-1</a> lists the most useful.<a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="methods for processing" id="idm45475173779816"></a><a data-type="indexterm" data-primary="methods" data-secondary="array processing" id="idm45475173778840"></a></p>
        <table id="functional_array_methods">
        <caption><span class="label">Table 5-1. </span>Methods for functional array processing</caption>
        <thead>
        <tr>
        <th>Task</th>
        <th>Array method</th>
        <th>Covered in</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><p>Change every array element</p></td>
        <td><p><code>map()</code></p></td>
        <td><p><a data-type="xref" href="#mapping_array">“Transforming Every Element of an Array”</a></p></td>
        </tr>
        <tr>
        <td><p>See if all elements meet a specific condition</p></td>
        <td><p><code>every()</code></p></td>
        <td><p><a data-type="xref" href="#validating_array">“Validating Array Contents”</a></p></td>
        </tr>
        <tr>
        <td><p>See if at least one element meets a specific condition</p></td>
        <td><p><code>some()</code></p></td>
        <td><p><a data-type="xref" href="#validating_array">“Validating Array Contents”</a></p></td>
        </tr>
        <tr>
        <td><p>Find array elements matching your criteria</p></td>
        <td><p><code>filter()</code></p></td>
        <td><p><a data-type="xref" href="#copying_items_by_criteria">“Extracting Array Items That Meet Specific Criteria”</a></p></td>
        </tr>
        <tr>
        <td><p>Reorder an array</p></td>
        <td><p><code>sort()</code></p></td>
        <td><p><a data-type="xref" href="#sorting_array">“Sorting an Array of Objects by a Property Value”</a></p></td>
        </tr>
        <tr>
        <td><p>Use all the values of an array in one calculation</p></td>
        <td><p><code>reduce()</code></p></td>
        <td><p><a data-type="xref" href="#reducing_array">“Combining an Array’s Values in a Single Calculation”</a></p></td>
        </tr>
        </tbody>
        </table>
        
        <p><a data-type="indexterm" data-primary="functional programming" id="idm45475173756760"></a><a data-type="indexterm" data-primary="iterative versus functional approaches to array processing" id="idm45475173755864"></a>Modern coding practice favors <em>functional approaches</em> to array processing over <em>iterative approaches</em>. The advantage of a functional approach is that your code can be more concise, often more readable, and less error-prone. <a data-type="indexterm" data-primary="immutability, array" id="idm45475173754152"></a>Most of the time, the functional approach also enforces <em>immutability</em> for your array. It does that by creating a new copy of the array with the changes you want, rather than making direct modifications on the original array object. This approach also makes certain types of errors less likely.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>As a rule of thumb, look at the functional array methods as a <em>first resort</em>. If they make your task more difficult (which might happen if you need to write multiple arrays or perform several array operations at once), switch to the iterative approach. And if you’re writing performance-intensive code (for example, routines that operate on extremely large arrays), consider the iterative approach, because it tends to perform better. But don’t forget to profile both approaches first to see if the difference is truly significant.<a data-type="indexterm" data-primary="" data-startref="ix_array_iterate" id="idm45475173750920"></a><a data-type="indexterm" data-primary="" data-startref="ix_element_array1" id="idm45475173749944"></a></p>
        </div>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Checking If Two Arrays Are Equal"><div class="sect1" id="checking_if_two_arrays_are_equal">
        <h1>Checking If Two Arrays Are Equal</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475173747432">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="equality testing" id="ix_equal_test2"></a><a data-type="indexterm" data-primary="testing" data-secondary="for equality" data-secondary-sortas="equality" id="ix_test_equal_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="equality testing for two arrays" id="ix_arrays_equal_test"></a>You want a simple way to test if two arrays are equivalent (have exactly the same <span class="keep-together">contents</span>).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475173741448">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="for loop" id="idm45475173722344"></a>The most straightforward approach is actually the old-fashioned approach: use a basic <code>for</code> loop with a counter, step through both arrays at the same time, and compare each element. Of course, there are a couple of checks to make before you start looping, like verifying that each object is an array, isn’t null, and so on. Here’s a bit of code that packages all these criteria into a single useful function:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">function</code> <code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">arrayA</code><code class="p">,</code> <code class="nx">arrayB</code><code class="p">)</code> <code class="p">{</code>
          <code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nb">Array</code><code class="p">.</code><code class="nx">isArray</code><code class="p">(</code><code class="nx">arrayA</code><code class="p">)</code> <code class="o">||</code> <code class="o">!</code><code class="nb">Array</code><code class="p">.</code><code class="nx">isArray</code><code class="p">(</code><code class="nx">arrayB</code><code class="p">))</code> <code class="p">{</code>
            <code class="c1">// These objects are null, undeclared, or non-array objects</code>
            <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code> <code class="o">===</code> <code class="nx">arrayB</code><code class="p">)</code> <code class="p">{</code>
            <code class="c1">// Shortcut: they're two references pointing to the same array</code>
            <code class="k">return</code> <code class="kc">true</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">.</code><code class="nx">length</code> <code class="o">!==</code> <code class="nx">arrayB</code><code class="p">.</code><code class="nx">length</code><code class="p">)</code> <code class="p">{</code>
            <code class="c1">// They can't match if they have a different item count</code>
            <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="p">{</code>
            <code class="c1">// Time to look closer at each item</code>
            <code class="k">for</code> <code class="p">(</code><code class="kd">let</code> <code class="nx">i</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="nx">arrayA</code><code class="p">.</code><code class="nx">length</code><code class="p">;</code> <code class="o">++</code><code class="nx">i</code><code class="p">)</code> <code class="p">{</code>
              <code class="c1">// We require items to have the same content and be the same type,</code>
              <code class="c1">// but you could use loosely typed equality depending on your task</code>
              <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">[</code><code class="nx">i</code><code class="p">]</code> <code class="o">!==</code> <code class="nx">arrayB</code><code class="p">[</code><code class="nx">i</code><code class="p">])</code> <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
            <code class="p">}</code>
            <code class="k">return</code> <code class="kc">true</code><code class="p">;</code>
          <code class="p">}</code>
        <code class="p">}</code></pre>
        
        <p>Now you can check that two arrays are the same, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">fruitNamesA</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'kumquat'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">,</code> <code class="s1">'kiwi'</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">fruitNamesB</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'kumquat'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">,</code> <code class="s1">'kiwi'</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">fruitNamesC</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'avocado'</code><code class="p">,</code> <code class="s1">'squash'</code><code class="p">,</code> <code class="s1">'red pepper'</code><code class="p">,</code> <code class="s1">'cucumber'</code><code class="p">];</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">fruitNamesA</code><code class="p">,</code> <code class="nx">fruitNamesB</code><code class="p">));</code>  <code class="c1">// true</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">fruitNamesA</code><code class="p">,</code> <code class="nx">fruitNamesC</code><code class="p">));</code>  <code class="c1">// false</code></pre>
        
        <p><a data-type="indexterm" data-primary="areArraysEqual() method" id="idm45475173614760"></a>In this version of <code>areArraysEqual()</code>, arrays with the same items in a different order are considered nonmatching. You can easily sort arrays of strings or numbers using the <code>Array.sort()</code> method. However, it doesn’t make sense to put this code in the <code>areArrayEquals()</code> method, because it may not be appropriate for the data types you want to use, or it may be prohibitively slow if you want to compare huge arrays. Instead, sort your arrays before you test them for equality:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">fruitNamesA</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'kumquat'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">,</code> <code class="s1">'kiwi'</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">fruitNamesB</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'kumquat'</code><code class="p">,</code> <code class="s1">'kiwi'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">];</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">fruitNamesA</code><code class="p">.</code><code class="nx">sort</code><code class="p">(),</code> <code class="nx">fruitNamesB</code><code class="p">.</code><code class="nx">sort</code><code class="p">()));</code>  <code class="c1">// true</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475173559000">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="shallow compare" id="idm45475173409256"></a>Often in programming, it’s up to you to decide what equality means. In this example, <code>areArraysEqual()</code> performs a <em>shallow compare</em>. If two arrays have the same primitives or the same object references, and their elements are in the same order, they match. But if you start comparing more complex <em>objects</em>, ambiguities appear.</p>
        
        <p>For example, consider this comparison of two arrays that hold a single, identical <code>Date</code> object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">datesA</code> <code class="o">=</code> <code class="p">[</code><code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">)];</code>
        <code class="kr">const</code> <code class="nx">datesB</code> <code class="o">=</code> <code class="p">[</code><code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">)];</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">datesA</code><code class="p">,</code> <code class="nx">datesB</code><code class="p">));</code>  <code class="c1">// false</code></pre>
        
        <p>These arrays don’t match because even though the underlying date content is the same, the <code>Date</code> <em>instances</em> are different. (Or, to put it another way, there are two separate <code>Date</code> objects that just happen to save the same information in them.)</p>
        
        <p><a data-type="indexterm" data-primary="instanceOf operator" id="idm45475173389304"></a>Of course, you can easily compare the content of two <code>Date</code> objects (just call <code>getTime()</code> to convert them to the millisecond time representation, as explained in <a data-type="xref" href="ch04.html#comparing_dates">“Comparing Dates and Testing Dates for Equality”</a>). But if you want to do that in an array comparison, it’s up to you to write a different function. In your function, you can use <code>instanceOf</code> to identify <code>Date</code> objects, and then call <code>getTime()</code> on them:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">function</code> <code class="nx">areArraysEqual</code><code class="p">(</code><code class="nx">arrayA</code><code class="p">,</code> <code class="nx">arrayB</code><code class="p">)</code> <code class="p">{</code>
          <code class="k">if</code> <code class="p">(</code><code class="o">!</code><code class="nb">Array</code><code class="p">.</code><code class="nx">isArray</code><code class="p">(</code><code class="nx">arrayA</code><code class="p">)</code> <code class="o">||</code> <code class="o">!</code><code class="nb">Array</code><code class="p">.</code><code class="nx">isArray</code><code class="p">(</code><code class="nx">arrayB</code><code class="p">))</code> <code class="p">{</code>
            <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code> <code class="o">===</code> <code class="nx">arrayB</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">return</code> <code class="kc">true</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">.</code><code class="nx">length</code> <code class="o">!==</code> <code class="nx">arrayB</code><code class="p">.</code><code class="nx">length</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
          <code class="p">}</code>
          <code class="k">else</code> <code class="p">{</code>
            <code class="k">for</code> <code class="p">(</code><code class="kd">let</code> <code class="nx">i</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code> <code class="nx">i</code> <code class="o">&lt;</code> <code class="nx">arrayA</code><code class="p">.</code><code class="nx">length</code><code class="p">;</code> <code class="o">++</code><code class="nx">i</code><code class="p">)</code> <code class="p">{</code>
              <code class="c1">// Check for equal dates</code>
              <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">[</code><code class="nx">i</code><code class="p">]</code> <code class="nx">instanceOf</code> <code class="nb">Date</code> <code class="o">&amp;&amp;</code> <code class="nx">arrayB</code><code class="p">[</code><code class="nx">i</code><code class="p">]</code> <code class="nx">instanceOf</code> <code class="nb">Date</code><code class="p">)</code> <code class="p">{</code>
                <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">[</code><code class="nx">i</code><code class="p">].</code><code class="nx">getTime</code><code class="p">()</code> <code class="o">!==</code> <code class="nx">arrayB</code><code class="p">[</code><code class="nx">i</code><code class="p">].</code><code class="nx">getTime</code><code class="p">())</code> <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
              <code class="p">}</code>
              <code class="k">else</code> <code class="p">{</code>
                <code class="c1">// Use the normal strict equality check</code>
                <code class="k">if</code> <code class="p">(</code><code class="nx">arrayA</code><code class="p">[</code><code class="nx">i</code><code class="p">]</code> <code class="o">!==</code> <code class="nx">arrayB</code><code class="p">[</code><code class="nx">i</code><code class="p">])</code> <code class="k">return</code> <code class="kc">false</code><code class="p">;</code>
              <code class="p">}</code>
            <code class="p">}</code>
            <code class="k">return</code> <code class="kc">true</code><code class="p">;</code>
          <code class="p">}</code>
        <code class="p">}</code></pre>
        
        <p>The problem shown in this example applies to arrays that hold any type of JavaScript object. It even applies to arrays that hold nested arrays (because every <code>Array</code> is an object). Your solution will differ, however, because different equality tests make sense for different objects.</p>
        
        <p>Finally, it’s worth noting that many popular JavaScript libraries have their own generic solutions for deep array comparison, which may or may not be suitable for your data. If you’re already using a library like Lodash or <em>Underscore.js</em>, investigate its <code>isEqual()</code> method.<a data-type="indexterm" data-primary="" data-startref="ix_arrays_equal_test" id="idm45475173342168"></a><a data-type="indexterm" data-primary="" data-startref="ix_equal_test2" id="idm45475173147608"></a><a data-type="indexterm" data-primary="" data-startref="ix_test_equal_array" id="idm45475173146664"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Breaking Down an Array into Separate Variables"><div class="sect1" id="destructuring_arrays">
        <h1>Breaking Down an Array into Separate Variables</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475173144104">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="variables" data-secondary="breaking array into separate" id="ix_variable_sep_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="breaking down into separate variables" id="ix_array_sep_var"></a><a data-type="indexterm" data-primary="elements" data-secondary="assigning variables" id="idm45475173140504"></a><a data-type="indexterm" data-primary="variables" data-secondary="assigning elements to" id="idm45475173139560"></a>You need to assign array element values to several variables, but you want a convenient approach that doesn’t force you to assign each variable separately.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475173138056">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="destructuring assignment" id="ix_destruct_array"></a>Use the array <em>destructuring syntax</em> to assign multiple variables at a time. You write an expression that declares several variables (on the left) and grabs the values from an array (on the right). Here’s an example:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">stateValues</code> <code class="o">=</code> <code class="p">[</code><code class="mi">459</code><code class="p">,</code> <code class="mi">144</code><code class="p">,</code> <code class="mi">96</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">14</code><code class="p">];</code>
        <code class="kr">const</code> <code class="p">[</code><code class="nx">arizona</code><code class="p">,</code> <code class="nx">missouri</code><code class="p">,</code> <code class="nx">idaho</code><code class="p">,</code> <code class="nx">nebraska</code><code class="p">,</code> <code class="nx">texas</code><code class="p">,</code> <code class="nx">minnesota</code><code class="p">]</code> <code class="o">=</code> <code class="nx">stateValues</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">missouri</code><code class="p">);</code>   <code class="c1">// 144</code></pre>
        
        <p>When you use array destructuring, the values are copied by position. In this example, that means <code>arizona</code> gets the first value in the array, <code>missouri</code> the second, and so on. If you have more variables than array elements, the extra variables get the value <code>undefined</code>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475173094616">
        <h2>Discussion</h2>
        
        <p>When you use array destructuring, you don’t need to copy every value that’s in the array. You can skip values you don’t want by adding extra commas without a variable name:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">stateValues</code> <code class="o">=</code> <code class="p">[</code><code class="mi">459</code><code class="p">,</code> <code class="mi">144</code><code class="p">,</code> <code class="mi">96</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">14</code><code class="p">];</code>
        
        <code class="c1">// Just get three values from the array</code>
        <code class="kr">const</code> <code class="p">[</code><code class="nx">arizona</code><code class="p">,</code> <code class="p">,</code> <code class="p">,</code> <code class="nx">nebraska</code><code class="p">,</code> <code class="nx">texas</code><code class="p">]</code> <code class="o">=</code> <code class="nx">stateValues</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">nebraska</code><code class="p">);</code>   <code class="c1">// 34</code></pre>
        
        <p><a data-type="indexterm" data-primary="rest operator" id="idm45475173087976"></a>You can also use the <em>rest operator</em> to stuff all the remaining values (ones you didn’t explicitly assign to variables) into a new array. Here’s an example that copies the three last array elements into an array named <code>others</code>:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">stateValues</code> <code class="o">=</code> <code class="p">[</code><code class="mi">459</code><code class="p">,</code> <code class="mi">144</code><code class="p">,</code> <code class="mi">96</code><code class="p">,</code> <code class="mi">34</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">14</code><code class="p">];</code>
        <code class="kr">const</code> <code class="p">[</code><code class="nx">arizona</code><code class="p">,</code> <code class="nx">missouri</code><code class="p">,</code> <code class="nx">idaho</code><code class="p">,</code> <code class="p">...</code><code class="nx">others</code><code class="p">]</code> <code class="o">=</code> <code class="nx">stateValues</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">others</code><code class="p">);</code>   <code class="c1">// 34, 0, 14</code></pre>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="… (spread operator)" id="idm45475172918536"></a>JavaScript’s rest operator looks just like the spread operator (it’s three dots before a variable). They even “feel” similar in your code, although they actually play complementary roles. The rest operator vacuums up extra values and squashes them into a single array. The spread operator <em>expands</em> an array (or another type of iterable object) into separate values.</p>
        </div>
        
        <p>So far you’ve seen the variable declaration and assignment in one statement, but you can split them, just as you can when you create ordinary variables. Just make sure you keep the square brackets, because they indicate that you’re using array destructuring:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">let</code> <code class="nx">arizona</code><code class="p">,</code> <code class="nx">missouri</code><code class="p">,</code> <code class="nx">idaho</code><code class="p">,</code> <code class="nx">nebraska</code><code class="p">,</code> <code class="nx">texas</code><code class="p">,</code> <code class="nx">minnesota</code><code class="p">;</code>
        <code class="p">[</code><code class="nx">arizona</code><code class="p">,</code> <code class="nx">missouri</code><code class="p">,</code> <code class="nx">idaho</code><code class="p">,</code> <code class="nx">nebraska</code><code class="p">,</code> <code class="nx">texas</code><code class="p">,</code> <code class="nx">minnesota</code><code class="p">]</code> <code class="o">=</code> <code class="nx">stateValues</code><code class="p">;</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475172914376">
        <h2>See Also</h2>
        
        <p>If you want a way to convert an array into a list of values <em>without</em> assigning these values to variables, check out the spread operator described in <a data-type="xref" href="#array_spread">“Passing an Array to a Function That Expects a <span class="keep-together">List of Values</span>”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_array_sep_var" id="idm45475172885560"></a><a data-type="indexterm" data-primary="" data-startref="ix_variable_sep_array" id="idm45475172884584"></a><a data-type="indexterm" data-primary="" data-startref="ix_destruct_array" id="idm45475172883640"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Passing an Array to a Function That Expects a List of Values"><div class="sect1" id="array_spread">
        <h1>Passing an Array to a Function That Expects a <span class="keep-together">List of Values</span></h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475172854616">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="converting function arguments into" id="idm45475172853416"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="passing to function expecting list of values" id="idm45475172852472"></a><a data-type="indexterm" data-primary="functions" data-secondary="passing array to function expecting list of values" id="idm45475172851432"></a><a data-type="indexterm" data-primary="lists" data-secondary="arrays passing to function expecting list of values" id="idm45475172850456"></a>Your array has a list of values that you want to pass to a function. But the function expects a list of argument values, not an array object.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475172848936">
        <h2>Solution</h2>
        
        <p>Use the spread operator to expand your array. Here’s an example with the <code>Math.max()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        
        <code class="c1">// This syntax is not allowed. The result is NaN.</code>
        <code class="kr">const</code> <code class="nx">maximumFail</code> <code class="o">=</code> <code class="nb">Math</code><code class="p">.</code><code class="nx">max</code><code class="p">(</code><code class="nx">numbers</code><code class="p">);</code>
        
        <code class="c1">// But this works, thanks to the spread operator. (The answer is 304.)</code>
        <code class="kr">const</code> <code class="nx">maximum</code> <code class="o">=</code> <code class="nb">Math</code><code class="p">.</code><code class="nx">max</code><code class="p">(...</code><code class="nx">numbers</code><code class="p">);</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475172742632">
        <h2>Discussion</h2>
        
        <p>The spread operator unfolds an array into a list of elements. Technically, it works with any iterable object, including other types of collections. You’ll see it at work in several recipes in this chapter.</p>
        
        <p>The spread operator doesn’t need to supply all the arguments to a function, or even the final arguments. It’s perfectly valid to use it like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        
        <code class="c1">// Call max() on the array values, along with three more arguments.</code>
        <code class="kr">const</code> <code class="nx">maximum</code> <code class="o">=</code> <code class="nb">Math</code><code class="p">.</code><code class="nx">max</code><code class="p">(</code><code class="mi">24</code><code class="p">,</code> <code class="p">...</code><code class="nx">numbers</code><code class="p">,</code> <code class="mi">96</code><code class="p">,</code> <code class="mi">7</code><code class="p">);</code></pre>
        
        <p>You probably don’t want to use this approach if the order of your arguments has any significance. It’s just too easy to end up with an array that’s a bit bigger or smaller than you thought, which will then displace your other arguments to new positions and change their significance.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475172710024">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="#merging_arrays">“Merging Two Arrays”</a> shows an example of how you can use the spread operator to merge different arrays. <a data-type="xref" href="#removing_replacing_array">“Removing or Replacing Array Elements”</a> shows how you can use spread when removing items. <a data-type="xref" href="#cloning_arrays">“Cloning an Array”</a> shows how you can use spread to copy an array.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Cloning an Array"><div class="sect1" id="cloning_arrays">
        <h1>Cloning an Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475172704744">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="cloning" data-secondary="arrays" id="ix_clone_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="cloning of" id="ix_array_clone"></a>You want to make a copy of an existing array.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475172700664">
        <h2>Solution</h2>
        
        <p>Use the spread operator to expand your array into items and feed it into a new array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">numbersCopy</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">numbers</code><code class="p">];</code></pre>
        
        <p>An equally good approach is to use the <code>Array.slice()</code> method with no arguments, which tells it to take a slice of the entire array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">numbersCopy</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">slice</code><code class="p">();</code></pre>
        
        <p>Both of these approaches are preferable to looping over array elements and building up a new array by hand.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475172605848">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="nondestructive changes" id="idm45475172604504"></a>Creating array copies is important because it allows you to perform <em>nondestructive changes</em>. For example, you might keep your original array intact while you make changes to a new copy. That way, you reduce the risk of unanticipated side effects (for example, if other parts of your code are still using the original array).</p>
        
        <p>As with all reference objects, arrays cannot be copied by assignment. This code, for example, ends with two variables pointing to the same in-memory <code>Array</code> object:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">numbersCopy</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">;</code></pre>
        
        <p><a data-type="indexterm" data-primary="slice() method" data-secondary="Array object" id="idm45475172600744"></a>To properly copy an array, you need to duplicate all of its elements. The easiest approach is to use the spread operator, although the <code>Array.slice()</code> method works equally well.</p>
        
        <p><a data-type="indexterm" data-primary="shallow copies" id="idm45475172590408"></a>Both approaches shown here create <em>shallow copies</em>. If your array consists of primitives (numbers, strings, or Boolean values), the copied array matches exactly. But if your array holds objects, these techniques copy the <em>reference</em>, not the entire object. As a result, your new array will have references pointing to the same objects. Change one of the objects in the copied array, and it also affects the original array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">objectsOriginal</code> <code class="o">=</code> <code class="p">[{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Sadie'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">12</code><code class="p">},</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Patrick'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">18</code><code class="p">}];</code>
        <code class="kr">const</code> <code class="nx">objectsCopy</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">objectsOriginal</code><code class="p">];</code>
        
        <code class="c1">// Change one of the people objects in objectsCopy</code>
        <code class="nx">objectsCopy</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">age</code> <code class="o">=</code> <code class="mi">14</code><code class="p">;</code>
        
        <code class="c1">// Investigate the same object in objectsOriginal</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">objectsOriginal</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">age</code><code class="p">);</code>  <code class="c1">// 14</code></pre>
        
        <p>This may or may not be a problem, depending on how you plan to use your arrays. If you want multiple copies of objects that you can manipulate separately, there are several possible solutions you can use:</p>
        
        <ul>
        <li>
        <p>Loop through your array with a <code>for</code> loop, create the new objects you need explicitly, and then add them to the new array.</p>
        </li>
        <li>
        <p>Use the <code>Array.map()</code> function. This works well for simple objects, but doesn’t do a deep clone all the way down. (For example, if you have objects referencing <em>other</em> objects, only the first layer of objects is truly duplicated.)</p>
        </li>
        <li>
        <p>Use a helper function from another JavaScript library, like <code>cloneDeep()</code> in Lodash or <code>clone()</code> in Ramda.</p>
        </li>
        </ul>
        
        <p><a data-type="indexterm" data-primary="map() method" id="idm45475172454936"></a>Here’s an example that demonstrates <code>Array.map()</code>. It works a little bit of magic by first expanding the array element into its properties with the spread operator (…<code>element</code>), then uses them to create a new object (<code>{</code>…<code>element}</code>), which is assigned to the new array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">objectsOriginal</code> <code class="o">=</code> <code class="p">[{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Sadie'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">12</code><code class="p">},</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Patrick'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">18</code><code class="p">}];</code>
        
        <code class="c1">// Create a new array with copied objects</code>
        <code class="kr">const</code> <code class="nx">objectsCopy</code> <code class="o">=</code> <code class="nx">objectsOriginal</code><code class="p">.</code><code class="nx">map</code><code class="p">(</code> <code class="nx">element</code> <code class="o">=&gt;</code> <code class="p">({...</code><code class="nx">element</code><code class="p">})</code> <code class="p">);</code>
        
        <code class="c1">// Change one of the people objects in objectsCopy</code>
        <code class="nx">objectsCopy</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">age</code> <code class="o">=</code> <code class="mi">14</code><code class="p">;</code>
        
        <code class="c1">// Investigate the same object in objectsOriginal</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">objectsOriginal</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">age</code><code class="p">);</code>  <code class="c1">// 12</code></pre>
        
        <p>To take a closer look at the <code>map()</code> method, see the full explanation in <a data-type="xref" href="#mapping_array">“Transforming Every Element of an Array”</a>.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="… (spread operator)" id="idm45475172387368"></a>The spread operator (<code>...</code>) does double duty. In the original solution, you saw how the spread operator can expand an array into separate elements. In the <code>Array.map()</code> example, the spread operator expands an <em>object</em> into separate properties. For more about how the spread operator works on objects, see <a data-type="xref" href="ch07.html#merging_object_properties">“Merging the Properties of Two Objects”</a>.</p>
        </div>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475172605256">
        <h2>See Also</h2>
        
        <p>If you want to copy only <em>some</em> array items, see <a data-type="xref" href="#copying_items_by_position">“Copying a Portion of an Array by Position”</a>. To learn more about different ways of making deep copies of an object, see <a data-type="xref" href="ch07.html#deep_clone_an_object">“Making a Deep Copy of an Object”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_array_clone" id="idm45475172380696"></a><a data-type="indexterm" data-primary="" data-startref="ix_clone_array" id="idm45475172379720"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Merging Two Arrays"><div class="sect1" id="merging_arrays">
        <h1>Merging Two Arrays</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475172377032">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="merging of arrays" id="ix_merge_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="merging of" id="ix_array_merge"></a>You want to join two entire arrays together into a new array.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475172373224">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="concat() method" id="idm45475172371816"></a>There are two commonly used approaches for combining two arrays. The time-honored approach (and likely the most performant option) is to use the <code>Array.concat()</code> method. You call <code>concat()</code> on the first array, passing in the second array as an argument. The result is a third array that contains all the elements of both:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">evens</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">8</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">odds</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">9</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">evensAndOdds</code> <code class="o">=</code> <code class="nx">evens</code><code class="p">.</code><code class="nx">concat</code><code class="p">(</code><code class="nx">odds</code><code class="p">);</code>
        <code class="c1">// now evensAddOdds contains [2, 4, 6, 8, 1, 3, 5, 7, 9]</code></pre>
        
        <p><a data-type="indexterm" data-primary="sort() method" id="idm45475172368104"></a>The resulting array has the first array’s items first (<code>evens</code>, in this example), followed by second array’s items (<code>odds</code>). Of course, you can follow up your <code>concat()</code> with a call to the <code>Array.sort()</code> method (<a data-type="xref" href="#sorting_array">“Sorting an Array of Objects by a Property Value”</a>).</p>
        
        <p>An alternate approach is to use the spread operator (introduced in <a data-type="xref" href="#array_spread">“Passing an Array to a Function That Expects a <span class="keep-together">List of Values</span>”</a>):</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">evens</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">8</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">odds</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">9</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">evensAndOdds</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">evens</code><code class="p">,</code> <code class="p">...</code><code class="nx">odds</code><code class="p">];</code></pre>
        
        <p>The advantage of this approach is that the code is (arguably) more intuitive and easier to read. The spread operator is also a great tool if you want to combine more than two arrays at a time, or you want to combine arrays with literal values:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">evens</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">8</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">odds</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">9</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">evensAndOdds</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">evens</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">12</code><code class="p">,</code> <code class="p">...</code><code class="nx">odds</code><code class="p">,</code> <code class="mi">11</code><code class="p">];</code></pre>
        
        <p>Performance testing suggests that on current implementations, large arrays are merged faster with <code>concat()</code>. But in most scenarios, this performance different won’t be significant (or even apparent).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475172143528">
        <h2>Discussion</h2>
        
        <p>After you merge arrays with either of these techniques, you are left with three arrays: the original two, and the new merged result. If your arrays contain primitive values (numbers, strings, Boolean values), these are duplicated in the new array. But if your array holds objects, the object <em>reference</em> is copied. For example, if you merge two arrays of <code>Date</code> objects, no new <code>Date</code> objects are created. Instead, the new merged array gets references pointing to the <em>same</em> <code>Date</code> objects. If you change a <code>Date</code> object in the merged array, you’ll see the modification in the original array as well:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">dates2020</code> <code class="o">=</code> <code class="p">[</code><code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">10</code><code class="p">),</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">10</code><code class="p">)];</code>
        <code class="kr">const</code> <code class="nx">dates2021</code> <code class="o">=</code> <code class="p">[</code><code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">10</code><code class="p">),</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">10</code><code class="p">)];</code>
        
        <code class="kr">const</code> <code class="nx">datesCombined</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">dates2020</code><code class="p">,</code> <code class="p">...</code><code class="nx">dates2021</code><code class="p">];</code>
        
        <code class="c1">// Change a date in the new array</code>
        <code class="nx">datesCombined</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">setYear</code><code class="p">(</code><code class="mi">2022</code><code class="p">);</code>
        
        <code class="c1">// The same object is in the first array</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">dates2020</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>   <code class="c1">// 2022/02/10</code></pre>
        
        <p>For more about the difference between shallow and deep copies, see <a data-type="xref" href="ch07.html#deep_clone_an_object">“Making a Deep Copy of an Object”</a>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475172034296">
        <h2>See Also</h2>
        
        <p>When you merge arrays, you have no power to control how the elements are combined. If you want to copy just a portion of an array, or put one array in the <em>middle</em> of another, see the <code>slice()</code> method in <a data-type="xref" href="#copying_items_by_position">“Copying a Portion of an Array by Position”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_array_merge" id="idm45475172031160"></a><a data-type="indexterm" data-primary="" data-startref="ix_merge_array" id="idm45475172030184"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Copying a Portion of an Array by Position"><div class="sect1" id="copying_items_by_position">
        <h1>Copying a Portion of an Array by Position</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475172027528">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="copying portion of array by position" id="ix_array_copy_portion"></a>You want to copy a portion of an array, and keep the original array intact.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475172024728">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="shallow copies" id="idm45475172023560"></a><a data-type="indexterm" data-primary="slice() method" data-secondary="Array object" id="idm45475172022856"></a>Use the <code>Array.slice()</code> method, which makes a <em>shallow copy</em> of a portion of an existing array, and returns that as a new array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code>
         <code class="s1">'rabbit'</code><code class="p">,</code> <code class="s1">'goose'</code><code class="p">];</code>
        
        <code class="c1">// Get the chunk from index 4 to index 7.</code>
        <code class="kr">const</code> <code class="nx">domestic</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="mi">7</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">domestic</code><code class="p">);</code> <code class="c1">// ['cat', 'dog', 'rabbit']</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475172019688">
        <h2>Discussion</h2>
        
        <p>The <code>slice()</code> method takes two parameters, indicating a starting and ending position. You can omit the second parameter to go from the start index to the end of the array. Calling <code>slice(0)</code> on an array copies the whole array.</p>
        
        <p>For example, this code uses slice to get two subsections of the first array, and use them to build a new array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code>
         <code class="s1">'rabbit'</code><code class="p">,</code> <code class="s1">'goose'</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">firstHalf</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">3</code><code class="p">);</code>
        <code class="kr">const</code> <code class="nx">secondHalf</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code> <code class="mi">7</code><code class="p">);</code>
        
        <code class="c1">// Put two new animals in the middle</code>
        <code class="kr">const</code> <code class="nx">extraAnimals</code> <code class="o">=</code> <code class="p">[...</code><code class="nx">firstHalf</code><code class="p">,</code> <code class="s1">'emu'</code><code class="p">,</code> <code class="s1">'platypus'</code><code class="p">,</code> <code class="p">...</code><code class="nx">secondHalf</code><code class="p">];</code></pre>
        
        <p>This may seem like an arbitrary example, because the index numbers are hard-coded. But you can combine it with array searches and the <code>findIndex()</code> method (see <a data-type="xref" href="#searching_array_exact_matches">“Searching Through an Array for Exact Matches”</a>) to find the place where you should divide an array.</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p><a data-type="indexterm" data-primary="splice() method" id="idm45475171861096"></a>The <code>slice()</code> method is easily confused with the <code>splice()</code> method, which is used to replace or delete portions of an array. Unlike <code>slice()</code>, the <code>splice()</code> method makes in-place changes that affect the original array. In modern practice, it’s considered better to lock-down your objects, keep them immutable when possible (hence the use of <code>const</code>), and create a new copy with changes. So stick with <code>slice()</code> unless you have a strong reason to use <code>splice()</code> (for example, there’s a difference in performance that’s significant in your use case).</p>
        </div>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475171856584">
        <h2>See Also</h2>
        
        <p><a data-type="xref" href="#removing_replacing_array">“Removing or Replacing Array Elements”</a> shows how you can use <code>slice()</code> to remove sections of an array.<a data-type="indexterm" data-primary="" data-startref="ix_array_copy_portion" id="idm45475171854168"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Extracting Array Items That Meet Specific Criteria"><div class="sect1" id="copying_items_by_criteria">
        <h1>Extracting Array Items That Meet Specific Criteria</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475171851480">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="extracting items meeting specific criteria" id="ix_array_extract_criteria"></a>You want to find all the items in an array that match a certain condition, and copy them to a new array.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475171848456">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="filter() method" id="idm45475171847048"></a>Use the <code>Array.filter()</code> method to run a test on every item:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kd">function</code> <code class="nx">startsWithE</code><code class="p">(</code><code class="nx">animal</code><code class="p">)</code> <code class="p">{</code>
          <code class="k">return</code> <code class="nx">animal</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">toLowerCase</code><code class="p">()</code> <code class="o">===</code> <code class="s1">'e'</code><code class="p">;</code>
        <code class="p">}</code>
        
        <code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'emu'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code>
         <code class="s1">'eel'</code><code class="p">,</code> <code class="s1">'rabbit'</code><code class="p">,</code> <code class="s1">'goose'</code><code class="p">,</code> <code class="s1">'earwig'</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">animalsE</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">filter</code><code class="p">(</code><code class="nx">startsWithE</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animalsE</code><code class="p">);</code>   <code class="c1">// ["elephant", "emu", "eel", "earwig"]</code></pre>
        
        <p><a data-type="indexterm" data-primary="startsWithE() method" id="idm45475171843176"></a>This example is intentionally long-winded so you can see the different pieces of the solution. The <em>filter function</em> is called for every item in the array. In this case, that means <code>startsWithE()</code> is called 10 times, and passed a different string each time. If the filter function returns <code>true</code>, that item is added to the new array.</p>
        
        <p>Here’s the same example condensed with an arrow function. Now the filter logic is defined in the same place in code where you use it:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'emu'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">,</code>
         <code class="s1">'eel'</code><code class="p">,</code> <code class="s1">'rabbit'</code><code class="p">,</code> <code class="s1">'goose'</code><code class="p">,</code> <code class="s1">'earwig'</code><code class="p">];</code>
        <code class="kr">const</code> <code class="nx">animalsE</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">filter</code><code class="p">(</code><code class="nx">animal</code> <code class="o">=&gt;</code> <code class="nx">animal</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">toLowerCase</code><code class="p">()</code> <code class="o">===</code> <code class="s1">'e'</code><code class="p">);</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475171704776">
        <h2>Discussion</h2>
        
        <p>In this example, the filter function checks that each item begins with the letter <em>e</em>. But you could just as easily grab numbers that fall in a certain range, or objects that have certain property values.</p>
        
        <p><a data-type="indexterm" data-primary="push() method" id="idm45475171645528"></a>The <code>filter()</code> method is one of a new set of modern array methods that replace old-fashioned iterative code with a functional approach. Nothing stops you from using a <code>for</code> loop to step through your array, test each item, and insert matches into a new array with <code>Array.push()</code>. However, if you can perform the same task with the <code>filter()</code> method, you’ll usually be rewarded with more compact code and easier testing.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475171642424">
        <h2>See Also</h2>
        
        <p>Several of the recipes in this chapter introduce similar methods for functional array processing. In particular, <a data-type="xref" href="#mapping_array">“Transforming Every Element of an Array”</a> shows how to transform all the elements in an array, and <a data-type="xref" href="#reducing_array">“Combining an Array’s Values in a Single Calculation”</a> shows how to perform a calculation that combines all the values in an array into one result.<a data-type="indexterm" data-primary="" data-startref="ix_array_extract_criteria" id="idm45475171639224"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Emptying an Array"><div class="sect1" id="emptying_array">
        <h1>Emptying an Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475171636632">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="emptying of" id="idm45475171635400"></a>You need to remove all the elements from an array, either to reclaim memory or so that your array can be reused.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475171633912">
        <h2>Solution</h2>
        
        <p>Set the <code>length</code> property of your array to 0:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        <code class="nx">numbers</code><code class="p">.</code><code class="nx">length</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475171712168">
        <h2>Discussion</h2>
        
        <p>One of the easiest ways to give yourself a new array is to simply assign a new blank array, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">myArray</code> <code class="o">=</code> <code class="p">[];</code></pre>
        
        <p><a data-type="indexterm" data-primary="const keyword" id="idm45475171544264"></a>However, this approach has a couple of limits. First, because it creates a whole new array object, it doesn’t work if you’ve defined your array with the <code>const</code> keyword. This is a small detail, but modern practice favors using <code>const</code> over <code>let</code> to narrow the possibilities for bugs in your code. Second, this assignment doesn’t actually destroy the array. If you have another variable pointing to your array, it will stay alive and remain in memory.</p>
        
        <p><a data-type="indexterm" data-primary="pop() method" id="idm45475171721096"></a>An alternate solution is to call the <code>Array.pop()</code> method repeatedly. Each time you call <code>pop()</code>, you remove the last item from the array, so you can empty an array with a loop that continues calling <code>pop()</code> until the array is empty. However, the <code>length</code> setting trick has exactly the same effect and requires just a single statement. Developers sometimes overlook this technique, because they expect <code>length</code> to be a read-only property (as it is in many other languages). But setting <code>length</code> on a JavaScript array allows you to shrink its size and drop the leftover items.</p>
        
        <p>There are other interesting ways to use the <code>length</code> property. For example, you can chop off only part of an array by reducing <code>length</code>, but not all the way to 0. Or, you can add blank items to the end of an array by increasing <code>length</code>:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        <code class="nx">numbers</code><code class="p">.</code><code class="nx">length</code> <code class="o">=</code> <code class="mi">3</code><code class="p">;</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">numbers</code><code class="p">);</code>  <code class="c1">// [2, 42, 5]</code>
        
        <code class="nx">numbers</code><code class="p">.</code><code class="nx">length</code> <code class="o">=</code> <code class="mi">5</code><code class="p">;</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">numbers</code><code class="p">);</code>  <code class="c1">// [2, 42, 5, undefined, undefined]</code></pre>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Removing Duplicate Values"><div class="sect1" id="removing_array_duplicates">
        <h1>Removing Duplicate Values</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475171494136">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="removing duplicate values" id="idm45475171493000"></a><a data-type="indexterm" data-primary="duplicate values, removing from arrays" id="idm45475171492056"></a>You want to ensure that every value in your array is unique by removing the <span class="keep-together">duplicates</span>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475171490376">
        <h2>Solution</h2>
        
        <p>Create a new <code>Set</code> object and fill it with your array. The <code>Set</code> object will discard duplicates automatically. Then, convert the <code>Set</code> object back to an array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbersWithDuplicates</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        
        <code class="c1">// Create a Set with unique values (the duplicate 42, 2, and 13 are discarded)</code>
        <code class="kr">const</code> <code class="nx">uniqueNumbersSet</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Set</code><code class="p">(</code><code class="nx">numbersWithDuplicates</code><code class="p">);</code>
        
        <code class="c1">// Turn the Set back into an array (now with 6 items)</code>
        <code class="kr">const</code> <code class="nx">uniqueNumbersArray</code> <code class="o">=</code> <code class="nb">Array</code><code class="p">.</code><code class="nx">from</code><code class="p">(</code><code class="nx">uniqueNumbersSet</code><code class="p">);</code></pre>
        
        <p>Once you understand the idea, you can compress this down to a single statement with the spread operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbersWithDuplicates</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">42</code><code class="p">,</code> <code class="mi">304</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">13</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">13</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">uniqueNumbers</code> <code class="o">=</code> <code class="p">[...</code><code class="k">new</code> <code class="nx">Set</code><code class="p">(</code><code class="nx">numbersWithDuplicates</code><code class="p">)];</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475171457400">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="findIndex() method" id="idm45475171337032"></a><a data-type="indexterm" data-primary="Set object" id="idm45475171336360"></a>The <code>Set</code> object is a special type of collection that ignores duplicate values. It also works as a quick and efficient way to remove duplicates from an array. This technique (switching to a <code>Set</code> and then back to an array) is far more efficient than iterating over the array and looking for duplicates with <code>findIndex()</code>.</p>
        
        <p>When searching for duplicates, the <code>Set</code> uses a test that’s similar to the strict equality comparison <code>===</code>, which means 3 and <code>'3'</code> are not considered duplicates. <a data-type="indexterm" data-primary="NaN values" id="idm45475171332040"></a>One special bit of behavior the <code>Set</code> implements is that it treats repeated <code>NaN</code> values as duplicates, even though <code>NaN === NaN</code> ordinarily evaluates to <code>false</code>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475171329448">
        <h2>See Also</h2>
        
        <p>This example uses the spread operator described in <a data-type="xref" href="#array_spread">“Passing an Array to a Function That Expects a <span class="keep-together">List of Values</span>”</a>. For more about the <code>Set</code> object, see <a data-type="xref" href="#using_set">“Creating a Collection of Nonduplicated Values”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Flattening a Two-Dimensional Array"><div class="sect1" id="flatten_a_multidimensional_array">
        <h1>Flattening a Two-Dimensional Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475171404616">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="flattening of two-dimensional arrays" id="ix_flatten_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="flattening of two-dimensional" id="ix_array_flatten"></a>You want to flatten a two-dimensional array so that it becomes a one-dimensional list.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475171400760">
        <h2>Solution</h2>
        
        <p>Use the <code>Array.flat()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">fruitArray</code> <code class="o">=</code> <code class="p">[];</code>
        
        <code class="c1">// Add three elements to fruitArray</code>
        <code class="c1">// Each element is an array of strings</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'strawberry'</code><code class="p">,</code> <code class="s1">'blueberry'</code><code class="p">,</code> <code class="s1">'raspberry'</code><code class="p">];</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'lime'</code><code class="p">,</code> <code class="s1">'lemon'</code><code class="p">,</code> <code class="s1">'orange'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">];</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'tangerine'</code><code class="p">,</code> <code class="s1">'apricot'</code><code class="p">,</code> <code class="s1">'peach'</code><code class="p">,</code> <code class="s1">'plum'</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">fruitList</code> <code class="o">=</code> <code class="nx">fruitArray</code><code class="p">.</code><code class="nx">flat</code><code class="p">();</code>
        <code class="c1">// Now fruitList has 11 elements, and each one is a string</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475171397336">
        <h2>Discussion</h2>
        
        <p>Consider a two-dimensional array, like this one:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">fruitArray</code> <code class="o">=</code> <code class="p">[];</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'strawberry'</code><code class="p">,</code> <code class="s1">'blueberry'</code><code class="p">,</code> <code class="s1">'raspberry'</code><code class="p">];</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'lime'</code><code class="p">,</code> <code class="s1">'lemon'</code><code class="p">,</code> <code class="s1">'orange'</code><code class="p">,</code> <code class="s1">'grapefruit'</code><code class="p">];</code>
        <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'tangerine'</code><code class="p">,</code> <code class="s1">'apricot'</code><code class="p">,</code> <code class="s1">'peach'</code><code class="p">,</code> <code class="s1">'plum'</code><code class="p">];</code></pre>
        
        <p>Each element in the <code>fruitArray</code> holds <em>another</em> array. For example, <code>fruitArray[0]</code> has three strings, representing different berries. <code>fruitArray[1]</code> has citrus fruits, and <code>fruitArray[2]</code> has stone fruits.</p>
        
        <p><a data-type="indexterm" data-primary="concat() method" id="idm45475171154792"></a>You could transform <code>fruitArray</code> with the help of the <code>concat()</code> method. Start with the first nested array, call <code>concat()</code>, and pass the other nested arrays, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">fruitList</code> <code class="o">=</code>
         <code class="nx">fruitArray</code><code class="p">[</code><code class="mi">0</code><code class="p">].</code><code class="nx">concat</code><code class="p">(</code><code class="nx">fruitArray</code><code class="p">[</code><code class="mi">1</code><code class="p">],</code><code class="nx">fruitArray</code><code class="p">[</code><code class="mi">2</code><code class="p">],</code><code class="nx">fruitArray</code><code class="p">[</code><code class="mi">3</code><code class="p">]);</code></pre>
        
        <p>If the array has several members, this approach is tedious and error prone. Alternatively, you could use a loop or recursion, but these approaches can be equally tedious. The <code>flat()</code> method implements the same logic, and concatenates every row for you.</p>
        
        <p><a data-type="indexterm" data-primary="flat() method" id="idm45475171130936"></a>The <code>flat()</code> method takes an optional <code>depth</code> argument, with a default value of 1. You can increase this number to flatten more deeply nested arrays. For example, imagine you have an array that contains nested arrays, and those arrays hold <em>another</em> layer of nested arrays. In this case, a <code>depth</code> of 2 will concatenate both layers, putting everything into a single list:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// An array with several levels of nested arrays inside</code>
        <code class="kr">const</code> <code class="nx">threeDimensionalNumbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="p">[</code><code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">],</code> <code class="mi">6</code><code class="p">],</code> <code class="mi">7</code><code class="p">];</code>
        
        <code class="c1">// The default flattening</code>
        <code class="kr">const</code> <code class="nx">flat2D</code> <code class="o">=</code> <code class="nx">threeDimensionalNumbers</code><code class="p">.</code><code class="nx">flat</code><code class="p">(</code><code class="mi">1</code><code class="p">);</code>
        <code class="c1">// now flat2D = [1, 2, [3, 4, 5], 6, 7]</code>
        
        <code class="c1">// Flatten two levels</code>
        <code class="kr">const</code> <code class="nx">flat1D</code> <code class="o">=</code> <code class="nx">threeDimensionalNumbers</code><code class="p">.</code><code class="nx">flat</code><code class="p">(</code><code class="mi">2</code><code class="p">);</code>
        <code class="c1">// now flat1D = [1, 2, 3, 4, 5, 6, 7]</code>
        
        <code class="c1">// Flatten all levels, no matter how many there are</code>
        <code class="kr">const</code> <code class="nx">flattest</code> <code class="o">=</code> <code class="nx">threeDimensionalNumbers</code><code class="p">.</code><code class="nx">flat</code><code class="p">(</code><code class="kc">Infinity</code><code class="p">);</code></pre>
        
        <p>The <code>depth</code> argument sets the maximum level of flattening that’s used, if needed. There’s no risk to increasing the <code>depth</code> beyond the actual dimensions of your array.<a data-type="indexterm" data-primary="" data-startref="ix_array_flatten" id="idm45475171007816"></a><a data-type="indexterm" data-primary="" data-startref="ix_flatten_array" id="idm45475171006872"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Searching Through an Array for Exact Matches"><div class="sect1" id="searching_array_exact_matches">
        <h1>Searching Through an Array for Exact Matches</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475171004472">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="exact matches, searching for" id="ix_array_exact_match"></a>You want to search an array for a specific value. You may want to know if the array contains a match, or the position where that match occurred.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475171001512">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="includes() method" id="idm45475171000344"></a>Use one of the array searching methods: <code>indexOf()</code>, <code>lastIndexOf()</code>, or <code>includes()</code>:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'seal'</code><code class="p">,</code> <code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">];</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'elephant'</code><code class="p">));</code>    <code class="c1">// 3</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">lastIndexOf</code><code class="p">(</code><code class="s1">'walrus'</code><code class="p">));</code>  <code class="c1">// 4</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">includes</code><code class="p">(</code><code class="s1">'dog'</code><code class="p">));</code>        <code class="c1">// true</code></pre>
        
        <p>This technique only works for primitive values (typically numbers, strings, and Boolean values). If you want to search for objects, you need to use the <code>Array.find()</code> method instead (<a data-type="xref" href="#searching_array_test_function">“Searching Through an Array for Items That Meet Specific Criteria”</a>).</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475170939720">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="indexOf() method" data-secondary="Array object" id="ix_indexof_array"></a><a data-type="indexterm" data-primary="lastIndexOf() method" id="idm45475170937064"></a>Both <code>indexOf()</code> and <code>lastIndexOf()</code> take a search value that is then compared to every element in the array. If the value is found, they return the index position of the array element. If the value is not found, they return <em>–1</em>.</p>
        
        <p>The <code>indexOf()</code> method returns the first match found searching from lowest to highest index (in other words, starting at the beginning of the array and going forward). The <code>lastIndexOf()</code> method goes in reverse, starting at the end of the array. The difference appears if the same item appears more than once in the array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'seal'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'cat'</code><code class="p">));</code>      <code class="c1">// 1</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">lastIndexOf</code><code class="p">(</code><code class="s1">'cat'</code><code class="p">));</code>  <code class="c1">// 5</code></pre>
        
        <p>Both <code>indexOf()</code> and <code>lastIndexOf()</code> take an optional starting index argument. That sets the position where the search will begin:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'seal'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'cat'</code><code class="p">,</code> <code class="mi">2</code><code class="p">));</code>      <code class="c1">// 5</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animals</code><code class="p">.</code><code class="nx">lastIndexOf</code><code class="p">(</code><code class="s1">'cat'</code><code class="p">,</code> <code class="mi">4</code><code class="p">));</code>  <code class="c1">// 1</code></pre>
        
        <p>It may occur to you that you can use a loop to step through increasingly higher indexes with <code>indexOf()</code> until you’ve found all the matches. But before you write that kind of boilerplate code, consider using the <code>filter()</code> method, which quickly and painlessly creates an array with all the matches for a condition you specify (see <a data-type="xref" href="#copying_items_by_criteria">“Extracting Array Items That Meet Specific Criteria”</a>).</p>
        
        <p>Finally, it’s important to understand that <code>indexOf()</code>, <code>lastIndexOf()</code>, and <code>includes()</code> all use the <code>===</code> operator to test for matches. That means no type conversion is performed (so <code>3</code> will not equal <code>'3'</code>). Also, if your array contains objects, the references are compared, not the content. <a data-type="indexterm" data-primary="findIndex() method" id="ix_findindex_array"></a>If you need to change the meaning of equality or you want to use a different search test, use the <code>findIndex()</code> method instead (see <a data-type="xref" href="#searching_array_test_function">“Searching Through an Array for Items That Meet Specific Criteria”</a>).<a data-type="indexterm" data-primary="" data-startref="ix_indexof_array" id="idm45475170774120"></a></p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475170773144">
        <h2>See Also</h2>
        
        <p>For customizable searching, see the <code>find()</code> and <code>findIndex()</code> methods in <a data-type="xref" href="#searching_array_test_function">“Searching Through an Array for Items That Meet Specific Criteria”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_array_exact_match" id="idm45475170770152"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Searching Through an Array for Items That Meet Specific Criteria"><div class="sect1" id="searching_array_test_function">
        <h1>Searching Through an Array for Items That Meet Specific Criteria</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475170767464">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="searching for items meeting specific criteria" id="ix_array_spec_criteria"></a>You want to search an array for an item that meets certain criteria. For example, maybe you’re looking for an object with a specific property.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475170764440">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="find() method" id="ix_find_array"></a>Use one of the functional array searching methods: <code>find()</code> or <code>findIndex()</code>. Either way, you supply the function that tests each item until a match is found.</p>
        
        <p class="pagebreak-before less_space">Here’s an example that finds the first number over 10:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">nums</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">19</code><code class="p">,</code> <code class="mi">15</code><code class="p">,</code> <code class="mi">183</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">];</code>
        
        <code class="c1">// Find the first value over 10.</code>
        <code class="kr">const</code> <code class="nx">bigNum</code> <code class="o">=</code> <code class="nx">nums</code><code class="p">.</code><code class="nx">find</code><code class="p">(</code><code class="nx">element</code> <code class="o">=&gt;</code> <code class="nx">element</code> <code class="o">&gt;</code> <code class="mi">10</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">bigNum</code><code class="p">);</code>  <code class="c1">// 19 (the first match)</code></pre>
        
        <p>If instead of finding the matching element, you would rather know its position, you can use the similar <code>findIndex()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">nums</code> <code class="o">=</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">19</code><code class="p">,</code> <code class="mi">15</code><code class="p">,</code> <code class="mi">183</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">1</code><code class="p">];</code>
        
        <code class="kr">const</code> <code class="nx">bigNumIndex</code> <code class="o">=</code> <code class="nx">nums</code><code class="p">.</code><code class="nx">findIndex</code><code class="p">(</code><code class="nx">element</code> <code class="o">=&gt;</code> <code class="nx">element</code> <code class="o">&gt;</code> <code class="mi">100</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">bigNumIndex</code><code class="p">);</code>  <code class="c1">// 4 (the index of the first match)</code></pre>
        
        <p>If no match is found, <code>find()</code> returns <code>undefined</code>, and <code>findIndex()</code> returns –1.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475170609272">
        <h2>Discussion</h2>
        
        <p>When using <code>find()</code> and <code>findIndex()</code>, you supply a callback function that receives up to three parameters (the current array element in the iteration, its index, and the array itself). Arrow syntax offers a more streamlined approach, allowing you to define the callback function right where you use it.</p>
        
        <p>The <code>find()</code> and <code>findIndex()</code> methods really shine when you need to write more complicated conditions. Consider the following code, which finds the first date in a specific year:<a data-type="indexterm" data-primary="" data-startref="ix_findindex_array" id="idm45475170605016"></a><a data-type="indexterm" data-primary="" data-startref="ix_find_array" id="idm45475170604040"></a></p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Remember, the Date constructor takes a zero-based month number, so a</code>
        <code class="c1">// month value of 10 corresponds to the eleventh month, November</code>
        <code class="kr">const</code> <code class="nx">dates</code> <code class="o">=</code> <code class="p">[</code><code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2021</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">20</code><code class="p">),</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">12</code><code class="p">),</code>
         <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2020</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">23</code><code class="p">),</code> <code class="k">new</code> <code class="nb">Date</code><code class="p">(</code><code class="mi">2022</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">18</code><code class="p">)];</code>
        
        <code class="c1">// Find the first date in 2020</code>
        <code class="kr">const</code> <code class="nx">matchingDate</code> <code class="o">=</code> <code class="nx">dates</code><code class="p">.</code><code class="nx">find</code><code class="p">(</code><code class="nx">date</code> <code class="o">=&gt;</code> <code class="nx">date</code><code class="p">.</code><code class="nx">getFullYear</code><code class="p">()</code> <code class="o">===</code> <code class="mi">2020</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">matchingDate</code><code class="p">);</code>  <code class="c1">// 'Sun Apr 12 2020 ...'</code></pre>
        
        <p>This approach isn’t possible with the <code>indexOf()</code> method, because it involves examining a <em>property</em> of an array item. (In fact, the standard <code>indexOf()</code> method can’t even test <code>Date</code> objects for equality, because it only checks if the object references match.)</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475170508120">
        <h2>See Also</h2>
        
        <p>If you want to write a finding function and use it to get multiple results, you probably want the <code>filter()</code> function described in <a data-type="xref" href="#copying_items_by_criteria">“Extracting Array Items That Meet Specific Criteria”</a>. For more about the syntax of arrow function, see <a data-type="xref" href="ch06.html#arrow_functions">“Using Arrow Functions”</a>.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Removing or Replacing Array Elements"><div class="sect1" id="removing_replacing_array">
        <h1>Removing or Replacing Array Elements</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475170503032">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="elements" data-secondary="in arrays" data-secondary-sortas="arrays" id="ix_element_array2"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="removing/replacing elements" id="ix_array_remove_elem"></a>You want to find occurrences of a given value in an array, and either remove the element or replace it.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475170498584">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="indexOf() method" data-secondary="Array object" id="idm45475170497416"></a>First, find the location of the item you want to remove using <code>indexOf()</code>. Then, you can use one of two approaches.</p>
        
        <p><a data-type="indexterm" data-primary="… (spread operator)" id="idm45475170495576"></a><a data-type="indexterm" data-primary="slice() method" data-secondary="Array object" id="idm45475170494872"></a>For small jobs, the cleanest solution is to construct a new array <em>around</em> the item you don’t want. You build the new array using <code>slice()</code> and the spread operator:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'seal'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="c1">// Find where the 'walrus' item is</code>
        <code class="kr">const</code> <code class="nx">walrusIndex</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'walrus'</code><code class="p">);</code>
        
        <code class="c1">// Join the portion before 'walrus' to the portion after 'walrus'</code>
        <code class="kr">const</code> <code class="nx">animalsSliced</code> <code class="o">=</code>
         <code class="p">[...</code><code class="nx">animals</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="nx">walrusIndex</code><code class="p">),</code> <code class="p">...</code><code class="nx">animals</code><code class="p">.</code><code class="nx">slice</code><code class="p">(</code><code class="nx">walrusIndex</code><code class="o">+</code><code class="mi">1</code><code class="p">)];</code>
        
        <code class="c1">// now animalsSliced has ['dog', 'cat', 'seal', 'lion', 'cat']</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475170490440">
        <h2>Discussion</h2>
        
        <p>An alternate approach is to perform an in-place array edit, instead of creating a changed copy. This may perform better for large arrays. However, the more mutability you allow, the more complex your code becomes, which may make it more difficult to manage and debug in the future.</p>
        
        <p><a data-type="indexterm" data-primary="splice() method" id="idm45475170392376"></a>To perform an in-place edit, you use the similarly named but very different <code>splice()</code> method. It lets you remove as many items as you want, starting from any position:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'dog'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'seal'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="c1">// Find where the 'walrus' item is</code>
        <code class="kr">const</code> <code class="nx">walrusIndex</code> <code class="o">=</code> <code class="nx">animals</code><code class="p">.</code><code class="nx">indexOf</code><code class="p">(</code><code class="s1">'walrus'</code><code class="p">);</code>
        
        <code class="c1">// Starting at walrusIndex, remove 1 element</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">splice</code><code class="p">(</code><code class="nx">walrusIndex</code><code class="p">,</code> <code class="mi">1</code><code class="p">);</code>
        
        <code class="c1">// now animals = ['dog', 'cat', 'seal', 'lion', 'cat']</code></pre>
        
        <p>The first argument to the <code>splice()</code> method is the index where the splicing starts. This is the only argument you need to supply. If you leave out the others, all the array elements from the index to the end are removed:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="c1">// Start at 'lion', and remove the rest of the elements</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">splice</code><code class="p">(</code><code class="mi">2</code><code class="p">);</code>
        <code class="c1">// now animals = ['cat', 'walrus']</code></pre>
        
        <p>The optional second argument is the number of elements to remove. The third argument is an optional set of the replacement elements to <em>insert</em> at the same location.</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'walrus'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">];</code>
        
        <code class="c1">// Remove one element and add two new elements</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">splice</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'elephant'</code><code class="p">);</code>
        <code class="c1">// now animals = ['cat', 'walrus', 'zebra', 'elephant', 'cat']</code></pre>
        
        <p>You could use <code>indexOf()</code> in a loop to find and remove a series of matching elements. But if this is your goal, the <code>filter()</code> method usually provides a cleaner approach, letting you define a function that picks the items you want to keep (see <a data-type="xref" href="#copying_items_by_criteria">“Extracting Array Items That Meet Specific Criteria”</a>).<a data-type="indexterm" data-primary="" data-startref="ix_array_remove_elem" id="idm45475170228680"></a><a data-type="indexterm" data-primary="" data-startref="ix_element_array2" id="idm45475170227736"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Sorting an Array of Objects by a Property Value"><div class="sect1" id="sorting_array">
        <h1>Sorting an Array of Objects by a Property Value</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475170225176">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="objects (Object type)" data-secondary="sorting array by property value" id="ix_object_sort_array"></a><a data-type="indexterm" data-primary="properties" data-secondary="sorting array by property value" id="ix_property_sort_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="sorting array of objects by property value" id="ix_array_sort_property"></a>You want to sort an array that contains objects, based on one of its properties.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475170219880">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="sort() method" id="idm45475170218312"></a>The <code>Array.sort()</code> method reorders an array. For example, it arranges an array of numbers from smallest to largest, or it puts an array of strings in alphabetical order. But you don’t need to stick to the array’s standard sorting system. Instead, you can pass a comparison function to the <code>sort()</code> method, and the array will use it to order its items.</p>
        
        <p>The comparison function gets two items (corresponding to two different array elements), compares them, and returns a number that indicates the result. You return <em>0</em> if the values should be considered equal, <em>–1</em> if the first value is less than the second, or <em>1</em> if the first value is greater than the second.</p>
        
        <p>Here’s a simple implementation that sorts an array of objects with people information:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">people</code>  <code class="o">=</code> <code class="p">[</code>
         <code class="p">{</code> <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Joe'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Khan'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">21</code> <code class="p">},</code>
         <code class="p">{</code> <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Dorian'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Khan'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">15</code> <code class="p">},</code>
         <code class="p">{</code> <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Tammy'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Smith'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">41</code> <code class="p">},</code>
         <code class="p">{</code> <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Noor'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Biles'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">33</code> <code class="p">},</code>
         <code class="p">{</code> <code class="nx">firstName</code><code class="o">:</code> <code class="s1">'Sumatva'</code><code class="p">,</code> <code class="nx">lastName</code><code class="o">:</code> <code class="s1">'Chen'</code><code class="p">,</code> <code class="nx">age</code><code class="o">:</code> <code class="mi">19</code> <code class="p">}</code>
        <code class="p">];</code>
        
        <code class="c1">// Sort the people from youngest to oldest</code>
        <code class="nx">people</code><code class="p">.</code><code class="nx">sort</code><code class="p">(</code> <code class="kd">function</code><code class="p">(</code><code class="nx">a</code><code class="p">,</code> <code class="nx">b</code><code class="p">)</code> <code class="p">{</code>
          <code class="k">if</code> <code class="p">(</code><code class="nx">a</code><code class="p">.</code><code class="nx">age</code> <code class="o">&lt;</code> <code class="nx">b</code><code class="p">.</code><code class="nx">age</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">return</code> <code class="o">-</code><code class="mi">1</code><code class="p">;</code>
          <code class="p">}</code> <code class="k">else</code> <code class="k">if</code> <code class="p">(</code><code class="nx">a</code><code class="p">.</code><code class="nx">age</code> <code class="o">&gt;</code> <code class="nx">b</code><code class="p">.</code><code class="nx">age</code><code class="p">)</code> <code class="p">{</code>
            <code class="k">return</code> <code class="mi">1</code><code class="p">;</code>
          <code class="p">}</code> <code class="k">else</code> <code class="p">{</code>
            <code class="k">return</code> <code class="mi">0</code><code class="p">;</code>
          <code class="p">}</code>
        <code class="p">});</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">people</code><code class="p">);</code>
        <code class="c1">// Now the order is Dorian, Sumatva, Joe, Noor, Tammy</code></pre>
        
        <p>A couple of shortcuts are possible here. Technically, you can return any negative number instead of –1, and any positive number instead of 1. That allows you to write a much shorter comparison function:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">people</code><code class="p">.</code><code class="nx">sort</code><code class="p">(</code><code class="kd">function</code><code class="p">(</code><code class="nx">a</code><code class="p">,</code> <code class="nx">b</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// Subtract the ages to sort from youngest to oldest</code>
          <code class="k">return</code> <code class="nx">a</code><code class="p">.</code><code class="nx">age</code> <code class="o">-</code> <code class="nx">b</code><code class="p">.</code><code class="nx">age</code><code class="p">;</code>
        <code class="p">});</code></pre>
        
        <p>Combine that with the compact arrow syntax, and it gets shorter still:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">people</code><code class="p">.</code><code class="nx">sort</code><code class="p">((</code><code class="nx">a</code><code class="p">,</code><code class="nx">b</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="nx">a</code><code class="p">.</code><code class="nx">age</code> <code class="o">-</code> <code class="nx">b</code><code class="p">.</code><code class="nx">age</code><code class="p">);</code></pre>
        
        <p><a data-type="indexterm" data-primary="localeCompare() method" id="idm45475170012856"></a>Sometimes, when you perform sorting you can make use of existing comparison methods. For example, if you want this example to sort by last name, there’s no need to reinvent the wheel. Instead, make good use of the <code>String.localeCompare()</code> method, like this:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="nx">people</code><code class="p">.</code><code class="nx">sort</code><code class="p">((</code><code class="nx">a</code><code class="p">,</code><code class="nx">b</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="nx">a</code><code class="p">.</code><code class="nx">lastName</code><code class="p">.</code><code class="nx">localeCompare</code><code class="p">(</code><code class="nx">b</code><code class="p">.</code><code class="nx">lastName</code><code class="p">));</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">people</code><code class="p">);</code>
        <code class="c1">// Now the order is Noor, Sumatva, Joe, Dorian, Tammy</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169974920">
        <h2>Discussion</h2>
        
        <p>The <code>sort()</code> method alters your array <em>in place</em>. This is different than most of the other array methods you’ll use, which return changed copies but leave your original array untouched. If this isn’t the behavior you want, you can clone your array before you sort it, as detailed in <a data-type="xref" href="#cloning_arrays">“Cloning an Array”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_array_sort_property" id="idm45475170020088"></a><a data-type="indexterm" data-primary="" data-startref="ix_property_sort_array" id="idm45475170019112"></a><a data-type="indexterm" data-primary="" data-startref="ix_object_sort_array" id="idm45475170018168"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Transforming Every Element of an Array"><div class="sect1" id="mapping_array">
        <h1>Transforming Every Element of an Array</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475170015544">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="transforming every element" id="idm45475170014344"></a><a data-type="indexterm" data-primary="elements" data-secondary="in arrays" data-secondary-sortas="arrays" id="idm45475169871064"></a>You want to convert every element in an array using the same transformation, and use the changed values to build a new array.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475169869320">
        <h2>Solution</h2>
        
        <p>Use the <code>Array.map()</code> method, and supply a function that performs the change. The <code>map()</code> method goes through the entire array, applying your function to each element and building a new array with the return values.</p>
        
        <p>Here’s an example that uses this approach to change an array of decimal numbers into a new array with their hexadecimal equivalents (using the conversion technique described in <a data-type="xref" href="ch03.html#converting_a_decimal_to_a_hexadecimal_va">“Converting a Decimal to a Hexadecimal Value”</a>):</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">decArray</code> <code class="o">=</code> <code class="p">[</code><code class="mi">23</code><code class="p">,</code> <code class="mi">255</code><code class="p">,</code> <code class="mi">122</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">99</code><code class="p">];</code>
        
        <code class="c1">// Use the toString() method to conver to base-16 values</code>
        <code class="kr">const</code> <code class="nx">hexArray</code> <code class="o">=</code> <code class="nx">decArray</code><code class="p">.</code><code class="nx">map</code><code class="p">(</code> <code class="nx">element</code> <code class="o">=&gt;</code> <code class="nx">element</code><code class="p">.</code><code class="nx">toString</code><code class="p">(</code><code class="mi">16</code><code class="p">)</code> <code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">hexArray</code><code class="p">);</code>  <code class="c1">// ['17', 'ff', '7a', '5', '10', '63']</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169863272">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="callback function" data-secondary="arguments supported" id="idm45475169800952"></a><a data-type="indexterm" data-primary="map() method" id="idm45475169799784"></a>Usually, the <code>map()</code> function is only interested in the array elements. However, your callback function can accept two more parameters: the index and the original array. Using these details, it’s technically possible to use <code>map()</code> to change your <em>original</em> array. This is considered an antipattern. In other words, if you don’t plan to use the new array that <code>map()</code> returns, you shouldn’t use the <code>map()</code> method. <a data-type="indexterm" data-primary="forEach() method" data-secondary="Array object" id="idm45475169796520"></a><a data-type="indexterm" data-primary="callback function" data-secondary="forEach() method and" id="idm45475169795512"></a>Consider using the <code>forEach()</code> method instead (<a data-type="xref" href="#iterating_array">“Iterating Over All the Elements in an Array”</a>), or just iterate over your array procedurally.</p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Combining an Array’s Values in a Single Calculation"><div class="sect1" id="reducing_array">
        <h1>Combining an Array’s Values in a Single Calculation</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475169791544">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="combining values in single calculation" id="ix_array_combine_calc"></a>You want to use all the values in an array in some sort of aggregate calculation, like computing a sum or average.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475169788616">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="callback function" data-secondary="with reduce() method" data-secondary-sortas="reduce() method" id="idm45475169787048"></a><a data-type="indexterm" data-primary="accumulator" id="idm45475169785576"></a><a data-type="indexterm" data-primary="reduce() function" id="idm45475169784904"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="reducing" id="idm45475169784232"></a>You could iterate over the array in a loop. But for a more streamlined solution, use the <code>Array.reduce()</code> method with a callback function. <a data-type="indexterm" data-primary="reducer function" id="idm45475169782664"></a><a data-type="indexterm" data-primary="functions" data-secondary="reducer" id="idm45475169781960"></a>Your function (called the <em>reducer function</em>) is called for each element in the array. <a data-type="indexterm" data-primary="reduce() method" id="idm45475169780504"></a>You build some sort of running total using an <em>accumulator</em>, a value that the <code>reduce()</code> method maintains until the process is finished.</p>
        
        <p>For example, imagine you want to calculate the sum of an array of numbers. Each time your reducer function is called, it gets the current running total in the accumulator. It then adds the value of the current element and returns the new total:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">reducerFunction</code> <code class="o">=</code> <code class="kd">function</code> <code class="p">(</code><code class="nx">accumulator</code><code class="p">,</code> <code class="nx">element</code><code class="p">)</code> <code class="p">{</code>
          <code class="c1">// Add the current value to the running total in the accumulator.</code>
          <code class="kr">const</code> <code class="nx">newTotal</code> <code class="o">=</code> <code class="nx">accumulator</code> <code class="o">+</code> <code class="nx">element</code><code class="p">;</code>
          <code class="k">return</code> <code class="nx">newTotal</code><code class="p">;</code>
        <code class="p">}</code></pre>
        
        <p>This new total becomes the accumulator when the reducer is called for the <em>next</em> item.</p>
        
        <p>Now you can use this function to sum up an array:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">23</code><code class="p">,</code> <code class="mi">255</code><code class="p">,</code> <code class="mi">122</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">99</code><code class="p">];</code>
        
        <code class="c1">// The second argument (0) sets the starting value of the accumulator.</code>
        <code class="c1">// If you don't set a starting value, the accumulator is automatically set</code>
        <code class="c1">// to the first element.</code>
        <code class="kr">const</code> <code class="nx">total</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">reduce</code><code class="p">(</code><code class="nx">reducerFunction</code><code class="p">,</code> <code class="mi">0</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">total</code><code class="p">);</code>  <code class="c1">// 520</code></pre>
        
        <p>When the reducer function is called on the last item, it makes its final calculation. That return value becomes the result that’s returned from <code>reduce()</code>.</p>
        
        <p>Once you’re comfortable with the way <code>reduce()</code> works, you can make your code shorter and more concise with inline functions and arrow syntax. Here’s a demonstration that uses <code>reduce()</code> to calculate the sum of squared values, an average, and the maximum value:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">numbers</code> <code class="o">=</code> <code class="p">[</code><code class="mi">23</code><code class="p">,</code> <code class="mi">255</code><code class="p">,</code> <code class="mi">122</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">99</code><code class="p">];</code>
        
        <code class="c1">// The reducer function adds to the accumulator</code>
        <code class="kr">const</code> <code class="nx">totalSquares</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">reduce</code><code class="p">(</code> <code class="p">(</code><code class="nx">acc</code><code class="p">,</code> <code class="nx">val</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="nx">acc</code> <code class="o">+</code> <code class="nx">val</code><code class="o">**</code><code class="mi">2</code><code class="p">,</code> <code class="mi">0</code><code class="p">);</code>
        <code class="c1">// totalSquares = 90520</code>
        
        <code class="c1">// The reducer function adds to the accumulator</code>
        <code class="kr">const</code> <code class="nx">average</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">reduce</code><code class="p">(</code> <code class="p">(</code><code class="nx">acc</code><code class="p">,</code> <code class="nx">val</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="nx">acc</code> <code class="o">+</code> <code class="nx">val</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code> <code class="o">/</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">length</code><code class="p">;</code>
        <code class="c1">// average = 86.66...</code>
        
        <code class="c1">// The reducer function returns the higher value (accumulator or current value)</code>
        <code class="kr">const</code> <code class="nx">max</code> <code class="o">=</code> <code class="nx">numbers</code><code class="p">.</code><code class="nx">reduce</code><code class="p">(</code> <code class="p">(</code><code class="nx">acc</code><code class="p">,</code> <code class="nx">val</code><code class="p">)</code> <code class="o">=&gt;</code> <code class="nx">acc</code> <code class="o">&gt;</code> <code class="nx">val</code> <code class="o">?</code> <code class="nx">acc</code><code class="o">:</code> <code class="nx">val</code><code class="p">);</code>
        <code class="c1">// max = 255</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169788024">
        <h2>Discussion</h2>
        
        <p>Using the <code>reduce()</code> method can seem more complicated than other functional-style array processing methods, like <code>map()</code> (<a data-type="xref" href="#mapping_array">“Transforming Every Element of an Array”</a>), <code>filter()</code> (<a data-type="xref" href="#copying_items_by_criteria">“Extracting Array Items That Meet Specific Criteria”</a>), or <code>sort()</code> (<a data-type="xref" href="#sorting_array">“Sorting an Array of Objects by a Property Value”</a>). The difference is that you need to think carefully about what data you need to store after each function call. Remember that you can use the accumulator to store a custom object with more than one property, allowing you to track as much information as you need. You can also add two more optional parameters to your reducer function: <code>index</code> (the current index number of the element), and <code>array</code> (the entire array that’s being reduced). But be careful. Over-enthusiastic code that uses <code>reduce()</code> can quickly get hard for others to understand.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475169522936">
        <h2>See Also</h2>
        
        <p>There’s another way to get the maximum out of an array of numbers. You can use the <code>Math.max()</code> method in conjunction with the spread operator to turn your array into a list of arguments (see <a data-type="xref" href="#array_spread">“Passing an Array to a Function That Expects a <span class="keep-together">List of Values</span>”</a>).<a data-type="indexterm" data-primary="" data-startref="ix_array_combine_calc" id="idm45475169520056"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Validating Array Contents"><div class="sect1" id="validating_array">
        <h1>Validating Array Contents</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475169517336">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="validating contents of" id="ix_array_valid"></a><a data-type="indexterm" data-primary="validation" data-secondary="array contents" id="ix_valid_array"></a>You want to ensure that array contents meet certain criteria.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475169513288">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="every() method" id="idm45475169511880"></a>Use the <code>Array.every()</code> method to check that every element passes a given test. For example, the following code checks to ensure that every element in the array consists of alphabetic characters using a regular expression:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// The testing function</code>
        <code class="kd">function</code> <code class="nx">containsLettersOnly</code><code class="p">(</code><code class="nx">element</code><code class="p">)</code> <code class="p">{</code>
          <code class="kr">const</code> <code class="nx">textExp</code> <code class="o">=</code> <code class="sr">/^[a-zA-Z]+$/</code><code class="p">;</code>
          <code class="k">return</code> <code class="nx">textExp</code><code class="p">.</code><code class="nx">test</code><code class="p">(</code><code class="nx">element</code><code class="p">);</code>
        <code class="p">}</code>
        
        <code class="c1">// Test an array</code>
        <code class="kr">const</code> <code class="nx">mysteryItems</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'**'</code><code class="p">,</code> <code class="mi">123</code><code class="p">,</code> <code class="s1">'aaa'</code><code class="p">,</code> <code class="s1">'abc'</code><code class="p">,</code> <code class="s1">'-'</code><code class="p">,</code> <code class="mi">46</code><code class="p">,</code> <code class="s1">'AAA'</code><code class="p">];</code>
        <code class="kd">let</code> <code class="nx">result</code> <code class="o">=</code> <code class="nx">mysteryItems</code><code class="p">.</code><code class="nx">every</code><code class="p">(</code><code class="nx">containsLettersOnly</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">result</code><code class="p">);</code>  <code class="c1">// false</code>
        
        <code class="c1">// Test another array</code>
        <code class="kr">const</code> <code class="nx">mysteryItems2</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">];</code>
        <code class="nx">result</code> <code class="o">=</code> <code class="nx">mysteryItems2</code><code class="p">.</code><code class="nx">every</code><code class="p">(</code><code class="nx">containsLettersOnly</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">result</code><code class="p">);</code>  <code class="c1">// true</code></pre>
        
        <p><a data-type="indexterm" data-primary="some() method" id="idm45475169509192"></a>Or, use the <code>Array.some()</code> method to ensure that at least one of the elements passes the test. As an example, the following code checks to ensure that at least one of the array elements is an alphabetical string:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">mysteryItems</code> <code class="o">=</code> <code class="k">new</code> <code class="nb">Array</code><code class="p">(</code><code class="s1">'**'</code><code class="p">,</code> <code class="mi">123</code><code class="p">,</code> <code class="s1">'aaa'</code><code class="p">,</code> <code class="s1">'abc'</code><code class="p">,</code> <code class="s1">'-'</code><code class="p">,</code> <code class="mi">46</code><code class="p">,</code> <code class="s1">'AAA'</code><code class="p">);</code>
        
        <code class="c1">// testing function</code>
        <code class="kd">function</code> <code class="nx">testValue</code> <code class="p">(</code><code class="nx">element</code><code class="p">)</code> <code class="p">{</code>
           <code class="kr">const</code> <code class="nx">textExp</code> <code class="o">=</code> <code class="sr">/^[a-zA-Z]+$/</code><code class="p">;</code>
           <code class="k">return</code> <code class="nx">textExp</code><code class="p">.</code><code class="nx">test</code><code class="p">(</code><code class="nx">element</code><code class="p">);</code>
        <code class="p">}</code>
        
        <code class="c1">// run test</code>
        <code class="kr">const</code> <code class="nx">result</code> <code class="o">=</code> <code class="nx">mysteryItems</code><code class="p">.</code><code class="nx">some</code><code class="p">(</code><code class="nx">testValue</code><code class="p">);</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">result</code><code class="p">);</code>  <code class="c1">// true</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169400744">
        <h2>Discussion</h2>
        
        <p>Unlike many other array methods that use callback functions, the <code>every()</code> and <code>some()</code> methods do not work against all array elements. Instead, they only process as many array elements as necessary to fulfill their functionality.</p>
        
        <p><a data-type="indexterm" data-primary="callback function" data-secondary="with every() and some() methods" data-secondary-sortas="every() and some() methods" id="idm45475169253736"></a>The solution demonstrates that the same callback function can be used for both the <code>every()</code> and <code>some()</code> methods. The difference is that when using <code>every()</code>, as soon as the function returns a <code>false</code> value, the processing is finished, and the method returns <code>false</code>. <a data-type="indexterm" data-primary="callback function" data-secondary="validating array contents" id="idm45475169249944"></a>The <code>some()</code> method continues to test against every array element until the callback function returns <code>true</code>. At that time, no other elements are validated, and the method returns <code>true</code>. However, if the callback function tests against all elements, and doesn’t return <code>true</code> for any of them, <code>some()</code> returns <code>false</code>.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45475169253208">
        <h2>See Also</h2>
        
        <p>To review regular expression syntax, which is used for the string matching pattern in this example, see <a data-type="xref" href="ch02.html#replacing_patterns_string">“Using a Regular Expression to Replace Patterns <span class="keep-together">in a String</span>”</a>.<a data-type="indexterm" data-primary="" data-startref="ix_valid_array" id="idm45475169244072"></a><a data-type="indexterm" data-primary="" data-startref="ix_array_valid" id="idm45475169243096"></a></p>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Creating a Collection of Nonduplicated Values"><div class="sect1" id="using_set">
        <h1>Creating a Collection of Nonduplicated Values</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475169240376">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="nonduplicated value collection" id="idm45475169239176"></a><a data-type="indexterm" data-primary="nonduplicated value collection" id="idm45475169238232"></a>You want to create an array-like object that never contains more than one copy of the same value.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475169371736">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="Set object" id="idm45475169370600"></a>Create a <code>Set</code> object. It quietly ignores attempts to add the same item more than once, without generating an error.</p>
        
        <p><a data-type="indexterm" data-primary="add() method, Set" id="idm45475169368952"></a>The <code>Set</code> is not an array, but—like an array—it’s an iterable collection of elements. You can add elements to a <code>Set</code> one at a time with the <code>add()</code> method, or you can pass an array in the <code>Set</code> constructor to add multiple items at once:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Start with six elements</code>
        <code class="kr">const</code> <code class="nx">animals</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Set</code><code class="p">([</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'lion'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">]);</code>
        
        <code class="c1">// Add two more</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="s1">'rabbit'</code><code class="p">);</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="s1">'goose'</code><code class="p">);</code>
        
        <code class="c1">// Nothing happens, because this item is already in the Set</code>
        <code class="nx">animals</code><code class="p">.</code><code class="nx">add</code><code class="p">(</code><code class="s1">'tiger'</code><code class="p">);</code>
        
        <code class="c1">// Iterate over the Set, just as you would with an array</code>
        <code class="k">for</code> <code class="p">(</code><code class="kr">const</code> <code class="nx">animal</code> <code class="k">of</code> <code class="nx">animals</code><code class="p">)</code> <code class="p">{</code>
            <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">animal</code><code class="p">);</code>
        <code class="p">}</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169363656">
        <h2>Discussion</h2>
        
        <p><a data-type="indexterm" data-primary="has() method, Set" id="idm45475169154072"></a><a data-type="indexterm" data-primary="clear() method, Set" id="idm45475169153144"></a><a data-type="indexterm" data-primary="delete() method, Set" id="idm45475169152472"></a>The <code>Set</code> object is not an array. Unlike the <code>Array</code> class, which is stocked with thirty-some useful methods, the <code>Set</code> class offers much less. You can use <code>add()</code> to insert an item, <code>delete()</code> to remove one, <code>has()</code> to check if an item is in the <code>Set</code>, and <code>clear()</code> to remove all the items at once. There are no methods for sorting, filtering, transforming, or copying.</p>
        
        <p><a data-type="indexterm" data-primary="sets, converting to arrays" id="idm45475169147960"></a><a data-type="indexterm" data-primary="from() method" id="idm45475169147288"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="converting sets to" id="idm45475169146616"></a>However, if you need to process your <code>Set</code> object like an array, it’s easy enough to make the conversion by passing your <code>Set</code> to the static <code>Array.from()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="c1">// Convert an array to a Set</code>
        <code class="kr">const</code> <code class="nx">animalSet</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Set</code><code class="p">([</code><code class="s1">'elephant'</code><code class="p">,</code> <code class="s1">'tiger'</code><code class="p">,</code> <code class="s1">'zebra'</code><code class="p">,</code> <code class="s1">'cat'</code><code class="p">,</code> <code class="s1">'dog'</code><code class="p">]);</code>
        
        <code class="c1">// Convert a Set to an array</code>
        <code class="kr">const</code> <code class="nx">animalArray</code> <code class="o">=</code> <code class="nb">Array</code><code class="p">.</code><code class="nx">from</code><code class="p">(</code><code class="nx">animalSet</code><code class="p">);</code></pre>
        
        <p>In fact, you can convert a <code>Set</code> to an <code>Array</code> object and back as many times as you want, with no cost other than possible performance (if you have a very long list of items).</p>
        <div data-type="note" epub:type="note"><h6>Note</h6>
        <p>To count the number of items in a <code>Set</code> or <code>Map</code> collection, you use the <code>size</code> property. This is different than arrays, which have a <code>length</code> property.</p>
        </div>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect1" data-pdf-bookmark="Creating a Key-Indexed Collection of Items"><div class="sect1" id="using_map">
        <h1>Creating a Key-Indexed Collection of Items</h1>
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45475169125976">
        <h2>Problem</h2>
        
        <p><a data-type="indexterm" data-primary="key-indexed collection of items" id="ix_key-indexed_array"></a><a data-type="indexterm" data-primary="arrays (Array object)" data-secondary="key-indexed collection of items" id="ix_array_ke-indexed"></a>You want to create a collection where each item is labeled with a unique string key.</p>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45475169081544">
        <h2>Solution</h2>
        
        <p><a data-type="indexterm" data-primary="Map object" id="ix_map_object"></a>Use the <code>Map</code> object. Each object is indexed with a unique key (usually, but not necessarily, a string). <a data-type="indexterm" data-primary="set() method" id="idm45475169078744"></a>To add an item, you call the <code>set()</code> method. When you need to retrieve a specific item, you can grab exactly the item you want by using the key:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">products</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Map</code><code class="p">();</code>
        
        <code class="c1">// Add three items</code>
        <code class="nx">products</code><code class="p">.</code><code class="nx">set</code><code class="p">(</code><code class="s1">'RU007'</code><code class="p">,</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Rain Racer 2000'</code><code class="p">,</code> <code class="nx">price</code><code class="o">:</code> <code class="mf">1499.99</code><code class="p">});</code>
        <code class="nx">products</code><code class="p">.</code><code class="nx">set</code><code class="p">(</code><code class="s1">'STKY1'</code><code class="p">,</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Edible Tape'</code><code class="p">,</code> <code class="nx">price</code><code class="o">:</code> <code class="mf">3.99</code><code class="p">});</code>
        <code class="nx">products</code><code class="p">.</code><code class="nx">set</code><code class="p">(</code><code class="s1">'P38'</code><code class="p">,</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Escape Vehicle (Air)'</code><code class="p">,</code> <code class="nx">price</code><code class="o">:</code> <code class="mf">2999.00</code><code class="p">});</code>
        
        <code class="c1">// Check for two items using the item code</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">products</code><code class="p">.</code><code class="nx">has</code><code class="p">(</code><code class="s1">'RU007'</code><code class="p">));</code>  <code class="c1">// true</code>
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">products</code><code class="p">.</code><code class="nx">has</code><code class="p">(</code><code class="s1">'RU494'</code><code class="p">));</code>  <code class="c1">// false</code>
        
        <code class="c1">// Retrieve an item</code>
        <code class="kr">const</code> <code class="nx">product</code> <code class="o">=</code> <code class="nx">products</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s1">'P38'</code><code class="p">);</code>
        <code class="k">if</code> <code class="p">(</code><code class="k">typeof</code> <code class="nx">product</code> <code class="o">!==</code> <code class="s1">'undefined'</code><code class="p">)</code> <code class="p">{</code>
          <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">product</code><code class="p">.</code><code class="nx">price</code><code class="p">);</code>  <code class="c1">// 2999</code>
        <code class="p">}</code>
        
        <code class="c1">// Remove the Edible Tape item</code>
        <code class="nx">products</code><code class="p">.</code><code class="k">delete</code><code class="p">(</code><code class="s1">'STKY1'</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">products</code><code class="p">.</code><code class="nx">size</code><code class="p">);</code>  <code class="c1">// 2</code></pre>
        </div></section>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45475169075320">
        <h2>Discussion</h2>
        
        <p>When adding items to a <code>Map</code> object, you must always use the <code>set()</code> method. Don’t fall into this trap:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">products</code> <code class="o">=</code> <code class="k">new</code> <code class="nx">Map</code><code class="p">();</code>
        
        <code class="c1">// Don't do this!</code>
        <code class="nx">products</code><code class="p">[</code><code class="s1">'RU007'</code><code class="p">]</code> <code class="o">=</code> <code class="p">{</code><code class="nx">name</code><code class="o">:</code> <code class="s1">'Rain Racer 2000'</code><code class="p">,</code> <code class="nx">price</code><code class="o">:</code> <code class="mf">1499.99</code><code class="p">};</code></pre>
        
        <p>Although this seems to work at first (and it uses the same kind of syntax that’s used with name-value collections in many other programming languages), it actually bypasses the <code>Map</code> collection and sets an ordinary property named <code>RU007</code> on the <code>Map</code> object. These properties won’t appear if you iterate over the <code>Map</code> with a <code>for</code>…<code>of</code> loop, and they won’t be visible to the <code>has()</code> or <code>get()</code> methods.</p>
        
        <p>The <code>Map</code> object has a small set of methods for managing its contents: <code>set()</code>, <code>get()</code>, <code>has()</code>, and <code>delete()</code>. If you want to make use of the functionality in the <code>Array</code> object, you can easily convert your <code>Map</code> to an array with the static <code>Array.from()</code> method:</p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">productArray</code> <code class="o">=</code> <code class="nb">Array</code><code class="p">.</code><code class="nx">from</code><code class="p">(</code><code class="nx">products</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">productArray</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>
         <code class="c1">// ['RU007', {name: 'Rain Racer 2000', price: 1499.99}]</code></pre>
        
        <p>You might expect that the <code>productArray</code> in this example will hold a collection of product objects, but that’s not quite true. Instead, each element in <code>productsArray</code> is a <em>separate</em> array with two elements. The first element is the key (like <code><em>RUU07</em></code>), and the second element is the value (the product object).</p>
        
        <p class="pagebreak-before less_space">In some situations, you might not need to keep the key name when you convert a <code>Map</code> to an array. Maybe the key isn’t important, or it’s duplicated by a property of your elements. In this case, you can choose to transform your collection, throwing away the key values as you copy your data out of the <code>Map</code>. Here’s how that works:<a data-type="indexterm" data-primary="" data-startref="ix_arrays_ch5" id="idm45475168901400"></a><a data-type="indexterm" data-primary="" data-startref="ix_array_ke-indexed" id="idm45475168900424"></a><a data-type="indexterm" data-primary="" data-startref="ix_key-indexed_array" id="idm45475168899480"></a><a data-type="indexterm" data-primary="" data-startref="ix_map_object" id="idm45475168898536"></a></p>
        
        <pre data-type="programlisting" data-code-language="javascript"><code class="kr">const</code> <code class="nx">productArray</code> <code class="o">=</code> <code class="nb">Array</code><code class="p">.</code><code class="nx">from</code><code class="p">(</code><code class="nx">products</code><code class="p">,</code> <code class="p">([</code><code class="nx">name</code><code class="p">,</code> <code class="nx">value</code><code class="p">])</code> <code class="o">=&gt;</code> <code class="nx">value</code><code class="p">);</code>
        
        <code class="nx">console</code><code class="p">.</code><code class="nx">log</code><code class="p">(</code><code class="nx">productArray</code><code class="p">[</code><code class="mi">0</code><code class="p">]);</code>
         <code class="c1">// {name: 'Rain Racer 2000', price: 1499.99}</code></pre>
        </div></section>
        
        
        
        
        
        </div></section>
        
        
        
        
        
        
        
        </div></section></div></div><link rel="stylesheet" href="/files/public/epub-reader/override_v1.css" crossorigin="anonymous"><link rel="stylesheet" href="/api/v2/epubs/urn:orm:book:9781492055747/files/epub.css" crossorigin="anonymous"></div></div></section>
</div>

https://learning.oreilly.com